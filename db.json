{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","path":"images/logo-algolia-nebula-blue-full.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/scroll.png","path":"images/scroll.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schedule.js","path":"js/schedule.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"source/images/二叉树.png","path":"images/二叉树.png","modified":0,"renderable":0},{"_id":"source/images/二叉树遍历.jpg","path":"images/二叉树遍历.jpg","modified":0,"renderable":0},{"_id":"source/images/原型链.png","path":"images/原型链.png","modified":0,"renderable":0},{"_id":"source/images/原型链与继承.png","path":"images/原型链与继承.png","modified":0,"renderable":0},{"_id":"source/images/树.png","path":"images/树.png","modified":0,"renderable":0},{"_id":"source/images/链表.jpg","path":"images/链表.jpg","modified":0,"renderable":0}],"Cache":[{"_id":"source/_posts/2021-03-26-Js代码题.md","hash":"be1669c771ecf0b824301515048be81461c3b33e","modified":1631412175853},{"_id":"source/_posts/2021-03-23-Vue查漏补缺.md","hash":"1917c1984cd26286f99c1f3d06a16dca0da13b41","modified":1627306536049},{"_id":"source/_posts/2021-04-05-css布局问题.md","hash":"f25c0b2078f65a9c101a4f3de5ed6ee0a956d56a","modified":1627306536050},{"_id":"source/_posts/前端面试题.md","hash":"107cf85d040ac46ab67d42be00c1aed279395ed5","modified":1627306536051},{"_id":"source/_posts/数据结构和算法.md","hash":"18561807bedccc15cdda90267ae84494340f99fa","modified":1627306536052},{"_id":"source/_posts/javaScript学习笔记.md","hash":"0f2ac80c18d67042ca2f72973130eef4a2961fd1","modified":1627306536050},{"_id":"source/_posts/前端基础知识整理.md","hash":"cc8392091f0d4d8a44f1826d953b7b377675896b","modified":1627306536051},{"_id":"source/_posts/原型链与继承.md","hash":"b177dd3c78c358c068c401f9a51930932b6f50d3","modified":1627306536052},{"_id":"source/about/index.md","hash":"42bc114e894cd42b5370d55b9b4256b8a4696d90","modified":1627306536053},{"_id":"source/_posts/浏览器：文档，事件，接口.md","hash":"a5196e53181186f44bc1d9cbadbf097c1059ad4b","modified":1627306536052},{"_id":"source/images/二叉树.png","hash":"749c3f3394f858f31c362c49024dbaf1edcb3858","modified":1617528417943},{"_id":"source/images/二叉树遍历.jpg","hash":"e9d8eaaa86541dfa380385a972ff2986cbde1ae6","modified":1617679017592},{"_id":"source/_posts/递归从大到小排列的数组.md","hash":"59c74b4331d32d5e10858413f136d2ce6a18a40f","modified":1627306536053},{"_id":"source/article/index.md","hash":"cd841f0cd6df06c1a3523573b968c05c9f27a3be","modified":1627306536053},{"_id":"source/images/树.png","hash":"79570a1bd5a6a4a7c04aae3d1f062303dccd7aea","modified":1617525749774},{"_id":"source/images/链表.jpg","hash":"dae052d567f9ba414b67e93a88cfedba92b1110a","modified":1616655126544},{"_id":"source/tags/index.md","hash":"c68e9b0340d533a79cddd8eb2d0c20182968f38c","modified":1627306536077},{"_id":"source/images/原型链.png","hash":"7c1a68da814a2ee20818d7f9eb2fdb32b3c860aa","modified":1616404346552},{"_id":"source/site/index.md","hash":"73ca08982b886c8f450f1f337d1cb2e0965f97cb","modified":1644465316335},{"_id":"source/teach/index.md","hash":"11d3d9f268e694a6ae63c2703223dfed6b3ed557","modified":1644465233614},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1627306536080},{"_id":"themes/next/.eslintrc.json","hash":"9c0762486f24a8c5e60f8b6c875e4c4728942649","modified":1627306536080},{"_id":"themes/next/.gitignore","hash":"4600f2b61b2fe0d61f824bda9aa2b5d072f0e635","modified":1627306536086},{"_id":"themes/next/.gitattributes","hash":"ec43734985e1cafd53d88ded3020103f7416123c","modified":1627306536080},{"_id":"themes/next/_vendors.yml","hash":"842505bac8e3174ca98c6c988fdd9d48bcbe6cf4","modified":1627306536087},{"_id":"themes/next/_config.yml","hash":"035390c3b39148a08aabfc96f1099c5a272598ca","modified":1627815051331},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1627306536088},{"_id":"themes/next/package.json","hash":"8cb368a627f118170d04cc4f100a958d60657b02","modified":1627306536122},{"_id":"themes/next/renovate.json","hash":"cb29cc16e61b0b8a6dac34657d76822ae29ad5aa","modified":1627306536122},{"_id":"themes/next/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1627306536086},{"_id":"themes/next/LICENSE.md","hash":"68fc9a03d50fd4b5ea97092b05967d1819dea2c4","modified":1627306536086},{"_id":"themes/next/README.md","hash":"de109b73e09826f6bccceae60c618739a794f8f7","modified":1627306536087},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"21cbff565a0445d3a880fff1ee417e309740a9ab","modified":1627306536081},{"_id":"themes/next/.github/config.yml","hash":"7984e665e9de481a0e0e51fca5668337713f810b","modified":1627306536083},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"fca600ddef6f80c5e61aeed21722d191e5606e5b","modified":1627306536083},{"_id":"themes/next/.github/labeler.yml","hash":"e7033752b1f7c35adb61c2b38aad0a9202cdd19b","modified":1627306536083},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"eefd073dfb68884cd946f7ec6d3b3619031d7650","modified":1627306536081},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"3e9fbb78e3dee0ca1dc886d0c28b0148ba0ca499","modified":1627306536082},{"_id":"themes/next/.github/release-drafter.yml","hash":"7662e31224a24154c4fe06b95ccbdff51ab8f2cc","modified":1627306536084},{"_id":"themes/next/.github/label-commenter-config.yml","hash":"1097fc47beeacfc1edb0248c27b17bf64bde3565","modified":1627306536083},{"_id":"themes/next/languages/README.md","hash":"b2567e32805dda79601157351a07e5ca9fe01315","modified":1627306536092},{"_id":"themes/next/languages/ar.yml","hash":"7a62243ec54196e3d1bea7364f05aded490bc234","modified":1627306536092},{"_id":"themes/next/languages/de.yml","hash":"dc448f724c7d436233e9567711a09e0d56e60e3b","modified":1627306536093},{"_id":"themes/next/docs/AUTHORS.md","hash":"a648823121563c34a177ae91f5a774b5e29f01a0","modified":1627306536088},{"_id":"themes/next/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1612083504000},{"_id":"themes/next/languages/es.yml","hash":"c3506dfaa771e827ae6adb322477c6e835cd0f09","modified":1627306536094},{"_id":"themes/next/docs/LICENSE.txt","hash":"f5b14f791b7cfa1d16da981d929152e088a5d1b8","modified":1627306536090},{"_id":"themes/next/languages/en.yml","hash":"48a76170d70ef7c1fac96720bc5064b43061708d","modified":1627306536093},{"_id":"themes/next/languages/fa.yml","hash":"649823297167b902455c0aec8ddebb462df71c7d","modified":1627306536094},{"_id":"themes/next/languages/fr.yml","hash":"8ddfe98e7847ee8f1eaba9119f9fbdc42d7ec120","modified":1627306536095},{"_id":"themes/next/languages/id.yml","hash":"ac018805190bc4bdc06091f5a6444e612fc700b0","modified":1627306536095},{"_id":"themes/next/languages/ko.yml","hash":"8342df2f4190ba4ee004b70d1d6ccd341033dbe7","modified":1627306536096},{"_id":"themes/next/languages/ja.yml","hash":"99f6f84f5cb6631b7ae0b5594af2ea2940c3558e","modified":1627306536096},{"_id":"themes/next/languages/it.yml","hash":"82a93c32b3fcf6517441cdc73f75bc6173beb392","modified":1627306536095},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1627306536088},{"_id":"themes/next/languages/pt.yml","hash":"e0e2675261e2e80f7ce7d19c945c08217b068d81","modified":1627306536097},{"_id":"themes/next/languages/nl.yml","hash":"0d3b56613197cb190900311507535db41daec7d4","modified":1627306536096},{"_id":"themes/next/languages/ru.yml","hash":"fdf5c623890db24cb56ab5ffe0c49db3542477c8","modified":1627306536097},{"_id":"themes/next/languages/pt-BR.yml","hash":"47daeaa23c4db073e77761c9a6f62d3932af06ec","modified":1627306536096},{"_id":"themes/next/languages/si.yml","hash":"0afecef3d81b880cc19769062968d8562a1cd93b","modified":1627306536097},{"_id":"themes/next/languages/tr.yml","hash":"54de3d8d85e3c7b14b163c3d322411b7301a09b3","modified":1627306536097},{"_id":"themes/next/languages/vi.yml","hash":"1f9657b58e11db21f93eb895c90123b8f91751a7","modified":1627306536098},{"_id":"themes/next/languages/uk.yml","hash":"1c9a0b8d8160c77cc62064207d57f460f365cae9","modified":1627306536098},{"_id":"themes/next/languages/zh-CN.yml","hash":"10446d4df1ad674083af8bd7e1dea495b3a6380d","modified":1627306536098},{"_id":"themes/next/languages/zh-HK.yml","hash":"38b99be8cea1cfd79f36deca13be665dedfad9c5","modified":1627306536098},{"_id":"themes/next/languages/zh-TW.yml","hash":"8d6f8d90aedcc5c844da93e196bfde0c0161385b","modified":1627306536099},{"_id":"themes/next/layout/_layout.njk","hash":"5adf50c64faeb7671cc77f494f3ddcef22806058","modified":1627306536099},{"_id":"themes/next/layout/archive.njk","hash":"d759f4d2cf5ddc6875ea250113a00662c1caf6d1","modified":1627306536120},{"_id":"themes/next/layout/category.njk","hash":"0a590e87af50e57b15fc37695c9a3bf4a97c3d92","modified":1627306536121},{"_id":"themes/next/layout/index.njk","hash":"37ec3d1bcd20b8ac1d18e0d68f990450890b46cd","modified":1627306536121},{"_id":"themes/next/layout/page.njk","hash":"9cd3eca2c468bb46c7c5bf391bea4b025af178f6","modified":1627306536121},{"_id":"themes/next/layout/post.njk","hash":"6abeb85fb3e4c382ed4bb6049b12a807e6226e67","modified":1627306536121},{"_id":"themes/next/layout/tag.njk","hash":"6cd707f846bfd6becbcfb060c26958bb4015c31f","modified":1627306536122},{"_id":"themes/next/test/index.js","hash":"6bf0289846538be3e9a63809af98f00e1fbdd90b","modified":1627306536177},{"_id":"themes/next/.github/ISSUE_TEMPLATE/config.yml","hash":"c40ae7903b6cc99f94c9d45ac7ba8c2850bb1309","modified":1627306536082},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"fc4dce84ed9a5d21d3a8833ff6d776c46f876115","modified":1627306536081},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"4ecac91716eac59d7c2bc53cf6e95612d44da97b","modified":1627306536082},{"_id":"themes/next/.github/workflows/label-commenter.yml","hash":"a33cd7c7644c8e89c885545ddafc437274ff64ff","modified":1627306536084},{"_id":"themes/next/.github/workflows/labeler.yml","hash":"8b73c439dc796be141d521a4546bcfb7a5485534","modified":1627306536084},{"_id":"themes/next/.github/workflows/linter.yml","hash":"a3019edd2185c4c287a682fdd76043e107ed927b","modified":1627306536085},{"_id":"themes/next/.github/workflows/lock.yml","hash":"70bd0be3f33774e4b0ada3a59c901f8f9cff1013","modified":1627306536085},{"_id":"themes/next/.github/ISSUE_TEMPLATE/other.md","hash":"8cc5b5c116f6a052865a324512362f145d699202","modified":1627306536082},{"_id":"themes/next/.github/workflows/release-drafter.yml","hash":"4f3af81009cb922be91f718a67425377515ea69d","modified":1627306536085},{"_id":"themes/next/.github/workflows/stale.yml","hash":"e1d9cc9addc35cfb53f971f14d9d04065c941df0","modified":1627306536085},{"_id":"themes/next/.github/workflows/tester.yml","hash":"7e01aae101be8726f869efbb29ba9ef9ad569cd1","modified":1627306536086},{"_id":"themes/next/docs/ru/README.md","hash":"63df0665005063108e1bc19df3cf8c4e46facb95","modified":1627306536090},{"_id":"themes/next/layout/_custom/custom.swig","hash":"67eeaf576948e3371d150eba62b0d52ea4e5ee82","modified":1627306536099},{"_id":"themes/next/layout/_macro/post-collapse.njk","hash":"1a30d751871dabfa80940042ddb1f77d07d830b9","modified":1627306536100},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7a06d443f374bd1e84294067a0ac796afd9fbe60","modified":1627306536091},{"_id":"themes/next/layout/_macro/post.njk","hash":"b106599106285ecd4c0c1e0ed11c46a36b5a69d5","modified":1627306536100},{"_id":"themes/next/layout/_macro/sidebar.njk","hash":"cbf838ca59646f128c9111bb28921c1d04d8dcaf","modified":1627306536100},{"_id":"themes/next/layout/_partials/comments.njk","hash":"334e8d8117a46c8c097788811322a62627952219","modified":1627306536101},{"_id":"themes/next/layout/_partials/footer.njk","hash":"b336141f73df387ce343dddd76549d3770505000","modified":1627306536101},{"_id":"themes/next/layout/_partials/languages.njk","hash":"ba9e272f1065b8f0e8848648caa7dea3f02c6be1","modified":1627306536104},{"_id":"themes/next/layout/_partials/pagination.njk","hash":"9876dbfc15713c7a47d4bcaa301f4757bd978269","modified":1627306536106},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"8ee5ca39ac4a372a5c0f16e344bbe578af4aeae4","modified":1627306536091},{"_id":"themes/next/layout/_partials/widgets.njk","hash":"dfd91d64ebc06b5b139ee97424f4f93e66938e34","modified":1627306536110},{"_id":"themes/next/layout/_scripts/index.njk","hash":"6f0433940680c0f9db37542ca36f76e4bb1c1d50","modified":1627306536110},{"_id":"themes/next/layout/_scripts/noscript.njk","hash":"4f250d0bf80be06dd2c95c1d4c2ba2624b59cf2a","modified":1627306536111},{"_id":"themes/next/docs/zh-CN/README.md","hash":"9abd8473985f2bf1557b1aac31b436c92d5450a7","modified":1627306536091},{"_id":"themes/next/layout/_scripts/pjax.njk","hash":"28a3bcb1ce50924a5a48b0f3756ac3a8736867f1","modified":1627306536111},{"_id":"themes/next/layout/_scripts/vendors.njk","hash":"bada07da2a47ed6de6081796367b19dd9e906cfb","modified":1627306536112},{"_id":"themes/next/layout/_third-party/index.njk","hash":"467b45a4912369bcba77908151e76a3f3ad0fed2","modified":1627306536116},{"_id":"themes/next/layout/_third-party/nprogress.njk","hash":"271139c3896a6d294f46f767cb21b2e848050841","modified":1627306536117},{"_id":"themes/next/layout/_third-party/quicklink.njk","hash":"294b7f6a4fa566e369d8be0ce7b28f35b6c14563","modified":1627306536117},{"_id":"themes/next/layout/_third-party/rating.njk","hash":"2731e262a6b88eaee2a3ca61e6a3583a7f594702","modified":1627306536118},{"_id":"themes/next/scripts/events/index.js","hash":"89091bc943cd8b8c63b8af3d26fb0a027048e9ba","modified":1627306536123},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"872f01cb10e422a648ea505436532e776e92926b","modified":1627306536130},{"_id":"themes/next/scripts/filters/locals.js","hash":"374c9211b3b6a5b2ad31f1bea69a22f2727f633a","modified":1627306536131},{"_id":"themes/next/scripts/filters/minify.js","hash":"be0574c64a38210e449c99d38a760452015060a3","modified":1627306536131},{"_id":"themes/next/scripts/filters/post.js","hash":"bac5646993153f9f6a630c9f0052bb17fa760a9c","modified":1627306536131},{"_id":"themes/next/scripts/helpers/engine.js","hash":"819fc2707070b5ddbbb042986da25f4bcbe93a17","modified":1627306536132},{"_id":"themes/next/scripts/helpers/font.js","hash":"3394185a7f0393c16ce52c8028f90da3e9239c55","modified":1627306536132},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"413c51fa3caa87fe95d1d8f95e6023f096515632","modified":1627306536132},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"577c510374cf9bcfa8d3a1027e42411a9324805e","modified":1627306536133},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"afdd6a188a74c188f0dd154fac70efd4080ca262","modified":1627306536133},{"_id":"themes/next/scripts/tags/button.js","hash":"c6ad2ed544fbb25ecb5d820c36e76302504271b7","modified":1627306536133},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"935a311142a409c1896b3ae3f01fe7a9e2db1134","modified":1627306536134},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"92c19d796bdb3320df9caea59bf52df7a95d9da9","modified":1627306536134},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"79102d9e9bccff6224e77a77c4d2d363094ae3df","modified":1627306536134},{"_id":"themes/next/scripts/tags/index.js","hash":"17f9451ce1f10f78437f52218757d38d4e1591b0","modified":1627306536134},{"_id":"themes/next/scripts/tags/label.js","hash":"8a73348186113bae0a51ea2f891c1bb882fab05a","modified":1627306536135},{"_id":"themes/next/scripts/tags/link-grid.js","hash":"9e2c58d1a4d1dd84fa86144e5b4576b2fd10a37f","modified":1627306536135},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"464effc08e757ce8e1bb094707d06ad829af9d62","modified":1627306536135},{"_id":"themes/next/scripts/tags/note.js","hash":"7b94ddb46b7d4b0fe815f2fbe4bd375f07f55363","modified":1627306536135},{"_id":"themes/next/scripts/tags/pdf.js","hash":"344636b6fd7e27e8831c1e194039afc0d61931cd","modified":1627306536136},{"_id":"themes/next/scripts/tags/tabs.js","hash":"2bf00d56b3b289a7dd27e9b5820430a2457a19f3","modified":1627306536136},{"_id":"themes/next/scripts/tags/video.js","hash":"2ee926448583be8f95af1f2884ae2c9c4830151d","modified":1627306536136},{"_id":"themes/next/source/css/_colors.styl","hash":"b37f9847d2f95632e911df670b51921a7d748068","modified":1627306536137},{"_id":"themes/next/source/css/_mixins.styl","hash":"6bca0a5dc96fea392a0da53e0566ec2a113ec382","modified":1627306536158},{"_id":"themes/next/source/css/main.styl","hash":"78ce791cc4ac95386cf6839ca72f5f7b51f86ee9","modified":1627306536166},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1612083504000},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1612083504000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1627306536167},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1627306536167},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1627306536167},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1627306536168},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1627306536169},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1612083504000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1612083504000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1627306536168},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1627306536168},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1627306536170},{"_id":"themes/next/source/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1612083504000},{"_id":"themes/next/source/js/algolia-search.js","hash":"a360423984cdd915d04365c51bcab440e52d7223","modified":1627306536170},{"_id":"themes/next/source/js/motion.js","hash":"6d4bd07a6f8e1b4083119dca0acb5b289533b619","modified":1627306536172},{"_id":"themes/next/source/js/next-boot.js","hash":"c2a04055d8edec03dc74e1c45d83bd3b51467de0","modified":1627306536173},{"_id":"themes/next/source/images/scroll.png","hash":"443930af0ee54778babad7724291bfed9b431dd5","modified":1612662060556},{"_id":"themes/next/source/js/bookmark.js","hash":"e45e1fbb7c6d645e9c410759486216e570d02bef","modified":1627306536171},{"_id":"themes/next/source/js/utils.js","hash":"fcb84304fc3ba06f8c4f840fe1e0843339e0899d","modified":1627306536174},{"_id":"themes/next/test/helpers/index.js","hash":"63ba28afed697f7b3574436b1133b8ecc9c0c357","modified":1627306536177},{"_id":"themes/next/source/js/local-search.js","hash":"da2051e7cab184ae4aa64457c5db7476b4645fdc","modified":1627306536172},{"_id":"themes/next/source/js/schedule.js","hash":"71d62fc3584c47ff2d4cc945226e412264399be9","modified":1627306536173},{"_id":"themes/next/test/tags/button.js","hash":"48f2aa4c513e9e24bd6a811410520b74cd7ea88b","modified":1627306536178},{"_id":"themes/next/test/helpers/font.js","hash":"342ef3c6fd2dcca2a8802a516ed6d7f389fd2ca2","modified":1627306536177},{"_id":"themes/next/test/helpers/next-url.js","hash":"abc4ee5149df6172b2c36b6e85d1993ec748ddea","modified":1627306536177},{"_id":"themes/next/test/tags/center-quote.js","hash":"7667342fd1a1417eaf6a254012b84ae40e8d13dd","modified":1627306536179},{"_id":"themes/next/test/tags/caniuse.js","hash":"aa5e728445caeaf7c2ccd0f3fcb2cad0c93ca6d1","modified":1627306536178},{"_id":"themes/next/test/tags/label.js","hash":"4ebf3698c258ca978b997acbdd0dece44069c09d","modified":1627306536179},{"_id":"themes/next/test/tags/index.js","hash":"e8779e54f0979b221858f8bb74dd081bb503b910","modified":1627306536179},{"_id":"themes/next/test/tags/mermaid.js","hash":"ed5b5a70ee49842501c952c4d62483f1fc8eba6b","modified":1627306536180},{"_id":"themes/next/test/tags/group-pictures.js","hash":"f41640e5d0f552c0b0c4ac8876a2edb0fcf54e56","modified":1627306536179},{"_id":"themes/next/test/tags/pdf.js","hash":"fd6ea5123560a90f7e7c1eface23dbe1455db25f","modified":1627306536180},{"_id":"themes/next/test/tags/video.js","hash":"b796fc4dceb20a30e730c322bb5474c0162464cc","modified":1627306536181},{"_id":"themes/next/test/tags/link-grid.js","hash":"88ec69e4dc1d493d21254ed9296a2514e91f0f8b","modified":1627306536180},{"_id":"themes/next/layout/_partials/head/head-unique.njk","hash":"37bdf020591feb0cf72327c9efd755bf78a0afd6","modified":1627306536101},{"_id":"themes/next/test/tags/note.js","hash":"3dcfcd65bf9f326972ea7571fdb1444200f5d07e","modified":1627306536180},{"_id":"themes/next/layout/_partials/head/head.njk","hash":"8f6521714044676e15d924da387b2aef45fc8fe6","modified":1627306536102},{"_id":"themes/next/layout/_partials/header/brand.njk","hash":"ffb6c69a9c90793cbe9bf0544b55f7a41c016d8f","modified":1627306536102},{"_id":"themes/next/layout/_partials/header/index.njk","hash":"53895b3af95667edc5bf5d7356f8a2b4fe091447","modified":1627306536102},{"_id":"themes/next/layout/_partials/header/menu-item.njk","hash":"b46f412c0b4f775fd329d50357f722f5d7c1a3ba","modified":1627306536103},{"_id":"themes/next/layout/_partials/header/menu.njk","hash":"c9390824b57f23b7c8a5c23a9834514123673766","modified":1627306536104},{"_id":"themes/next/layout/_partials/header/sub-menu.njk","hash":"75a158a5b54a3a76ee6590f5e0e2dd4a9f0be869","modified":1627306536104},{"_id":"themes/next/layout/_partials/page/breadcrumb.njk","hash":"edb3bb6d644b7407673c5ef3a426a244e98fcf89","modified":1627306536104},{"_id":"themes/next/layout/_partials/page/categories.njk","hash":"17156d99941f28a225951ffdcfa9a115e20dc2d2","modified":1627306536105},{"_id":"themes/next/layout/_partials/page/page-header.njk","hash":"7ed4f102a1825195cff8d7995bf9219f323a9034","modified":1627306536105},{"_id":"themes/next/test/tags/tabs.js","hash":"d63722919f9da2e44d6b952801e10a2915ea9c12","modified":1627306536181},{"_id":"themes/next/layout/_partials/page/schedule.njk","hash":"9d650333160ad1977fe42d9770869ff1660a95fe","modified":1627306536105},{"_id":"themes/next/layout/_partials/page/tags.njk","hash":"a18d1598e36cc72f2b0b24c3cc3c5990dfaa3254","modified":1627306536105},{"_id":"themes/next/layout/_partials/post/post-copyright.njk","hash":"133942922e34abae9e4de7ea5591d77c0caa4b37","modified":1627306536106},{"_id":"themes/next/layout/_partials/post/post-followme.njk","hash":"154df0bb323c332d8c25343f258ee865e5553423","modified":1627306536106},{"_id":"themes/next/layout/_partials/post/post-footer.njk","hash":"8f14f3f8a1b2998d5114cc56b680fb5c419a6b07","modified":1627306536106},{"_id":"themes/next/layout/_partials/post/post-reward.njk","hash":"a9bb52d0537d27cfe670d80e716da6780786ab8a","modified":1627306536107},{"_id":"themes/next/layout/_partials/post/post-meta.njk","hash":"1410fad73e0a08a45166e4a055ba150fd06e8636","modified":1627306536107},{"_id":"themes/next/test/validate/index.js","hash":"5a95ccc8598667535bd022e988055c0e019f3670","modified":1627306536181},{"_id":"themes/next/layout/_partials/post/post-related.njk","hash":"f79c44692451db26efce704813f7a8872b7e63a0","modified":1627306536107},{"_id":"themes/next/layout/_partials/search/algolia-search.njk","hash":"efb2b6f19df02ba5ae623a1f274fff52aed21e6f","modified":1627306536108},{"_id":"themes/next/layout/_partials/search/index.njk","hash":"8f6f256ab3b351ffc80f1f3f1d9834e9a7cfac31","modified":1627306536108},{"_id":"themes/next/layout/_partials/sidebar/site-overview.njk","hash":"c419158e19805e2db614a5f5651e3e534e4a5e4e","modified":1627306536109},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.njk","hash":"4790058691b7d36cf6d2d6b4e93795a7b8d608ad","modified":1627306536112},{"_id":"themes/next/layout/_third-party/analytics/cloudflare.njk","hash":"c978e9efd472c4825f93b83524b11f1c4f7efaab","modified":1627306536113},{"_id":"themes/next/layout/_partials/search/localsearch.njk","hash":"661f7acae43f0be694266323320f977d84119abe","modified":1627306536108},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.njk","hash":"ad197fd728dd7ac90f910fdf80ce848eab3ff187","modified":1627306536113},{"_id":"themes/next/layout/_third-party/analytics/growingio.njk","hash":"5adea065641e8c55994dd2328ddae53215604928","modified":1627306536113},{"_id":"themes/next/layout/_third-party/chat/chatra.njk","hash":"f910618292c63871ca2e6c6e66c491f344fa7b1f","modified":1627306536114},{"_id":"themes/next/layout/_third-party/analytics/index.njk","hash":"2d36a481a70d5f450f1f166dc556ac1218b18537","modified":1627306536113},{"_id":"themes/next/layout/_third-party/chat/tidio.njk","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1627306536114},{"_id":"themes/next/layout/_third-party/comments/changyan.njk","hash":"5c2cd9b6f02bcb6248d3f18638a58e329fe8c0d1","modified":1627306536114},{"_id":"themes/next/layout/_third-party/comments/disqus.njk","hash":"cc1450d62d76e59968bdd25836694b8339207384","modified":1627306536115},{"_id":"themes/next/layout/_third-party/comments/disqusjs.njk","hash":"54eab4840443262432ec7c47e56e9859ace2a902","modified":1627306536115},{"_id":"themes/next/layout/_third-party/comments/gitalk.njk","hash":"c1ccd5ec907dffc2b4aeec81b0762ea1cc0d4505","modified":1627306536115},{"_id":"themes/next/layout/_third-party/comments/isso.njk","hash":"c1bf0753fc4bc5f21d61eaffbcc915a462c7d830","modified":1627306536115},{"_id":"themes/next/layout/_third-party/comments/livere.njk","hash":"6252b0353c6a36d03c68ebec1073293442221bd1","modified":1627306536115},{"_id":"themes/next/layout/_third-party/math/index.njk","hash":"47a982aec8830c2f9711b2aff59ff83f09deb09e","modified":1627306536116},{"_id":"themes/next/layout/_third-party/comments/utterances.njk","hash":"7a07bbfb09ddf70b919f0ebe1b00942c96152389","modified":1627306536116},{"_id":"themes/next/layout/_third-party/math/katex.njk","hash":"b6746dfad32cc8a46ff8f4194a7a16ca41744803","modified":1627306536116},{"_id":"themes/next/layout/_third-party/math/mathjax.njk","hash":"f4fd63b9f9230dadd1190f79d59313751925ed90","modified":1627306536117},{"_id":"themes/next/layout/_third-party/search/algolia-search.njk","hash":"97035261aa85c7d39c6ce1211cdefc6248c0446d","modified":1627306536118},{"_id":"themes/next/layout/_third-party/search/localsearch.njk","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1627306536118},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.njk","hash":"a4bc501da0f22f7e420f0ca47e83988ce90b1368","modified":1627306536119},{"_id":"themes/next/layout/_third-party/statistics/firestore.njk","hash":"0ff61346dc1327054ea2c211ba6fb654cdcdfd8d","modified":1627306536119},{"_id":"themes/next/layout/_third-party/statistics/index.njk","hash":"568ddf7955d11d93fb5e842b403a7ac8b1b7fdb1","modified":1627306536119},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.njk","hash":"811a3ad58c0a15550100bdc199bef8add1ad526c","modified":1627306536119},{"_id":"themes/next/layout/_third-party/tags/mermaid.njk","hash":"007da98b913a62946c03a87f8fa25b3db856caa1","modified":1627306536120},{"_id":"themes/next/layout/_third-party/tags/pdf.njk","hash":"b6241ebbb091ef18b3d06cba08ac2e04e3f67a7d","modified":1627306536120},{"_id":"themes/next/scripts/events/lib/config.js","hash":"09b58494e9d9d25542d1d218f2d0ffc4d2da9f30","modified":1627306536123},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"7b0ea8d28ced63977dc6539920eb044b1098adcb","modified":1627306536123},{"_id":"themes/next/scripts/events/lib/highlight.js","hash":"6aec7b2c38c50989a23bfaa0d560e75c7f553e12","modified":1627306536123},{"_id":"themes/next/scripts/events/lib/utils.js","hash":"b281be775b693f9bf32766c8f6ef703c72ac9b00","modified":1627306536124},{"_id":"themes/next/scripts/events/lib/vendors.js","hash":"d1ecc44f9f6e236bf910e36150767d36be4658b2","modified":1627306536125},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"ecc93ba67af26b6715fc75001fa0c3131b726241","modified":1627306536126},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"2486f3e0150c753e5f3af1a3665d074704b8ee2c","modified":1627306536127},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"93ee5f9109dad885dc38c49bcee630c10f9dce6e","modified":1627306536127},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"cc1e2d5921c6990f94f3cf11b1ff7533a21da9b7","modified":1627306536128},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"32a1d9ad50621a78d0243e176c8b05ff7866fd5b","modified":1627306536128},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"7c0533bac4400689a0d5ab3a188ce42b9375de46","modified":1627306536129},{"_id":"themes/next/scripts/filters/comment/isso.js","hash":"ff8b5b5145220a17d0ecd9508ba9bd2d3b2da47d","modified":1627306536129},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"60be56c9ba590e5bcb80d1607ca7eeedde9fdfaa","modified":1627306536130},{"_id":"themes/next/scripts/filters/comment/utterances.js","hash":"d3bded697bc32dace689d2a6dfb6eb7514169d15","modified":1627306536130},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"f81bcc9ff614535997d9f5bc79a63731d425f4f0","modified":1627306536158},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"e3be898f5ebcf435a26542653a9297ff2c71aeb0","modified":1627306536165},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"c65536a128b9bc9dbe2fbb1b235a3cded2891002","modified":1627306536165},{"_id":"themes/next/source/css/_variables/base.styl","hash":"32a1b73944561655087d80f025208a84e012b3cf","modified":1627306536165},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"96e0a7c2a65ce68215e17e369085b2ea2f1334f2","modified":1627306536164},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e1fbf169b9b6a194b518240cbd06ec3c48b83d61","modified":1627306536165},{"_id":"themes/next/source/js/schemes/muse.js","hash":"9d15d0d6a58b1df74827288f117af22b4b6aafe5","modified":1627306536174},{"_id":"themes/next/source/lib/canvas-nest/LICENSE","hash":"336611e76f0638d3d8aeca6b1b97138d2a07523f","modified":1612661200404},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"d4809783ded05625675b1b4bbd9e99d7f5f7d7f9","modified":1627306536137},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ece860218125bdb2578f373ed4f5040c9670e4b1","modified":1627306536137},{"_id":"themes/next/source/css/_common/components/index.styl","hash":"3c7ae405dd30b9b46494a6b9a6cb1b7ec6138ba9","modified":1627306536138},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"ee8fb8348aa76a9b346927ba4cae5666d8d777f7","modified":1627306536144},{"_id":"themes/next/source/lib/canvas-nest/README.md","hash":"6964aecdc62466e6b529f6887558669925a36bc6","modified":1612661200404},{"_id":"themes/next/source/css/_common/outline/index.styl","hash":"0c9f72ad98807521cbdcee7b5bbe2e884311db39","modified":1627306536148},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"db5ddaa8fd2101b0fd7108ce4bbcb9f0649fa223","modified":1627306536152},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"a042571d85ff7265f799004239a45f36b716b8a6","modified":1627306536152},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"e4fecc889ba3317a64e9abba5842c79dff9b7827","modified":1627306536152},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest-nomobile.min.js","hash":"6b4437a9cd8aa04329cc6220a595acfe1fb9b598","modified":1612661200405},{"_id":"themes/next/source/css/_common/scaffolding/index.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1627306536153},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1612661200405},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"b56367ea676ea8e8783ea89cd4ab150c7da7a060","modified":1627306536153},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"e840b23d33023e6d45e018f6e84b683dd56efd8d","modified":1627306536154},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"41cba8c4c5637a6b8f1b62e67673b33676f5d734","modified":1627306536154},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"572a41499391677d84b16d8dbd6a996a3d5ce041","modified":1627306536157},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"9f88d350df8115d26c6adbc2025a27ef9a42d7ff","modified":1627306536148},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"5604ac1e161099a4d3e5657d53507268866dc717","modified":1627306536159},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"357b899ac0f0dfbbbebf1ea972030c7cefa463ce","modified":1627306536160},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"ab16a3dcdc0393b9b582ef59dcc13db9320e917c","modified":1627306536160},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"4817e77577896ab5c0da434549917ee703a3f4cf","modified":1627306536159},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"06080fd963c904d96c00eff098a284e337953013","modified":1627306536160},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"b332868d76d9f1651efd65abfc0d3c9d699b1a45","modified":1627306536160},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"82a29572dd90451f75358a2ee2522b87304a0bb8","modified":1627306536161},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"c48ccd8d6651fe1a01faff8f01179456d39ba9b1","modified":1627306536162},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"fd49b521d67eaccc629f77b4e095cb7310327565","modified":1627306536158},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"6ad168288b213cec357e9b5a97674ff2ef3a910c","modified":1627306536162},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"be5c46b983df08b9dbac1b4749b1a101b54b6b50","modified":1627306536163},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"8a70d51d8f7cd113e5fbc9f0e70c46a072f282c8","modified":1627306536161},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"6eee86c8f0175d6c09e434053516cd8556f78d44","modified":1627306536163},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"dc68f16eceaa006e9735d7ff7821af7f4ef50979","modified":1627306536163},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"87e163de866938c668ec33e6ff8972b7a968e0af","modified":1627306536161},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"778ed2ad5643b93970c95626b325defeb586733f","modified":1627306536164},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"8000075b227749a7495eaf417cac6ccfbe441580","modified":1627306536164},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"2d337a12c5c668ee64447bda5a9ed64eaed5b29e","modified":1627306536163},{"_id":"themes/next/source/lib/canvas-nest/.git/config","hash":"78c4459d066ad795856608d603d780b53488073d","modified":1612661200400},{"_id":"themes/next/source/lib/canvas-nest/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1612661200390},{"_id":"themes/next/source/lib/canvas-nest/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1612661195345},{"_id":"themes/next/source/lib/canvas-nest/.git/index","hash":"f53757cd09685f92fcd779b44bfbd491d571e766","modified":1612661200406},{"_id":"themes/next/source/lib/canvas-nest/.git/packed-refs","hash":"80eecf0c5c7f21b2678dc1c329f74de19b6a3a67","modified":1612661200383},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"8afdc311c6b8db121758371f95cf1c5e77354f42","modified":1627306536138},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"b6e2eb1550a7845cb2adf86081a4ab6c7bde1e68","modified":1627306536138},{"_id":"themes/next/source/css/_common/components/pages/index.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1627306536138},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"1a81d1a71fcf0699629ce6e72dfd0a15f3a2dd0a","modified":1627306536139},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"6b816c2511242ee503fb5f34cd3e4dcdafc06b85","modified":1627306536139},{"_id":"themes/next/source/lib/canvas-nest/.github/stale.yml","hash":"dbd5e6bf89b76ad1f2b081578b239c7ae32755af","modified":1612661200404},{"_id":"themes/next/source/css/_common/components/post/index.styl","hash":"b3fa752f72ca1413289b76c56fbd33a00e3d25d7","modified":1627306536140},{"_id":"themes/next/source/css/_common/components/post/post-body.styl","hash":"5d61dedb3bec1021d52894f9b379e4d0953f6a35","modified":1627306536141},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"ec37a36e94ba791663607a5022f763915778578f","modified":1627306536141},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"76d0dfb3a8b873a6180604ac6daecf38b6a963a2","modified":1627306536141},{"_id":"themes/next/source/css/_common/components/post/post-footer.styl","hash":"1d284f3ea03ba9b4feb76b375e539a8e0bccf1c3","modified":1627306536142},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"aa366d37389760c8595529b850f461569577a1c5","modified":1627306536142},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"967021e5483495bdefac9e0b3e1c84c366c657fd","modified":1627306536142},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"9ac6f477177264c26a46e8333b8456720a0444dc","modified":1627306536143},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"b1181c5f12a70b8bf710586fcb0d7959841ee512","modified":1627306536143},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"5b5649b9749e3fd8b63aef22ceeece0a6e1df605","modified":1627306536143},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"7102f8e819b62cf7d121fd063dc663fd068feaa6","modified":1627306536144},{"_id":"themes/next/source/css/_common/components/third-party/index.styl","hash":"b457756758f0632767e8a560e3033059cbe4a67b","modified":1627306536144},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"83c6588c51cd418336f4945813410a100ddfe2a4","modified":1627306536145},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"2c534d2b2dbc932ad65d335a720a7ba9612bac04","modified":1627306536145},{"_id":"themes/next/source/css/_common/components/third-party/utterances.styl","hash":"bf88d9c585d7b00463c46352402cfea415c29493","modified":1627306536146},{"_id":"themes/next/source/css/_common/outline/footer/index.styl","hash":"f11dca93e334b68a29e792f7abe682993fab7568","modified":1627306536146},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"d6d60f02b5e9f89dbfce180b3884030898022664","modified":1627306536146},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"2896840ab8ac8ab2a7f76d18df893f290ac31625","modified":1627306536145},{"_id":"themes/next/source/css/_common/outline/header/index.styl","hash":"f1778d2c56974b96dae429456d5c55be325c4946","modified":1627306536147},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"392fd53a8dd4e3f33a853ebb24290a622300e0ff","modified":1627306536147},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"9a47c9045e443b8d20932f9c564a3a05fa4c6b51","modified":1627306536148},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"cf194bea1c9e67fde871a04de3bc81df72c54277","modified":1627306536147},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"9c8abc55c9d94d384a245013951aba5ecca2f4fe","modified":1627306536148},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"52fc98b1435129eb3edb9293ced9e507741f1350","modified":1627306536149},{"_id":"themes/next/source/css/_common/outline/sidebar/index.styl","hash":"d180871d4440090241fc988736c1f3a7efb4b1ba","modified":1627306536149},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"5b38ac4a0f1ade0e681aff0e3366c481d9cf3dcd","modified":1627306536149},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"9950c3188a28e1c63b5498b7bdcd14b12ace3e28","modified":1627306536149},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"ab715dbf2b98bfeb5e7b7c43e92e5c02496cc2ea","modified":1627306536150},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"fbdb63c6a8887d19b7137325ba7d6806f728139c","modified":1627306536150},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"f7ff85fe6c4efb8ff036fab2c3277b7d8bed69a8","modified":1627306536150},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"6394340c28a21f6aa90e786f3bfe24fb26595653","modified":1627306536151},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"432e73bc4f99322af6af1852e0ea6e674919c31a","modified":1627306536151},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"69eb1c282a8fd5dbab606cc09c34c5dc8e44e753","modified":1627306536151},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"83ee4993710fc8daa1c8dbfccd5d5091fd244c30","modified":1627306536152},{"_id":"themes/next/source/css/_common/scaffolding/highlight/index.styl","hash":"08e79881d58d01afab6dbed37ab4f52356564d7e","modified":1627306536153},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"15a5e273a8137550c93c8d2a60f9fcf86e04a89e","modified":1627306536154},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"393ff96234e4196b569d4b11496774eb78e147de","modified":1627306536154},{"_id":"themes/next/source/css/_common/scaffolding/tags/index.styl","hash":"cef4e779473daa3761709958243c6b8a57bbd814","modified":1627306536155},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"debee14539272fbe3835a7d3853af2230baa3501","modified":1627306536155},{"_id":"themes/next/source/css/_common/scaffolding/tags/link-grid.styl","hash":"79ffcf92771cd48f4a686f9d8d7d610f39e9fc1f","modified":1627306536156},{"_id":"themes/next/source/css/_common/scaffolding/tags/mermaid.styl","hash":"3c029a003e9bf747e1b9cc7c0c127f6028374876","modified":1627306536156},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"f53e6c12bd4805888f696386d00668f23cd335e7","modified":1627306536157},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"b49c64f8e9a6ca1c45c0ba98febf1974fdd03616","modified":1627306536157},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"50b00218e854200c4ec0573a841e226d49c45cba","modified":1627306536157},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1612661195364},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1612661195404},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1612661195405},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/fsmonitor-watchman.sample","hash":"118ff5509f187039734d04456bf01e44c933ac19","modified":1612661195403},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/pre-merge-commit.sample","hash":"04c64e58bc25c149482ed45dbd79e40effb89eb7","modified":1612661195425},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/pre-commit.sample","hash":"a79d057388ee2c2fe6561d7697f1f5efcff96f23","modified":1612661195424},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/pre-push.sample","hash":"a599b773b930ca83dbc3a5c7c13059ac4a6eaedc","modified":1612661195441},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1612661195455},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1612661195391},{"_id":"themes/next/source/lib/canvas-nest/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1612661195487},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1612661195454},{"_id":"themes/next/source/lib/canvas-nest/.git/logs/HEAD","hash":"00986f30b62427310ef6ff28401390ebd048a27d","modified":1612661200394},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/update.sample","hash":"730e6bd5225478bab6147b7a62a6e2ae21d40507","modified":1612661195485},{"_id":"themes/next/source/lib/canvas-nest/.git/refs/heads/master","hash":"473e30291eac5f6d120dfe823b29ad4b2218f05a","modified":1612661200394},{"_id":"themes/next/source/lib/canvas-nest/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1612661195474},{"_id":"themes/next/source/lib/canvas-nest/.git/logs/refs/heads/master","hash":"00986f30b62427310ef6ff28401390ebd048a27d","modified":1612661200395},{"_id":"themes/next/source/lib/canvas-nest/.git/logs/refs/remotes/origin/HEAD","hash":"00986f30b62427310ef6ff28401390ebd048a27d","modified":1612661200389},{"_id":"themes/next/source/lib/canvas-nest/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1612661200389},{"_id":"themes/next/source/lib/canvas-nest/.git/objects/pack/pack-74481fdd1b883d04c2027bfa03159ed0faad19ff.idx","hash":"1008139a36d5ca2b82d366e9ed7ec36013a69c2b","modified":1612661200331},{"_id":"themes/next/source/lib/canvas-nest/.git/objects/pack/pack-74481fdd1b883d04c2027bfa03159ed0faad19ff.pack","hash":"4db25aa8c132d652772184dfbe5a8dccc5712e61","modified":1612661200329},{"_id":"source/images/原型链与继承.png","hash":"823c85cb82d5a089900439334b32f3a066290236","modified":1616401455819},{"_id":"public/search.json","hash":"311f0592706d716abd9268a17fff4078d7b8ad61","modified":1627023951450},{"_id":"public/article/index.html","hash":"ecc5a9930f2918d8927035cde4ef90cf769a047b","modified":1627023951450},{"_id":"public/site/index.html","hash":"b1488173962f4085e423f3b42829f05f6748efd8","modified":1627023951450},{"_id":"public/about/index.html","hash":"7a9669010ec95cf70e6fb93dc4c9bc77a84e0db1","modified":1627023951450},{"_id":"public/tags/index.html","hash":"9aebe64185c2886e5c03885028f638aa645f26d0","modified":1627023951450},{"_id":"public/archives/2021/02/index.html","hash":"1307bbed2a7590b54c149a7fb896d2f93c2ac07c","modified":1627023951450},{"_id":"public/archives/2021/03/index.html","hash":"62ea9840696e18530ffe36d43f4c8e48cba9401e","modified":1627023951450},{"_id":"public/archives/2021/04/index.html","hash":"8df063cd92081738af3391d83863da2f2bf01c54","modified":1627023951450},{"_id":"public/tags/Vue/index.html","hash":"695ac303f0dad9ebdcfb6f383780f67ecbca38b9","modified":1627023951450},{"_id":"public/tags/JavaScript/index.html","hash":"66d1e78a453b39623f9bb7479fb5d026a0664ec3","modified":1627023951450},{"_id":"public/tags/css/index.html","hash":"4659ee5c0aaddb240257caa99cd25bcd9f45d9b1","modified":1627023951450},{"_id":"public/tags/front/index.html","hash":"2275296589405252bc0577042f53ddb36b799078","modified":1627023951450},{"_id":"public/tags/原型链/index.html","hash":"bfe7ed823132e46026d5a16a8feec4b754499edb","modified":1627023951450},{"_id":"public/tags/浏览器/index.html","hash":"515d8eaa895d19b702bac28991cd4c4d297e1abd","modified":1627023951450},{"_id":"public/tags/数据结构和算法/index.html","hash":"a36622d283bae6eb8773a65ac9329dee6c2ee106","modified":1627023951450},{"_id":"public/teach/index.html","hash":"0dea4ffd9820d743c382304344982df9077ae30d","modified":1627023951450},{"_id":"public/2021/04/05/css布局问题/index.html","hash":"7017dae60c8378d7da5222cfd7a4bda61c2dd6ce","modified":1627023951450},{"_id":"public/2021/03/26/Js代码题/index.html","hash":"a0377c0362a92330ade14a9d1efc82fd82bafba7","modified":1627023951450},{"_id":"public/2021/03/23/Vue查漏补缺/index.html","hash":"98d1f2a442c9683f66150e6624884163d51afc12","modified":1627023951450},{"_id":"public/2021/03/22/原型链与继承/index.html","hash":"89ad1317b2131fde32c5c87853ea8141989f4f42","modified":1627023951450},{"_id":"public/2021/03/22/数据结构和算法/index.html","hash":"683cc67e4e14d1e6f29a3c0624d71b4ad910d04b","modified":1627023951450},{"_id":"public/2021/03/07/前端基础知识整理/index.html","hash":"374aae781e141852d26f8de13565fe576ae4fe71","modified":1627023951450},{"_id":"public/2021/03/07/前端面试题/index.html","hash":"72faa6af6055bdb5aa246c257055c98cf3ff8220","modified":1627023951450},{"_id":"public/2021/02/23/浏览器：文档，事件，接口/index.html","hash":"39bc19173d279d697be4ef3391771837999b4c1b","modified":1627023951450},{"_id":"public/2021/03/02/递归从大到小排列的数组/index.html","hash":"e8f2bf2e92b0d0c4de96e5bc211127e50fa4d275","modified":1627023951450},{"_id":"public/2021/02/06/javaScript学习笔记/index.html","hash":"6f431fdec4db675438cf1db1768e7c35b680a2c5","modified":1627023951450},{"_id":"public/archives/index.html","hash":"9aa654d22898b98f8939799b2ad59cd821e7d204","modified":1627023951450},{"_id":"public/archives/2021/index.html","hash":"58a98ff8b2b7a1fae05a68350d197ab31ca5ec0a","modified":1627023951450},{"_id":"public/index.html","hash":"e1ae56a06832f6b476889a8b71d013bf0ebf44f3","modified":1627023951450},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1619487505164},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1619487505164},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1619487505164},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1619487505164},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1619487505164},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1619487505164},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1619487505164},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1619487505164},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1619487505164},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1619487505164},{"_id":"public/images/logo-algolia-nebula-blue-full.svg","hash":"b85e274207b1392782476a0430feac98db1e7da0","modified":1619487505164},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1619487505164},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1619487505164},{"_id":"public/images/scroll.png","hash":"443930af0ee54778babad7724291bfed9b431dd5","modified":1619487505164},{"_id":"public/lib/canvas-nest/LICENSE","hash":"336611e76f0638d3d8aeca6b1b97138d2a07523f","modified":1619487505164},{"_id":"public/images/二叉树.png","hash":"749c3f3394f858f31c362c49024dbaf1edcb3858","modified":1619487505164},{"_id":"public/images/二叉树遍历.jpg","hash":"e9d8eaaa86541dfa380385a972ff2986cbde1ae6","modified":1619487505164},{"_id":"public/images/原型链.png","hash":"7c1a68da814a2ee20818d7f9eb2fdb32b3c860aa","modified":1619487505164},{"_id":"public/images/链表.jpg","hash":"dae052d567f9ba414b67e93a88cfedba92b1110a","modified":1619487505164},{"_id":"public/images/树.png","hash":"79570a1bd5a6a4a7c04aae3d1f062303dccd7aea","modified":1619487505164},{"_id":"public/js/motion.js","hash":"6d4bd07a6f8e1b4083119dca0acb5b289533b619","modified":1619487505164},{"_id":"public/js/algolia-search.js","hash":"a360423984cdd915d04365c51bcab440e52d7223","modified":1619487505164},{"_id":"public/js/next-boot.js","hash":"c2a04055d8edec03dc74e1c45d83bd3b51467de0","modified":1619487505164},{"_id":"public/js/local-search.js","hash":"da2051e7cab184ae4aa64457c5db7476b4645fdc","modified":1619487505164},{"_id":"public/js/schedule.js","hash":"71d62fc3584c47ff2d4cc945226e412264399be9","modified":1619487505164},{"_id":"public/js/utils.js","hash":"fcb84304fc3ba06f8c4f840fe1e0843339e0899d","modified":1619487505164},{"_id":"public/js/schemes/muse.js","hash":"9d15d0d6a58b1df74827288f117af22b4b6aafe5","modified":1619487505164},{"_id":"public/js/bookmark.js","hash":"e45e1fbb7c6d645e9c410759486216e570d02bef","modified":1619487505164},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1619487505164},{"_id":"public/lib/canvas-nest/canvas-nest-nomobile.min.js","hash":"956eada198babd00f028e8908767cb158926c3f3","modified":1619487505164},{"_id":"public/lib/canvas-nest/README.html","hash":"1540408b951f5fab35f77c66b94b4167cbf906c9","modified":1619487505164},{"_id":"public/css/main.css","hash":"de33d3f21e2fab5a6e971aeff9a802dcaf22a03a","modified":1619487505164},{"_id":"public/images/原型链与继承.png","hash":"823c85cb82d5a089900439334b32f3a066290236","modified":1619487505164},{"_id":"source/_posts/2021-07-23-mobx的使用.md","hash":"66d8ecf90c1b4925cae1d5710aefd28ecb895bd6","modified":1627814738092},{"_id":"public/archives/page/2/index.html","hash":"a1a2ab641552d67d44e17b30b81860d0c22006dc","modified":1627023951450},{"_id":"public/archives/2021/page/2/index.html","hash":"13d0fe1523df8cf8cb0fdda453f4b3da7627f3ed","modified":1627023951450},{"_id":"public/archives/2021/07/index.html","hash":"2ea1874dda5528a30d811ea38908ea6e10d69426","modified":1627023951450},{"_id":"public/page/2/index.html","hash":"532413c773a43752e0e8150caa8d5418bc09ebae","modified":1627023951450},{"_id":"public/2021/07/23/mobx的使用/index.html","hash":"fca5003bc2348a17dd02a096295ce9839d1a5418","modified":1627023951450},{"_id":"source/_posts/2021-08-18-正则表达式.md","hash":"a35164cd0a3ccc2b61e1294f241cef72fda16195","modified":1629639937132},{"_id":"source/_posts/2021-08-14-数据排序换行合并.md","hash":"f056783d61b5f8c30d88a6ac64b1f80312ac75b7","modified":1628908810714},{"_id":"source/_posts/2021-08-01-Axios.md","hash":"28f9bf69e034cbde69c5a905bff3891ccd74f365","modified":1627818850962},{"_id":"source/_posts/2021-08-01-Promise.md","hash":"9b5e4b9a5f1156d0300a30996714ea893b126634","modified":1627814959077},{"_id":"source/_posts/2021-09-12-学习网站汇总.md","hash":"78bf651df84fa2d0ac21afd6ec2a5519afffe2a5","modified":1631416553431},{"_id":"source/_posts/2021-09-22-JavaScript重难点实例精讲笔记.md","hash":"faa8ce18f2df240326f4d15c77c92a61f691a7da","modified":1633828440292},{"_id":"source/_posts/2022-04-12-nginx小记.md","hash":"f71269917ba36931ff198d54a1e08786211a2b6b","modified":1650173789325},{"_id":"source/_posts/2022-04-17-配置vue单元测试.md","hash":"df2666e6ab106b132933a3aa1145f51bcd0b43c0","modified":1650173867146},{"_id":"source/_posts/2022-05-10-单元测试.md","hash":"691b56e42e2a9b5f729bbf996f571b547182e64f","modified":1652189638063},{"_id":"source/_posts/2022-02-14-事件循环.md","hash":"3c0626191ec3eab290c7e8e8ac23b12ce5284063","modified":1646133781133},{"_id":"source/_posts/2022-02-10-闭包终了解.md","hash":"2d92411a6dc9de525f3e3fdad89ec0cfa25bf64d","modified":1644463411305},{"_id":"source/_posts/2022-02-10-万恶的this.md","hash":"4671dbe76c2ddd1a96fca63a33a26204ce27b72a","modified":1644666413289},{"_id":"source/_posts/2022-03-01-prettier配置.md","hash":"c652f13bd432135a1ca6a6f93977bcc7841c877d","modified":1646150114365},{"_id":"source/_posts/2022-04-12-成员属性、静态属性、私有属性、原型属性.md","hash":"106d1d3cd318259f88041d8696815b07b1964066","modified":1650173789326}],"Category":[],"Data":[],"Page":[{"title":"文章","date":"2021-02-06T13:59:11.000Z","_content":"\n## 推荐给前端程序员的技术、论坛、资讯网站\n\n[css-tricks](https://css-tricks.com/)\n[css-weekly](http://css-weekly.com/)\n[echojs](http://www.echojs.com/)\n[sitepoint](https://www.sitepoint.com/)\n[javascriptweekly](http://javascriptweekly.com/)\n[frontendfocus](http://frontendfocus.co/)\n[Medium](https://medium.com/)\n\n## 面试\n\n[面试必问的 7 个问题-根据真实大厂面试改编](https://mp.weixin.qq.com/s/2GeghVimQ58KFRXqYPLAtQ)\n[面试再被问到，别说小鹿没给你整理。](https://mp.weixin.qq.com/s/p2vLrtfdoxrMEYDNuViIEA)\n[30+Vue 面试题](https://juejin.cn/post/6930897845369356295)\n[前端开发者面试问题](https://yangshun.github.io/front-end-interview-handbook/)\n[字节跳动最爱考的前端面试题：JavaScript 基础](https://juejin.cn/post/6934500357091360781)\n[字节跳动最爱考的前端面试题：CSS 基础](https://juejin.cn/post/6936913689115099143)\n[字节跳动最爱考的前端面试题：计算机网络基础](https://juejin.cn/post/6939691851746279437)\n[高频前端面试题汇总之 JavaScript 篇](https://juejin.cn/post/6940945178899251230)\n\n## 拓宽\n\n[JavaScript 20 年](https://cn.history.js.org/index.html)\n[前端入门必备网络基础知识](https://zhuanlan.zhihu.com/p/68498513)\n[什么是异步](https://blog.csdn.net/li123128/article/details/80650256)\n\n## 每日一题\n\n[每日一题](https://q.shanyue.tech/)\n","source":"article/index.md","raw":"---\ntitle: 文章\ndate: 2021-02-06 21:59:11\n---\n\n## 推荐给前端程序员的技术、论坛、资讯网站\n\n[css-tricks](https://css-tricks.com/)\n[css-weekly](http://css-weekly.com/)\n[echojs](http://www.echojs.com/)\n[sitepoint](https://www.sitepoint.com/)\n[javascriptweekly](http://javascriptweekly.com/)\n[frontendfocus](http://frontendfocus.co/)\n[Medium](https://medium.com/)\n\n## 面试\n\n[面试必问的 7 个问题-根据真实大厂面试改编](https://mp.weixin.qq.com/s/2GeghVimQ58KFRXqYPLAtQ)\n[面试再被问到，别说小鹿没给你整理。](https://mp.weixin.qq.com/s/p2vLrtfdoxrMEYDNuViIEA)\n[30+Vue 面试题](https://juejin.cn/post/6930897845369356295)\n[前端开发者面试问题](https://yangshun.github.io/front-end-interview-handbook/)\n[字节跳动最爱考的前端面试题：JavaScript 基础](https://juejin.cn/post/6934500357091360781)\n[字节跳动最爱考的前端面试题：CSS 基础](https://juejin.cn/post/6936913689115099143)\n[字节跳动最爱考的前端面试题：计算机网络基础](https://juejin.cn/post/6939691851746279437)\n[高频前端面试题汇总之 JavaScript 篇](https://juejin.cn/post/6940945178899251230)\n\n## 拓宽\n\n[JavaScript 20 年](https://cn.history.js.org/index.html)\n[前端入门必备网络基础知识](https://zhuanlan.zhihu.com/p/68498513)\n[什么是异步](https://blog.csdn.net/li123128/article/details/80650256)\n\n## 每日一题\n\n[每日一题](https://q.shanyue.tech/)\n","updated":"2021-07-26T13:35:36.053Z","path":"article/index.html","_id":"cknzd1p890000f4rq2fnsgwbt","comments":1,"layout":"page","content":"<h2 id=\"推荐给前端程序员的技术、论坛、资讯网站\"><a href=\"#推荐给前端程序员的技术、论坛、资讯网站\" class=\"headerlink\" title=\"推荐给前端程序员的技术、论坛、资讯网站\"></a>推荐给前端程序员的技术、论坛、资讯网站</h2><p><a href=\"https://css-tricks.com/\">css-tricks</a><br><a href=\"http://css-weekly.com/\">css-weekly</a><br><a href=\"http://www.echojs.com/\">echojs</a><br><a href=\"https://www.sitepoint.com/\">sitepoint</a><br><a href=\"http://javascriptweekly.com/\">javascriptweekly</a><br><a href=\"http://frontendfocus.co/\">frontendfocus</a><br><a href=\"https://medium.com/\">Medium</a></p>\n<h2 id=\"面试\"><a href=\"#面试\" class=\"headerlink\" title=\"面试\"></a>面试</h2><p><a href=\"https://mp.weixin.qq.com/s/2GeghVimQ58KFRXqYPLAtQ\">面试必问的 7 个问题-根据真实大厂面试改编</a><br><a href=\"https://mp.weixin.qq.com/s/p2vLrtfdoxrMEYDNuViIEA\">面试再被问到，别说小鹿没给你整理。</a><br><a href=\"https://juejin.cn/post/6930897845369356295\">30+Vue 面试题</a><br><a href=\"https://yangshun.github.io/front-end-interview-handbook/\">前端开发者面试问题</a><br><a href=\"https://juejin.cn/post/6934500357091360781\">字节跳动最爱考的前端面试题：JavaScript 基础</a><br><a href=\"https://juejin.cn/post/6936913689115099143\">字节跳动最爱考的前端面试题：CSS 基础</a><br><a href=\"https://juejin.cn/post/6939691851746279437\">字节跳动最爱考的前端面试题：计算机网络基础</a><br><a href=\"https://juejin.cn/post/6940945178899251230\">高频前端面试题汇总之 JavaScript 篇</a></p>\n<h2 id=\"拓宽\"><a href=\"#拓宽\" class=\"headerlink\" title=\"拓宽\"></a>拓宽</h2><p><a href=\"https://cn.history.js.org/index.html\">JavaScript 20 年</a><br><a href=\"https://zhuanlan.zhihu.com/p/68498513\">前端入门必备网络基础知识</a><br><a href=\"https://blog.csdn.net/li123128/article/details/80650256\">什么是异步</a></p>\n<h2 id=\"每日一题\"><a href=\"#每日一题\" class=\"headerlink\" title=\"每日一题\"></a>每日一题</h2><p><a href=\"https://q.shanyue.tech/\">每日一题</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"推荐给前端程序员的技术、论坛、资讯网站\"><a href=\"#推荐给前端程序员的技术、论坛、资讯网站\" class=\"headerlink\" title=\"推荐给前端程序员的技术、论坛、资讯网站\"></a>推荐给前端程序员的技术、论坛、资讯网站</h2><p><a href=\"https://css-tricks.com/\">css-tricks</a><br><a href=\"http://css-weekly.com/\">css-weekly</a><br><a href=\"http://www.echojs.com/\">echojs</a><br><a href=\"https://www.sitepoint.com/\">sitepoint</a><br><a href=\"http://javascriptweekly.com/\">javascriptweekly</a><br><a href=\"http://frontendfocus.co/\">frontendfocus</a><br><a href=\"https://medium.com/\">Medium</a></p>\n<h2 id=\"面试\"><a href=\"#面试\" class=\"headerlink\" title=\"面试\"></a>面试</h2><p><a href=\"https://mp.weixin.qq.com/s/2GeghVimQ58KFRXqYPLAtQ\">面试必问的 7 个问题-根据真实大厂面试改编</a><br><a href=\"https://mp.weixin.qq.com/s/p2vLrtfdoxrMEYDNuViIEA\">面试再被问到，别说小鹿没给你整理。</a><br><a href=\"https://juejin.cn/post/6930897845369356295\">30+Vue 面试题</a><br><a href=\"https://yangshun.github.io/front-end-interview-handbook/\">前端开发者面试问题</a><br><a href=\"https://juejin.cn/post/6934500357091360781\">字节跳动最爱考的前端面试题：JavaScript 基础</a><br><a href=\"https://juejin.cn/post/6936913689115099143\">字节跳动最爱考的前端面试题：CSS 基础</a><br><a href=\"https://juejin.cn/post/6939691851746279437\">字节跳动最爱考的前端面试题：计算机网络基础</a><br><a href=\"https://juejin.cn/post/6940945178899251230\">高频前端面试题汇总之 JavaScript 篇</a></p>\n<h2 id=\"拓宽\"><a href=\"#拓宽\" class=\"headerlink\" title=\"拓宽\"></a>拓宽</h2><p><a href=\"https://cn.history.js.org/index.html\">JavaScript 20 年</a><br><a href=\"https://zhuanlan.zhihu.com/p/68498513\">前端入门必备网络基础知识</a><br><a href=\"https://blog.csdn.net/li123128/article/details/80650256\">什么是异步</a></p>\n<h2 id=\"每日一题\"><a href=\"#每日一题\" class=\"headerlink\" title=\"每日一题\"></a>每日一题</h2><p><a href=\"https://q.shanyue.tech/\">每日一题</a></p>\n"},{"title":"站点","date":"2021-02-27T04:48:11.000Z","_content":"\n## 激活网站\n\n[WINDOWS 手动代码激活](https://kms.cangshui.net/windows%e6%89%8b%e5%8a%a8%e4%bb%a3%e7%a0%81%e6%bf%80%e6%b4%bb/)\n[office 破解](https://otp.landian.vip/zh-cn/)\n\n## 电影网站\n\n[片库](https://www.btnull.org/)\n[bt 之家](http://btbtt12.com/)\n\n## 游戏资源网站\n\n[i 玩游戏](http://www.fffyouxi.com/)\n[微当下载](https://www.weidown.com/)\n\n## 资源网站\n\n[52 破解网站](https://www.52pojie.cn/)\n[三六五网络学院](https://www.365exe.com/)\n[福利吧导航](https://fuliba123.net/)\n[鸠摩搜索](https://www.jiumodiary.com/)\n\n## 其他\n\n[在线 JSON 校验格式化工具](https://www.bejson.com/)\n[开源镜像](http://mirrors.ustc.edu.cn/)\n[十分钟邮箱](https://10minutemail.net/)\n","source":"site/index.md","raw":"---\ntitle: 站点\ndate: 2021-02-27 12:48:11\n---\n\n## 激活网站\n\n[WINDOWS 手动代码激活](https://kms.cangshui.net/windows%e6%89%8b%e5%8a%a8%e4%bb%a3%e7%a0%81%e6%bf%80%e6%b4%bb/)\n[office 破解](https://otp.landian.vip/zh-cn/)\n\n## 电影网站\n\n[片库](https://www.btnull.org/)\n[bt 之家](http://btbtt12.com/)\n\n## 游戏资源网站\n\n[i 玩游戏](http://www.fffyouxi.com/)\n[微当下载](https://www.weidown.com/)\n\n## 资源网站\n\n[52 破解网站](https://www.52pojie.cn/)\n[三六五网络学院](https://www.365exe.com/)\n[福利吧导航](https://fuliba123.net/)\n[鸠摩搜索](https://www.jiumodiary.com/)\n\n## 其他\n\n[在线 JSON 校验格式化工具](https://www.bejson.com/)\n[开源镜像](http://mirrors.ustc.edu.cn/)\n[十分钟邮箱](https://10minutemail.net/)\n","updated":"2022-02-10T03:55:16.335Z","path":"site/index.html","_id":"cknzd1p8e0002f4rqcs0da95o","comments":1,"layout":"page","content":"<h2 id=\"激活网站\"><a href=\"#激活网站\" class=\"headerlink\" title=\"激活网站\"></a>激活网站</h2><p><a href=\"https://kms.cangshui.net/windows%e6%89%8b%e5%8a%a8%e4%bb%a3%e7%a0%81%e6%bf%80%e6%b4%bb/\">WINDOWS 手动代码激活</a><br><a href=\"https://otp.landian.vip/zh-cn/\">office 破解</a></p>\n<h2 id=\"电影网站\"><a href=\"#电影网站\" class=\"headerlink\" title=\"电影网站\"></a>电影网站</h2><p><a href=\"https://www.btnull.org/\">片库</a><br><a href=\"http://btbtt12.com/\">bt 之家</a></p>\n<h2 id=\"游戏资源网站\"><a href=\"#游戏资源网站\" class=\"headerlink\" title=\"游戏资源网站\"></a>游戏资源网站</h2><p><a href=\"http://www.fffyouxi.com/\">i 玩游戏</a><br><a href=\"https://www.weidown.com/\">微当下载</a></p>\n<h2 id=\"资源网站\"><a href=\"#资源网站\" class=\"headerlink\" title=\"资源网站\"></a>资源网站</h2><p><a href=\"https://www.52pojie.cn/\">52 破解网站</a><br><a href=\"https://www.365exe.com/\">三六五网络学院</a><br><a href=\"https://fuliba123.net/\">福利吧导航</a><br><a href=\"https://www.jiumodiary.com/\">鸠摩搜索</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p><a href=\"https://www.bejson.com/\">在线 JSON 校验格式化工具</a><br><a href=\"http://mirrors.ustc.edu.cn/\">开源镜像</a><br><a href=\"https://10minutemail.net/\">十分钟邮箱</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"激活网站\"><a href=\"#激活网站\" class=\"headerlink\" title=\"激活网站\"></a>激活网站</h2><p><a href=\"https://kms.cangshui.net/windows%e6%89%8b%e5%8a%a8%e4%bb%a3%e7%a0%81%e6%bf%80%e6%b4%bb/\">WINDOWS 手动代码激活</a><br><a href=\"https://otp.landian.vip/zh-cn/\">office 破解</a></p>\n<h2 id=\"电影网站\"><a href=\"#电影网站\" class=\"headerlink\" title=\"电影网站\"></a>电影网站</h2><p><a href=\"https://www.btnull.org/\">片库</a><br><a href=\"http://btbtt12.com/\">bt 之家</a></p>\n<h2 id=\"游戏资源网站\"><a href=\"#游戏资源网站\" class=\"headerlink\" title=\"游戏资源网站\"></a>游戏资源网站</h2><p><a href=\"http://www.fffyouxi.com/\">i 玩游戏</a><br><a href=\"https://www.weidown.com/\">微当下载</a></p>\n<h2 id=\"资源网站\"><a href=\"#资源网站\" class=\"headerlink\" title=\"资源网站\"></a>资源网站</h2><p><a href=\"https://www.52pojie.cn/\">52 破解网站</a><br><a href=\"https://www.365exe.com/\">三六五网络学院</a><br><a href=\"https://fuliba123.net/\">福利吧导航</a><br><a href=\"https://www.jiumodiary.com/\">鸠摩搜索</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p><a href=\"https://www.bejson.com/\">在线 JSON 校验格式化工具</a><br><a href=\"http://mirrors.ustc.edu.cn/\">开源镜像</a><br><a href=\"https://10minutemail.net/\">十分钟邮箱</a></p>\n"},{"_content":"# 关于\n\n把生活过成自己想过的日子，本来就是一件很幸福的事。\n\n## 联系方式\n\nQQ：981319470\n\n微信：cqk415\n\n","source":"about/index.md","raw":"# 关于\n\n把生活过成自己想过的日子，本来就是一件很幸福的事。\n\n## 联系方式\n\nQQ：981319470\n\n微信：cqk415\n\n","date":"2021-07-26T13:35:36.053Z","updated":"2021-07-26T13:35:36.053Z","path":"about/index.html","_id":"cknzd1p8h0005f4rqe9nz0kng","title":"","comments":1,"layout":"page","content":"<h1 id=\"关于\"><a href=\"#关于\" class=\"headerlink\" title=\"关于\"></a>关于</h1><p>把生活过成自己想过的日子，本来就是一件很幸福的事。</p>\n<h2 id=\"联系方式\"><a href=\"#联系方式\" class=\"headerlink\" title=\"联系方式\"></a>联系方式</h2><p>QQ：981319470</p>\n<p>微信：cqk415</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"关于\"><a href=\"#关于\" class=\"headerlink\" title=\"关于\"></a>关于</h1><p>把生活过成自己想过的日子，本来就是一件很幸福的事。</p>\n<h2 id=\"联系方式\"><a href=\"#联系方式\" class=\"headerlink\" title=\"联系方式\"></a>联系方式</h2><p>QQ：981319470</p>\n<p>微信：cqk415</p>\n"},{"title":"教程","date":"2021-02-23T13:59:11.000Z","_content":"\n## 算法与数据结构\n\n[算法练习网站](https://www.hackerrank.com/)\n[力扣的题解记录](https://github.com/sl1673495/leetcode-javascript)\n[JavaScript 算法与数据结构](https://github.com/trekhleb/javascript-algorithms/blob/master/README.zh-CN.md)\n[数据结构和算法动态可视化](https://visualgo.net/zh)\n\n## 学习网站\n\n[FCC 中文网，在线练习网站](https://www.freecodecamp.one/)\n[20 个 Java 练手项目，献给嗜学如狂的人](https://www.jianshu.com/p/54311cf0b303)\n[1000 多本计算机电子书](https://github.com/itdevbooks/pdf#spring)\n[免费教程书籍](https://github.com/EbookFoundation/free-programming-books/blob/master/books/free-programming-books-zh.md)\n[正确姿势开发 vue 后台管理系统](https://juejin.cn/post/6844903928761417741#heading-8)\n[Emmet 快速语法](https://code.z01.com/emmet/)\n[InterviewMap——Javascript](https://juejin.cn/post/6844903784997470216)\n[cookie，localStorage，sessionStorage 的区别](https://blog.csdn.net/jiang7701037/article/details/89118086)\n[图解前端](https://lucifer.ren/fe-interview/#/)\n\n## React\n[useEffect 完整指南](https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/)\n[React技术解密](https://react.iamkasong.com/)\n[图解React](https://7kms.github.io/react-illustration-series/main/macro-structure/)\n[awesome-react](https://github.com/huaize2020/awesome-react)\n\n## 前端单元测试\n[如何做前端单元测试](https://mp.weixin.qq.com/s/Y0RH8YjzrVPDPtXBeJIm8g)\n\n## Vue\n\n[Vue 开发必须知道的 36 个技巧](https://segmentfault.com/a/1190000020620972)\n\n## CSS\n\n[学习 CSS 布局](https://zh.learnlayout.com/position-example.html)\n[Learn to Code HTML & CSS](https://learn.shayhowe.com/html-css/)\n[奇妙的 CSS 之布局与定位](https://www.cnblogs.com/syfwhu/p/4319236.html)\n[前端基础面试题(HTML+CSS 部分)](https://zhuanlan.zhihu.com/p/28415923)\n[CSS 核心知识](https://www.jianshu.com/p/42116364651b)\n[让一个块级元素垂直居中的八种方法](https://blog.csdn.net/zhang_yu_ling/article/details/90272623)\n\n## 模块/打包\n\n[你的 import 被 webpack 编译成了什么？](https://juejin.cn/post/6859569958742196237)\n[看完这篇还搞不懂 webpack，求你打我](https://juejin.cn/post/6844904030649614349)\n\n## 正则表达式\n\n[什么是正则表达式](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)\n[正则表达式验证](https://regex101.com/)\n[三十分钟包会——正则表达式](https://mp.weixin.qq.com/s/x9EgF6y0Yf5-ZeBE9opCRw)\n\n## 设计模式\n\n[设计模式](https://refactoringguru.cn/)\n\n## 后端教程网站\n\n[在线学 sql](http://xuesql.cn/)\n\n## 其他\n\n[Linux Kernel](https://www.kernel.org/)\n","source":"teach/index.md","raw":"---\ntitle: 教程\ndate: 2021-02-23 21:59:11\n---\n\n## 算法与数据结构\n\n[算法练习网站](https://www.hackerrank.com/)\n[力扣的题解记录](https://github.com/sl1673495/leetcode-javascript)\n[JavaScript 算法与数据结构](https://github.com/trekhleb/javascript-algorithms/blob/master/README.zh-CN.md)\n[数据结构和算法动态可视化](https://visualgo.net/zh)\n\n## 学习网站\n\n[FCC 中文网，在线练习网站](https://www.freecodecamp.one/)\n[20 个 Java 练手项目，献给嗜学如狂的人](https://www.jianshu.com/p/54311cf0b303)\n[1000 多本计算机电子书](https://github.com/itdevbooks/pdf#spring)\n[免费教程书籍](https://github.com/EbookFoundation/free-programming-books/blob/master/books/free-programming-books-zh.md)\n[正确姿势开发 vue 后台管理系统](https://juejin.cn/post/6844903928761417741#heading-8)\n[Emmet 快速语法](https://code.z01.com/emmet/)\n[InterviewMap——Javascript](https://juejin.cn/post/6844903784997470216)\n[cookie，localStorage，sessionStorage 的区别](https://blog.csdn.net/jiang7701037/article/details/89118086)\n[图解前端](https://lucifer.ren/fe-interview/#/)\n\n## React\n[useEffect 完整指南](https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/)\n[React技术解密](https://react.iamkasong.com/)\n[图解React](https://7kms.github.io/react-illustration-series/main/macro-structure/)\n[awesome-react](https://github.com/huaize2020/awesome-react)\n\n## 前端单元测试\n[如何做前端单元测试](https://mp.weixin.qq.com/s/Y0RH8YjzrVPDPtXBeJIm8g)\n\n## Vue\n\n[Vue 开发必须知道的 36 个技巧](https://segmentfault.com/a/1190000020620972)\n\n## CSS\n\n[学习 CSS 布局](https://zh.learnlayout.com/position-example.html)\n[Learn to Code HTML & CSS](https://learn.shayhowe.com/html-css/)\n[奇妙的 CSS 之布局与定位](https://www.cnblogs.com/syfwhu/p/4319236.html)\n[前端基础面试题(HTML+CSS 部分)](https://zhuanlan.zhihu.com/p/28415923)\n[CSS 核心知识](https://www.jianshu.com/p/42116364651b)\n[让一个块级元素垂直居中的八种方法](https://blog.csdn.net/zhang_yu_ling/article/details/90272623)\n\n## 模块/打包\n\n[你的 import 被 webpack 编译成了什么？](https://juejin.cn/post/6859569958742196237)\n[看完这篇还搞不懂 webpack，求你打我](https://juejin.cn/post/6844904030649614349)\n\n## 正则表达式\n\n[什么是正则表达式](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)\n[正则表达式验证](https://regex101.com/)\n[三十分钟包会——正则表达式](https://mp.weixin.qq.com/s/x9EgF6y0Yf5-ZeBE9opCRw)\n\n## 设计模式\n\n[设计模式](https://refactoringguru.cn/)\n\n## 后端教程网站\n\n[在线学 sql](http://xuesql.cn/)\n\n## 其他\n\n[Linux Kernel](https://www.kernel.org/)\n","updated":"2022-02-10T03:53:53.614Z","path":"teach/index.html","_id":"cknzd1p8j0007f4rq1qbv4zdq","comments":1,"layout":"page","content":"<h2 id=\"算法与数据结构\"><a href=\"#算法与数据结构\" class=\"headerlink\" title=\"算法与数据结构\"></a>算法与数据结构</h2><p><a href=\"https://www.hackerrank.com/\">算法练习网站</a><br><a href=\"https://github.com/sl1673495/leetcode-javascript\">力扣的题解记录</a><br><a href=\"https://github.com/trekhleb/javascript-algorithms/blob/master/README.zh-CN.md\">JavaScript 算法与数据结构</a><br><a href=\"https://visualgo.net/zh\">数据结构和算法动态可视化</a></p>\n<h2 id=\"学习网站\"><a href=\"#学习网站\" class=\"headerlink\" title=\"学习网站\"></a>学习网站</h2><p><a href=\"https://www.freecodecamp.one/\">FCC 中文网，在线练习网站</a><br><a href=\"https://www.jianshu.com/p/54311cf0b303\">20 个 Java 练手项目，献给嗜学如狂的人</a><br><a href=\"https://github.com/itdevbooks/pdf#spring\">1000 多本计算机电子书</a><br><a href=\"https://github.com/EbookFoundation/free-programming-books/blob/master/books/free-programming-books-zh.md\">免费教程书籍</a><br><a href=\"https://juejin.cn/post/6844903928761417741#heading-8\">正确姿势开发 vue 后台管理系统</a><br><a href=\"https://code.z01.com/emmet/\">Emmet 快速语法</a><br><a href=\"https://juejin.cn/post/6844903784997470216\">InterviewMap——Javascript</a><br><a href=\"https://blog.csdn.net/jiang7701037/article/details/89118086\">cookie，localStorage，sessionStorage 的区别</a><br><a href=\"https://lucifer.ren/fe-interview/#/\">图解前端</a></p>\n<h2 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h2><p><a href=\"https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/\">useEffect 完整指南</a><br><a href=\"https://react.iamkasong.com/\">React技术解密</a><br><a href=\"https://7kms.github.io/react-illustration-series/main/macro-structure/\">图解React</a><br><a href=\"https://github.com/huaize2020/awesome-react\">awesome-react</a></p>\n<h2 id=\"前端单元测试\"><a href=\"#前端单元测试\" class=\"headerlink\" title=\"前端单元测试\"></a>前端单元测试</h2><p><a href=\"https://mp.weixin.qq.com/s/Y0RH8YjzrVPDPtXBeJIm8g\">如何做前端单元测试</a></p>\n<h2 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h2><p><a href=\"https://segmentfault.com/a/1190000020620972\">Vue 开发必须知道的 36 个技巧</a></p>\n<h2 id=\"CSS\"><a href=\"#CSS\" class=\"headerlink\" title=\"CSS\"></a>CSS</h2><p><a href=\"https://zh.learnlayout.com/position-example.html\">学习 CSS 布局</a><br><a href=\"https://learn.shayhowe.com/html-css/\">Learn to Code HTML &amp; CSS</a><br><a href=\"https://www.cnblogs.com/syfwhu/p/4319236.html\">奇妙的 CSS 之布局与定位</a><br><a href=\"https://zhuanlan.zhihu.com/p/28415923\">前端基础面试题(HTML+CSS 部分)</a><br><a href=\"https://www.jianshu.com/p/42116364651b\">CSS 核心知识</a><br><a href=\"https://blog.csdn.net/zhang_yu_ling/article/details/90272623\">让一个块级元素垂直居中的八种方法</a></p>\n<h2 id=\"模块-打包\"><a href=\"#模块-打包\" class=\"headerlink\" title=\"模块/打包\"></a>模块/打包</h2><p><a href=\"https://juejin.cn/post/6859569958742196237\">你的 import 被 webpack 编译成了什么？</a><br><a href=\"https://juejin.cn/post/6844904030649614349\">看完这篇还搞不懂 webpack，求你打我</a></p>\n<h2 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h2><p><a href=\"https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md\">什么是正则表达式</a><br><a href=\"https://regex101.com/\">正则表达式验证</a><br><a href=\"https://mp.weixin.qq.com/s/x9EgF6y0Yf5-ZeBE9opCRw\">三十分钟包会——正则表达式</a></p>\n<h2 id=\"设计模式\"><a href=\"#设计模式\" class=\"headerlink\" title=\"设计模式\"></a>设计模式</h2><p><a href=\"https://refactoringguru.cn/\">设计模式</a></p>\n<h2 id=\"后端教程网站\"><a href=\"#后端教程网站\" class=\"headerlink\" title=\"后端教程网站\"></a>后端教程网站</h2><p><a href=\"http://xuesql.cn/\">在线学 sql</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p><a href=\"https://www.kernel.org/\">Linux Kernel</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"算法与数据结构\"><a href=\"#算法与数据结构\" class=\"headerlink\" title=\"算法与数据结构\"></a>算法与数据结构</h2><p><a href=\"https://www.hackerrank.com/\">算法练习网站</a><br><a href=\"https://github.com/sl1673495/leetcode-javascript\">力扣的题解记录</a><br><a href=\"https://github.com/trekhleb/javascript-algorithms/blob/master/README.zh-CN.md\">JavaScript 算法与数据结构</a><br><a href=\"https://visualgo.net/zh\">数据结构和算法动态可视化</a></p>\n<h2 id=\"学习网站\"><a href=\"#学习网站\" class=\"headerlink\" title=\"学习网站\"></a>学习网站</h2><p><a href=\"https://www.freecodecamp.one/\">FCC 中文网，在线练习网站</a><br><a href=\"https://www.jianshu.com/p/54311cf0b303\">20 个 Java 练手项目，献给嗜学如狂的人</a><br><a href=\"https://github.com/itdevbooks/pdf#spring\">1000 多本计算机电子书</a><br><a href=\"https://github.com/EbookFoundation/free-programming-books/blob/master/books/free-programming-books-zh.md\">免费教程书籍</a><br><a href=\"https://juejin.cn/post/6844903928761417741#heading-8\">正确姿势开发 vue 后台管理系统</a><br><a href=\"https://code.z01.com/emmet/\">Emmet 快速语法</a><br><a href=\"https://juejin.cn/post/6844903784997470216\">InterviewMap——Javascript</a><br><a href=\"https://blog.csdn.net/jiang7701037/article/details/89118086\">cookie，localStorage，sessionStorage 的区别</a><br><a href=\"https://lucifer.ren/fe-interview/#/\">图解前端</a></p>\n<h2 id=\"React\"><a href=\"#React\" class=\"headerlink\" title=\"React\"></a>React</h2><p><a href=\"https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/\">useEffect 完整指南</a><br><a href=\"https://react.iamkasong.com/\">React技术解密</a><br><a href=\"https://7kms.github.io/react-illustration-series/main/macro-structure/\">图解React</a><br><a href=\"https://github.com/huaize2020/awesome-react\">awesome-react</a></p>\n<h2 id=\"前端单元测试\"><a href=\"#前端单元测试\" class=\"headerlink\" title=\"前端单元测试\"></a>前端单元测试</h2><p><a href=\"https://mp.weixin.qq.com/s/Y0RH8YjzrVPDPtXBeJIm8g\">如何做前端单元测试</a></p>\n<h2 id=\"Vue\"><a href=\"#Vue\" class=\"headerlink\" title=\"Vue\"></a>Vue</h2><p><a href=\"https://segmentfault.com/a/1190000020620972\">Vue 开发必须知道的 36 个技巧</a></p>\n<h2 id=\"CSS\"><a href=\"#CSS\" class=\"headerlink\" title=\"CSS\"></a>CSS</h2><p><a href=\"https://zh.learnlayout.com/position-example.html\">学习 CSS 布局</a><br><a href=\"https://learn.shayhowe.com/html-css/\">Learn to Code HTML &amp; CSS</a><br><a href=\"https://www.cnblogs.com/syfwhu/p/4319236.html\">奇妙的 CSS 之布局与定位</a><br><a href=\"https://zhuanlan.zhihu.com/p/28415923\">前端基础面试题(HTML+CSS 部分)</a><br><a href=\"https://www.jianshu.com/p/42116364651b\">CSS 核心知识</a><br><a href=\"https://blog.csdn.net/zhang_yu_ling/article/details/90272623\">让一个块级元素垂直居中的八种方法</a></p>\n<h2 id=\"模块-打包\"><a href=\"#模块-打包\" class=\"headerlink\" title=\"模块/打包\"></a>模块/打包</h2><p><a href=\"https://juejin.cn/post/6859569958742196237\">你的 import 被 webpack 编译成了什么？</a><br><a href=\"https://juejin.cn/post/6844904030649614349\">看完这篇还搞不懂 webpack，求你打我</a></p>\n<h2 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h2><p><a href=\"https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md\">什么是正则表达式</a><br><a href=\"https://regex101.com/\">正则表达式验证</a><br><a href=\"https://mp.weixin.qq.com/s/x9EgF6y0Yf5-ZeBE9opCRw\">三十分钟包会——正则表达式</a></p>\n<h2 id=\"设计模式\"><a href=\"#设计模式\" class=\"headerlink\" title=\"设计模式\"></a>设计模式</h2><p><a href=\"https://refactoringguru.cn/\">设计模式</a></p>\n<h2 id=\"后端教程网站\"><a href=\"#后端教程网站\" class=\"headerlink\" title=\"后端教程网站\"></a>后端教程网站</h2><p><a href=\"http://xuesql.cn/\">在线学 sql</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p><a href=\"https://www.kernel.org/\">Linux Kernel</a></p>\n"},{"title":"标签","date":"2021-02-06T14:02:44.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ndate: 2021-02-06 22:02:44\ntype: \"tags\"\n---\n","updated":"2021-07-26T13:35:36.077Z","path":"tags/index.html","_id":"cknzd1p8l0009f4rqf73rgx23","comments":1,"layout":"page","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Vue查漏补缺","date":"2021-03-23T07:43:12.000Z","_content":"\n# Vue 查漏补缺\n\n1. ## data 为什么被定义成函数\n\n   避免组件中的数据互相影响。同一个组件被复用多次会创建多个实例，如果 data 是一个对象的话，这些实例用的是同一个构造函数。为了保证组件的数据独立，要求每个组件都必须通过 data 函数返回一个对象作为组件的状态。\n   <!--more-->\n\n2. ## vue 组件之间的传递分类：\n\n   1. 父向子传递:props\n   2. 子向父传递：$emit\n   3. 兄弟之间传递：借助中间代理：emit,$on\n   4. 祖先传给孙子：provide,inject\n\n3. ## v-model 中的实现原理及如何自定义 v-model\n\n   v-model 可以看成是 value+input 方法的语法糖(组件)。原生的 v-model，会根据标签的不同生成不同的事件与属性。\n\n   自定义:自己写 model 属性，里面放上 Prop 和 event\n\n4. ## Vue 性能优化\n\n   ##### 编码优化\n\n   - 事件代理\n   - keep-alive\n   - 拆分组件\n   - key 保证唯一性\n   - 路由懒加载、异步组件\n   - 防抖节流\n\n   ##### Vue 加载性能优化\n\n   - 第三方模块按需导入（babel-plugin-component)\n   - 图片懒加载\n\n   用户体验\n\n   - app-skeleton 骨架屏\n   - shellap p 壳\n   - pwa\n\n   SEO 优化\n\n   - 预渲染\n\n5. ## Computed、watch 和 method\n\n   **computed**：默认 computed 也是一个 watcher 具备缓存,只有当依赖的数据变化时才会计算，当数据没有变化时，它会读取缓存数据。如果一个数据依赖于其他数据，使用 computed\n\n   **watch**:每次都需要执行函数。watch 更适用于数据变化时的异步操作。如果需要在某个数据变化时做一些事情，使用 watch。\n\n   **method**:只要把方法用到模板上了，每次一变化就会重新渲染视图，性能开销大。\n\n6. ## vue 中的 watch 监听数据变化\n\n   1. ### watch 使用的几种方法\n\n      1. 通过 watch 监听 data 数据的变化，数据发生变化时，就会打印当前的值\n\n         ```javascript\n         watch: {\n             data(val, newval) {\n                 console.log(val)\n                 console.log(newval)\n             }\n           }\n         ```\n\n      2. 通过 watch 监听 docData 数据的变化，数据发生变化时，this,change_number++(使用深度监听)\n\n         ```javascript\n         watch: {\n             docData: {\n               handler(newVal) {\n                 this.change_number++\n               },\n               deep: true\n             }\n         }\n         ```\n\n      3. 通过 watch 监听 data 数据的变化，数据发生变化时,执行 changeData 方法\n\n         ```\n         watch: {\n             data： 'changeData'  // 值可以为methods的方法名\n         }，\n         methods: {\n               changeData(curVal,oldVal){\n             　　　 conosle.log(curVal,oldVal)\n         　　}\n         }\n         ```\n\n## 生命周期\n\n### 生命周期图示\n\n![Vue 实例生命周期](https://cn.vuejs.org/images/lifecycle.png)\n\n- #### beforeCreate\n\n  - 类型：Function\n  - 作用：在实例初始化之后，数据观测（data observer）和 event/watcher 事件配置之前被调用\n\n- #### created\n\n  - 类型：Function\n  - 作用：在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测（data observer），property 和方法的运算，watch/event 事件回调。\n\n- #### beforeMount\n\n  - 类型：Function\n  - 作用：在挂载开始之前被调用：相关的 render 函数首次被调用。\n\n- #### mounted\n\n  - 类型：Function\n  - 作用：实例被挂载后调用，这时 el 被新创建的 vm.$el 替换了。\n\n- #### beforeUpdate\n\n  - 类型：Function\n  - 作用：数据更新时调用，发生在虚拟 DOM 打补丁之前。\n\n- #### updated\n\n  - 类型：Function\n  - 作用：由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后回调用该钩子。\n\n- #### beforeDestroy\n\n  - 类型：Function\n  - 作用：实例销毁之前调用。在这一步实例仍然完全可用。\n\n- #### destroyed\n\n  - 类型：Function\n  - 作用：实例销毁后调用。解绑 Vue 实例的所用指令，移除所有事件监听器。\n\n## 组件传值\n\n### provide/inject\n\n- ##### 类型：\n\n  - **provide**：Object | () => Object\n  - **inject**：Array<string> | {[key: string] : string | Symbol | Object}\n\n- ##### 作用：\n\n  - provide 选项应该是一个对象或返回一个对象的函数。\n  - inject 选项应该是：\n    - 一个字符串数组或\n    - 一个对象，对象的 key 是本地的绑定名，value 是：\n      - 在可用的注入内容中搜索用的 key（字符串或 Symbol），或\n      - 一个对象，该对象的：\n        - from property 是在可用的注入内容中搜索有用的 key\n        - default property 是降级情况下使用的 value\n\n## model\n\n- 类型：{prop?: string , event ?:string}\n- 作用：允许一个自定义组件在使用`v-model`时定制 prop 和 event。默认情况下，一个组件上的 v-model 会把`value`用作 prop 且把**input**用作 event，但是一些输入类型比如单选框和复选框按钮可能想使用 `value` prop 来达到不同的目的。使用 `model` 选项可以回避这些情况产生的冲突。\n\n`model` 接受有两个属性：\n\n- props 代替原来 `value` 的值。\n- event 代替原本 `input` 出发的事件。\n\n**子组件**\n\n```vue\n<template>\n  <div v-if=\"show\">\n    <div>\n      <p>定制 v-model</p>\n      <button @click=\"close\">关闭组件</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  model: {\n    prop: 'show',\n    event: 'close',\n  },\n  props: ['show'],\n  methods: {\n    close() {\n      this.$emit('close', false)\n    },\n  },\n}\n</script>\n```\n\n**父组件**\n\n```vue\n<template>\n  <div>\n    <button @click=\"show = true\">打开model</button>\n    <child v-model=\"show\"></child>\n    <!-- 等同于 -->\n    <child :show=\"show\" @close=\"show = $event\"></child>\n  </div>\n</template>\n\n<script>\nimport Child from './child'\nexport default {\n  components: {\n    Child,\n  },\n  data() {\n    return {\n      show: false,\n    }\n  },\n}\n</script>\n```\n\n1. 当父组件点击 打开 model 按钮的时候，内部的 show 属性变为了 true, 这时因为子组件的显示与隐藏是根据 props 里面的 show 来确定的， 子组件将会显示。\n2. 点击子组件的 关闭组件 按钮, 出发了 close 事件，这个事件中将会像父级暴露一个 close 方法，并传递一个 false 参数。\n3. 父级触发 close 方法，改变 show 的值.\n\n## 计算属性和侦听器\n\n### 计算属性\n\n对于任何复杂逻辑，都应当使用计算属性。\n\n## 7.Vue2.x 双向绑定原理\n\nVue 采用**数据劫持+订阅发布模式实现双向绑定**。通过`Object.defineProperty()`方法来为组件中`data`的每个属性添加 get 和 set 方法，在数据变动时，触发 set 里相应的监听回调函数，将变动信息发布给订阅者。\n\n## 8.Vuex\n\nVuex 是一个专为 Vue.js 应用程序开发的状态管理模式。每一个 Vuex 应用的核心就是 store(仓库)。store 基本上就是一个容器，它包含着应用中的大部分的状态(state).\n\n1. Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会得到高效更新。\n2. 改变 store 中的状态的唯一途径就是显式地提交(commit)mutaition。\n\n主要包括以下几个模块：\n\n- State：定义了应用状态的数据结构，可以在这里设置默认的初始状态。\n- Getter：允许组件从 Store 中获取数据，mapGetters 辅助函数仅仅是将 store 中的 getter 映射到局部计算属性。\n- Mutation：是唯一更改 store 中状态的方法，且必须是同步函数。\n- Action：用于提交 mutation，而不是直接变更状态，可以包含任意异步操作。\n- Module：允许将单一的 Store 拆分为多个 store 且同时保存在单一的状态树中。\n","source":"_posts/2021-03-23-Vue查漏补缺.md","raw":"---\ntitle: Vue查漏补缺\ndate: 2021-03-23 15:43:12\ntags:\n\t\t\t- 'Vue'\n---\n\n# Vue 查漏补缺\n\n1. ## data 为什么被定义成函数\n\n   避免组件中的数据互相影响。同一个组件被复用多次会创建多个实例，如果 data 是一个对象的话，这些实例用的是同一个构造函数。为了保证组件的数据独立，要求每个组件都必须通过 data 函数返回一个对象作为组件的状态。\n   <!--more-->\n\n2. ## vue 组件之间的传递分类：\n\n   1. 父向子传递:props\n   2. 子向父传递：$emit\n   3. 兄弟之间传递：借助中间代理：emit,$on\n   4. 祖先传给孙子：provide,inject\n\n3. ## v-model 中的实现原理及如何自定义 v-model\n\n   v-model 可以看成是 value+input 方法的语法糖(组件)。原生的 v-model，会根据标签的不同生成不同的事件与属性。\n\n   自定义:自己写 model 属性，里面放上 Prop 和 event\n\n4. ## Vue 性能优化\n\n   ##### 编码优化\n\n   - 事件代理\n   - keep-alive\n   - 拆分组件\n   - key 保证唯一性\n   - 路由懒加载、异步组件\n   - 防抖节流\n\n   ##### Vue 加载性能优化\n\n   - 第三方模块按需导入（babel-plugin-component)\n   - 图片懒加载\n\n   用户体验\n\n   - app-skeleton 骨架屏\n   - shellap p 壳\n   - pwa\n\n   SEO 优化\n\n   - 预渲染\n\n5. ## Computed、watch 和 method\n\n   **computed**：默认 computed 也是一个 watcher 具备缓存,只有当依赖的数据变化时才会计算，当数据没有变化时，它会读取缓存数据。如果一个数据依赖于其他数据，使用 computed\n\n   **watch**:每次都需要执行函数。watch 更适用于数据变化时的异步操作。如果需要在某个数据变化时做一些事情，使用 watch。\n\n   **method**:只要把方法用到模板上了，每次一变化就会重新渲染视图，性能开销大。\n\n6. ## vue 中的 watch 监听数据变化\n\n   1. ### watch 使用的几种方法\n\n      1. 通过 watch 监听 data 数据的变化，数据发生变化时，就会打印当前的值\n\n         ```javascript\n         watch: {\n             data(val, newval) {\n                 console.log(val)\n                 console.log(newval)\n             }\n           }\n         ```\n\n      2. 通过 watch 监听 docData 数据的变化，数据发生变化时，this,change_number++(使用深度监听)\n\n         ```javascript\n         watch: {\n             docData: {\n               handler(newVal) {\n                 this.change_number++\n               },\n               deep: true\n             }\n         }\n         ```\n\n      3. 通过 watch 监听 data 数据的变化，数据发生变化时,执行 changeData 方法\n\n         ```\n         watch: {\n             data： 'changeData'  // 值可以为methods的方法名\n         }，\n         methods: {\n               changeData(curVal,oldVal){\n             　　　 conosle.log(curVal,oldVal)\n         　　}\n         }\n         ```\n\n## 生命周期\n\n### 生命周期图示\n\n![Vue 实例生命周期](https://cn.vuejs.org/images/lifecycle.png)\n\n- #### beforeCreate\n\n  - 类型：Function\n  - 作用：在实例初始化之后，数据观测（data observer）和 event/watcher 事件配置之前被调用\n\n- #### created\n\n  - 类型：Function\n  - 作用：在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测（data observer），property 和方法的运算，watch/event 事件回调。\n\n- #### beforeMount\n\n  - 类型：Function\n  - 作用：在挂载开始之前被调用：相关的 render 函数首次被调用。\n\n- #### mounted\n\n  - 类型：Function\n  - 作用：实例被挂载后调用，这时 el 被新创建的 vm.$el 替换了。\n\n- #### beforeUpdate\n\n  - 类型：Function\n  - 作用：数据更新时调用，发生在虚拟 DOM 打补丁之前。\n\n- #### updated\n\n  - 类型：Function\n  - 作用：由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后回调用该钩子。\n\n- #### beforeDestroy\n\n  - 类型：Function\n  - 作用：实例销毁之前调用。在这一步实例仍然完全可用。\n\n- #### destroyed\n\n  - 类型：Function\n  - 作用：实例销毁后调用。解绑 Vue 实例的所用指令，移除所有事件监听器。\n\n## 组件传值\n\n### provide/inject\n\n- ##### 类型：\n\n  - **provide**：Object | () => Object\n  - **inject**：Array<string> | {[key: string] : string | Symbol | Object}\n\n- ##### 作用：\n\n  - provide 选项应该是一个对象或返回一个对象的函数。\n  - inject 选项应该是：\n    - 一个字符串数组或\n    - 一个对象，对象的 key 是本地的绑定名，value 是：\n      - 在可用的注入内容中搜索用的 key（字符串或 Symbol），或\n      - 一个对象，该对象的：\n        - from property 是在可用的注入内容中搜索有用的 key\n        - default property 是降级情况下使用的 value\n\n## model\n\n- 类型：{prop?: string , event ?:string}\n- 作用：允许一个自定义组件在使用`v-model`时定制 prop 和 event。默认情况下，一个组件上的 v-model 会把`value`用作 prop 且把**input**用作 event，但是一些输入类型比如单选框和复选框按钮可能想使用 `value` prop 来达到不同的目的。使用 `model` 选项可以回避这些情况产生的冲突。\n\n`model` 接受有两个属性：\n\n- props 代替原来 `value` 的值。\n- event 代替原本 `input` 出发的事件。\n\n**子组件**\n\n```vue\n<template>\n  <div v-if=\"show\">\n    <div>\n      <p>定制 v-model</p>\n      <button @click=\"close\">关闭组件</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  model: {\n    prop: 'show',\n    event: 'close',\n  },\n  props: ['show'],\n  methods: {\n    close() {\n      this.$emit('close', false)\n    },\n  },\n}\n</script>\n```\n\n**父组件**\n\n```vue\n<template>\n  <div>\n    <button @click=\"show = true\">打开model</button>\n    <child v-model=\"show\"></child>\n    <!-- 等同于 -->\n    <child :show=\"show\" @close=\"show = $event\"></child>\n  </div>\n</template>\n\n<script>\nimport Child from './child'\nexport default {\n  components: {\n    Child,\n  },\n  data() {\n    return {\n      show: false,\n    }\n  },\n}\n</script>\n```\n\n1. 当父组件点击 打开 model 按钮的时候，内部的 show 属性变为了 true, 这时因为子组件的显示与隐藏是根据 props 里面的 show 来确定的， 子组件将会显示。\n2. 点击子组件的 关闭组件 按钮, 出发了 close 事件，这个事件中将会像父级暴露一个 close 方法，并传递一个 false 参数。\n3. 父级触发 close 方法，改变 show 的值.\n\n## 计算属性和侦听器\n\n### 计算属性\n\n对于任何复杂逻辑，都应当使用计算属性。\n\n## 7.Vue2.x 双向绑定原理\n\nVue 采用**数据劫持+订阅发布模式实现双向绑定**。通过`Object.defineProperty()`方法来为组件中`data`的每个属性添加 get 和 set 方法，在数据变动时，触发 set 里相应的监听回调函数，将变动信息发布给订阅者。\n\n## 8.Vuex\n\nVuex 是一个专为 Vue.js 应用程序开发的状态管理模式。每一个 Vuex 应用的核心就是 store(仓库)。store 基本上就是一个容器，它包含着应用中的大部分的状态(state).\n\n1. Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会得到高效更新。\n2. 改变 store 中的状态的唯一途径就是显式地提交(commit)mutaition。\n\n主要包括以下几个模块：\n\n- State：定义了应用状态的数据结构，可以在这里设置默认的初始状态。\n- Getter：允许组件从 Store 中获取数据，mapGetters 辅助函数仅仅是将 store 中的 getter 映射到局部计算属性。\n- Mutation：是唯一更改 store 中状态的方法，且必须是同步函数。\n- Action：用于提交 mutation，而不是直接变更状态，可以包含任意异步操作。\n- Module：允许将单一的 Store 拆分为多个 store 且同时保存在单一的状态树中。\n","slug":"Vue查漏补缺","published":1,"updated":"2021-07-26T13:35:36.049Z","_id":"cknzd1p8b0001f4rqevohfotc","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Vue-查漏补缺\"><a href=\"#Vue-查漏补缺\" class=\"headerlink\" title=\"Vue 查漏补缺\"></a>Vue 查漏补缺</h1><ol>\n<li><h2 id=\"data-为什么被定义成函数\"><a href=\"#data-为什么被定义成函数\" class=\"headerlink\" title=\"data 为什么被定义成函数\"></a>data 为什么被定义成函数</h2><p>避免组件中的数据互相影响。同一个组件被复用多次会创建多个实例，如果 data 是一个对象的话，这些实例用的是同一个构造函数。为了保证组件的数据独立，要求每个组件都必须通过 data 函数返回一个对象作为组件的状态。</p>\n<a id=\"more\"></a>\n</li>\n<li><h2 id=\"vue-组件之间的传递分类：\"><a href=\"#vue-组件之间的传递分类：\" class=\"headerlink\" title=\"vue 组件之间的传递分类：\"></a>vue 组件之间的传递分类：</h2><ol>\n<li>父向子传递:props</li>\n<li>子向父传递：$emit</li>\n<li>兄弟之间传递：借助中间代理：emit,$on</li>\n<li>祖先传给孙子：provide,inject</li>\n</ol>\n</li>\n<li><h2 id=\"v-model-中的实现原理及如何自定义-v-model\"><a href=\"#v-model-中的实现原理及如何自定义-v-model\" class=\"headerlink\" title=\"v-model 中的实现原理及如何自定义 v-model\"></a>v-model 中的实现原理及如何自定义 v-model</h2><p>v-model 可以看成是 value+input 方法的语法糖(组件)。原生的 v-model，会根据标签的不同生成不同的事件与属性。</p>\n<p>自定义:自己写 model 属性，里面放上 Prop 和 event</p>\n</li>\n<li><h2 id=\"Vue-性能优化\"><a href=\"#Vue-性能优化\" class=\"headerlink\" title=\"Vue 性能优化\"></a>Vue 性能优化</h2><h5 id=\"编码优化\"><a href=\"#编码优化\" class=\"headerlink\" title=\"编码优化\"></a>编码优化</h5><ul>\n<li>事件代理</li>\n<li>keep-alive</li>\n<li>拆分组件</li>\n<li>key 保证唯一性</li>\n<li>路由懒加载、异步组件</li>\n<li>防抖节流</li>\n</ul>\n<h5 id=\"Vue-加载性能优化\"><a href=\"#Vue-加载性能优化\" class=\"headerlink\" title=\"Vue 加载性能优化\"></a>Vue 加载性能优化</h5><ul>\n<li>第三方模块按需导入（babel-plugin-component)</li>\n<li>图片懒加载</li>\n</ul>\n<p>用户体验</p>\n<ul>\n<li>app-skeleton 骨架屏</li>\n<li>shellap p 壳</li>\n<li>pwa</li>\n</ul>\n<p>SEO 优化</p>\n<ul>\n<li>预渲染</li>\n</ul>\n</li>\n<li><h2 id=\"Computed、watch-和-method\"><a href=\"#Computed、watch-和-method\" class=\"headerlink\" title=\"Computed、watch 和 method\"></a>Computed、watch 和 method</h2><p><strong>computed</strong>：默认 computed 也是一个 watcher 具备缓存,只有当依赖的数据变化时才会计算，当数据没有变化时，它会读取缓存数据。如果一个数据依赖于其他数据，使用 computed</p>\n<p><strong>watch</strong>:每次都需要执行函数。watch 更适用于数据变化时的异步操作。如果需要在某个数据变化时做一些事情，使用 watch。</p>\n<p><strong>method</strong>:只要把方法用到模板上了，每次一变化就会重新渲染视图，性能开销大。</p>\n</li>\n<li><h2 id=\"vue-中的-watch-监听数据变化\"><a href=\"#vue-中的-watch-监听数据变化\" class=\"headerlink\" title=\"vue 中的 watch 监听数据变化\"></a>vue 中的 watch 监听数据变化</h2><ol>\n<li><h3 id=\"watch-使用的几种方法\"><a href=\"#watch-使用的几种方法\" class=\"headerlink\" title=\"watch 使用的几种方法\"></a>watch 使用的几种方法</h3><ol>\n<li><p>通过 watch 监听 data 数据的变化，数据发生变化时，就会打印当前的值</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">watch<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> newval</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newval<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>通过 watch 监听 docData 数据的变化，数据发生变化时，this,change_number++(使用深度监听)</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">watch<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    docData<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newVal</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>change_number<span class=\"token operator\">++</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      deep<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>通过 watch 监听 data 数据的变化，数据发生变化时,执行 changeData 方法</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">watch: &#123;\n    data： &#39;changeData&#39;  &#x2F;&#x2F; 值可以为methods的方法名\n&#125;，\nmethods: &#123;\n      changeData(curVal,oldVal)&#123;\n    　　　 conosle.log(curVal,oldVal)\n　　&#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h2></li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"生命周期图示\"><a href=\"#生命周期图示\" class=\"headerlink\" title=\"生命周期图示\"></a>生命周期图示</h3><p><img src=\"https://cn.vuejs.org/images/lifecycle.png\" alt=\"Vue 实例生命周期\"></p>\n<ul>\n<li><h4 id=\"beforeCreate\"><a href=\"#beforeCreate\" class=\"headerlink\" title=\"beforeCreate\"></a>beforeCreate</h4><ul>\n<li>类型：Function</li>\n<li>作用：在实例初始化之后，数据观测（data observer）和 event/watcher 事件配置之前被调用</li>\n</ul>\n</li>\n<li><h4 id=\"created\"><a href=\"#created\" class=\"headerlink\" title=\"created\"></a>created</h4><ul>\n<li>类型：Function</li>\n<li>作用：在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测（data observer），property 和方法的运算，watch/event 事件回调。</li>\n</ul>\n</li>\n<li><h4 id=\"beforeMount\"><a href=\"#beforeMount\" class=\"headerlink\" title=\"beforeMount\"></a>beforeMount</h4><ul>\n<li>类型：Function</li>\n<li>作用：在挂载开始之前被调用：相关的 render 函数首次被调用。</li>\n</ul>\n</li>\n<li><h4 id=\"mounted\"><a href=\"#mounted\" class=\"headerlink\" title=\"mounted\"></a>mounted</h4><ul>\n<li>类型：Function</li>\n<li>作用：实例被挂载后调用，这时 el 被新创建的 vm.$el 替换了。</li>\n</ul>\n</li>\n<li><h4 id=\"beforeUpdate\"><a href=\"#beforeUpdate\" class=\"headerlink\" title=\"beforeUpdate\"></a>beforeUpdate</h4><ul>\n<li>类型：Function</li>\n<li>作用：数据更新时调用，发生在虚拟 DOM 打补丁之前。</li>\n</ul>\n</li>\n<li><h4 id=\"updated\"><a href=\"#updated\" class=\"headerlink\" title=\"updated\"></a>updated</h4><ul>\n<li>类型：Function</li>\n<li>作用：由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后回调用该钩子。</li>\n</ul>\n</li>\n<li><h4 id=\"beforeDestroy\"><a href=\"#beforeDestroy\" class=\"headerlink\" title=\"beforeDestroy\"></a>beforeDestroy</h4><ul>\n<li>类型：Function</li>\n<li>作用：实例销毁之前调用。在这一步实例仍然完全可用。</li>\n</ul>\n</li>\n<li><h4 id=\"destroyed\"><a href=\"#destroyed\" class=\"headerlink\" title=\"destroyed\"></a>destroyed</h4><ul>\n<li>类型：Function</li>\n<li>作用：实例销毁后调用。解绑 Vue 实例的所用指令，移除所有事件监听器。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"组件传值\"><a href=\"#组件传值\" class=\"headerlink\" title=\"组件传值\"></a>组件传值</h2><h3 id=\"provide-inject\"><a href=\"#provide-inject\" class=\"headerlink\" title=\"provide/inject\"></a>provide/inject</h3><ul>\n<li><h5 id=\"类型：\"><a href=\"#类型：\" class=\"headerlink\" title=\"类型：\"></a>类型：</h5><ul>\n<li><strong>provide</strong>：Object | () =&gt; Object</li>\n<li><strong>inject</strong>：Array<string> | {[key: string] : string | Symbol | Object}</li>\n</ul>\n</li>\n<li><h5 id=\"作用：\"><a href=\"#作用：\" class=\"headerlink\" title=\"作用：\"></a>作用：</h5><ul>\n<li>provide 选项应该是一个对象或返回一个对象的函数。</li>\n<li>inject 选项应该是：<ul>\n<li>一个字符串数组或</li>\n<li>一个对象，对象的 key 是本地的绑定名，value 是：<ul>\n<li>在可用的注入内容中搜索用的 key（字符串或 Symbol），或</li>\n<li>一个对象，该对象的：<ul>\n<li>from property 是在可用的注入内容中搜索有用的 key</li>\n<li>default property 是降级情况下使用的 value</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"model\"><a href=\"#model\" class=\"headerlink\" title=\"model\"></a>model</h2><ul>\n<li>类型：{prop?: string , event ?:string}</li>\n<li>作用：允许一个自定义组件在使用<code>v-model</code>时定制 prop 和 event。默认情况下，一个组件上的 v-model 会把<code>value</code>用作 prop 且把<strong>input</strong>用作 event，但是一些输入类型比如单选框和复选框按钮可能想使用 <code>value</code> prop 来达到不同的目的。使用 <code>model</code> 选项可以回避这些情况产生的冲突。</li>\n</ul>\n<p><code>model</code> 接受有两个属性：</p>\n<ul>\n<li>props 代替原来 <code>value</code> 的值。</li>\n<li>event 代替原本 <code>input</code> 出发的事件。</li>\n</ul>\n<p><strong>子组件</strong></p>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;template&gt;\n  &lt;div v-if&#x3D;&quot;show&quot;&gt;\n    &lt;div&gt;\n      &lt;p&gt;定制 v-model&lt;&#x2F;p&gt;\n      &lt;button @click&#x3D;&quot;close&quot;&gt;关闭组件&lt;&#x2F;button&gt;\n    &lt;&#x2F;div&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n  model: &#123;\n    prop: &#39;show&#39;,\n    event: &#39;close&#39;,\n  &#125;,\n  props: [&#39;show&#39;],\n  methods: &#123;\n    close() &#123;\n      this.$emit(&#39;close&#39;, false)\n    &#125;,\n  &#125;,\n&#125;\n&lt;&#x2F;script&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>父组件</strong></p>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;template&gt;\n  &lt;div&gt;\n    &lt;button @click&#x3D;&quot;show &#x3D; true&quot;&gt;打开model&lt;&#x2F;button&gt;\n    &lt;child v-model&#x3D;&quot;show&quot;&gt;&lt;&#x2F;child&gt;\n    &lt;!-- 等同于 --&gt;\n    &lt;child :show&#x3D;&quot;show&quot; @close&#x3D;&quot;show &#x3D; $event&quot;&gt;&lt;&#x2F;child&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport Child from &#39;.&#x2F;child&#39;\nexport default &#123;\n  components: &#123;\n    Child,\n  &#125;,\n  data() &#123;\n    return &#123;\n      show: false,\n    &#125;\n  &#125;,\n&#125;\n&lt;&#x2F;script&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol>\n<li>当父组件点击 打开 model 按钮的时候，内部的 show 属性变为了 true, 这时因为子组件的显示与隐藏是根据 props 里面的 show 来确定的， 子组件将会显示。</li>\n<li>点击子组件的 关闭组件 按钮, 出发了 close 事件，这个事件中将会像父级暴露一个 close 方法，并传递一个 false 参数。</li>\n<li>父级触发 close 方法，改变 show 的值.</li>\n</ol>\n<h2 id=\"计算属性和侦听器\"><a href=\"#计算属性和侦听器\" class=\"headerlink\" title=\"计算属性和侦听器\"></a>计算属性和侦听器</h2><h3 id=\"计算属性\"><a href=\"#计算属性\" class=\"headerlink\" title=\"计算属性\"></a>计算属性</h3><p>对于任何复杂逻辑，都应当使用计算属性。</p>\n<h2 id=\"7-Vue2-x-双向绑定原理\"><a href=\"#7-Vue2-x-双向绑定原理\" class=\"headerlink\" title=\"7.Vue2.x 双向绑定原理\"></a>7.Vue2.x 双向绑定原理</h2><p>Vue 采用<strong>数据劫持+订阅发布模式实现双向绑定</strong>。通过<code>Object.defineProperty()</code>方法来为组件中<code>data</code>的每个属性添加 get 和 set 方法，在数据变动时，触发 set 里相应的监听回调函数，将变动信息发布给订阅者。</p>\n<h2 id=\"8-Vuex\"><a href=\"#8-Vuex\" class=\"headerlink\" title=\"8.Vuex\"></a>8.Vuex</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。每一个 Vuex 应用的核心就是 store(仓库)。store 基本上就是一个容器，它包含着应用中的大部分的状态(state).</p>\n<ol>\n<li>Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会得到高效更新。</li>\n<li>改变 store 中的状态的唯一途径就是显式地提交(commit)mutaition。</li>\n</ol>\n<p>主要包括以下几个模块：</p>\n<ul>\n<li>State：定义了应用状态的数据结构，可以在这里设置默认的初始状态。</li>\n<li>Getter：允许组件从 Store 中获取数据，mapGetters 辅助函数仅仅是将 store 中的 getter 映射到局部计算属性。</li>\n<li>Mutation：是唯一更改 store 中状态的方法，且必须是同步函数。</li>\n<li>Action：用于提交 mutation，而不是直接变更状态，可以包含任意异步操作。</li>\n<li>Module：允许将单一的 Store 拆分为多个 store 且同时保存在单一的状态树中。</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1 id=\"Vue-查漏补缺\"><a href=\"#Vue-查漏补缺\" class=\"headerlink\" title=\"Vue 查漏补缺\"></a>Vue 查漏补缺</h1><ol>\n<li><h2 id=\"data-为什么被定义成函数\"><a href=\"#data-为什么被定义成函数\" class=\"headerlink\" title=\"data 为什么被定义成函数\"></a>data 为什么被定义成函数</h2><p>避免组件中的数据互相影响。同一个组件被复用多次会创建多个实例，如果 data 是一个对象的话，这些实例用的是同一个构造函数。为了保证组件的数据独立，要求每个组件都必须通过 data 函数返回一个对象作为组件的状态。</p>","more":"</li>\n<li><h2 id=\"vue-组件之间的传递分类：\"><a href=\"#vue-组件之间的传递分类：\" class=\"headerlink\" title=\"vue 组件之间的传递分类：\"></a>vue 组件之间的传递分类：</h2><ol>\n<li>父向子传递:props</li>\n<li>子向父传递：$emit</li>\n<li>兄弟之间传递：借助中间代理：emit,$on</li>\n<li>祖先传给孙子：provide,inject</li>\n</ol>\n</li>\n<li><h2 id=\"v-model-中的实现原理及如何自定义-v-model\"><a href=\"#v-model-中的实现原理及如何自定义-v-model\" class=\"headerlink\" title=\"v-model 中的实现原理及如何自定义 v-model\"></a>v-model 中的实现原理及如何自定义 v-model</h2><p>v-model 可以看成是 value+input 方法的语法糖(组件)。原生的 v-model，会根据标签的不同生成不同的事件与属性。</p>\n<p>自定义:自己写 model 属性，里面放上 Prop 和 event</p>\n</li>\n<li><h2 id=\"Vue-性能优化\"><a href=\"#Vue-性能优化\" class=\"headerlink\" title=\"Vue 性能优化\"></a>Vue 性能优化</h2><h5 id=\"编码优化\"><a href=\"#编码优化\" class=\"headerlink\" title=\"编码优化\"></a>编码优化</h5><ul>\n<li>事件代理</li>\n<li>keep-alive</li>\n<li>拆分组件</li>\n<li>key 保证唯一性</li>\n<li>路由懒加载、异步组件</li>\n<li>防抖节流</li>\n</ul>\n<h5 id=\"Vue-加载性能优化\"><a href=\"#Vue-加载性能优化\" class=\"headerlink\" title=\"Vue 加载性能优化\"></a>Vue 加载性能优化</h5><ul>\n<li>第三方模块按需导入（babel-plugin-component)</li>\n<li>图片懒加载</li>\n</ul>\n<p>用户体验</p>\n<ul>\n<li>app-skeleton 骨架屏</li>\n<li>shellap p 壳</li>\n<li>pwa</li>\n</ul>\n<p>SEO 优化</p>\n<ul>\n<li>预渲染</li>\n</ul>\n</li>\n<li><h2 id=\"Computed、watch-和-method\"><a href=\"#Computed、watch-和-method\" class=\"headerlink\" title=\"Computed、watch 和 method\"></a>Computed、watch 和 method</h2><p><strong>computed</strong>：默认 computed 也是一个 watcher 具备缓存,只有当依赖的数据变化时才会计算，当数据没有变化时，它会读取缓存数据。如果一个数据依赖于其他数据，使用 computed</p>\n<p><strong>watch</strong>:每次都需要执行函数。watch 更适用于数据变化时的异步操作。如果需要在某个数据变化时做一些事情，使用 watch。</p>\n<p><strong>method</strong>:只要把方法用到模板上了，每次一变化就会重新渲染视图，性能开销大。</p>\n</li>\n<li><h2 id=\"vue-中的-watch-监听数据变化\"><a href=\"#vue-中的-watch-监听数据变化\" class=\"headerlink\" title=\"vue 中的 watch 监听数据变化\"></a>vue 中的 watch 监听数据变化</h2><ol>\n<li><h3 id=\"watch-使用的几种方法\"><a href=\"#watch-使用的几种方法\" class=\"headerlink\" title=\"watch 使用的几种方法\"></a>watch 使用的几种方法</h3><ol>\n<li><p>通过 watch 监听 data 数据的变化，数据发生变化时，就会打印当前的值</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">watch<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> newval</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>newval<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>通过 watch 监听 docData 数据的变化，数据发生变化时，this,change_number++(使用深度监听)</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">watch<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    docData<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newVal</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>change_number<span class=\"token operator\">++</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      deep<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>通过 watch 监听 data 数据的变化，数据发生变化时,执行 changeData 方法</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">watch: &#123;\n    data： &#39;changeData&#39;  &#x2F;&#x2F; 值可以为methods的方法名\n&#125;，\nmethods: &#123;\n      changeData(curVal,oldVal)&#123;\n    　　　 conosle.log(curVal,oldVal)\n　　&#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h2></li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"生命周期图示\"><a href=\"#生命周期图示\" class=\"headerlink\" title=\"生命周期图示\"></a>生命周期图示</h3><p><img src=\"https://cn.vuejs.org/images/lifecycle.png\" alt=\"Vue 实例生命周期\"></p>\n<ul>\n<li><h4 id=\"beforeCreate\"><a href=\"#beforeCreate\" class=\"headerlink\" title=\"beforeCreate\"></a>beforeCreate</h4><ul>\n<li>类型：Function</li>\n<li>作用：在实例初始化之后，数据观测（data observer）和 event/watcher 事件配置之前被调用</li>\n</ul>\n</li>\n<li><h4 id=\"created\"><a href=\"#created\" class=\"headerlink\" title=\"created\"></a>created</h4><ul>\n<li>类型：Function</li>\n<li>作用：在实例创建完成后被立即调用。在这一步，实例已完成以下的配置：数据观测（data observer），property 和方法的运算，watch/event 事件回调。</li>\n</ul>\n</li>\n<li><h4 id=\"beforeMount\"><a href=\"#beforeMount\" class=\"headerlink\" title=\"beforeMount\"></a>beforeMount</h4><ul>\n<li>类型：Function</li>\n<li>作用：在挂载开始之前被调用：相关的 render 函数首次被调用。</li>\n</ul>\n</li>\n<li><h4 id=\"mounted\"><a href=\"#mounted\" class=\"headerlink\" title=\"mounted\"></a>mounted</h4><ul>\n<li>类型：Function</li>\n<li>作用：实例被挂载后调用，这时 el 被新创建的 vm.$el 替换了。</li>\n</ul>\n</li>\n<li><h4 id=\"beforeUpdate\"><a href=\"#beforeUpdate\" class=\"headerlink\" title=\"beforeUpdate\"></a>beforeUpdate</h4><ul>\n<li>类型：Function</li>\n<li>作用：数据更新时调用，发生在虚拟 DOM 打补丁之前。</li>\n</ul>\n</li>\n<li><h4 id=\"updated\"><a href=\"#updated\" class=\"headerlink\" title=\"updated\"></a>updated</h4><ul>\n<li>类型：Function</li>\n<li>作用：由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后回调用该钩子。</li>\n</ul>\n</li>\n<li><h4 id=\"beforeDestroy\"><a href=\"#beforeDestroy\" class=\"headerlink\" title=\"beforeDestroy\"></a>beforeDestroy</h4><ul>\n<li>类型：Function</li>\n<li>作用：实例销毁之前调用。在这一步实例仍然完全可用。</li>\n</ul>\n</li>\n<li><h4 id=\"destroyed\"><a href=\"#destroyed\" class=\"headerlink\" title=\"destroyed\"></a>destroyed</h4><ul>\n<li>类型：Function</li>\n<li>作用：实例销毁后调用。解绑 Vue 实例的所用指令，移除所有事件监听器。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"组件传值\"><a href=\"#组件传值\" class=\"headerlink\" title=\"组件传值\"></a>组件传值</h2><h3 id=\"provide-inject\"><a href=\"#provide-inject\" class=\"headerlink\" title=\"provide/inject\"></a>provide/inject</h3><ul>\n<li><h5 id=\"类型：\"><a href=\"#类型：\" class=\"headerlink\" title=\"类型：\"></a>类型：</h5><ul>\n<li><strong>provide</strong>：Object | () =&gt; Object</li>\n<li><strong>inject</strong>：Array<string> | {[key: string] : string | Symbol | Object}</li>\n</ul>\n</li>\n<li><h5 id=\"作用：\"><a href=\"#作用：\" class=\"headerlink\" title=\"作用：\"></a>作用：</h5><ul>\n<li>provide 选项应该是一个对象或返回一个对象的函数。</li>\n<li>inject 选项应该是：<ul>\n<li>一个字符串数组或</li>\n<li>一个对象，对象的 key 是本地的绑定名，value 是：<ul>\n<li>在可用的注入内容中搜索用的 key（字符串或 Symbol），或</li>\n<li>一个对象，该对象的：<ul>\n<li>from property 是在可用的注入内容中搜索有用的 key</li>\n<li>default property 是降级情况下使用的 value</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"model\"><a href=\"#model\" class=\"headerlink\" title=\"model\"></a>model</h2><ul>\n<li>类型：{prop?: string , event ?:string}</li>\n<li>作用：允许一个自定义组件在使用<code>v-model</code>时定制 prop 和 event。默认情况下，一个组件上的 v-model 会把<code>value</code>用作 prop 且把<strong>input</strong>用作 event，但是一些输入类型比如单选框和复选框按钮可能想使用 <code>value</code> prop 来达到不同的目的。使用 <code>model</code> 选项可以回避这些情况产生的冲突。</li>\n</ul>\n<p><code>model</code> 接受有两个属性：</p>\n<ul>\n<li>props 代替原来 <code>value</code> 的值。</li>\n<li>event 代替原本 <code>input</code> 出发的事件。</li>\n</ul>\n<p><strong>子组件</strong></p>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;template&gt;\n  &lt;div v-if&#x3D;&quot;show&quot;&gt;\n    &lt;div&gt;\n      &lt;p&gt;定制 v-model&lt;&#x2F;p&gt;\n      &lt;button @click&#x3D;&quot;close&quot;&gt;关闭组件&lt;&#x2F;button&gt;\n    &lt;&#x2F;div&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nexport default &#123;\n  model: &#123;\n    prop: &#39;show&#39;,\n    event: &#39;close&#39;,\n  &#125;,\n  props: [&#39;show&#39;],\n  methods: &#123;\n    close() &#123;\n      this.$emit(&#39;close&#39;, false)\n    &#125;,\n  &#125;,\n&#125;\n&lt;&#x2F;script&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>父组件</strong></p>\n<pre class=\"line-numbers language-vue\" data-language=\"vue\"><code class=\"language-vue\">&lt;template&gt;\n  &lt;div&gt;\n    &lt;button @click&#x3D;&quot;show &#x3D; true&quot;&gt;打开model&lt;&#x2F;button&gt;\n    &lt;child v-model&#x3D;&quot;show&quot;&gt;&lt;&#x2F;child&gt;\n    &lt;!-- 等同于 --&gt;\n    &lt;child :show&#x3D;&quot;show&quot; @close&#x3D;&quot;show &#x3D; $event&quot;&gt;&lt;&#x2F;child&gt;\n  &lt;&#x2F;div&gt;\n&lt;&#x2F;template&gt;\n\n&lt;script&gt;\nimport Child from &#39;.&#x2F;child&#39;\nexport default &#123;\n  components: &#123;\n    Child,\n  &#125;,\n  data() &#123;\n    return &#123;\n      show: false,\n    &#125;\n  &#125;,\n&#125;\n&lt;&#x2F;script&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol>\n<li>当父组件点击 打开 model 按钮的时候，内部的 show 属性变为了 true, 这时因为子组件的显示与隐藏是根据 props 里面的 show 来确定的， 子组件将会显示。</li>\n<li>点击子组件的 关闭组件 按钮, 出发了 close 事件，这个事件中将会像父级暴露一个 close 方法，并传递一个 false 参数。</li>\n<li>父级触发 close 方法，改变 show 的值.</li>\n</ol>\n<h2 id=\"计算属性和侦听器\"><a href=\"#计算属性和侦听器\" class=\"headerlink\" title=\"计算属性和侦听器\"></a>计算属性和侦听器</h2><h3 id=\"计算属性\"><a href=\"#计算属性\" class=\"headerlink\" title=\"计算属性\"></a>计算属性</h3><p>对于任何复杂逻辑，都应当使用计算属性。</p>\n<h2 id=\"7-Vue2-x-双向绑定原理\"><a href=\"#7-Vue2-x-双向绑定原理\" class=\"headerlink\" title=\"7.Vue2.x 双向绑定原理\"></a>7.Vue2.x 双向绑定原理</h2><p>Vue 采用<strong>数据劫持+订阅发布模式实现双向绑定</strong>。通过<code>Object.defineProperty()</code>方法来为组件中<code>data</code>的每个属性添加 get 和 set 方法，在数据变动时，触发 set 里相应的监听回调函数，将变动信息发布给订阅者。</p>\n<h2 id=\"8-Vuex\"><a href=\"#8-Vuex\" class=\"headerlink\" title=\"8.Vuex\"></a>8.Vuex</h2><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。每一个 Vuex 应用的核心就是 store(仓库)。store 基本上就是一个容器，它包含着应用中的大部分的状态(state).</p>\n<ol>\n<li>Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会得到高效更新。</li>\n<li>改变 store 中的状态的唯一途径就是显式地提交(commit)mutaition。</li>\n</ol>\n<p>主要包括以下几个模块：</p>\n<ul>\n<li>State：定义了应用状态的数据结构，可以在这里设置默认的初始状态。</li>\n<li>Getter：允许组件从 Store 中获取数据，mapGetters 辅助函数仅仅是将 store 中的 getter 映射到局部计算属性。</li>\n<li>Mutation：是唯一更改 store 中状态的方法，且必须是同步函数。</li>\n<li>Action：用于提交 mutation，而不是直接变更状态，可以包含任意异步操作。</li>\n<li>Module：允许将单一的 Store 拆分为多个 store 且同时保存在单一的状态树中。</li>\n</ul>"},{"title":"Js代码题","date":"2021-03-26T06:46:50.000Z","_content":"\n```javascript\nfunction Bar() {\n  return;\n  {\n    a: 1;\n  }\n}\nconst f = Bar();\nconsole.log(f.a);\n```\n\n输出 error，因为`return`后没有值，即使格式化也没有用，因此下方的`Object`和`return`没有关联\n\n<!--more-->\n\n## js 将多层嵌套的数组转换为一层数组\n\n```javascript\nlet list = [1, [2, [3, [4]], 5]];\n\nArray.prototype.transfer = function (level) {\n  let list = this;\n  const flat = (list) => {\n    return list.reduce((prev, next) => {\n      next = Array.isArray(next) ? next : [next];\n      return [...prev, ...next];\n    }, []);\n  };\n  while (level > 0) {\n    list = flat(list);\n    level--;\n  }\n  return list;\n};\n```\n\n`let list = this`调用时候的数组，在原型链上的东西，使用时即调用本身。\n\n## 手写防抖节流\n\n```javascript\n//防抖\nlet btn = document.querySelcetor('button');\nlet timer = null;\nbtn.onclick = function () {\n  clearTimeout(timer);\n  timer = setTimeout(() => {\n    console.log('触发请求');\n  }, 1000);\n};\n//节流\nlet btn = document.querySelcetor('button');\nlet flag = true;\nbtn.onclick = function () {\n  if (flag) {\n    flag = false;\n    console.log('触发请求');\n    setTimeout(() => {\n      flag = true;\n    }, 1000);\n  }\n};\n```\n\n## 一道经典面试题---setTimeout(function(){},0)\n\n```javascript\nfor (var i = 0; i < 3; i++) {\n  setTimeout(function () {\n    console.log(i);\n  }, 0);\n  console.log(i);\n}\n//结果为0 1 2 3 3 3\n```\n\n该题考了三个知识点：作用域，闭包，异步\n\n先简化此题\n\n```javascript\nsetTimeout(function () {\n  console.log(1);\n}, 0);\nconsole.log(2);\n//先打印2，再打印1\n```\n\n因为使用 var，是 es5 里面的内容，所以没有块级作用域\n\n```javascript\nfor (var i = 0; i < 3; i++) {}\nconsole.log(i);\n//输出3\n```\n\n怎么保证能弹出 0,1,2\n\n```javascript\nfor (var i = 0; i < 3; i++) {\n  setTimeout(\n    (function (i) {\n      return function () {\n        console.log(i);\n      };\n    })(i),\n    0\n  ); //改为立即执行的函数\n  console.log(i);\n}\n//输出为0,1,2,0,1,2\n```\n## 实现一个简单的数组去重\n\n```js\nlet arr =[1,2,3,2,4,2,1,3]\narr.reduce((accumulator, currentValue) => {\n    if (!accumulator.includes(currentValue)) {\n      return  [ ...accumulator, currentValue ]\n    }\n    return accumulator\n}, [])\n```\n\n## 对范围内的所有数字求和\n我们将传递给您一个包含两个数字的数组。返回这两个数字的总和加上它们之间所有数字的总和。最低的数字并不总是最先出现的。\n例如，sumAll([4,1])应该返回，10因为 1 到 4（包括 1 和 4）之间的所有数字的总和是10。\n```js\nfunction sumAll(arr) {\n  let sumBetween = 0;\n  for (let i = Math.min(...arr); i <= Math.max(...arr); i++) {\n    sumBetween += i;\n  }\n  return sumBetween;\n}\n\nsumAll([1, 4]);\n```\n```js\nfunction sumAll(arr) {\n  const [first, last] = [...arr].sort((a, b) => a - b);\n  return first !== last\n    ? first + sumAll([first + 1, last])\n    : first;\n}\n\nsumAll([1, 4]);\n```\n```js\nfunction sumAll(arr) {\n  let max = Math.max(arr[0], arr[1]);\n  let min = Math.min(arr[0], arr[1]);\n  let sumBetween = 0;\n  for (let i = min; i <= max; i++) {\n    sumBetween += i;\n  }\n  return sumBetween;\n}\n\nsumAll([1, 4]);\n```\n## 找出字符串中最长的单词\n\n```js\n// 解法一\n// 使用reduce进行遍历，将单词长度存到longest里面，最后返回longest\nfunction findLongestWordLength(str) {\n  let arr = str.split(' ')\n  return arr.reduce((longest, word) => {\n    return Math.max(longest, word.length)\n  }, 0)\n}\n// 解法二\n// 使用map进行遍历\nfunction findLongestWordLength(str) {\n  return Math.max(...str.split(' ').map(word=>word.length))\n}\n\nfindLongestWordLength(\"The quick brown fox jumped over the lazy dog\");\n```\n\n## 求每个数组中最大的值并将这些值重新放入一个新数组中\n\n```js\n//解法一\nfunction largestOfFour(arr) {\n  return arr.map((group) => {\n    return group.reduce((prev, current) => {\n      return current > prev ? current : prev;\n    });\n  });\n} \n//解法2\nfunction largestOfFour(arr) {\n  return arr.reduce((newArr, arr) => {\n    let max = Math.max(...arr)\n    return [...newArr, max];\n  }, []);\n}\n\nlargestOfFour([[4, 5, 1, 3],[13, 27, 18, 26],[32, 35, 37, 39],[1000, 1001, 857, 1]])\n```\n\n## 返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\n\n```js\n// 解法一：我们正在使整个字符串小写，然后将其转换为数组。然后我们使用 map 函数将小写字符替换为大写。最后，我们使用join方法返回字符串。\nfunction titleCase(str) {\n  var convertToArray = str.toLowerCase().split(\" \");\n  var result = convertToArray.map(function(val) {\n    return val.replace(val.charAt(0), val.charAt(0).toUpperCase());\n  });\n  return result.join(\" \");\n}\n\ntitleCase(\"I'm a little tea pot\");\n\n// 解法二：使用正则表达式\nfunction titleCase(str) {\n  return str.toLowerCase().replace(/(^|\\s)\\S/g, L => L.toUpperCase());\n}\n\ntitleCase(\"I'm a little tea pot\")\n```\n\n## 确认字符串的结尾\n\n检查字符串（第一个参数，`str`）是否以给定的目标字符串（第二个参数，`target`）结尾。\n\n```javascript\n// 解法一\nfunction confirmEnding(str, target) {\n\n  return str.slice(-target.length) === target ? true : false\n}\n\n// 解法二\nfunction confirmEnding(str, target) {\n  // \"Never give up and good luck will find you.\"\n  // -- Falcor\n\n  let re = new RegExp(target + \"$\", \"i\");\n\n  return re.test(str);\n}\n\nconfirmEnding(\"Bastian\", \"n\");\n```\n\n解法一：`str.slice(-target.length)`切割`str`中target.length的长度，加负号标识从结尾开始，判断是否等于target，等于则返回true否则返回false。\n\n解法二：使用正则表达式，`new RegExp(target + \"$\", \"i\")`指判断是否是target字符串结尾，且忽略大小写。\n\n## Return `true` if the string in the first element of the array contains all of the letters of the string in the second element of the array.\n\n```js\nfunction mutation(arr) {\n  return arr[1].toLowerCase().split('').every(letter => {\n    return arr[0].toLowerCase().indexOf(letter) != -1;\n  })\n}\n\nmutation([\"hello\", \"hey\"]);\n```\n\n## 区分两个数组\n\n比较两个数组并返回一个新数组，其中包含仅在两个给定数组之一中找到的任何项目，但不能同时在这两个数组中找到。换句话说，返回两个数组的对称差。\n\n```js\n// 方法一\nfunction diffArray(arr1, arr2) {\n  let newArr = [...arr1, ...arr2]\n  return newArr.filter(item => !arr1.includes(item) || !arr2.includes(item))\n}\n// 方法二\nfunction diffArray(arr1, arr2) {\n  return [...diff(arr1, arr2), ...diff(arr2, arr1)];\n\n  function diff(a, b) {\n    return a.filter(item => b.indexOf(item) === -1);\n  }\n}\ndiffArray([1, 2, 3, 5], [1, 2, 3, 4, 5]);\n```\n\n","source":"_posts/2021-03-26-Js代码题.md","raw":"---\ntitle: Js代码题\ndate: 2021-03-26 14:46:50\ntags:\n  - 'JavaScript'\n---\n\n```javascript\nfunction Bar() {\n  return;\n  {\n    a: 1;\n  }\n}\nconst f = Bar();\nconsole.log(f.a);\n```\n\n输出 error，因为`return`后没有值，即使格式化也没有用，因此下方的`Object`和`return`没有关联\n\n<!--more-->\n\n## js 将多层嵌套的数组转换为一层数组\n\n```javascript\nlet list = [1, [2, [3, [4]], 5]];\n\nArray.prototype.transfer = function (level) {\n  let list = this;\n  const flat = (list) => {\n    return list.reduce((prev, next) => {\n      next = Array.isArray(next) ? next : [next];\n      return [...prev, ...next];\n    }, []);\n  };\n  while (level > 0) {\n    list = flat(list);\n    level--;\n  }\n  return list;\n};\n```\n\n`let list = this`调用时候的数组，在原型链上的东西，使用时即调用本身。\n\n## 手写防抖节流\n\n```javascript\n//防抖\nlet btn = document.querySelcetor('button');\nlet timer = null;\nbtn.onclick = function () {\n  clearTimeout(timer);\n  timer = setTimeout(() => {\n    console.log('触发请求');\n  }, 1000);\n};\n//节流\nlet btn = document.querySelcetor('button');\nlet flag = true;\nbtn.onclick = function () {\n  if (flag) {\n    flag = false;\n    console.log('触发请求');\n    setTimeout(() => {\n      flag = true;\n    }, 1000);\n  }\n};\n```\n\n## 一道经典面试题---setTimeout(function(){},0)\n\n```javascript\nfor (var i = 0; i < 3; i++) {\n  setTimeout(function () {\n    console.log(i);\n  }, 0);\n  console.log(i);\n}\n//结果为0 1 2 3 3 3\n```\n\n该题考了三个知识点：作用域，闭包，异步\n\n先简化此题\n\n```javascript\nsetTimeout(function () {\n  console.log(1);\n}, 0);\nconsole.log(2);\n//先打印2，再打印1\n```\n\n因为使用 var，是 es5 里面的内容，所以没有块级作用域\n\n```javascript\nfor (var i = 0; i < 3; i++) {}\nconsole.log(i);\n//输出3\n```\n\n怎么保证能弹出 0,1,2\n\n```javascript\nfor (var i = 0; i < 3; i++) {\n  setTimeout(\n    (function (i) {\n      return function () {\n        console.log(i);\n      };\n    })(i),\n    0\n  ); //改为立即执行的函数\n  console.log(i);\n}\n//输出为0,1,2,0,1,2\n```\n## 实现一个简单的数组去重\n\n```js\nlet arr =[1,2,3,2,4,2,1,3]\narr.reduce((accumulator, currentValue) => {\n    if (!accumulator.includes(currentValue)) {\n      return  [ ...accumulator, currentValue ]\n    }\n    return accumulator\n}, [])\n```\n\n## 对范围内的所有数字求和\n我们将传递给您一个包含两个数字的数组。返回这两个数字的总和加上它们之间所有数字的总和。最低的数字并不总是最先出现的。\n例如，sumAll([4,1])应该返回，10因为 1 到 4（包括 1 和 4）之间的所有数字的总和是10。\n```js\nfunction sumAll(arr) {\n  let sumBetween = 0;\n  for (let i = Math.min(...arr); i <= Math.max(...arr); i++) {\n    sumBetween += i;\n  }\n  return sumBetween;\n}\n\nsumAll([1, 4]);\n```\n```js\nfunction sumAll(arr) {\n  const [first, last] = [...arr].sort((a, b) => a - b);\n  return first !== last\n    ? first + sumAll([first + 1, last])\n    : first;\n}\n\nsumAll([1, 4]);\n```\n```js\nfunction sumAll(arr) {\n  let max = Math.max(arr[0], arr[1]);\n  let min = Math.min(arr[0], arr[1]);\n  let sumBetween = 0;\n  for (let i = min; i <= max; i++) {\n    sumBetween += i;\n  }\n  return sumBetween;\n}\n\nsumAll([1, 4]);\n```\n## 找出字符串中最长的单词\n\n```js\n// 解法一\n// 使用reduce进行遍历，将单词长度存到longest里面，最后返回longest\nfunction findLongestWordLength(str) {\n  let arr = str.split(' ')\n  return arr.reduce((longest, word) => {\n    return Math.max(longest, word.length)\n  }, 0)\n}\n// 解法二\n// 使用map进行遍历\nfunction findLongestWordLength(str) {\n  return Math.max(...str.split(' ').map(word=>word.length))\n}\n\nfindLongestWordLength(\"The quick brown fox jumped over the lazy dog\");\n```\n\n## 求每个数组中最大的值并将这些值重新放入一个新数组中\n\n```js\n//解法一\nfunction largestOfFour(arr) {\n  return arr.map((group) => {\n    return group.reduce((prev, current) => {\n      return current > prev ? current : prev;\n    });\n  });\n} \n//解法2\nfunction largestOfFour(arr) {\n  return arr.reduce((newArr, arr) => {\n    let max = Math.max(...arr)\n    return [...newArr, max];\n  }, []);\n}\n\nlargestOfFour([[4, 5, 1, 3],[13, 27, 18, 26],[32, 35, 37, 39],[1000, 1001, 857, 1]])\n```\n\n## 返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\n\n```js\n// 解法一：我们正在使整个字符串小写，然后将其转换为数组。然后我们使用 map 函数将小写字符替换为大写。最后，我们使用join方法返回字符串。\nfunction titleCase(str) {\n  var convertToArray = str.toLowerCase().split(\" \");\n  var result = convertToArray.map(function(val) {\n    return val.replace(val.charAt(0), val.charAt(0).toUpperCase());\n  });\n  return result.join(\" \");\n}\n\ntitleCase(\"I'm a little tea pot\");\n\n// 解法二：使用正则表达式\nfunction titleCase(str) {\n  return str.toLowerCase().replace(/(^|\\s)\\S/g, L => L.toUpperCase());\n}\n\ntitleCase(\"I'm a little tea pot\")\n```\n\n## 确认字符串的结尾\n\n检查字符串（第一个参数，`str`）是否以给定的目标字符串（第二个参数，`target`）结尾。\n\n```javascript\n// 解法一\nfunction confirmEnding(str, target) {\n\n  return str.slice(-target.length) === target ? true : false\n}\n\n// 解法二\nfunction confirmEnding(str, target) {\n  // \"Never give up and good luck will find you.\"\n  // -- Falcor\n\n  let re = new RegExp(target + \"$\", \"i\");\n\n  return re.test(str);\n}\n\nconfirmEnding(\"Bastian\", \"n\");\n```\n\n解法一：`str.slice(-target.length)`切割`str`中target.length的长度，加负号标识从结尾开始，判断是否等于target，等于则返回true否则返回false。\n\n解法二：使用正则表达式，`new RegExp(target + \"$\", \"i\")`指判断是否是target字符串结尾，且忽略大小写。\n\n## Return `true` if the string in the first element of the array contains all of the letters of the string in the second element of the array.\n\n```js\nfunction mutation(arr) {\n  return arr[1].toLowerCase().split('').every(letter => {\n    return arr[0].toLowerCase().indexOf(letter) != -1;\n  })\n}\n\nmutation([\"hello\", \"hey\"]);\n```\n\n## 区分两个数组\n\n比较两个数组并返回一个新数组，其中包含仅在两个给定数组之一中找到的任何项目，但不能同时在这两个数组中找到。换句话说，返回两个数组的对称差。\n\n```js\n// 方法一\nfunction diffArray(arr1, arr2) {\n  let newArr = [...arr1, ...arr2]\n  return newArr.filter(item => !arr1.includes(item) || !arr2.includes(item))\n}\n// 方法二\nfunction diffArray(arr1, arr2) {\n  return [...diff(arr1, arr2), ...diff(arr2, arr1)];\n\n  function diff(a, b) {\n    return a.filter(item => b.indexOf(item) === -1);\n  }\n}\ndiffArray([1, 2, 3, 5], [1, 2, 3, 4, 5]);\n```\n\n","slug":"Js代码题","published":1,"updated":"2021-09-12T02:02:55.853Z","_id":"cknzd1p8e0003f4rq7sm8au4s","comments":1,"layout":"post","photos":[],"link":"","content":"<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#123;</span>\n    a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> f <span class=\"token operator\">=</span> <span class=\"token function\">Bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>输出 error，因为<code>return</code>后没有值，即使格式化也没有用，因此下方的<code>Object</code>和<code>return</code>没有关联</p>\n<a id=\"more\"></a>\n\n<h2 id=\"js-将多层嵌套的数组转换为一层数组\"><a href=\"#js-将多层嵌套的数组转换为一层数组\" class=\"headerlink\" title=\"js 将多层嵌套的数组转换为一层数组\"></a>js 将多层嵌套的数组转换为一层数组</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">transfer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">flat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">list</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      next <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> next <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>next<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>next<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>level <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    list <span class=\"token operator\">=</span> <span class=\"token function\">flat</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    level<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><code>let list = this</code>调用时候的数组，在原型链上的东西，使用时即调用本身。</p>\n<h2 id=\"手写防抖节流\"><a href=\"#手写防抖节流\" class=\"headerlink\" title=\"手写防抖节流\"></a>手写防抖节流</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//防抖</span>\n<span class=\"token keyword\">let</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelcetor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\nbtn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'触发请求'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//节流</span>\n<span class=\"token keyword\">let</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelcetor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> flag <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nbtn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    flag <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'触发请求'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      flag <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"一道经典面试题—setTimeout-function-0\"><a href=\"#一道经典面试题—setTimeout-function-0\" class=\"headerlink\" title=\"一道经典面试题—setTimeout(function(){},0)\"></a>一道经典面试题—setTimeout(function(){},0)</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//结果为0 1 2 3 3 3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>该题考了三个知识点：作用域，闭包，异步</p>\n<p>先简化此题</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//先打印2，再打印1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>因为使用 var，是 es5 里面的内容，所以没有块级作用域</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//输出3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>怎么保证能弹出 0,1,2</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//改为立即执行的函数</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//输出为0,1,2,0,1,2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"实现一个简单的数组去重\"><a href=\"#实现一个简单的数组去重\" class=\"headerlink\" title=\"实现一个简单的数组去重\"></a>实现一个简单的数组去重</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">accumulator<span class=\"token punctuation\">,</span> currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>accumulator<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>currentValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span>  <span class=\"token punctuation\">[</span> <span class=\"token operator\">...</span>accumulator<span class=\"token punctuation\">,</span> currentValue <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> accumulator\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"对范围内的所有数字求和\"><a href=\"#对范围内的所有数字求和\" class=\"headerlink\" title=\"对范围内的所有数字求和\"></a>对范围内的所有数字求和</h2><p>我们将传递给您一个包含两个数字的数组。返回这两个数字的总和加上它们之间所有数字的总和。最低的数字并不总是最先出现的。<br>例如，sumAll([4,1])应该返回，10因为 1 到 4（包括 1 和 4）之间的所有数字的总和是10。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> sumBetween <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    sumBetween <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> sumBetween<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">,</span> last<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> first <span class=\"token operator\">!==</span> last\n    <span class=\"token operator\">?</span> first <span class=\"token operator\">+</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>first <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> last<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> first<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> max <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> min <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> sumBetween <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> min<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> max<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    sumBetween <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> sumBetween<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"找出字符串中最长的单词\"><a href=\"#找出字符串中最长的单词\" class=\"headerlink\" title=\"找出字符串中最长的单词\"></a>找出字符串中最长的单词</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 解法一</span>\n<span class=\"token comment\">// 使用reduce进行遍历，将单词长度存到longest里面，最后返回longest</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">findLongestWordLength</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">longest<span class=\"token punctuation\">,</span> word</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>longest<span class=\"token punctuation\">,</span> word<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 解法二</span>\n<span class=\"token comment\">// 使用map进行遍历</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">findLongestWordLength</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">word</span><span class=\"token operator\">=></span>word<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">findLongestWordLength</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The quick brown fox jumped over the lazy dog\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"求每个数组中最大的值并将这些值重新放入一个新数组中\"><a href=\"#求每个数组中最大的值并将这些值重新放入一个新数组中\" class=\"headerlink\" title=\"求每个数组中最大的值并将这些值重新放入一个新数组中\"></a>求每个数组中最大的值并将这些值重新放入一个新数组中</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">//解法一</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">largestOfFour</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">group</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> group<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> current</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> current <span class=\"token operator\">></span> prev <span class=\"token operator\">?</span> current <span class=\"token operator\">:</span> prev<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span> \n<span class=\"token comment\">//解法2</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">largestOfFour</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newArr<span class=\"token punctuation\">,</span> arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">let</span> max <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>newArr<span class=\"token punctuation\">,</span> max<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">largestOfFour</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> <span class=\"token number\">37</span><span class=\"token punctuation\">,</span> <span class=\"token number\">39</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">857</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\"><a href=\"#返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\" class=\"headerlink\" title=\"返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\"></a>返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 解法一：我们正在使整个字符串小写，然后将其转换为数组。然后我们使用 map 函数将小写字符替换为大写。最后，我们使用join方法返回字符串。</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> convertToArray <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> convertToArray<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> val<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm a little tea pot\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 解法二：使用正则表达式</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(^|\\s)\\S</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token parameter\"><span class=\"token constant\">L</span></span> <span class=\"token operator\">=></span> <span class=\"token constant\">L</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm a little tea pot\"</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"确认字符串的结尾\"><a href=\"#确认字符串的结尾\" class=\"headerlink\" title=\"确认字符串的结尾\"></a>确认字符串的结尾</h2><p>检查字符串（第一个参数，<code>str</code>）是否以给定的目标字符串（第二个参数，<code>target</code>）结尾。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 解法一</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">confirmEnding</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token keyword\">return</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>target<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> target <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">// 解法二</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">confirmEnding</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// \"Never give up and good luck will find you.\"</span>\n  <span class=\"token comment\">// -- Falcor</span>\n\n  <span class=\"token keyword\">let</span> re <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>target <span class=\"token operator\">+</span> <span class=\"token string\">\"$\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"i\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> re<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">confirmEnding</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bastian\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>解法一：<code>str.slice(-target.length)</code>切割<code>str</code>中target.length的长度，加负号标识从结尾开始，判断是否等于target，等于则返回true否则返回false。</p>\n<p>解法二：使用正则表达式，<code>new RegExp(target + &quot;$&quot;, &quot;i&quot;)</code>指判断是否是target字符串结尾，且忽略大小写。</p>\n<h2 id=\"Return-true-if-the-string-in-the-first-element-of-the-array-contains-all-of-the-letters-of-the-string-in-the-second-element-of-the-array\"><a href=\"#Return-true-if-the-string-in-the-first-element-of-the-array-contains-all-of-the-letters-of-the-string-in-the-second-element-of-the-array\" class=\"headerlink\" title=\"Return true if the string in the first element of the array contains all of the letters of the string in the second element of the array.\"></a>Return <code>true</code> if the string in the first element of the array contains all of the letters of the string in the second element of the array.</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">mutation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">mutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"区分两个数组\"><a href=\"#区分两个数组\" class=\"headerlink\" title=\"区分两个数组\"></a>区分两个数组</h2><p>比较两个数组并返回一个新数组，其中包含仅在两个给定数组之一中找到的任何项目，但不能同时在这两个数组中找到。换句话说，返回两个数组的对称差。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 方法一</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">diffArray</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr1<span class=\"token punctuation\">,</span> arr2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> newArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>arr2<span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">return</span> newArr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 方法二</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">diffArray</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr1<span class=\"token punctuation\">,</span> arr2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> arr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">diff</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">diffArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","site":{"data":{}},"excerpt":"<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#123;</span>\n    a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> f <span class=\"token operator\">=</span> <span class=\"token function\">Bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>输出 error，因为<code>return</code>后没有值，即使格式化也没有用，因此下方的<code>Object</code>和<code>return</code>没有关联</p>","more":"<h2 id=\"js-将多层嵌套的数组转换为一层数组\"><a href=\"#js-将多层嵌套的数组转换为一层数组\" class=\"headerlink\" title=\"js 将多层嵌套的数组转换为一层数组\"></a>js 将多层嵌套的数组转换为一层数组</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">transfer</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">level</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">flat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">list</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      next <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>next<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> next <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>next<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>next<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>level <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    list <span class=\"token operator\">=</span> <span class=\"token function\">flat</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    level<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><code>let list = this</code>调用时候的数组，在原型链上的东西，使用时即调用本身。</p>\n<h2 id=\"手写防抖节流\"><a href=\"#手写防抖节流\" class=\"headerlink\" title=\"手写防抖节流\"></a>手写防抖节流</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//防抖</span>\n<span class=\"token keyword\">let</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelcetor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\nbtn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'触发请求'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//节流</span>\n<span class=\"token keyword\">let</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelcetor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> flag <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nbtn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    flag <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'触发请求'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      flag <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"一道经典面试题—setTimeout-function-0\"><a href=\"#一道经典面试题—setTimeout-function-0\" class=\"headerlink\" title=\"一道经典面试题—setTimeout(function(){},0)\"></a>一道经典面试题—setTimeout(function(){},0)</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//结果为0 1 2 3 3 3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>该题考了三个知识点：作用域，闭包，异步</p>\n<p>先简化此题</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//先打印2，再打印1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>因为使用 var，是 es5 里面的内容，所以没有块级作用域</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//输出3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>怎么保证能弹出 0,1,2</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">i</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//改为立即执行的函数</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//输出为0,1,2,0,1,2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"实现一个简单的数组去重\"><a href=\"#实现一个简单的数组去重\" class=\"headerlink\" title=\"实现一个简单的数组去重\"></a>实现一个简单的数组去重</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">accumulator<span class=\"token punctuation\">,</span> currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>accumulator<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>currentValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span>  <span class=\"token punctuation\">[</span> <span class=\"token operator\">...</span>accumulator<span class=\"token punctuation\">,</span> currentValue <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> accumulator\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"对范围内的所有数字求和\"><a href=\"#对范围内的所有数字求和\" class=\"headerlink\" title=\"对范围内的所有数字求和\"></a>对范围内的所有数字求和</h2><p>我们将传递给您一个包含两个数字的数组。返回这两个数字的总和加上它们之间所有数字的总和。最低的数字并不总是最先出现的。<br>例如，sumAll([4,1])应该返回，10因为 1 到 4（包括 1 和 4）之间的所有数字的总和是10。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> sumBetween <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    sumBetween <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> sumBetween<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">,</span> last<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> first <span class=\"token operator\">!==</span> last\n    <span class=\"token operator\">?</span> first <span class=\"token operator\">+</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>first <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> last<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> first<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> max <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> min <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> sumBetween <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> min<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> max<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    sumBetween <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> sumBetween<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sumAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"找出字符串中最长的单词\"><a href=\"#找出字符串中最长的单词\" class=\"headerlink\" title=\"找出字符串中最长的单词\"></a>找出字符串中最长的单词</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 解法一</span>\n<span class=\"token comment\">// 使用reduce进行遍历，将单词长度存到longest里面，最后返回longest</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">findLongestWordLength</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">longest<span class=\"token punctuation\">,</span> word</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>longest<span class=\"token punctuation\">,</span> word<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 解法二</span>\n<span class=\"token comment\">// 使用map进行遍历</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">findLongestWordLength</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>str<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">word</span><span class=\"token operator\">=></span>word<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">findLongestWordLength</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The quick brown fox jumped over the lazy dog\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"求每个数组中最大的值并将这些值重新放入一个新数组中\"><a href=\"#求每个数组中最大的值并将这些值重新放入一个新数组中\" class=\"headerlink\" title=\"求每个数组中最大的值并将这些值重新放入一个新数组中\"></a>求每个数组中最大的值并将这些值重新放入一个新数组中</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">//解法一</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">largestOfFour</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">group</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> group<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> current</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> current <span class=\"token operator\">></span> prev <span class=\"token operator\">?</span> current <span class=\"token operator\">:</span> prev<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span> \n<span class=\"token comment\">//解法2</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">largestOfFour</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newArr<span class=\"token punctuation\">,</span> arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">let</span> max <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>newArr<span class=\"token punctuation\">,</span> max<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">largestOfFour</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span> <span class=\"token number\">37</span><span class=\"token punctuation\">,</span> <span class=\"token number\">39</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1001</span><span class=\"token punctuation\">,</span> <span class=\"token number\">857</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\"><a href=\"#返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\" class=\"headerlink\" title=\"返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。\"></a>返回提供的字符串，每个单词的第一个字母大写。确保单词的其余部分是小写的。</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 解法一：我们正在使整个字符串小写，然后将其转换为数组。然后我们使用 map 函数将小写字符替换为大写。最后，我们使用join方法返回字符串。</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> convertToArray <span class=\"token operator\">=</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> convertToArray<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> val<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> val<span class=\"token punctuation\">.</span><span class=\"token function\">charAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm a little tea pot\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 解法二：使用正则表达式</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(^|\\s)\\S</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token parameter\"><span class=\"token constant\">L</span></span> <span class=\"token operator\">=></span> <span class=\"token constant\">L</span><span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">titleCase</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I'm a little tea pot\"</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"确认字符串的结尾\"><a href=\"#确认字符串的结尾\" class=\"headerlink\" title=\"确认字符串的结尾\"></a>确认字符串的结尾</h2><p>检查字符串（第一个参数，<code>str</code>）是否以给定的目标字符串（第二个参数，<code>target</code>）结尾。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 解法一</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">confirmEnding</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token keyword\">return</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>target<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> target <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">// 解法二</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">confirmEnding</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// \"Never give up and good luck will find you.\"</span>\n  <span class=\"token comment\">// -- Falcor</span>\n\n  <span class=\"token keyword\">let</span> re <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>target <span class=\"token operator\">+</span> <span class=\"token string\">\"$\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"i\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> re<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">confirmEnding</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bastian\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>解法一：<code>str.slice(-target.length)</code>切割<code>str</code>中target.length的长度，加负号标识从结尾开始，判断是否等于target，等于则返回true否则返回false。</p>\n<p>解法二：使用正则表达式，<code>new RegExp(target + &quot;$&quot;, &quot;i&quot;)</code>指判断是否是target字符串结尾，且忽略大小写。</p>\n<h2 id=\"Return-true-if-the-string-in-the-first-element-of-the-array-contains-all-of-the-letters-of-the-string-in-the-second-element-of-the-array\"><a href=\"#Return-true-if-the-string-in-the-first-element-of-the-array-contains-all-of-the-letters-of-the-string-in-the-second-element-of-the-array\" class=\"headerlink\" title=\"Return true if the string in the first element of the array contains all of the letters of the string in the second element of the array.\"></a>Return <code>true</code> if the string in the first element of the array contains all of the letters of the string in the second element of the array.</h2><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">mutation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">mutation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hey\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"区分两个数组\"><a href=\"#区分两个数组\" class=\"headerlink\" title=\"区分两个数组\"></a>区分两个数组</h2><p>比较两个数组并返回一个新数组，其中包含仅在两个给定数组之一中找到的任何项目，但不能同时在这两个数组中找到。换句话说，返回两个数组的对称差。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 方法一</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">diffArray</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr1<span class=\"token punctuation\">,</span> arr2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> newArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>arr1<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>arr2<span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">return</span> newArr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>arr1<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>arr2<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 方法二</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">diffArray</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr1<span class=\"token punctuation\">,</span> arr2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">,</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">diff</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">,</span> arr1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">diff</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> b<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">diffArray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"css布局问题","date":"2021-04-05T06:59:37.000Z","_content":"\n# css 布局问题\n\n## 让一个块级元素垂直居中的方法\n\n### 第一种方法\n\n- 利用弹性布局实现，在父容器中添加\n\n  ```css\n  .out {\n    width: 500px;\n    height: 500px;\n    background-color: skyblue;\n    display: flex;\n    align-items: center; /*垂直居中*/\n    /*justify-content: center;*/ /*水平居中*/\n  }\n  .in {\n    width: 100px;\n    height: 100px;\n    background-color: salmon;\n  }\n  ```\n<!--more-->\n### 第二种方法\n\n设置父元素相对定位，子元素`position: absolute;top: 50%;`同时 margin-top 值为-(子元素高度的一半)，\n\n```css\n.out {\n  width: 500px;\n  height: 500px;\n  background-color: skyblue;\n  position: relative;\n}\n.in {\n  width: 100px;\n  height: 100px;\n  background-color: salmon;\n  position: absolute;\n  top: 50%;\n  margin-top: -50px;\n}\n```\n\n### 第三种方法\n\n在父容器中设置`display:flex`，子元素设置`align-self:center`。\n\n### 第四种方法\n\n设置父元素为相对定位，子元素为绝对定位，同时设置子元素的 top,bottom,left,right 值为 0，最后设置`margin:auto;`这能实现块元素的垂直+水平居中\n\n```css\n.out {\n  width: 500px;\n  height: 500px;\n  background-color: skyblue;\n  position: relative;\n}\n.in {\n  width: 100px;\n  height: 100px;\n  background-color: salmon;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n```\n\n## 让一个元素水平居中\n\n### 一：行内元素\n\n```css\ntext-align: center;\n```\n\n### 二：采用 margin\n\n```css\nmargin: 0 auto;\n```\n\n### 三：采用 table 实现\n\n```css\n.main {\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle;\n}\n.box7 {\n  display: inline-block;\n}\n```\n\n### 四：利用父元素的 position\n\n```css\n.content7 {\n  position: relative;\n}\n.contentBo7 {\n  position: absolute;\n  left: 0;\n  right: 0;\n  width: 80%;\n  border: 2px solid red;\n  margin: 0 auto;\n  text-align: center;\n}\n```\n\n## 实现元素水平垂直居中\n\n### 1.绝对定位，利用负边距\n\n利用负边距实现子元素居中(相对于父元素(`position:relative`))，需已知子元素的 width 与 height；且把子元素的 position 设为 absolute，绝对定位；以及设置 left 和 top 为 50%；再加上负边距，margin-left 值为 width 的一半，同样的，margin-top 值为 height 的一半。\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  position: relative;\n}\n.content {\n  background-color: paleturquoise;\n  width: 200px;\n  height: 200px;\n  position: absolute;\n  top: 50%;\n  left: 50;\n  margin-top: -100px;\n  margin-left: -100px;\n  overflow: auto;\n}\n```\n\n### 2.绝对定位，**margin: auto**\n\n使用绝对定位方式\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  position: relative;\n}\n.content {\n  background-color: paleturquoise;\n  width: 200px;\n  height: 200px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  overflow: auto;\n}\n```\n\n### 3.Flex\n\nFlex 布局即为弹性布局，只需将父元素设置三个属性即可。\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n```\n\n### 4.Transform\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  position: relative;\n}\n.content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  -ms-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n}\n```\n\n### 5.Table\n\n模拟表格效果\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  display: table;\n}\n.content {\n  text-align: center;\n  vertical-align: middle;\n  display: teble-cell;\n}\n```\n","source":"_posts/2021-04-05-css布局问题.md","raw":"---\ntitle: css布局问题\ndate: 2021-04-05 14:59:37\ntags:\n\t \t\t- 'css'\n---\n\n# css 布局问题\n\n## 让一个块级元素垂直居中的方法\n\n### 第一种方法\n\n- 利用弹性布局实现，在父容器中添加\n\n  ```css\n  .out {\n    width: 500px;\n    height: 500px;\n    background-color: skyblue;\n    display: flex;\n    align-items: center; /*垂直居中*/\n    /*justify-content: center;*/ /*水平居中*/\n  }\n  .in {\n    width: 100px;\n    height: 100px;\n    background-color: salmon;\n  }\n  ```\n<!--more-->\n### 第二种方法\n\n设置父元素相对定位，子元素`position: absolute;top: 50%;`同时 margin-top 值为-(子元素高度的一半)，\n\n```css\n.out {\n  width: 500px;\n  height: 500px;\n  background-color: skyblue;\n  position: relative;\n}\n.in {\n  width: 100px;\n  height: 100px;\n  background-color: salmon;\n  position: absolute;\n  top: 50%;\n  margin-top: -50px;\n}\n```\n\n### 第三种方法\n\n在父容器中设置`display:flex`，子元素设置`align-self:center`。\n\n### 第四种方法\n\n设置父元素为相对定位，子元素为绝对定位，同时设置子元素的 top,bottom,left,right 值为 0，最后设置`margin:auto;`这能实现块元素的垂直+水平居中\n\n```css\n.out {\n  width: 500px;\n  height: 500px;\n  background-color: skyblue;\n  position: relative;\n}\n.in {\n  width: 100px;\n  height: 100px;\n  background-color: salmon;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n}\n```\n\n## 让一个元素水平居中\n\n### 一：行内元素\n\n```css\ntext-align: center;\n```\n\n### 二：采用 margin\n\n```css\nmargin: 0 auto;\n```\n\n### 三：采用 table 实现\n\n```css\n.main {\n  display: table-cell;\n  text-align: center;\n  vertical-align: middle;\n}\n.box7 {\n  display: inline-block;\n}\n```\n\n### 四：利用父元素的 position\n\n```css\n.content7 {\n  position: relative;\n}\n.contentBo7 {\n  position: absolute;\n  left: 0;\n  right: 0;\n  width: 80%;\n  border: 2px solid red;\n  margin: 0 auto;\n  text-align: center;\n}\n```\n\n## 实现元素水平垂直居中\n\n### 1.绝对定位，利用负边距\n\n利用负边距实现子元素居中(相对于父元素(`position:relative`))，需已知子元素的 width 与 height；且把子元素的 position 设为 absolute，绝对定位；以及设置 left 和 top 为 50%；再加上负边距，margin-left 值为 width 的一半，同样的，margin-top 值为 height 的一半。\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  position: relative;\n}\n.content {\n  background-color: paleturquoise;\n  width: 200px;\n  height: 200px;\n  position: absolute;\n  top: 50%;\n  left: 50;\n  margin-top: -100px;\n  margin-left: -100px;\n  overflow: auto;\n}\n```\n\n### 2.绝对定位，**margin: auto**\n\n使用绝对定位方式\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  position: relative;\n}\n.content {\n  background-color: paleturquoise;\n  width: 200px;\n  height: 200px;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  overflow: auto;\n}\n```\n\n### 3.Flex\n\nFlex 布局即为弹性布局，只需将父元素设置三个属性即可。\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n```\n\n### 4.Transform\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  position: relative;\n}\n.content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n  -ms-transform: translate(-50%, -50%);\n  transform: translate(-50%, -50%);\n}\n```\n\n### 5.Table\n\n模拟表格效果\n\n```css\n.page {\n  width: 100%;\n  height: 600px;\n  background-color: pink;\n  display: table;\n}\n.content {\n  text-align: center;\n  vertical-align: middle;\n  display: teble-cell;\n}\n```\n","slug":"css布局问题","published":1,"updated":"2021-07-26T13:35:36.050Z","_id":"cknzd1p8i0006f4rqdsx34cbu","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"css-布局问题\"><a href=\"#css-布局问题\" class=\"headerlink\" title=\"css 布局问题\"></a>css 布局问题</h1><h2 id=\"让一个块级元素垂直居中的方法\"><a href=\"#让一个块级元素垂直居中的方法\" class=\"headerlink\" title=\"让一个块级元素垂直居中的方法\"></a>让一个块级元素垂直居中的方法</h2><h3 id=\"第一种方法\"><a href=\"#第一种方法\" class=\"headerlink\" title=\"第一种方法\"></a>第一种方法</h3><ul>\n<li><p>利用弹性布局实现，在父容器中添加</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.out</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> skyblue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span> <span class=\"token comment\">/*垂直居中*/</span>\n  <span class=\"token comment\">/*justify-content: center;*/</span> <span class=\"token comment\">/*水平居中*/</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.in</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> salmon<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<a id=\"more\"></a>\n<h3 id=\"第二种方法\"><a href=\"#第二种方法\" class=\"headerlink\" title=\"第二种方法\"></a>第二种方法</h3></li>\n</ul>\n<p>设置父元素相对定位，子元素<code>position: absolute;top: 50%;</code>同时 margin-top 值为-(子元素高度的一半)，</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.out</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> skyblue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.in</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> salmon<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> -50px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"第三种方法\"><a href=\"#第三种方法\" class=\"headerlink\" title=\"第三种方法\"></a>第三种方法</h3><p>在父容器中设置<code>display:flex</code>，子元素设置<code>align-self:center</code>。</p>\n<h3 id=\"第四种方法\"><a href=\"#第四种方法\" class=\"headerlink\" title=\"第四种方法\"></a>第四种方法</h3><p>设置父元素为相对定位，子元素为绝对定位，同时设置子元素的 top,bottom,left,right 值为 0，最后设置<code>margin:auto;</code>这能实现块元素的垂直+水平居中</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.out</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> skyblue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.in</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> salmon<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"让一个元素水平居中\"><a href=\"#让一个元素水平居中\" class=\"headerlink\" title=\"让一个元素水平居中\"></a>让一个元素水平居中</h2><h3 id=\"一：行内元素\"><a href=\"#一：行内元素\" class=\"headerlink\" title=\"一：行内元素\"></a>一：行内元素</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"二：采用-margin\"><a href=\"#二：采用-margin\" class=\"headerlink\" title=\"二：采用 margin\"></a>二：采用 margin</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 auto<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"三：采用-table-实现\"><a href=\"#三：采用-table-实现\" class=\"headerlink\" title=\"三：采用 table 实现\"></a>三：采用 table 实现</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.main</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> table-cell<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">vertical-align</span><span class=\"token punctuation\">:</span> middle<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.box7</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"四：利用父元素的-position\"><a href=\"#四：利用父元素的-position\" class=\"headerlink\" title=\"四：利用父元素的 position\"></a>四：利用父元素的 position</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.content7</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.contentBo7</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 80%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 2px solid red<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"实现元素水平垂直居中\"><a href=\"#实现元素水平垂直居中\" class=\"headerlink\" title=\"实现元素水平垂直居中\"></a>实现元素水平垂直居中</h2><h3 id=\"1-绝对定位，利用负边距\"><a href=\"#1-绝对定位，利用负边距\" class=\"headerlink\" title=\"1.绝对定位，利用负边距\"></a>1.绝对定位，利用负边距</h3><p>利用负边距实现子元素居中(相对于父元素(<code>position:relative</code>))，需已知子元素的 width 与 height；且把子元素的 position 设为 absolute，绝对定位；以及设置 left 和 top 为 50%；再加上负边距，margin-left 值为 width 的一半，同样的，margin-top 值为 height 的一半。</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> paleturquoise<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> -100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> -100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"2-绝对定位，margin-auto\"><a href=\"#2-绝对定位，margin-auto\" class=\"headerlink\" title=\"2.绝对定位，margin: auto\"></a>2.绝对定位，<strong>margin: auto</strong></h3><p>使用绝对定位方式</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> paleturquoise<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"3-Flex\"><a href=\"#3-Flex\" class=\"headerlink\" title=\"3.Flex\"></a>3.Flex</h3><p>Flex 布局即为弹性布局，只需将父元素设置三个属性即可。</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"4-Transform\"><a href=\"#4-Transform\" class=\"headerlink\" title=\"4.Transform\"></a>4.Transform</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-ms-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"5-Table\"><a href=\"#5-Table\" class=\"headerlink\" title=\"5.Table\"></a>5.Table</h3><p>模拟表格效果</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> table<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">vertical-align</span><span class=\"token punctuation\">:</span> middle<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> teble-cell<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","site":{"data":{}},"excerpt":"<h1 id=\"css-布局问题\"><a href=\"#css-布局问题\" class=\"headerlink\" title=\"css 布局问题\"></a>css 布局问题</h1><h2 id=\"让一个块级元素垂直居中的方法\"><a href=\"#让一个块级元素垂直居中的方法\" class=\"headerlink\" title=\"让一个块级元素垂直居中的方法\"></a>让一个块级元素垂直居中的方法</h2><h3 id=\"第一种方法\"><a href=\"#第一种方法\" class=\"headerlink\" title=\"第一种方法\"></a>第一种方法</h3><ul>\n<li><p>利用弹性布局实现，在父容器中添加</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.out</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> skyblue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span> <span class=\"token comment\">/*垂直居中*/</span>\n  <span class=\"token comment\">/*justify-content: center;*/</span> <span class=\"token comment\">/*水平居中*/</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.in</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> salmon<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","more":"<h3 id=\"第二种方法\"><a href=\"#第二种方法\" class=\"headerlink\" title=\"第二种方法\"></a>第二种方法</h3></li>\n</ul>\n<p>设置父元素相对定位，子元素<code>position: absolute;top: 50%;</code>同时 margin-top 值为-(子元素高度的一半)，</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.out</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> skyblue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.in</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> salmon<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> -50px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"第三种方法\"><a href=\"#第三种方法\" class=\"headerlink\" title=\"第三种方法\"></a>第三种方法</h3><p>在父容器中设置<code>display:flex</code>，子元素设置<code>align-self:center</code>。</p>\n<h3 id=\"第四种方法\"><a href=\"#第四种方法\" class=\"headerlink\" title=\"第四种方法\"></a>第四种方法</h3><p>设置父元素为相对定位，子元素为绝对定位，同时设置子元素的 top,bottom,left,right 值为 0，最后设置<code>margin:auto;</code>这能实现块元素的垂直+水平居中</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.out</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 500px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> skyblue<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.in</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> salmon<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"让一个元素水平居中\"><a href=\"#让一个元素水平居中\" class=\"headerlink\" title=\"让一个元素水平居中\"></a>让一个元素水平居中</h2><h3 id=\"一：行内元素\"><a href=\"#一：行内元素\" class=\"headerlink\" title=\"一：行内元素\"></a>一：行内元素</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"二：采用-margin\"><a href=\"#二：采用-margin\" class=\"headerlink\" title=\"二：采用 margin\"></a>二：采用 margin</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 auto<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"三：采用-table-实现\"><a href=\"#三：采用-table-实现\" class=\"headerlink\" title=\"三：采用 table 实现\"></a>三：采用 table 实现</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.main</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> table-cell<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">vertical-align</span><span class=\"token punctuation\">:</span> middle<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.box7</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"四：利用父元素的-position\"><a href=\"#四：利用父元素的-position\" class=\"headerlink\" title=\"四：利用父元素的 position\"></a>四：利用父元素的 position</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.content7</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.contentBo7</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 80%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 2px solid red<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0 auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"实现元素水平垂直居中\"><a href=\"#实现元素水平垂直居中\" class=\"headerlink\" title=\"实现元素水平垂直居中\"></a>实现元素水平垂直居中</h2><h3 id=\"1-绝对定位，利用负边距\"><a href=\"#1-绝对定位，利用负边距\" class=\"headerlink\" title=\"1.绝对定位，利用负边距\"></a>1.绝对定位，利用负边距</h3><p>利用负边距实现子元素居中(相对于父元素(<code>position:relative</code>))，需已知子元素的 width 与 height；且把子元素的 position 设为 absolute，绝对定位；以及设置 left 和 top 为 50%；再加上负边距，margin-left 值为 width 的一半，同样的，margin-top 值为 height 的一半。</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> paleturquoise<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> -100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span> -100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"2-绝对定位，margin-auto\"><a href=\"#2-绝对定位，margin-auto\" class=\"headerlink\" title=\"2.绝对定位，margin: auto\"></a>2.绝对定位，<strong>margin: auto</strong></h3><p>使用绝对定位方式</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> paleturquoise<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"3-Flex\"><a href=\"#3-Flex\" class=\"headerlink\" title=\"3.Flex\"></a>3.Flex</h3><p>Flex 布局即为弹性布局，只需将父元素设置三个属性即可。</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"4-Transform\"><a href=\"#4-Transform\" class=\"headerlink\" title=\"4.Transform\"></a>4.Transform</h3><pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-webkit-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">-ms-transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"5-Table\"><a href=\"#5-Table\" class=\"headerlink\" title=\"5.Table\"></a>5.Table</h3><p>模拟表格效果</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\"><span class=\"token selector\">.page</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> pink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> table<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">vertical-align</span><span class=\"token punctuation\">:</span> middle<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> teble-cell<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"前端基础知识","date":"2021-03-07T03:03:00.000Z","desecription":"前端基础知识","_content":"\n## 前端基础知识整理\n\n### 1.typeof 返回的数据类型\n\ntypeof 返回的数据类型包括 undefined、 string、number、boolean、symbol、object、function、bigInt 类型\n\n<!--more-->\n\n### 2.检查数组的方式\n\n1. isArray()方法\n2. Object.prototype.toString.call()\n3. instanceof Array\n4. constructor\n5. typeof()\n\n### 3.js 中的 call、apply、bind 方法的区别\n\njs 中的 call apply bind 都是用来改变方法上下文(context)，就是可以使函数可以被其他对象调用。\n\n```javascript\nlet hxy = {\n  name: 'hxy',\n  age: 22,\n  say(x, y) {\n    console.log(this.name + ':' + this.age + x + y);\n  },\n};\nlet yyw = {\n  name: 'yyw',\n  age: 18,\n};\nhxy.say(1, 2); // 实际上是调用的this.say() this指的是hxy\nhxy.say.apply(yyw, [1, 2]); // 调用apply后this改变指向，this指向yyw，相当于yyw.say()\nhxy.say.call(yyw, 1, 2);\nhxy.say.bind(yyw, 1, 2)();\n```\n\n运行结果：\n\n```javascript\nhxy: 2212;\nyyw: 1812;\nyyw: 1812;\nyyw: 1812;\n```\n\n## 4.闭包\n\n简单来说，闭包就是指能读取其他函数内部变量的函数\n闭包的简单应用:\n\n```javascript\nfunction f1() {\n  var n = 99;\n  function f2() {\n    return n;\n  }\n  return f2;\n}\nvar result = f1();\nconsole.log(result());\n//返回n = 99;\n```\n\n运行结果返回了 f1 中的变量 n\n\n闭包有三个特性:\n\n> 1.函数嵌套函数 2.函数内部可以引用外部的参数和变量 3.参数和变量不会被垃圾回收机制回收\n\n使用闭包主要是为了设计私有的方法和变量。闭包的优点是可以避免全局变量的污染，缺点是闭包会常驻内存，会增大内存使用量，使用不当很容易造成内存泄露。\n\n### 5.js 事件机制\n\nDOM 事件流分为三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段\n**事件捕获（event capturing）**：通俗的理解就是，当鼠标点击或者触发 dom 事件时，浏览器会从根节点开始由外到内进行事件传播，即点击了子元素，如果父元素通过事件捕获方式注册了对应的事件的话，会先触发父元素绑定的事件。\n**事件冒泡（dubbed bubbling）**：与事件捕获恰恰相反，事件冒泡顺序是由内到外进行事件传播，直到根节点。\ndom 标准事件流的处理顺序为先捕获、再冒泡\n\n### 6.常用的处理字符串方法\n\n**.charAt(index)**:获取字符串索引对应的具体字符，参数 index 介于 0~length-1 之间。\n\n**.indexOf(value,index)**:返回字符串第一次出现指定值的索引，没有找到指定值就返回-1。\n字符串、数组都适用。\nvalue：必需，规定需检索的字符串值。可选的整数参数。\nindex：规定在字符串中开始检索的位置。它的合法取值是 0 到 stringObject.length - 1。如省略该参数，则将从字符串的首字符开始检索。\n\n**.substr(start,length)**:返回从指定位置开始到指定字符数的字符。\n\n![img](https://upload-images.jianshu.io/upload_images/16573783-49cd30241aecbd9b.png?imageMogr2/auto-orient/strip|imageView2/2/w/895/format/webp)\n\n**.substring(indexStart,indexEnd)**:返回一个字符串从开始索引到结束索引之间的新字符串。\n\n![img](https://upload-images.jianshu.io/upload_images/16573783-263e9cc74899752c.png?imageMogr2/auto-orient/strip|imageView2/2/w/877/format/webp)\n\n**.split() 字符串**：使用指定的分隔符字符串将一个[`String`](https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FString)对象分割成子字符串数组，以一个指定的分割字串来决定每个拆分的位置。\n\n**.replace() 字符串**：方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串\n\n**toLowerCase()**:会将调用该方法的字符串值转为小写形式，并返回。\n\n**toUpperCase()**:方法将调用该方法的字符串转为大写形式并返回（如果调用该方法的值不是字符串类型会被强制转换）。\n\n## 7.window 对象 和 document 对象\n\nwindow 对象：代表浏览器中一个打开的窗口\ndocument 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象\n\ndocument 对象是 window 对象的一部分，可以有 window. document 来访问\n\n## html 部分\n\n## 1.说说你对语义化的理解？\n\n```\n1，去掉或者丢失样式的时候能够让页面呈现出清晰的结构\n2，有利于SEO：和搜索引擎建立良好沟通，有助于爬虫抓取更多的有效信息：爬虫依赖于标签来确定上下文和各个关键字的权重；\n3，方便其他设备解析（如屏幕阅读器、盲人阅读器、移动设备）以意译的方式来渲染网页；\n4，便于团队开发和维护，语义化更具可读性，是网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。\n```\n\n## 2.Doctype 作用? 严格模式与混杂模式如何区分？它们有何意义?\n\n```\n（1）<!DOCTYPE> 声明位于文档中的最前面，处于 <html> 标签之前。告知浏览器以何种模式来渲染文档。\n\n（2）、严格模式的排版和 JS 运作模式是  以该浏览器支持的最高标准运行。\n\n（3）、在混杂模式中，页面以宽松的向后兼容的方式显示。模拟老式浏览器的行为以防止站点无法工作。\n\n（4）、DOCTYPE不存在或格式不正确会导致文档以混杂模式呈现。\n```\n\n## 3.你知道多少种 Doctype 文档类型？\n\n```\n 该标签可声明三种 DTD 类型，分别表示严格版本、过渡版本以及基于框架的 HTML 文档。\n HTML 4.01 规定了三种文档类型：Strict、Transitional 以及 Frameset。\n XHTML 1.0 规定了三种 XML 文档类型：Strict、Transitional 以及 Frameset。\nStandards （标准）模式（也就是严格呈现模式）用于呈现遵循最新标准的网页，而 Quirks\n （包容）模式（也就是松散呈现模式或者兼容模式）用于呈现为传统浏览器而设计的网页。\n```\n\n## 4.DOM 操作——怎样添加、移除、移动、复制、创建和查找节点。\n\n```\n（1）创建新节点\n\n      createDocumentFragment()    //创建一个DOM片段\n\n      createElement()   //创建一个具体的元素\n\n      createTextNode()   //创建一个文本节点\n\n（2）添加、移除、替换、插入\n\n      appendChild()\n\n      removeChild()\n\n      replaceChild()\n\n      insertBefore() //在已有的子节点前插入一个新的子节点\n\n（3）查找\n\n      getElementsByTagName()    //通过标签名称\n\n      getElementsByName()    //通过元素的Name属性的值(IE容错能力较强，会得到一个数组，其中包括id等于name值的)\n\n      getElementById()    //通过元素Id，唯一性\n```\n\n## 5.html5 有哪些新特性、移除了那些元素？如何处理 HTML5 新标签的浏览器兼容问题？如何区分 HTML 和 HTML5？\n\n```\n* HTML5 现在已经不是 SGML 的子集，主要是关于图像，位置，存储，多任务等功能的增加。\n\n* 拖拽释放(Drag and drop) API\n  语义化更好的内容标签（header,nav,footer,aside,article,section）\n  音频、视频API(audio,video)\n  画布(Canvas) API\n  地理(Geolocation) API\n  本地离线存储 localStorage 长期存储数据，浏览器关闭后数据不丢失；\n  sessionStorage 的数据在浏览器关闭后自动删除\n\n  表单控件，calendar、date、time、email、url、search\n  新的技术webworker, websocket, Geolocation\n\n* 移除的元素\n\n纯表现的元素：basefont，big，center，font, s，strike，tt，u；\n\n对可用性产生负面影响的元素：frame，frameset，noframes；\n\n支持HTML5新标签：\n\n* IE8/IE7/IE6支持通过document.createElement方法产生的标签，\n  可以利用这一特性让这些浏览器支持HTML5新标签，\n\n  浏览器支持新标签后，还需要添加标签默认的样式：\n\n* 当然最好的方式是直接使用成熟的框架、使用最多的是html5shim框架\n   <!--[if lt IE 9]>\n   <script> src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"</script>\n   <![endif]-->\n如何区分：DOCTYPE声明新增的结构元素功能元素\n```\n\n## 6.documen.write 和 innerHTML 的区别\n\n```\ndocument.write只能重绘整个页面\n\ninnerHTML可以重绘页面的一部分\n```\n\n## 7.什么是 HTML5 以及和 HTML 的区别是什么\n\n### 概念\n\nHTML5 是 HTML 的新标准，其主要目标是无需任何额外的插件如 Flash、Sliverlight 等，就可以传输所有内容。他囊括了动画、视频、丰富的图形用户界面等。\n\n### 区别\n\n#### 从语义结构上看：\n\n- HTML4.0：没有体现结构语义化的标签，通常都是是这样来命名的`<div id=\"header\"></div>`，这样表示网站的头部。\n- HTML5：在语义上却有很大的优势。提供了一些新的标签，比如<header><article><footer><aside>\n\n## 8.行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？\n\n- 行内元素： `a`, `span`, `img`, `input`, `select`, `strong`;\n- 块级元素： `div`, `ul`, `li`, `dl`, `dt`, `dd`, `h1-5`, `p`等；\n- 空元素： `<br>`, `<hr>`, `<img>`, `<link>`, `<meta>`;\n\n## 9.WebSocket 的实现和应用\n\n### 什么是 webSocket？\n\nWebSocket 是 HTML5 中的协议，支持持久连续，http 协议不支持持久性连接。\n\n### WebSocket 是什么样的协议，具体有什么优点。\n\nWebSocket 是基于 Http 协议的，或者说借用了 Http 协议来完成一部分握手，在握手阶段与 Http 是相同的。\n\n## 10.HTML 元素如何体现其嵌套关系\n\n- 块级元素可以包含行内元素\n- 块级元素不一定能包含块级元素\n- 行内元素一般不能包含块级元素（a 元素例外）\n\n## 11.对 HTML5 有什么了解？\n\n- 良好的移动性，以移动设备为主；\n- 响应式设计，以适应自动变化的屏幕尺寸\n- 支持离线缓存技术，webStorage 本地缓存\n- 新增的地理位置等\n- 新增 webSocket/webwork 技术\n\n# CSS 部分\n\n## 1.标准的 CSS 盒子模型及其和低版本的 IE 盒子模型的区别？\n\n标准（W3C）盒子模型：`width` = 内容宽度`（content） + border + padding + margin`\n\n低版本 IE 盒子模型： `width` = 内容宽度`（content + border + padding）+ margin`\n\n## 2.display 有哪些值？他们的作用是什么？\n\n- none：使用后元素将不会显示\n- grid：定义一个容器属性为网格布局\n- flex：定义一个弹性布局\n- block：使用后元素将变为块级元素显示，元素前后带有换行符\n- inline：display 默认值。使用后原色变为行内元素显示，前后无换行符\n- list-item：使用后元素作为列表显示\n- table：使用后将作为块级表格显示（类似<table>），前后带有换行符\n\n## 3.用 CSS 创建一个三角形\n\n```html\n<style>\n  .content {\n    width: 0;\n    height: 0;\n    border-top: 40px solid transparent;\n    border-left: 40px solid transparent;\n    border-right: 40px solid transparent;\n    border-bottom: 40px solid #ff0000;\n  }\n</style>\n\n<div class=\"content\"></div>\n```\n\n## 4.什么是响应式设计？响应式设计的基本原理是什么？\n\n响应式网站设计是一个网站能够兼容多个终端，而不是为每一个终端做一个特定的版本。\n\n关于原理：基本原理是通过媒体查询（@media）查询检测不同的设备屏幕尺寸做处理。\n\n关于兼容：页面头部必须有 meta 生命的 viewport\n\n## 5.浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\n\n非 IE 浏览器下，容器不设定高度且子元素浮动时，容器高度不能被内容撑开。此时，内容会溢出到容器外面而影响布局。此类现象被称为浮动（溢出）\n\n原理：\n\n- 浮动元素脱离文档流，不占据空间\n- 浮动元素碰到包含它的边框或其他浮动元素的边框停留。\n\n浮动会带来的问题：\n\n- 父级元素的高度将会无法被，会影响与父级元素同级的元素\n- 与浮动元素同级的非浮动元素（内联元素）会跟随其后\n- 若浮动的元素不是第一个元素，则该元素之前的元素也要浮动，否则会影响页面的显示结构。\n\n清除方式：\n\n- 父级盒子定义高度（height）\n- 最后一个浮动元素后面加一个 div 空标签，并且添加样式 clear:both\n- 包含浮动元素的父级标签添加样式 overflow 为 hidden/both\n\n## 6.::before 和:after 中双冒号和单冒号有什么区别？解释一下这 2 个伪元素的作用\n\n- 冒号用于 css3 伪类，双冒号用于 css3 伪元素\n- ::before 就是以一个子元素的存在，定义在元素主体内容之前的一个伪元素，并不存在于 dom 之中，只存在在页面之中。\n\n## 7.display,float,position 有什么关系？\n\n- 如果 `display` 为`none`，那么`position`和`float`都不起作用，元素不显示；\n- 如果`position`值为`absolute`或者`fixed`，元素绝对定位，`float`的计算值为`none`，`display`根据下面的表格进行调整；\n- 如果`float`不是`none`，框是浮动的，`display`根据下表进行调整；\n- 其他情况下`display`的值为指定值 总结起来：绝对定位、浮动、根元素都需要调整 `display`；\n\n## 8.什么是回流（重排）和重绘以及其区别？\n\n- 回流（重排）reflow：当 render tree 中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变时而需要重新构建；\n- 重绘(repaint)：当 redner tree 中的一些元素需要更新属性，而这些属性只影响元素的外观，网格，而不会影响布局时，称其为重绘，例如颜色改变等。\n- **每个页面至少需要引发一次重排+重绘，而且重排(回流)一定会引发重绘。**\n\n# 计算机网络知识\n\n## 1.浏览器内核\n\n浏览器主要分为两个部分：渲染引擎和 JS 引擎\n\n渲染引擎：主要负责获取页面内容和排班渲染页面\n\nJS 引擎：解析和执行 JS 来实现页面的动态效果，以及交互内容。\n\n## 2.TCP 三次握手和四次挥手\n\n为什么要进行三次握手：为了确认对方的发送和接受能力。\n\n### 三次握手\n\n三次握手主要流程：\n\n- 一开始双方处于 CLOSED 状态，然后服务端开始监听某个端口进入 LISTEN 状态\n- 然后客户端主动发起连接，发送 SYN，然后自己变为 SYN-SENT，seq=x\n- 服务端收到之后，返回 SYN seq=y 和 ACk ack=x+1(对于客户端发来的 SYN)，自己变成 SYN-REVD\n- 之后客户端发送 ACK seq= x+ 1,ack= y + 1 给服务端，自己变成 EASTBLISHED 状态，服务端收到 ACK，也进入 ESTABLISHED\n\n### 为什么不是两次\n\n> 无法确认客户端的接收能力。\n\n### 四次挥手\n\n- 一开始都处于 ESTABLISH 状态，然后客户端发送 FIN 报文，带上 seq = p,状态变为 FIN-WAIT-1\n- 服务端收到之后，发送 ACK 确认，ack = p + 1,然后进入 CLOSE-WAIT 状态\n- 客户端收到之后进入 FIN-WAIT-2 状态\n- 过了一会等数据处理完，再次发送 FIN、ACK、seq = q ,ack = p +1，进入 LAST-ACK 阶段\n- 客户端收到 FIN 之后，客户端进入 TIME_WAIT（等待 2MSL），然后发送 ACK 给服务端 ack= 1+1\n- 服务端收到之后进入 CLOSED 状态\n\n## 3.浏览器输入 url 之后发生了什么\n\n1. 浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址；\n2. 建立 TCP 连接（三次握手）；\n3. 浏览器发出读取文件（URL 中域名后面部分对应的文件）的 HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器；\n4. 服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器；\n5. 释放 TCP 连接（四次挥手）\n6. 浏览器将该 html 文本导出并显示内容\n\n## 4.Cookie、sessionStorage、localStorage 区别\n\n共同点：都是保存在浏览器端，且同源的。\n\n区别：\n\n1. cookie 数据始终在同源的 http 请求中携带，即 cookie 在浏览器中和服务器间来回传递。sessionStorage 和 localStorage 不会自动把数据发给服务器，仅在本地保存。\n2. cookie 数据不能超过 4k(适合保存小数据)。sessionStorage 和 localStorage 容量较大。\n3. 数据有效期不同\n   - sessionStorage:仅在当前浏览器窗口关闭前有效。\n   - localStorage:始终有效，窗口或浏览器关闭也一直保存，需手动清除。\n   - cookie 只在设置的 cookie 过期时间之前一直有效，即使窗口或浏览器关闭。\n4. 作用域不同。\n   - sessionStorage 不在不同的浏览器窗口中共享。\n   - localStorage 在所有同源窗口中都是共享的。\n   - cookie 也是在所有同源窗口中都是共享的。\n5. 应用场景\n   - localStorage：常用于长期登录（+判断用户是否已登录），适合长期保存在本地的数据。\n   - sessionStorage：敏感账号一次性登录。\n   - cookie 与服务器交互。\n\n## 5.原型和原型链\n\n创建了一个函数就会为其创建一个 prototype 属性，指向这个函数的原型对象，原型对象会自动获得 constructor 属性，指向 prototype 属性所在函数。\n\n当一个对象调用某个方法或者属性的时候，先在自身查找，如果找到就调用，如果没有就顺着**proto**到原型对象中查找，如果还没有就继续去原型的原型中查找，一直到 null，这样形成一条链叫做原型链。\n\n## 6.作用域和闭包\n\n作用域可理解为该上下文中声明的**变量和声明的作用范围**。\n\n闭包属于一种特殊的作用域，称为静态作用域。它的定义可以理解为：**父函数被销毁**的情况下，返回出的子函数仍然可以继续访问到父级的变量对象，这样的函数称为闭包。\n\n- 闭包会产生一个很经典的问题：\n  - 多个子函数的都是同时指向父级，是完全共享的。因此当父级的变量对象被修改时，所有子函数都受到影响。\n\n## 7.this 的指向问题\n\n口诀：箭头函数、new、bind、apply 和 call、欧比届点（obj.）、直接调用、不在函数里。\n\n### 1.箭头函数\n\n箭头函数 this 不会被改变\n\n1. 创建箭头函数时，就已经确定了它的 this 指向。\n2. 箭头韩式内的 this 指向**外层的 this。**\n\n### 2.new\n\n**当使用 new 关键字调用函数时，函数中的 this 一定是 JS 创建的新对象**。\n\n### 3.bind\n\nbind 指 Function.prototype.bind()\n\n#### 多次 bind 时只认第一次 bind 的值\n\n```javascript\nfunction func() {\n  console.log(this);\n}\nfunc.bind(1).bind(2)(); //1\n```\n\n#### 箭头函数中 this 不会被修改\n\n```javascript\nfunc = () => {\n  console.log(this);\n};\nfunc.bind(1)(); //window 口诀1优先\n```\n\n### 4.apply 和 call\n\n`apply()`和`call()`的第一个参数都是 this，区别在于通过 apply 调用时实参是放到数组中的，而通过 call 调用时实参是逗号分隔的。\n\n#### bind 函数中 this 不会被修改\n\n```javascript\nfunc = () => {\n  //这里this指向取决于外层this，参考口诀7不在函数里\n  console.log(this);\n};\nfunc.apply(1);\n```\n\n### 5.欧比届点(obj.)\n\n```javascript\nfunction func() {\n  console.log(this.x);\n}\nobj = { x: 1 };\nobj.func = func;\nobj.func(); //1\n```\n\n### 6.直接调用\n\n在函数不满足前面的场景，被直接调用时，this 将指向全局对象。在浏览器环境中全局对象是 Window\n\n```javascript\nfunction func() {\n  console.log(this);\n}\nfunc(); //window\n```\n\n### 7.不在函数里\n\n不在函数中的场景，可分为浏览器的 `<script />` 标签里，或 Node.js 的模块文件里。\n\n1. 在 `<script />` 标签里，this 指向 Window。\n2. 在 Node.js 的模块文件里，this 指向 Module 的默认导出对象，也就是 module.exports。\n\n## 9.数组去重\n\n1. 定义一个新数组，并存放原数组的第一个元素，然后将元素组一一和新数组的元素对比，若不同则存放在新数组中。\n2. 先将原数组排序，再与相邻的进行比较，如果不同则存入新数组。\n3. 利用对象属性存在的特性，如果没有该属性则存入新数组。\n\n```javascript\nArray.prototype.unique = function () {\n  let arr = this,\n    obj = {},\n    result = [];\n  for (let i = 0; i < arr.length; i++) {\n    if (!obj[arr[i]]) {\n      //如果能查找到，证明数组元素重复了\n      obj[arr[i]] = 1;\n      result.push(arr[i]);\n    }\n  }\n  return result;\n};\nlet a = [1, 2, 3, 1, 2, 3];\nlet b = a.unique();\nconsole.log(b); //打印结果：(3)[1,2,3]\n```\n\n4. 使用 es6 set,Set 数据结构，它类似于数组，其成员的值都是唯一的\n\n   ```javascript\n   let arr = [1, 2, 3, 4, 3, 4, 5, 2, 6];\n   console.log([...new Set(arr)]);\n   ```\n\n5. 使用 filter 过滤函数去重\n\n   ```javascript\n   let arr = [1, 2, 6, 4, 3, 4, 5, 2, 6];\n   console.log(arr.filter((v, i, arr) => arr.indexOf(v) === i));\n   ```\n\n## 10.防抖、节流\n\n防抖：触发高频函数事件后，n 秒内函数只能执行一次，如果在 n 秒内这个事件再次被触发的话，那么会重新计算时间。\n\n​ 通常使用场景：用户输入，只需再输入完成后做一次输入校验即可。\n\n节流：指连续触发事件但是在 n 秒内只执行一次函数。节流会稀释函数的执行频率。\n\n​ 通常使用场景:滚动条事件或者 resize 事件，通常每隔 100~500ms 执行一次即可。\n\n```javascript\n//防抖\nfunction debounce(func,wait){\n\tlet timeout;\n\treturn function(){\n\tif(itmeout){\n\tclearTimeout(timeout)\n\t}\n\ttimeout = setTimeout(()=>{\n\tfunc.apply(this,arguments)\n\t},wait}\n\t}\n}\n//节流\nfunction throttle(func,wait){\n\tlet timeout;\n\treturn function(){\n\tif(!timeout){\n\t\ttimeout = setTimeout(()=>{\n\t\ttimeout = null;\n\t\tfunc.apply(this, arguments)\n\t\t},wait)\n\t}\n\t}\n}\n```\n\n## 11.ES6 的新特性\n\n1. 声明 let / const\n2. 解构赋值\n3. class/extend:类声明与继承\n4. Set / Map：新的数据结构\n5. 箭头函数\n6. promise\n7. async/await\n8. 数组/对象的扩展\n\n## 12.跨域\n\n### 1.为什么会出现跨域问题\n\n> 同源策略限制 不同源会造成跨域。以下任意一种情况不同，都是不同源。\n\n### 2.什么情况才算做跨域\n\n非同源请求，均为跨域。名词解释：同源——如果两个页面拥有相同的协议(protocol)，端口(port)和主机(host)，那么这两个页面属于同一个源(origin)。\n\n### 3.为什么有跨域需求？\n\n场景——工程服务化后，不同职责的服务分散在不同的工程中，往往这些工程的域名是不同的，但一个需求可能需要对应多个服务\n\n### 4.如何实现跨域\n\n### 三种跨域方法\n\n- JSONP\n- CORS\n- postMessage\n\n#### 1.JSONP 只能解决 get 跨域\n\n**单纯地为了实现跨域请求而创造的一个 trick。**\n\n**原理：动态创建一个 script 标签。利用 script 标签的 src 属性不受同源策略限制。因为所有的 src 属性和 href 属性都不受同源策略限制。可以请求第三方服务器数据内容。**\n\n##### 步骤\n\n1. 去创建一个 script 标签\n\n2. script 的 src 属性设置接口地址\n\n3. 接口参数，必须要带一个自定义函数名，要不然后台无法返回数据\n\n4. 通过定义函数名器接受后台返回数据\n\n   ```javascript\n   //去创建一个script标签\n   var script = document.createElement('script');\n   //script的src属性设置接口地址 并带一个callback回调函数名称\n   script.src = 'http://127.0.0.1:8888/index.php?callback=jsonpCallback';\n   //插入到页面\n   document.head.appendChild(script);\n   //通过定义函数名去接收后台返回数据\n   function jsonpCallback(data) {\n     //注意  jsonp返回的数据是json对象可以直接使用\n     //ajax  取得数据是json字符串需要转换成json对象才可以使用。\n   }\n   ```\n\n#### 2.CORS：跨域资源共享\n\n- **原理：服务器设置 Access-Control-Allow-OriginHTTP 响应头之后，浏览器将会允许跨域请求**\n- **限制：浏览器需要支持 HTML5，可以支持 POST，PUT 等方法兼容 ie9 以上**\n\n```html\n需要后台设置 Access-Control-Allow-Origin: * //允许所有域名访问，或者\nAccess-Control-Allow-Origin: http://a.com //只允许所有域名访问\n```\n\n#### 3.设置 document.domain\n\n- **原理：相同主域名不同子域名下的页面，可以设置 document.domain 让他们同域**\n- **限制：同域 document 提供的是页面间的互操作，需要载入 iframe 页面**\n\n```javascript\n// URL http://a.com/foo\nvar ifr = document.createElement('iframe');\nifr.src = 'http://b.a.com/bar';\nifr.onload = function(){\n    var ifrdoc = ifr.contentDocument || ifr.contentWindow.document;\n    ifrdoc.getElementsById(\"foo\").innerHTML);\n};\n\nifr.style.display = 'none';\ndocument.body.appendChild(ifr);\n\n```\n\n### 4.用 Apache 做转发(逆向代理)，让跨域变同域\n\n## 13.TCP/IP 分为几层？各层的作用是什么?\n\n1. 应用层 2.传输层 3.网络层 4.网络接口层\n\n- 1、应用层\n  - TCP/IP 协议族在这一层面有着很多协议来支持不同的应用，许多大家所熟悉的基于 Internet 的应用的实现就离不开这些协议。如我们进行万维网（WWW）访问用到了 HTTP 协议、文件传输用 FTP 协议、电子邮件发送用 SMTP、域名的解析用 DNS 协议、远程登录用 Telnet 协议等等，都是属于 TCP/IP 应用层的；就用户而言，看到的是由一个个软件所构筑的大多为图形化的操作界面，而实际后台运行的便是上述协议。（FTP、SMTP、telnet、DNS、tftp）\n- 2、传输层\n  - 这一层的的功能主要是提供应用程序间的通信，TCP/IP 协议族在这一层的协议有 TCP 和 UDP。（UDP）\n- 3、 网络层\n  - 是 TCP/IP 协议族中非常关键的一层，主要定义了 IP 地址格式，从而能够使得不同应用类型的数据在 Internet 上通畅地传输，IP 协议就是一个网络层协议。（IP 数据包）\n- 4、网络接口层\n  - 这是 TCP/IP 软件的最低层，负责接收 IP 数据包并通过网络发送之，或者从网络上接收物理帧，抽出 IP 数据报，交给 IP 层。(帧，网络接口协议)\n","source":"_posts/前端基础知识整理.md","raw":"---\ntitle: 前端基础知识\ndate: 2021-03-07 11:03\ndesecription: 前端基础知识\ntags:\n  - 'front'\n---\n\n## 前端基础知识整理\n\n### 1.typeof 返回的数据类型\n\ntypeof 返回的数据类型包括 undefined、 string、number、boolean、symbol、object、function、bigInt 类型\n\n<!--more-->\n\n### 2.检查数组的方式\n\n1. isArray()方法\n2. Object.prototype.toString.call()\n3. instanceof Array\n4. constructor\n5. typeof()\n\n### 3.js 中的 call、apply、bind 方法的区别\n\njs 中的 call apply bind 都是用来改变方法上下文(context)，就是可以使函数可以被其他对象调用。\n\n```javascript\nlet hxy = {\n  name: 'hxy',\n  age: 22,\n  say(x, y) {\n    console.log(this.name + ':' + this.age + x + y);\n  },\n};\nlet yyw = {\n  name: 'yyw',\n  age: 18,\n};\nhxy.say(1, 2); // 实际上是调用的this.say() this指的是hxy\nhxy.say.apply(yyw, [1, 2]); // 调用apply后this改变指向，this指向yyw，相当于yyw.say()\nhxy.say.call(yyw, 1, 2);\nhxy.say.bind(yyw, 1, 2)();\n```\n\n运行结果：\n\n```javascript\nhxy: 2212;\nyyw: 1812;\nyyw: 1812;\nyyw: 1812;\n```\n\n## 4.闭包\n\n简单来说，闭包就是指能读取其他函数内部变量的函数\n闭包的简单应用:\n\n```javascript\nfunction f1() {\n  var n = 99;\n  function f2() {\n    return n;\n  }\n  return f2;\n}\nvar result = f1();\nconsole.log(result());\n//返回n = 99;\n```\n\n运行结果返回了 f1 中的变量 n\n\n闭包有三个特性:\n\n> 1.函数嵌套函数 2.函数内部可以引用外部的参数和变量 3.参数和变量不会被垃圾回收机制回收\n\n使用闭包主要是为了设计私有的方法和变量。闭包的优点是可以避免全局变量的污染，缺点是闭包会常驻内存，会增大内存使用量，使用不当很容易造成内存泄露。\n\n### 5.js 事件机制\n\nDOM 事件流分为三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段\n**事件捕获（event capturing）**：通俗的理解就是，当鼠标点击或者触发 dom 事件时，浏览器会从根节点开始由外到内进行事件传播，即点击了子元素，如果父元素通过事件捕获方式注册了对应的事件的话，会先触发父元素绑定的事件。\n**事件冒泡（dubbed bubbling）**：与事件捕获恰恰相反，事件冒泡顺序是由内到外进行事件传播，直到根节点。\ndom 标准事件流的处理顺序为先捕获、再冒泡\n\n### 6.常用的处理字符串方法\n\n**.charAt(index)**:获取字符串索引对应的具体字符，参数 index 介于 0~length-1 之间。\n\n**.indexOf(value,index)**:返回字符串第一次出现指定值的索引，没有找到指定值就返回-1。\n字符串、数组都适用。\nvalue：必需，规定需检索的字符串值。可选的整数参数。\nindex：规定在字符串中开始检索的位置。它的合法取值是 0 到 stringObject.length - 1。如省略该参数，则将从字符串的首字符开始检索。\n\n**.substr(start,length)**:返回从指定位置开始到指定字符数的字符。\n\n![img](https://upload-images.jianshu.io/upload_images/16573783-49cd30241aecbd9b.png?imageMogr2/auto-orient/strip|imageView2/2/w/895/format/webp)\n\n**.substring(indexStart,indexEnd)**:返回一个字符串从开始索引到结束索引之间的新字符串。\n\n![img](https://upload-images.jianshu.io/upload_images/16573783-263e9cc74899752c.png?imageMogr2/auto-orient/strip|imageView2/2/w/877/format/webp)\n\n**.split() 字符串**：使用指定的分隔符字符串将一个[`String`](https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FString)对象分割成子字符串数组，以一个指定的分割字串来决定每个拆分的位置。\n\n**.replace() 字符串**：方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串\n\n**toLowerCase()**:会将调用该方法的字符串值转为小写形式，并返回。\n\n**toUpperCase()**:方法将调用该方法的字符串转为大写形式并返回（如果调用该方法的值不是字符串类型会被强制转换）。\n\n## 7.window 对象 和 document 对象\n\nwindow 对象：代表浏览器中一个打开的窗口\ndocument 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象\n\ndocument 对象是 window 对象的一部分，可以有 window. document 来访问\n\n## html 部分\n\n## 1.说说你对语义化的理解？\n\n```\n1，去掉或者丢失样式的时候能够让页面呈现出清晰的结构\n2，有利于SEO：和搜索引擎建立良好沟通，有助于爬虫抓取更多的有效信息：爬虫依赖于标签来确定上下文和各个关键字的权重；\n3，方便其他设备解析（如屏幕阅读器、盲人阅读器、移动设备）以意译的方式来渲染网页；\n4，便于团队开发和维护，语义化更具可读性，是网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。\n```\n\n## 2.Doctype 作用? 严格模式与混杂模式如何区分？它们有何意义?\n\n```\n（1）<!DOCTYPE> 声明位于文档中的最前面，处于 <html> 标签之前。告知浏览器以何种模式来渲染文档。\n\n（2）、严格模式的排版和 JS 运作模式是  以该浏览器支持的最高标准运行。\n\n（3）、在混杂模式中，页面以宽松的向后兼容的方式显示。模拟老式浏览器的行为以防止站点无法工作。\n\n（4）、DOCTYPE不存在或格式不正确会导致文档以混杂模式呈现。\n```\n\n## 3.你知道多少种 Doctype 文档类型？\n\n```\n 该标签可声明三种 DTD 类型，分别表示严格版本、过渡版本以及基于框架的 HTML 文档。\n HTML 4.01 规定了三种文档类型：Strict、Transitional 以及 Frameset。\n XHTML 1.0 规定了三种 XML 文档类型：Strict、Transitional 以及 Frameset。\nStandards （标准）模式（也就是严格呈现模式）用于呈现遵循最新标准的网页，而 Quirks\n （包容）模式（也就是松散呈现模式或者兼容模式）用于呈现为传统浏览器而设计的网页。\n```\n\n## 4.DOM 操作——怎样添加、移除、移动、复制、创建和查找节点。\n\n```\n（1）创建新节点\n\n      createDocumentFragment()    //创建一个DOM片段\n\n      createElement()   //创建一个具体的元素\n\n      createTextNode()   //创建一个文本节点\n\n（2）添加、移除、替换、插入\n\n      appendChild()\n\n      removeChild()\n\n      replaceChild()\n\n      insertBefore() //在已有的子节点前插入一个新的子节点\n\n（3）查找\n\n      getElementsByTagName()    //通过标签名称\n\n      getElementsByName()    //通过元素的Name属性的值(IE容错能力较强，会得到一个数组，其中包括id等于name值的)\n\n      getElementById()    //通过元素Id，唯一性\n```\n\n## 5.html5 有哪些新特性、移除了那些元素？如何处理 HTML5 新标签的浏览器兼容问题？如何区分 HTML 和 HTML5？\n\n```\n* HTML5 现在已经不是 SGML 的子集，主要是关于图像，位置，存储，多任务等功能的增加。\n\n* 拖拽释放(Drag and drop) API\n  语义化更好的内容标签（header,nav,footer,aside,article,section）\n  音频、视频API(audio,video)\n  画布(Canvas) API\n  地理(Geolocation) API\n  本地离线存储 localStorage 长期存储数据，浏览器关闭后数据不丢失；\n  sessionStorage 的数据在浏览器关闭后自动删除\n\n  表单控件，calendar、date、time、email、url、search\n  新的技术webworker, websocket, Geolocation\n\n* 移除的元素\n\n纯表现的元素：basefont，big，center，font, s，strike，tt，u；\n\n对可用性产生负面影响的元素：frame，frameset，noframes；\n\n支持HTML5新标签：\n\n* IE8/IE7/IE6支持通过document.createElement方法产生的标签，\n  可以利用这一特性让这些浏览器支持HTML5新标签，\n\n  浏览器支持新标签后，还需要添加标签默认的样式：\n\n* 当然最好的方式是直接使用成熟的框架、使用最多的是html5shim框架\n   <!--[if lt IE 9]>\n   <script> src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"</script>\n   <![endif]-->\n如何区分：DOCTYPE声明新增的结构元素功能元素\n```\n\n## 6.documen.write 和 innerHTML 的区别\n\n```\ndocument.write只能重绘整个页面\n\ninnerHTML可以重绘页面的一部分\n```\n\n## 7.什么是 HTML5 以及和 HTML 的区别是什么\n\n### 概念\n\nHTML5 是 HTML 的新标准，其主要目标是无需任何额外的插件如 Flash、Sliverlight 等，就可以传输所有内容。他囊括了动画、视频、丰富的图形用户界面等。\n\n### 区别\n\n#### 从语义结构上看：\n\n- HTML4.0：没有体现结构语义化的标签，通常都是是这样来命名的`<div id=\"header\"></div>`，这样表示网站的头部。\n- HTML5：在语义上却有很大的优势。提供了一些新的标签，比如<header><article><footer><aside>\n\n## 8.行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？\n\n- 行内元素： `a`, `span`, `img`, `input`, `select`, `strong`;\n- 块级元素： `div`, `ul`, `li`, `dl`, `dt`, `dd`, `h1-5`, `p`等；\n- 空元素： `<br>`, `<hr>`, `<img>`, `<link>`, `<meta>`;\n\n## 9.WebSocket 的实现和应用\n\n### 什么是 webSocket？\n\nWebSocket 是 HTML5 中的协议，支持持久连续，http 协议不支持持久性连接。\n\n### WebSocket 是什么样的协议，具体有什么优点。\n\nWebSocket 是基于 Http 协议的，或者说借用了 Http 协议来完成一部分握手，在握手阶段与 Http 是相同的。\n\n## 10.HTML 元素如何体现其嵌套关系\n\n- 块级元素可以包含行内元素\n- 块级元素不一定能包含块级元素\n- 行内元素一般不能包含块级元素（a 元素例外）\n\n## 11.对 HTML5 有什么了解？\n\n- 良好的移动性，以移动设备为主；\n- 响应式设计，以适应自动变化的屏幕尺寸\n- 支持离线缓存技术，webStorage 本地缓存\n- 新增的地理位置等\n- 新增 webSocket/webwork 技术\n\n# CSS 部分\n\n## 1.标准的 CSS 盒子模型及其和低版本的 IE 盒子模型的区别？\n\n标准（W3C）盒子模型：`width` = 内容宽度`（content） + border + padding + margin`\n\n低版本 IE 盒子模型： `width` = 内容宽度`（content + border + padding）+ margin`\n\n## 2.display 有哪些值？他们的作用是什么？\n\n- none：使用后元素将不会显示\n- grid：定义一个容器属性为网格布局\n- flex：定义一个弹性布局\n- block：使用后元素将变为块级元素显示，元素前后带有换行符\n- inline：display 默认值。使用后原色变为行内元素显示，前后无换行符\n- list-item：使用后元素作为列表显示\n- table：使用后将作为块级表格显示（类似<table>），前后带有换行符\n\n## 3.用 CSS 创建一个三角形\n\n```html\n<style>\n  .content {\n    width: 0;\n    height: 0;\n    border-top: 40px solid transparent;\n    border-left: 40px solid transparent;\n    border-right: 40px solid transparent;\n    border-bottom: 40px solid #ff0000;\n  }\n</style>\n\n<div class=\"content\"></div>\n```\n\n## 4.什么是响应式设计？响应式设计的基本原理是什么？\n\n响应式网站设计是一个网站能够兼容多个终端，而不是为每一个终端做一个特定的版本。\n\n关于原理：基本原理是通过媒体查询（@media）查询检测不同的设备屏幕尺寸做处理。\n\n关于兼容：页面头部必须有 meta 生命的 viewport\n\n## 5.浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\n\n非 IE 浏览器下，容器不设定高度且子元素浮动时，容器高度不能被内容撑开。此时，内容会溢出到容器外面而影响布局。此类现象被称为浮动（溢出）\n\n原理：\n\n- 浮动元素脱离文档流，不占据空间\n- 浮动元素碰到包含它的边框或其他浮动元素的边框停留。\n\n浮动会带来的问题：\n\n- 父级元素的高度将会无法被，会影响与父级元素同级的元素\n- 与浮动元素同级的非浮动元素（内联元素）会跟随其后\n- 若浮动的元素不是第一个元素，则该元素之前的元素也要浮动，否则会影响页面的显示结构。\n\n清除方式：\n\n- 父级盒子定义高度（height）\n- 最后一个浮动元素后面加一个 div 空标签，并且添加样式 clear:both\n- 包含浮动元素的父级标签添加样式 overflow 为 hidden/both\n\n## 6.::before 和:after 中双冒号和单冒号有什么区别？解释一下这 2 个伪元素的作用\n\n- 冒号用于 css3 伪类，双冒号用于 css3 伪元素\n- ::before 就是以一个子元素的存在，定义在元素主体内容之前的一个伪元素，并不存在于 dom 之中，只存在在页面之中。\n\n## 7.display,float,position 有什么关系？\n\n- 如果 `display` 为`none`，那么`position`和`float`都不起作用，元素不显示；\n- 如果`position`值为`absolute`或者`fixed`，元素绝对定位，`float`的计算值为`none`，`display`根据下面的表格进行调整；\n- 如果`float`不是`none`，框是浮动的，`display`根据下表进行调整；\n- 其他情况下`display`的值为指定值 总结起来：绝对定位、浮动、根元素都需要调整 `display`；\n\n## 8.什么是回流（重排）和重绘以及其区别？\n\n- 回流（重排）reflow：当 render tree 中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变时而需要重新构建；\n- 重绘(repaint)：当 redner tree 中的一些元素需要更新属性，而这些属性只影响元素的外观，网格，而不会影响布局时，称其为重绘，例如颜色改变等。\n- **每个页面至少需要引发一次重排+重绘，而且重排(回流)一定会引发重绘。**\n\n# 计算机网络知识\n\n## 1.浏览器内核\n\n浏览器主要分为两个部分：渲染引擎和 JS 引擎\n\n渲染引擎：主要负责获取页面内容和排班渲染页面\n\nJS 引擎：解析和执行 JS 来实现页面的动态效果，以及交互内容。\n\n## 2.TCP 三次握手和四次挥手\n\n为什么要进行三次握手：为了确认对方的发送和接受能力。\n\n### 三次握手\n\n三次握手主要流程：\n\n- 一开始双方处于 CLOSED 状态，然后服务端开始监听某个端口进入 LISTEN 状态\n- 然后客户端主动发起连接，发送 SYN，然后自己变为 SYN-SENT，seq=x\n- 服务端收到之后，返回 SYN seq=y 和 ACk ack=x+1(对于客户端发来的 SYN)，自己变成 SYN-REVD\n- 之后客户端发送 ACK seq= x+ 1,ack= y + 1 给服务端，自己变成 EASTBLISHED 状态，服务端收到 ACK，也进入 ESTABLISHED\n\n### 为什么不是两次\n\n> 无法确认客户端的接收能力。\n\n### 四次挥手\n\n- 一开始都处于 ESTABLISH 状态，然后客户端发送 FIN 报文，带上 seq = p,状态变为 FIN-WAIT-1\n- 服务端收到之后，发送 ACK 确认，ack = p + 1,然后进入 CLOSE-WAIT 状态\n- 客户端收到之后进入 FIN-WAIT-2 状态\n- 过了一会等数据处理完，再次发送 FIN、ACK、seq = q ,ack = p +1，进入 LAST-ACK 阶段\n- 客户端收到 FIN 之后，客户端进入 TIME_WAIT（等待 2MSL），然后发送 ACK 给服务端 ack= 1+1\n- 服务端收到之后进入 CLOSED 状态\n\n## 3.浏览器输入 url 之后发生了什么\n\n1. 浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址；\n2. 建立 TCP 连接（三次握手）；\n3. 浏览器发出读取文件（URL 中域名后面部分对应的文件）的 HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器；\n4. 服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器；\n5. 释放 TCP 连接（四次挥手）\n6. 浏览器将该 html 文本导出并显示内容\n\n## 4.Cookie、sessionStorage、localStorage 区别\n\n共同点：都是保存在浏览器端，且同源的。\n\n区别：\n\n1. cookie 数据始终在同源的 http 请求中携带，即 cookie 在浏览器中和服务器间来回传递。sessionStorage 和 localStorage 不会自动把数据发给服务器，仅在本地保存。\n2. cookie 数据不能超过 4k(适合保存小数据)。sessionStorage 和 localStorage 容量较大。\n3. 数据有效期不同\n   - sessionStorage:仅在当前浏览器窗口关闭前有效。\n   - localStorage:始终有效，窗口或浏览器关闭也一直保存，需手动清除。\n   - cookie 只在设置的 cookie 过期时间之前一直有效，即使窗口或浏览器关闭。\n4. 作用域不同。\n   - sessionStorage 不在不同的浏览器窗口中共享。\n   - localStorage 在所有同源窗口中都是共享的。\n   - cookie 也是在所有同源窗口中都是共享的。\n5. 应用场景\n   - localStorage：常用于长期登录（+判断用户是否已登录），适合长期保存在本地的数据。\n   - sessionStorage：敏感账号一次性登录。\n   - cookie 与服务器交互。\n\n## 5.原型和原型链\n\n创建了一个函数就会为其创建一个 prototype 属性，指向这个函数的原型对象，原型对象会自动获得 constructor 属性，指向 prototype 属性所在函数。\n\n当一个对象调用某个方法或者属性的时候，先在自身查找，如果找到就调用，如果没有就顺着**proto**到原型对象中查找，如果还没有就继续去原型的原型中查找，一直到 null，这样形成一条链叫做原型链。\n\n## 6.作用域和闭包\n\n作用域可理解为该上下文中声明的**变量和声明的作用范围**。\n\n闭包属于一种特殊的作用域，称为静态作用域。它的定义可以理解为：**父函数被销毁**的情况下，返回出的子函数仍然可以继续访问到父级的变量对象，这样的函数称为闭包。\n\n- 闭包会产生一个很经典的问题：\n  - 多个子函数的都是同时指向父级，是完全共享的。因此当父级的变量对象被修改时，所有子函数都受到影响。\n\n## 7.this 的指向问题\n\n口诀：箭头函数、new、bind、apply 和 call、欧比届点（obj.）、直接调用、不在函数里。\n\n### 1.箭头函数\n\n箭头函数 this 不会被改变\n\n1. 创建箭头函数时，就已经确定了它的 this 指向。\n2. 箭头韩式内的 this 指向**外层的 this。**\n\n### 2.new\n\n**当使用 new 关键字调用函数时，函数中的 this 一定是 JS 创建的新对象**。\n\n### 3.bind\n\nbind 指 Function.prototype.bind()\n\n#### 多次 bind 时只认第一次 bind 的值\n\n```javascript\nfunction func() {\n  console.log(this);\n}\nfunc.bind(1).bind(2)(); //1\n```\n\n#### 箭头函数中 this 不会被修改\n\n```javascript\nfunc = () => {\n  console.log(this);\n};\nfunc.bind(1)(); //window 口诀1优先\n```\n\n### 4.apply 和 call\n\n`apply()`和`call()`的第一个参数都是 this，区别在于通过 apply 调用时实参是放到数组中的，而通过 call 调用时实参是逗号分隔的。\n\n#### bind 函数中 this 不会被修改\n\n```javascript\nfunc = () => {\n  //这里this指向取决于外层this，参考口诀7不在函数里\n  console.log(this);\n};\nfunc.apply(1);\n```\n\n### 5.欧比届点(obj.)\n\n```javascript\nfunction func() {\n  console.log(this.x);\n}\nobj = { x: 1 };\nobj.func = func;\nobj.func(); //1\n```\n\n### 6.直接调用\n\n在函数不满足前面的场景，被直接调用时，this 将指向全局对象。在浏览器环境中全局对象是 Window\n\n```javascript\nfunction func() {\n  console.log(this);\n}\nfunc(); //window\n```\n\n### 7.不在函数里\n\n不在函数中的场景，可分为浏览器的 `<script />` 标签里，或 Node.js 的模块文件里。\n\n1. 在 `<script />` 标签里，this 指向 Window。\n2. 在 Node.js 的模块文件里，this 指向 Module 的默认导出对象，也就是 module.exports。\n\n## 9.数组去重\n\n1. 定义一个新数组，并存放原数组的第一个元素，然后将元素组一一和新数组的元素对比，若不同则存放在新数组中。\n2. 先将原数组排序，再与相邻的进行比较，如果不同则存入新数组。\n3. 利用对象属性存在的特性，如果没有该属性则存入新数组。\n\n```javascript\nArray.prototype.unique = function () {\n  let arr = this,\n    obj = {},\n    result = [];\n  for (let i = 0; i < arr.length; i++) {\n    if (!obj[arr[i]]) {\n      //如果能查找到，证明数组元素重复了\n      obj[arr[i]] = 1;\n      result.push(arr[i]);\n    }\n  }\n  return result;\n};\nlet a = [1, 2, 3, 1, 2, 3];\nlet b = a.unique();\nconsole.log(b); //打印结果：(3)[1,2,3]\n```\n\n4. 使用 es6 set,Set 数据结构，它类似于数组，其成员的值都是唯一的\n\n   ```javascript\n   let arr = [1, 2, 3, 4, 3, 4, 5, 2, 6];\n   console.log([...new Set(arr)]);\n   ```\n\n5. 使用 filter 过滤函数去重\n\n   ```javascript\n   let arr = [1, 2, 6, 4, 3, 4, 5, 2, 6];\n   console.log(arr.filter((v, i, arr) => arr.indexOf(v) === i));\n   ```\n\n## 10.防抖、节流\n\n防抖：触发高频函数事件后，n 秒内函数只能执行一次，如果在 n 秒内这个事件再次被触发的话，那么会重新计算时间。\n\n​ 通常使用场景：用户输入，只需再输入完成后做一次输入校验即可。\n\n节流：指连续触发事件但是在 n 秒内只执行一次函数。节流会稀释函数的执行频率。\n\n​ 通常使用场景:滚动条事件或者 resize 事件，通常每隔 100~500ms 执行一次即可。\n\n```javascript\n//防抖\nfunction debounce(func,wait){\n\tlet timeout;\n\treturn function(){\n\tif(itmeout){\n\tclearTimeout(timeout)\n\t}\n\ttimeout = setTimeout(()=>{\n\tfunc.apply(this,arguments)\n\t},wait}\n\t}\n}\n//节流\nfunction throttle(func,wait){\n\tlet timeout;\n\treturn function(){\n\tif(!timeout){\n\t\ttimeout = setTimeout(()=>{\n\t\ttimeout = null;\n\t\tfunc.apply(this, arguments)\n\t\t},wait)\n\t}\n\t}\n}\n```\n\n## 11.ES6 的新特性\n\n1. 声明 let / const\n2. 解构赋值\n3. class/extend:类声明与继承\n4. Set / Map：新的数据结构\n5. 箭头函数\n6. promise\n7. async/await\n8. 数组/对象的扩展\n\n## 12.跨域\n\n### 1.为什么会出现跨域问题\n\n> 同源策略限制 不同源会造成跨域。以下任意一种情况不同，都是不同源。\n\n### 2.什么情况才算做跨域\n\n非同源请求，均为跨域。名词解释：同源——如果两个页面拥有相同的协议(protocol)，端口(port)和主机(host)，那么这两个页面属于同一个源(origin)。\n\n### 3.为什么有跨域需求？\n\n场景——工程服务化后，不同职责的服务分散在不同的工程中，往往这些工程的域名是不同的，但一个需求可能需要对应多个服务\n\n### 4.如何实现跨域\n\n### 三种跨域方法\n\n- JSONP\n- CORS\n- postMessage\n\n#### 1.JSONP 只能解决 get 跨域\n\n**单纯地为了实现跨域请求而创造的一个 trick。**\n\n**原理：动态创建一个 script 标签。利用 script 标签的 src 属性不受同源策略限制。因为所有的 src 属性和 href 属性都不受同源策略限制。可以请求第三方服务器数据内容。**\n\n##### 步骤\n\n1. 去创建一个 script 标签\n\n2. script 的 src 属性设置接口地址\n\n3. 接口参数，必须要带一个自定义函数名，要不然后台无法返回数据\n\n4. 通过定义函数名器接受后台返回数据\n\n   ```javascript\n   //去创建一个script标签\n   var script = document.createElement('script');\n   //script的src属性设置接口地址 并带一个callback回调函数名称\n   script.src = 'http://127.0.0.1:8888/index.php?callback=jsonpCallback';\n   //插入到页面\n   document.head.appendChild(script);\n   //通过定义函数名去接收后台返回数据\n   function jsonpCallback(data) {\n     //注意  jsonp返回的数据是json对象可以直接使用\n     //ajax  取得数据是json字符串需要转换成json对象才可以使用。\n   }\n   ```\n\n#### 2.CORS：跨域资源共享\n\n- **原理：服务器设置 Access-Control-Allow-OriginHTTP 响应头之后，浏览器将会允许跨域请求**\n- **限制：浏览器需要支持 HTML5，可以支持 POST，PUT 等方法兼容 ie9 以上**\n\n```html\n需要后台设置 Access-Control-Allow-Origin: * //允许所有域名访问，或者\nAccess-Control-Allow-Origin: http://a.com //只允许所有域名访问\n```\n\n#### 3.设置 document.domain\n\n- **原理：相同主域名不同子域名下的页面，可以设置 document.domain 让他们同域**\n- **限制：同域 document 提供的是页面间的互操作，需要载入 iframe 页面**\n\n```javascript\n// URL http://a.com/foo\nvar ifr = document.createElement('iframe');\nifr.src = 'http://b.a.com/bar';\nifr.onload = function(){\n    var ifrdoc = ifr.contentDocument || ifr.contentWindow.document;\n    ifrdoc.getElementsById(\"foo\").innerHTML);\n};\n\nifr.style.display = 'none';\ndocument.body.appendChild(ifr);\n\n```\n\n### 4.用 Apache 做转发(逆向代理)，让跨域变同域\n\n## 13.TCP/IP 分为几层？各层的作用是什么?\n\n1. 应用层 2.传输层 3.网络层 4.网络接口层\n\n- 1、应用层\n  - TCP/IP 协议族在这一层面有着很多协议来支持不同的应用，许多大家所熟悉的基于 Internet 的应用的实现就离不开这些协议。如我们进行万维网（WWW）访问用到了 HTTP 协议、文件传输用 FTP 协议、电子邮件发送用 SMTP、域名的解析用 DNS 协议、远程登录用 Telnet 协议等等，都是属于 TCP/IP 应用层的；就用户而言，看到的是由一个个软件所构筑的大多为图形化的操作界面，而实际后台运行的便是上述协议。（FTP、SMTP、telnet、DNS、tftp）\n- 2、传输层\n  - 这一层的的功能主要是提供应用程序间的通信，TCP/IP 协议族在这一层的协议有 TCP 和 UDP。（UDP）\n- 3、 网络层\n  - 是 TCP/IP 协议族中非常关键的一层，主要定义了 IP 地址格式，从而能够使得不同应用类型的数据在 Internet 上通畅地传输，IP 协议就是一个网络层协议。（IP 数据包）\n- 4、网络接口层\n  - 这是 TCP/IP 软件的最低层，负责接收 IP 数据包并通过网络发送之，或者从网络上接收物理帧，抽出 IP 数据报，交给 IP 层。(帧，网络接口协议)\n","slug":"前端基础知识整理","published":1,"updated":"2021-07-26T13:35:36.051Z","_id":"cknzd1p8j0008f4rq59i6fy4q","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"前端基础知识整理\"><a href=\"#前端基础知识整理\" class=\"headerlink\" title=\"前端基础知识整理\"></a>前端基础知识整理</h2><h3 id=\"1-typeof-返回的数据类型\"><a href=\"#1-typeof-返回的数据类型\" class=\"headerlink\" title=\"1.typeof 返回的数据类型\"></a>1.typeof 返回的数据类型</h3><p>typeof 返回的数据类型包括 undefined、 string、number、boolean、symbol、object、function、bigInt 类型</p>\n<a id=\"more\"></a>\n\n<h3 id=\"2-检查数组的方式\"><a href=\"#2-检查数组的方式\" class=\"headerlink\" title=\"2.检查数组的方式\"></a>2.检查数组的方式</h3><ol>\n<li>isArray()方法</li>\n<li>Object.prototype.toString.call()</li>\n<li>instanceof Array</li>\n<li>constructor</li>\n<li>typeof()</li>\n</ol>\n<h3 id=\"3-js-中的-call、apply、bind-方法的区别\"><a href=\"#3-js-中的-call、apply、bind-方法的区别\" class=\"headerlink\" title=\"3.js 中的 call、apply、bind 方法的区别\"></a>3.js 中的 call、apply、bind 方法的区别</h3><p>js 中的 call apply bind 都是用来改变方法上下文(context)，就是可以使函数可以被其他对象调用。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> hxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'hxy'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">':'</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">+</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> yyw <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'yyw'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 实际上是调用的this.say() this指的是hxy</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>yyw<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用apply后this改变指向，this指向yyw，相当于yyw.say()</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>yyw<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>yyw<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>运行结果：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">hxy<span class=\"token operator\">:</span> <span class=\"token number\">2212</span><span class=\"token punctuation\">;</span>\nyyw<span class=\"token operator\">:</span> <span class=\"token number\">1812</span><span class=\"token punctuation\">;</span>\nyyw<span class=\"token operator\">:</span> <span class=\"token number\">1812</span><span class=\"token punctuation\">;</span>\nyyw<span class=\"token operator\">:</span> <span class=\"token number\">1812</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-闭包\"><a href=\"#4-闭包\" class=\"headerlink\" title=\"4.闭包\"></a>4.闭包</h2><p>简单来说，闭包就是指能读取其他函数内部变量的函数<br>闭包的简单应用:</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token number\">99</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">f2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> f2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//返回n = 99;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>运行结果返回了 f1 中的变量 n</p>\n<p>闭包有三个特性:</p>\n<blockquote>\n<p>1.函数嵌套函数 2.函数内部可以引用外部的参数和变量 3.参数和变量不会被垃圾回收机制回收</p>\n</blockquote>\n<p>使用闭包主要是为了设计私有的方法和变量。闭包的优点是可以避免全局变量的污染，缺点是闭包会常驻内存，会增大内存使用量，使用不当很容易造成内存泄露。</p>\n<h3 id=\"5-js-事件机制\"><a href=\"#5-js-事件机制\" class=\"headerlink\" title=\"5.js 事件机制\"></a>5.js 事件机制</h3><p>DOM 事件流分为三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段<br><strong>事件捕获（event capturing）</strong>：通俗的理解就是，当鼠标点击或者触发 dom 事件时，浏览器会从根节点开始由外到内进行事件传播，即点击了子元素，如果父元素通过事件捕获方式注册了对应的事件的话，会先触发父元素绑定的事件。<br><strong>事件冒泡（dubbed bubbling）</strong>：与事件捕获恰恰相反，事件冒泡顺序是由内到外进行事件传播，直到根节点。<br>dom 标准事件流的处理顺序为先捕获、再冒泡</p>\n<h3 id=\"6-常用的处理字符串方法\"><a href=\"#6-常用的处理字符串方法\" class=\"headerlink\" title=\"6.常用的处理字符串方法\"></a>6.常用的处理字符串方法</h3><p><strong>.charAt(index)</strong>:获取字符串索引对应的具体字符，参数 index 介于 0~length-1 之间。</p>\n<p><strong>.indexOf(value,index)</strong>:返回字符串第一次出现指定值的索引，没有找到指定值就返回-1。<br>字符串、数组都适用。<br>value：必需，规定需检索的字符串值。可选的整数参数。<br>index：规定在字符串中开始检索的位置。它的合法取值是 0 到 stringObject.length - 1。如省略该参数，则将从字符串的首字符开始检索。</p>\n<p><strong>.substr(start,length)</strong>:返回从指定位置开始到指定字符数的字符。</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/16573783-49cd30241aecbd9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/895/format/webp\" alt=\"img\"></p>\n<p><strong>.substring(indexStart,indexEnd)</strong>:返回一个字符串从开始索引到结束索引之间的新字符串。</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/16573783-263e9cc74899752c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/877/format/webp\" alt=\"img\"></p>\n<p><strong>.split() 字符串</strong>：使用指定的分隔符字符串将一个<a href=\"https://links.jianshu.com/go?to=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/String\"><code>String</code></a>对象分割成子字符串数组，以一个指定的分割字串来决定每个拆分的位置。</p>\n<p><strong>.replace() 字符串</strong>：方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串</p>\n<p><strong>toLowerCase()</strong>:会将调用该方法的字符串值转为小写形式，并返回。</p>\n<p><strong>toUpperCase()</strong>:方法将调用该方法的字符串转为大写形式并返回（如果调用该方法的值不是字符串类型会被强制转换）。</p>\n<h2 id=\"7-window-对象-和-document-对象\"><a href=\"#7-window-对象-和-document-对象\" class=\"headerlink\" title=\"7.window 对象 和 document 对象\"></a>7.window 对象 和 document 对象</h2><p>window 对象：代表浏览器中一个打开的窗口<br>document 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象</p>\n<p>document 对象是 window 对象的一部分，可以有 window. document 来访问</p>\n<h2 id=\"html-部分\"><a href=\"#html-部分\" class=\"headerlink\" title=\"html 部分\"></a>html 部分</h2><h2 id=\"1-说说你对语义化的理解？\"><a href=\"#1-说说你对语义化的理解？\" class=\"headerlink\" title=\"1.说说你对语义化的理解？\"></a>1.说说你对语义化的理解？</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">1，去掉或者丢失样式的时候能够让页面呈现出清晰的结构\n2，有利于SEO：和搜索引擎建立良好沟通，有助于爬虫抓取更多的有效信息：爬虫依赖于标签来确定上下文和各个关键字的权重；\n3，方便其他设备解析（如屏幕阅读器、盲人阅读器、移动设备）以意译的方式来渲染网页；\n4，便于团队开发和维护，语义化更具可读性，是网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"2-Doctype-作用-严格模式与混杂模式如何区分？它们有何意义\"><a href=\"#2-Doctype-作用-严格模式与混杂模式如何区分？它们有何意义\" class=\"headerlink\" title=\"2.Doctype 作用? 严格模式与混杂模式如何区分？它们有何意义?\"></a>2.Doctype 作用? 严格模式与混杂模式如何区分？它们有何意义?</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">（1）&lt;!DOCTYPE&gt; 声明位于文档中的最前面，处于 &lt;html&gt; 标签之前。告知浏览器以何种模式来渲染文档。\n\n（2）、严格模式的排版和 JS 运作模式是  以该浏览器支持的最高标准运行。\n\n（3）、在混杂模式中，页面以宽松的向后兼容的方式显示。模拟老式浏览器的行为以防止站点无法工作。\n\n（4）、DOCTYPE不存在或格式不正确会导致文档以混杂模式呈现。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"3-你知道多少种-Doctype-文档类型？\"><a href=\"#3-你知道多少种-Doctype-文档类型？\" class=\"headerlink\" title=\"3.你知道多少种 Doctype 文档类型？\"></a>3.你知道多少种 Doctype 文档类型？</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\"> 该标签可声明三种 DTD 类型，分别表示严格版本、过渡版本以及基于框架的 HTML 文档。\n HTML 4.01 规定了三种文档类型：Strict、Transitional 以及 Frameset。\n XHTML 1.0 规定了三种 XML 文档类型：Strict、Transitional 以及 Frameset。\nStandards （标准）模式（也就是严格呈现模式）用于呈现遵循最新标准的网页，而 Quirks\n （包容）模式（也就是松散呈现模式或者兼容模式）用于呈现为传统浏览器而设计的网页。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-DOM-操作——怎样添加、移除、移动、复制、创建和查找节点。\"><a href=\"#4-DOM-操作——怎样添加、移除、移动、复制、创建和查找节点。\" class=\"headerlink\" title=\"4.DOM 操作——怎样添加、移除、移动、复制、创建和查找节点。\"></a>4.DOM 操作——怎样添加、移除、移动、复制、创建和查找节点。</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">（1）创建新节点\n\n      createDocumentFragment()    &#x2F;&#x2F;创建一个DOM片段\n\n      createElement()   &#x2F;&#x2F;创建一个具体的元素\n\n      createTextNode()   &#x2F;&#x2F;创建一个文本节点\n\n（2）添加、移除、替换、插入\n\n      appendChild()\n\n      removeChild()\n\n      replaceChild()\n\n      insertBefore() &#x2F;&#x2F;在已有的子节点前插入一个新的子节点\n\n（3）查找\n\n      getElementsByTagName()    &#x2F;&#x2F;通过标签名称\n\n      getElementsByName()    &#x2F;&#x2F;通过元素的Name属性的值(IE容错能力较强，会得到一个数组，其中包括id等于name值的)\n\n      getElementById()    &#x2F;&#x2F;通过元素Id，唯一性<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"5-html5-有哪些新特性、移除了那些元素？如何处理-HTML5-新标签的浏览器兼容问题？如何区分-HTML-和-HTML5？\"><a href=\"#5-html5-有哪些新特性、移除了那些元素？如何处理-HTML5-新标签的浏览器兼容问题？如何区分-HTML-和-HTML5？\" class=\"headerlink\" title=\"5.html5 有哪些新特性、移除了那些元素？如何处理 HTML5 新标签的浏览器兼容问题？如何区分 HTML 和 HTML5？\"></a>5.html5 有哪些新特性、移除了那些元素？如何处理 HTML5 新标签的浏览器兼容问题？如何区分 HTML 和 HTML5？</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">* HTML5 现在已经不是 SGML 的子集，主要是关于图像，位置，存储，多任务等功能的增加。\n\n* 拖拽释放(Drag and drop) API\n  语义化更好的内容标签（header,nav,footer,aside,article,section）\n  音频、视频API(audio,video)\n  画布(Canvas) API\n  地理(Geolocation) API\n  本地离线存储 localStorage 长期存储数据，浏览器关闭后数据不丢失；\n  sessionStorage 的数据在浏览器关闭后自动删除\n\n  表单控件，calendar、date、time、email、url、search\n  新的技术webworker, websocket, Geolocation\n\n* 移除的元素\n\n纯表现的元素：basefont，big，center，font, s，strike，tt，u；\n\n对可用性产生负面影响的元素：frame，frameset，noframes；\n\n支持HTML5新标签：\n\n* IE8&#x2F;IE7&#x2F;IE6支持通过document.createElement方法产生的标签，\n  可以利用这一特性让这些浏览器支持HTML5新标签，\n\n  浏览器支持新标签后，还需要添加标签默认的样式：\n\n* 当然最好的方式是直接使用成熟的框架、使用最多的是html5shim框架\n   &lt;!--[if lt IE 9]&gt;\n   &lt;script&gt; src&#x3D;&quot;http:&#x2F;&#x2F;html5shim.googlecode.com&#x2F;svn&#x2F;trunk&#x2F;html5.js&quot;&lt;&#x2F;script&gt;\n   &lt;![endif]--&gt;\n如何区分：DOCTYPE声明新增的结构元素功能元素<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"6-documen-write-和-innerHTML-的区别\"><a href=\"#6-documen-write-和-innerHTML-的区别\" class=\"headerlink\" title=\"6.documen.write 和 innerHTML 的区别\"></a>6.documen.write 和 innerHTML 的区别</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">document.write只能重绘整个页面\n\ninnerHTML可以重绘页面的一部分<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"7-什么是-HTML5-以及和-HTML-的区别是什么\"><a href=\"#7-什么是-HTML5-以及和-HTML-的区别是什么\" class=\"headerlink\" title=\"7.什么是 HTML5 以及和 HTML 的区别是什么\"></a>7.什么是 HTML5 以及和 HTML 的区别是什么</h2><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>HTML5 是 HTML 的新标准，其主要目标是无需任何额外的插件如 Flash、Sliverlight 等，就可以传输所有内容。他囊括了动画、视频、丰富的图形用户界面等。</p>\n<h3 id=\"区别\"><a href=\"#区别\" class=\"headerlink\" title=\"区别\"></a>区别</h3><h4 id=\"从语义结构上看：\"><a href=\"#从语义结构上看：\" class=\"headerlink\" title=\"从语义结构上看：\"></a>从语义结构上看：</h4><ul>\n<li>HTML4.0：没有体现结构语义化的标签，通常都是是这样来命名的<code>&lt;div id=&quot;header&quot;&gt;&lt;/div&gt;</code>，这样表示网站的头部。</li>\n<li>HTML5：在语义上却有很大的优势。提供了一些新的标签，比如<header><article><footer><aside></li>\n</ul>\n<h2 id=\"8-行内元素有哪些？块级元素有哪些？-空-void-元素有那些？\"><a href=\"#8-行内元素有哪些？块级元素有哪些？-空-void-元素有那些？\" class=\"headerlink\" title=\"8.行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？\"></a>8.行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？</h2><ul>\n<li>行内元素： <code>a</code>, <code>span</code>, <code>img</code>, <code>input</code>, <code>select</code>, <code>strong</code>;</li>\n<li>块级元素： <code>div</code>, <code>ul</code>, <code>li</code>, <code>dl</code>, <code>dt</code>, <code>dd</code>, <code>h1-5</code>, <code>p</code>等；</li>\n<li>空元素： <code>&lt;br&gt;</code>, <code>&lt;hr&gt;</code>, <code>&lt;img&gt;</code>, <code>&lt;link&gt;</code>, <code>&lt;meta&gt;</code>;</li>\n</ul>\n<h2 id=\"9-WebSocket-的实现和应用\"><a href=\"#9-WebSocket-的实现和应用\" class=\"headerlink\" title=\"9.WebSocket 的实现和应用\"></a>9.WebSocket 的实现和应用</h2><h3 id=\"什么是-webSocket？\"><a href=\"#什么是-webSocket？\" class=\"headerlink\" title=\"什么是 webSocket？\"></a>什么是 webSocket？</h3><p>WebSocket 是 HTML5 中的协议，支持持久连续，http 协议不支持持久性连接。</p>\n<h3 id=\"WebSocket-是什么样的协议，具体有什么优点。\"><a href=\"#WebSocket-是什么样的协议，具体有什么优点。\" class=\"headerlink\" title=\"WebSocket 是什么样的协议，具体有什么优点。\"></a>WebSocket 是什么样的协议，具体有什么优点。</h3><p>WebSocket 是基于 Http 协议的，或者说借用了 Http 协议来完成一部分握手，在握手阶段与 Http 是相同的。</p>\n<h2 id=\"10-HTML-元素如何体现其嵌套关系\"><a href=\"#10-HTML-元素如何体现其嵌套关系\" class=\"headerlink\" title=\"10.HTML 元素如何体现其嵌套关系\"></a>10.HTML 元素如何体现其嵌套关系</h2><ul>\n<li>块级元素可以包含行内元素</li>\n<li>块级元素不一定能包含块级元素</li>\n<li>行内元素一般不能包含块级元素（a 元素例外）</li>\n</ul>\n<h2 id=\"11-对-HTML5-有什么了解？\"><a href=\"#11-对-HTML5-有什么了解？\" class=\"headerlink\" title=\"11.对 HTML5 有什么了解？\"></a>11.对 HTML5 有什么了解？</h2><ul>\n<li>良好的移动性，以移动设备为主；</li>\n<li>响应式设计，以适应自动变化的屏幕尺寸</li>\n<li>支持离线缓存技术，webStorage 本地缓存</li>\n<li>新增的地理位置等</li>\n<li>新增 webSocket/webwork 技术</li>\n</ul>\n<h1 id=\"CSS-部分\"><a href=\"#CSS-部分\" class=\"headerlink\" title=\"CSS 部分\"></a>CSS 部分</h1><h2 id=\"1-标准的-CSS-盒子模型及其和低版本的-IE-盒子模型的区别？\"><a href=\"#1-标准的-CSS-盒子模型及其和低版本的-IE-盒子模型的区别？\" class=\"headerlink\" title=\"1.标准的 CSS 盒子模型及其和低版本的 IE 盒子模型的区别？\"></a>1.标准的 CSS 盒子模型及其和低版本的 IE 盒子模型的区别？</h2><p>标准（W3C）盒子模型：<code>width</code> = 内容宽度<code>（content） + border + padding + margin</code></p>\n<p>低版本 IE 盒子模型： <code>width</code> = 内容宽度<code>（content + border + padding）+ margin</code></p>\n<h2 id=\"2-display-有哪些值？他们的作用是什么？\"><a href=\"#2-display-有哪些值？他们的作用是什么？\" class=\"headerlink\" title=\"2.display 有哪些值？他们的作用是什么？\"></a>2.display 有哪些值？他们的作用是什么？</h2><ul>\n<li>none：使用后元素将不会显示</li>\n<li>grid：定义一个容器属性为网格布局</li>\n<li>flex：定义一个弹性布局</li>\n<li>block：使用后元素将变为块级元素显示，元素前后带有换行符</li>\n<li>inline：display 默认值。使用后原色变为行内元素显示，前后无换行符</li>\n<li>list-item：使用后元素作为列表显示</li>\n<li>table：使用后将作为块级表格显示（类似<table>），前后带有换行符</li>\n</ul>\n<h2 id=\"3-用-CSS-创建一个三角形\"><a href=\"#3-用-CSS-创建一个三角形\" class=\"headerlink\" title=\"3.用 CSS 创建一个三角形\"></a>3.用 CSS 创建一个三角形</h2><pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-top</span><span class=\"token punctuation\">:</span> 40px solid transparent<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-left</span><span class=\"token punctuation\">:</span> 40px solid transparent<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-right</span><span class=\"token punctuation\">:</span> 40px solid transparent<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 40px solid #ff0000<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-什么是响应式设计？响应式设计的基本原理是什么？\"><a href=\"#4-什么是响应式设计？响应式设计的基本原理是什么？\" class=\"headerlink\" title=\"4.什么是响应式设计？响应式设计的基本原理是什么？\"></a>4.什么是响应式设计？响应式设计的基本原理是什么？</h2><p>响应式网站设计是一个网站能够兼容多个终端，而不是为每一个终端做一个特定的版本。</p>\n<p>关于原理：基本原理是通过媒体查询（@media）查询检测不同的设备屏幕尺寸做处理。</p>\n<p>关于兼容：页面头部必须有 meta 生命的 viewport</p>\n<h2 id=\"5-浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\"><a href=\"#5-浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\" class=\"headerlink\" title=\"5.浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\"></a>5.浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？</h2><p>非 IE 浏览器下，容器不设定高度且子元素浮动时，容器高度不能被内容撑开。此时，内容会溢出到容器外面而影响布局。此类现象被称为浮动（溢出）</p>\n<p>原理：</p>\n<ul>\n<li>浮动元素脱离文档流，不占据空间</li>\n<li>浮动元素碰到包含它的边框或其他浮动元素的边框停留。</li>\n</ul>\n<p>浮动会带来的问题：</p>\n<ul>\n<li>父级元素的高度将会无法被，会影响与父级元素同级的元素</li>\n<li>与浮动元素同级的非浮动元素（内联元素）会跟随其后</li>\n<li>若浮动的元素不是第一个元素，则该元素之前的元素也要浮动，否则会影响页面的显示结构。</li>\n</ul>\n<p>清除方式：</p>\n<ul>\n<li>父级盒子定义高度（height）</li>\n<li>最后一个浮动元素后面加一个 div 空标签，并且添加样式 clear:both</li>\n<li>包含浮动元素的父级标签添加样式 overflow 为 hidden/both</li>\n</ul>\n<h2 id=\"6-before-和-after-中双冒号和单冒号有什么区别？解释一下这-2-个伪元素的作用\"><a href=\"#6-before-和-after-中双冒号和单冒号有什么区别？解释一下这-2-个伪元素的作用\" class=\"headerlink\" title=\"6.::before 和:after 中双冒号和单冒号有什么区别？解释一下这 2 个伪元素的作用\"></a>6.::before 和:after 中双冒号和单冒号有什么区别？解释一下这 2 个伪元素的作用</h2><ul>\n<li>冒号用于 css3 伪类，双冒号用于 css3 伪元素</li>\n<li>::before 就是以一个子元素的存在，定义在元素主体内容之前的一个伪元素，并不存在于 dom 之中，只存在在页面之中。</li>\n</ul>\n<h2 id=\"7-display-float-position-有什么关系？\"><a href=\"#7-display-float-position-有什么关系？\" class=\"headerlink\" title=\"7.display,float,position 有什么关系？\"></a>7.display,float,position 有什么关系？</h2><ul>\n<li>如果 <code>display</code> 为<code>none</code>，那么<code>position</code>和<code>float</code>都不起作用，元素不显示；</li>\n<li>如果<code>position</code>值为<code>absolute</code>或者<code>fixed</code>，元素绝对定位，<code>float</code>的计算值为<code>none</code>，<code>display</code>根据下面的表格进行调整；</li>\n<li>如果<code>float</code>不是<code>none</code>，框是浮动的，<code>display</code>根据下表进行调整；</li>\n<li>其他情况下<code>display</code>的值为指定值 总结起来：绝对定位、浮动、根元素都需要调整 <code>display</code>；</li>\n</ul>\n<h2 id=\"8-什么是回流（重排）和重绘以及其区别？\"><a href=\"#8-什么是回流（重排）和重绘以及其区别？\" class=\"headerlink\" title=\"8.什么是回流（重排）和重绘以及其区别？\"></a>8.什么是回流（重排）和重绘以及其区别？</h2><ul>\n<li>回流（重排）reflow：当 render tree 中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变时而需要重新构建；</li>\n<li>重绘(repaint)：当 redner tree 中的一些元素需要更新属性，而这些属性只影响元素的外观，网格，而不会影响布局时，称其为重绘，例如颜色改变等。</li>\n<li><strong>每个页面至少需要引发一次重排+重绘，而且重排(回流)一定会引发重绘。</strong></li>\n</ul>\n<h1 id=\"计算机网络知识\"><a href=\"#计算机网络知识\" class=\"headerlink\" title=\"计算机网络知识\"></a>计算机网络知识</h1><h2 id=\"1-浏览器内核\"><a href=\"#1-浏览器内核\" class=\"headerlink\" title=\"1.浏览器内核\"></a>1.浏览器内核</h2><p>浏览器主要分为两个部分：渲染引擎和 JS 引擎</p>\n<p>渲染引擎：主要负责获取页面内容和排班渲染页面</p>\n<p>JS 引擎：解析和执行 JS 来实现页面的动态效果，以及交互内容。</p>\n<h2 id=\"2-TCP-三次握手和四次挥手\"><a href=\"#2-TCP-三次握手和四次挥手\" class=\"headerlink\" title=\"2.TCP 三次握手和四次挥手\"></a>2.TCP 三次握手和四次挥手</h2><p>为什么要进行三次握手：为了确认对方的发送和接受能力。</p>\n<h3 id=\"三次握手\"><a href=\"#三次握手\" class=\"headerlink\" title=\"三次握手\"></a>三次握手</h3><p>三次握手主要流程：</p>\n<ul>\n<li>一开始双方处于 CLOSED 状态，然后服务端开始监听某个端口进入 LISTEN 状态</li>\n<li>然后客户端主动发起连接，发送 SYN，然后自己变为 SYN-SENT，seq=x</li>\n<li>服务端收到之后，返回 SYN seq=y 和 ACk ack=x+1(对于客户端发来的 SYN)，自己变成 SYN-REVD</li>\n<li>之后客户端发送 ACK seq= x+ 1,ack= y + 1 给服务端，自己变成 EASTBLISHED 状态，服务端收到 ACK，也进入 ESTABLISHED</li>\n</ul>\n<h3 id=\"为什么不是两次\"><a href=\"#为什么不是两次\" class=\"headerlink\" title=\"为什么不是两次\"></a>为什么不是两次</h3><blockquote>\n<p>无法确认客户端的接收能力。</p>\n</blockquote>\n<h3 id=\"四次挥手\"><a href=\"#四次挥手\" class=\"headerlink\" title=\"四次挥手\"></a>四次挥手</h3><ul>\n<li>一开始都处于 ESTABLISH 状态，然后客户端发送 FIN 报文，带上 seq = p,状态变为 FIN-WAIT-1</li>\n<li>服务端收到之后，发送 ACK 确认，ack = p + 1,然后进入 CLOSE-WAIT 状态</li>\n<li>客户端收到之后进入 FIN-WAIT-2 状态</li>\n<li>过了一会等数据处理完，再次发送 FIN、ACK、seq = q ,ack = p +1，进入 LAST-ACK 阶段</li>\n<li>客户端收到 FIN 之后，客户端进入 TIME_WAIT（等待 2MSL），然后发送 ACK 给服务端 ack= 1+1</li>\n<li>服务端收到之后进入 CLOSED 状态</li>\n</ul>\n<h2 id=\"3-浏览器输入-url-之后发生了什么\"><a href=\"#3-浏览器输入-url-之后发生了什么\" class=\"headerlink\" title=\"3.浏览器输入 url 之后发生了什么\"></a>3.浏览器输入 url 之后发生了什么</h2><ol>\n<li>浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址；</li>\n<li>建立 TCP 连接（三次握手）；</li>\n<li>浏览器发出读取文件（URL 中域名后面部分对应的文件）的 HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器；</li>\n<li>服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器；</li>\n<li>释放 TCP 连接（四次挥手）</li>\n<li>浏览器将该 html 文本导出并显示内容</li>\n</ol>\n<h2 id=\"4-Cookie、sessionStorage、localStorage-区别\"><a href=\"#4-Cookie、sessionStorage、localStorage-区别\" class=\"headerlink\" title=\"4.Cookie、sessionStorage、localStorage 区别\"></a>4.Cookie、sessionStorage、localStorage 区别</h2><p>共同点：都是保存在浏览器端，且同源的。</p>\n<p>区别：</p>\n<ol>\n<li>cookie 数据始终在同源的 http 请求中携带，即 cookie 在浏览器中和服务器间来回传递。sessionStorage 和 localStorage 不会自动把数据发给服务器，仅在本地保存。</li>\n<li>cookie 数据不能超过 4k(适合保存小数据)。sessionStorage 和 localStorage 容量较大。</li>\n<li>数据有效期不同<ul>\n<li>sessionStorage:仅在当前浏览器窗口关闭前有效。</li>\n<li>localStorage:始终有效，窗口或浏览器关闭也一直保存，需手动清除。</li>\n<li>cookie 只在设置的 cookie 过期时间之前一直有效，即使窗口或浏览器关闭。</li>\n</ul>\n</li>\n<li>作用域不同。<ul>\n<li>sessionStorage 不在不同的浏览器窗口中共享。</li>\n<li>localStorage 在所有同源窗口中都是共享的。</li>\n<li>cookie 也是在所有同源窗口中都是共享的。</li>\n</ul>\n</li>\n<li>应用场景<ul>\n<li>localStorage：常用于长期登录（+判断用户是否已登录），适合长期保存在本地的数据。</li>\n<li>sessionStorage：敏感账号一次性登录。</li>\n<li>cookie 与服务器交互。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"5-原型和原型链\"><a href=\"#5-原型和原型链\" class=\"headerlink\" title=\"5.原型和原型链\"></a>5.原型和原型链</h2><p>创建了一个函数就会为其创建一个 prototype 属性，指向这个函数的原型对象，原型对象会自动获得 constructor 属性，指向 prototype 属性所在函数。</p>\n<p>当一个对象调用某个方法或者属性的时候，先在自身查找，如果找到就调用，如果没有就顺着<strong>proto</strong>到原型对象中查找，如果还没有就继续去原型的原型中查找，一直到 null，这样形成一条链叫做原型链。</p>\n<h2 id=\"6-作用域和闭包\"><a href=\"#6-作用域和闭包\" class=\"headerlink\" title=\"6.作用域和闭包\"></a>6.作用域和闭包</h2><p>作用域可理解为该上下文中声明的<strong>变量和声明的作用范围</strong>。</p>\n<p>闭包属于一种特殊的作用域，称为静态作用域。它的定义可以理解为：<strong>父函数被销毁</strong>的情况下，返回出的子函数仍然可以继续访问到父级的变量对象，这样的函数称为闭包。</p>\n<ul>\n<li>闭包会产生一个很经典的问题：<ul>\n<li>多个子函数的都是同时指向父级，是完全共享的。因此当父级的变量对象被修改时，所有子函数都受到影响。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"7-this-的指向问题\"><a href=\"#7-this-的指向问题\" class=\"headerlink\" title=\"7.this 的指向问题\"></a>7.this 的指向问题</h2><p>口诀：箭头函数、new、bind、apply 和 call、欧比届点（obj.）、直接调用、不在函数里。</p>\n<h3 id=\"1-箭头函数\"><a href=\"#1-箭头函数\" class=\"headerlink\" title=\"1.箭头函数\"></a>1.箭头函数</h3><p>箭头函数 this 不会被改变</p>\n<ol>\n<li>创建箭头函数时，就已经确定了它的 this 指向。</li>\n<li>箭头韩式内的 this 指向<strong>外层的 this。</strong></li>\n</ol>\n<h3 id=\"2-new\"><a href=\"#2-new\" class=\"headerlink\" title=\"2.new\"></a>2.new</h3><p><strong>当使用 new 关键字调用函数时，函数中的 this 一定是 JS 创建的新对象</strong>。</p>\n<h3 id=\"3-bind\"><a href=\"#3-bind\" class=\"headerlink\" title=\"3.bind\"></a>3.bind</h3><p>bind 指 Function.prototype.bind()</p>\n<h4 id=\"多次-bind-时只认第一次-bind-的值\"><a href=\"#多次-bind-时只认第一次-bind-的值\" class=\"headerlink\" title=\"多次 bind 时只认第一次 bind 的值\"></a>多次 bind 时只认第一次 bind 的值</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"箭头函数中-this-不会被修改\"><a href=\"#箭头函数中-this-不会被修改\" class=\"headerlink\" title=\"箭头函数中 this 不会被修改\"></a>箭头函数中 this 不会被修改</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//window 口诀1优先</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"4-apply-和-call\"><a href=\"#4-apply-和-call\" class=\"headerlink\" title=\"4.apply 和 call\"></a>4.apply 和 call</h3><p><code>apply()</code>和<code>call()</code>的第一个参数都是 this，区别在于通过 apply 调用时实参是放到数组中的，而通过 call 调用时实参是逗号分隔的。</p>\n<h4 id=\"bind-函数中-this-不会被修改\"><a href=\"#bind-函数中-this-不会被修改\" class=\"headerlink\" title=\"bind 函数中 this 不会被修改\"></a>bind 函数中 this 不会被修改</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//这里this指向取决于外层this，参考口诀7不在函数里</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"5-欧比届点-obj\"><a href=\"#5-欧比届点-obj\" class=\"headerlink\" title=\"5.欧比届点(obj.)\"></a>5.欧比届点(obj.)</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nobj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> x<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>func <span class=\"token operator\">=</span> func<span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"6-直接调用\"><a href=\"#6-直接调用\" class=\"headerlink\" title=\"6.直接调用\"></a>6.直接调用</h3><p>在函数不满足前面的场景，被直接调用时，this 将指向全局对象。在浏览器环境中全局对象是 Window</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//window</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"7-不在函数里\"><a href=\"#7-不在函数里\" class=\"headerlink\" title=\"7.不在函数里\"></a>7.不在函数里</h3><p>不在函数中的场景，可分为浏览器的 <code>&lt;script /&gt;</code> 标签里，或 Node.js 的模块文件里。</p>\n<ol>\n<li>在 <code>&lt;script /&gt;</code> 标签里，this 指向 Window。</li>\n<li>在 Node.js 的模块文件里，this 指向 Module 的默认导出对象，也就是 module.exports。</li>\n</ol>\n<h2 id=\"9-数组去重\"><a href=\"#9-数组去重\" class=\"headerlink\" title=\"9.数组去重\"></a>9.数组去重</h2><ol>\n<li>定义一个新数组，并存放原数组的第一个元素，然后将元素组一一和新数组的元素对比，若不同则存放在新数组中。</li>\n<li>先将原数组排序，再与相邻的进行比较，如果不同则存入新数组。</li>\n<li>利用对象属性存在的特性，如果没有该属性则存入新数组。</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">unique</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n    obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>obj<span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">//如果能查找到，证明数组元素重复了</span>\n      obj<span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//打印结果：(3)[1,2,3]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"4\">\n<li><p>使用 es6 set,Set 数据结构，它类似于数组，其成员的值都是唯一的</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre></li>\n<li><p>使用 filter 过滤函数去重</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h2 id=\"10-防抖、节流\"><a href=\"#10-防抖、节流\" class=\"headerlink\" title=\"10.防抖、节流\"></a>10.防抖、节流</h2></li>\n</ol>\n<p>防抖：触发高频函数事件后，n 秒内函数只能执行一次，如果在 n 秒内这个事件再次被触发的话，那么会重新计算时间。</p>\n<p>​ 通常使用场景：用户输入，只需再输入完成后做一次输入校验即可。</p>\n<p>节流：指连续触发事件但是在 n 秒内只执行一次函数。节流会稀释函数的执行频率。</p>\n<p>​ 通常使用场景:滚动条事件或者 resize 事件，通常每隔 100~500ms 执行一次即可。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//防抖</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span>wait</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">let</span> timeout<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>itmeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeout<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\ttimeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>arguments<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>wait<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//节流</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span>wait</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">let</span> timeout<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\ttimeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span>\n\t\ttimeout <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>wait<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"11-ES6-的新特性\"><a href=\"#11-ES6-的新特性\" class=\"headerlink\" title=\"11.ES6 的新特性\"></a>11.ES6 的新特性</h2><ol>\n<li>声明 let / const</li>\n<li>解构赋值</li>\n<li>class/extend:类声明与继承</li>\n<li>Set / Map：新的数据结构</li>\n<li>箭头函数</li>\n<li>promise</li>\n<li>async/await</li>\n<li>数组/对象的扩展</li>\n</ol>\n<h2 id=\"12-跨域\"><a href=\"#12-跨域\" class=\"headerlink\" title=\"12.跨域\"></a>12.跨域</h2><h3 id=\"1-为什么会出现跨域问题\"><a href=\"#1-为什么会出现跨域问题\" class=\"headerlink\" title=\"1.为什么会出现跨域问题\"></a>1.为什么会出现跨域问题</h3><blockquote>\n<p>同源策略限制 不同源会造成跨域。以下任意一种情况不同，都是不同源。</p>\n</blockquote>\n<h3 id=\"2-什么情况才算做跨域\"><a href=\"#2-什么情况才算做跨域\" class=\"headerlink\" title=\"2.什么情况才算做跨域\"></a>2.什么情况才算做跨域</h3><p>非同源请求，均为跨域。名词解释：同源——如果两个页面拥有相同的协议(protocol)，端口(port)和主机(host)，那么这两个页面属于同一个源(origin)。</p>\n<h3 id=\"3-为什么有跨域需求？\"><a href=\"#3-为什么有跨域需求？\" class=\"headerlink\" title=\"3.为什么有跨域需求？\"></a>3.为什么有跨域需求？</h3><p>场景——工程服务化后，不同职责的服务分散在不同的工程中，往往这些工程的域名是不同的，但一个需求可能需要对应多个服务</p>\n<h3 id=\"4-如何实现跨域\"><a href=\"#4-如何实现跨域\" class=\"headerlink\" title=\"4.如何实现跨域\"></a>4.如何实现跨域</h3><h3 id=\"三种跨域方法\"><a href=\"#三种跨域方法\" class=\"headerlink\" title=\"三种跨域方法\"></a>三种跨域方法</h3><ul>\n<li>JSONP</li>\n<li>CORS</li>\n<li>postMessage</li>\n</ul>\n<h4 id=\"1-JSONP-只能解决-get-跨域\"><a href=\"#1-JSONP-只能解决-get-跨域\" class=\"headerlink\" title=\"1.JSONP 只能解决 get 跨域\"></a>1.JSONP 只能解决 get 跨域</h4><p><strong>单纯地为了实现跨域请求而创造的一个 trick。</strong></p>\n<p><strong>原理：动态创建一个 script 标签。利用 script 标签的 src 属性不受同源策略限制。因为所有的 src 属性和 href 属性都不受同源策略限制。可以请求第三方服务器数据内容。</strong></p>\n<h5 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h5><ol>\n<li><p>去创建一个 script 标签</p>\n</li>\n<li><p>script 的 src 属性设置接口地址</p>\n</li>\n<li><p>接口参数，必须要带一个自定义函数名，要不然后台无法返回数据</p>\n</li>\n<li><p>通过定义函数名器接受后台返回数据</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//去创建一个script标签</span>\n<span class=\"token keyword\">var</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//script的src属性设置接口地址 并带一个callback回调函数名称</span>\nscript<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'http://127.0.0.1:8888/index.php?callback=jsonpCallback'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//插入到页面</span>\ndocument<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//通过定义函数名去接收后台返回数据</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">jsonpCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//注意  jsonp返回的数据是json对象可以直接使用</span>\n  <span class=\"token comment\">//ajax  取得数据是json字符串需要转换成json对象才可以使用。</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"2-CORS：跨域资源共享\"><a href=\"#2-CORS：跨域资源共享\" class=\"headerlink\" title=\"2.CORS：跨域资源共享\"></a>2.CORS：跨域资源共享</h4></li>\n</ol>\n<ul>\n<li><strong>原理：服务器设置 Access-Control-Allow-OriginHTTP 响应头之后，浏览器将会允许跨域请求</strong></li>\n<li><strong>限制：浏览器需要支持 HTML5，可以支持 POST，PUT 等方法兼容 ie9 以上</strong></li>\n</ul>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">需要后台设置 Access-Control-Allow-Origin: * //允许所有域名访问，或者\nAccess-Control-Allow-Origin: http://a.com //只允许所有域名访问<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h4 id=\"3-设置-document-domain\"><a href=\"#3-设置-document-domain\" class=\"headerlink\" title=\"3.设置 document.domain\"></a>3.设置 document.domain</h4><ul>\n<li><strong>原理：相同主域名不同子域名下的页面，可以设置 document.domain 让他们同域</strong></li>\n<li><strong>限制：同域 document 提供的是页面间的互操作，需要载入 iframe 页面</strong></li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// URL http://a.com/foo</span>\n<span class=\"token keyword\">var</span> ifr <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'iframe'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nifr<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'http://b.a.com/bar'</span><span class=\"token punctuation\">;</span>\nifr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> ifrdoc <span class=\"token operator\">=</span> ifr<span class=\"token punctuation\">.</span>contentDocument <span class=\"token operator\">||</span> ifr<span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">;</span>\n    ifrdoc<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\nifr<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ifr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"4-用-Apache-做转发-逆向代理-，让跨域变同域\"><a href=\"#4-用-Apache-做转发-逆向代理-，让跨域变同域\" class=\"headerlink\" title=\"4.用 Apache 做转发(逆向代理)，让跨域变同域\"></a>4.用 Apache 做转发(逆向代理)，让跨域变同域</h3><h2 id=\"13-TCP-IP-分为几层？各层的作用是什么\"><a href=\"#13-TCP-IP-分为几层？各层的作用是什么\" class=\"headerlink\" title=\"13.TCP/IP 分为几层？各层的作用是什么?\"></a>13.TCP/IP 分为几层？各层的作用是什么?</h2><ol>\n<li>应用层 2.传输层 3.网络层 4.网络接口层</li>\n</ol>\n<ul>\n<li>1、应用层<ul>\n<li>TCP/IP 协议族在这一层面有着很多协议来支持不同的应用，许多大家所熟悉的基于 Internet 的应用的实现就离不开这些协议。如我们进行万维网（WWW）访问用到了 HTTP 协议、文件传输用 FTP 协议、电子邮件发送用 SMTP、域名的解析用 DNS 协议、远程登录用 Telnet 协议等等，都是属于 TCP/IP 应用层的；就用户而言，看到的是由一个个软件所构筑的大多为图形化的操作界面，而实际后台运行的便是上述协议。（FTP、SMTP、telnet、DNS、tftp）</li>\n</ul>\n</li>\n<li>2、传输层<ul>\n<li>这一层的的功能主要是提供应用程序间的通信，TCP/IP 协议族在这一层的协议有 TCP 和 UDP。（UDP）</li>\n</ul>\n</li>\n<li>3、 网络层<ul>\n<li>是 TCP/IP 协议族中非常关键的一层，主要定义了 IP 地址格式，从而能够使得不同应用类型的数据在 Internet 上通畅地传输，IP 协议就是一个网络层协议。（IP 数据包）</li>\n</ul>\n</li>\n<li>4、网络接口层<ul>\n<li>这是 TCP/IP 软件的最低层，负责接收 IP 数据包并通过网络发送之，或者从网络上接收物理帧，抽出 IP 数据报，交给 IP 层。(帧，网络接口协议)</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"前端基础知识整理\"><a href=\"#前端基础知识整理\" class=\"headerlink\" title=\"前端基础知识整理\"></a>前端基础知识整理</h2><h3 id=\"1-typeof-返回的数据类型\"><a href=\"#1-typeof-返回的数据类型\" class=\"headerlink\" title=\"1.typeof 返回的数据类型\"></a>1.typeof 返回的数据类型</h3><p>typeof 返回的数据类型包括 undefined、 string、number、boolean、symbol、object、function、bigInt 类型</p>","more":"<h3 id=\"2-检查数组的方式\"><a href=\"#2-检查数组的方式\" class=\"headerlink\" title=\"2.检查数组的方式\"></a>2.检查数组的方式</h3><ol>\n<li>isArray()方法</li>\n<li>Object.prototype.toString.call()</li>\n<li>instanceof Array</li>\n<li>constructor</li>\n<li>typeof()</li>\n</ol>\n<h3 id=\"3-js-中的-call、apply、bind-方法的区别\"><a href=\"#3-js-中的-call、apply、bind-方法的区别\" class=\"headerlink\" title=\"3.js 中的 call、apply、bind 方法的区别\"></a>3.js 中的 call、apply、bind 方法的区别</h3><p>js 中的 call apply bind 都是用来改变方法上下文(context)，就是可以使函数可以被其他对象调用。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> hxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'hxy'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">':'</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">+</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> yyw <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'yyw'</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 实际上是调用的this.say() this指的是hxy</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>yyw<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用apply后this改变指向，this指向yyw，相当于yyw.say()</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>yyw<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nhxy<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>yyw<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>运行结果：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">hxy<span class=\"token operator\">:</span> <span class=\"token number\">2212</span><span class=\"token punctuation\">;</span>\nyyw<span class=\"token operator\">:</span> <span class=\"token number\">1812</span><span class=\"token punctuation\">;</span>\nyyw<span class=\"token operator\">:</span> <span class=\"token number\">1812</span><span class=\"token punctuation\">;</span>\nyyw<span class=\"token operator\">:</span> <span class=\"token number\">1812</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-闭包\"><a href=\"#4-闭包\" class=\"headerlink\" title=\"4.闭包\"></a>4.闭包</h2><p>简单来说，闭包就是指能读取其他函数内部变量的函数<br>闭包的简单应用:</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token number\">99</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">f2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> f2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> <span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//返回n = 99;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>运行结果返回了 f1 中的变量 n</p>\n<p>闭包有三个特性:</p>\n<blockquote>\n<p>1.函数嵌套函数 2.函数内部可以引用外部的参数和变量 3.参数和变量不会被垃圾回收机制回收</p>\n</blockquote>\n<p>使用闭包主要是为了设计私有的方法和变量。闭包的优点是可以避免全局变量的污染，缺点是闭包会常驻内存，会增大内存使用量，使用不当很容易造成内存泄露。</p>\n<h3 id=\"5-js-事件机制\"><a href=\"#5-js-事件机制\" class=\"headerlink\" title=\"5.js 事件机制\"></a>5.js 事件机制</h3><p>DOM 事件流分为三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段<br><strong>事件捕获（event capturing）</strong>：通俗的理解就是，当鼠标点击或者触发 dom 事件时，浏览器会从根节点开始由外到内进行事件传播，即点击了子元素，如果父元素通过事件捕获方式注册了对应的事件的话，会先触发父元素绑定的事件。<br><strong>事件冒泡（dubbed bubbling）</strong>：与事件捕获恰恰相反，事件冒泡顺序是由内到外进行事件传播，直到根节点。<br>dom 标准事件流的处理顺序为先捕获、再冒泡</p>\n<h3 id=\"6-常用的处理字符串方法\"><a href=\"#6-常用的处理字符串方法\" class=\"headerlink\" title=\"6.常用的处理字符串方法\"></a>6.常用的处理字符串方法</h3><p><strong>.charAt(index)</strong>:获取字符串索引对应的具体字符，参数 index 介于 0~length-1 之间。</p>\n<p><strong>.indexOf(value,index)</strong>:返回字符串第一次出现指定值的索引，没有找到指定值就返回-1。<br>字符串、数组都适用。<br>value：必需，规定需检索的字符串值。可选的整数参数。<br>index：规定在字符串中开始检索的位置。它的合法取值是 0 到 stringObject.length - 1。如省略该参数，则将从字符串的首字符开始检索。</p>\n<p><strong>.substr(start,length)</strong>:返回从指定位置开始到指定字符数的字符。</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/16573783-49cd30241aecbd9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/895/format/webp\" alt=\"img\"></p>\n<p><strong>.substring(indexStart,indexEnd)</strong>:返回一个字符串从开始索引到结束索引之间的新字符串。</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/16573783-263e9cc74899752c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/877/format/webp\" alt=\"img\"></p>\n<p><strong>.split() 字符串</strong>：使用指定的分隔符字符串将一个<a href=\"https://links.jianshu.com/go?to=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/String\"><code>String</code></a>对象分割成子字符串数组，以一个指定的分割字串来决定每个拆分的位置。</p>\n<p><strong>.replace() 字符串</strong>：方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串</p>\n<p><strong>toLowerCase()</strong>:会将调用该方法的字符串值转为小写形式，并返回。</p>\n<p><strong>toUpperCase()</strong>:方法将调用该方法的字符串转为大写形式并返回（如果调用该方法的值不是字符串类型会被强制转换）。</p>\n<h2 id=\"7-window-对象-和-document-对象\"><a href=\"#7-window-对象-和-document-对象\" class=\"headerlink\" title=\"7.window 对象 和 document 对象\"></a>7.window 对象 和 document 对象</h2><p>window 对象：代表浏览器中一个打开的窗口<br>document 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象</p>\n<p>document 对象是 window 对象的一部分，可以有 window. document 来访问</p>\n<h2 id=\"html-部分\"><a href=\"#html-部分\" class=\"headerlink\" title=\"html 部分\"></a>html 部分</h2><h2 id=\"1-说说你对语义化的理解？\"><a href=\"#1-说说你对语义化的理解？\" class=\"headerlink\" title=\"1.说说你对语义化的理解？\"></a>1.说说你对语义化的理解？</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">1，去掉或者丢失样式的时候能够让页面呈现出清晰的结构\n2，有利于SEO：和搜索引擎建立良好沟通，有助于爬虫抓取更多的有效信息：爬虫依赖于标签来确定上下文和各个关键字的权重；\n3，方便其他设备解析（如屏幕阅读器、盲人阅读器、移动设备）以意译的方式来渲染网页；\n4，便于团队开发和维护，语义化更具可读性，是网页的重要动向，遵循W3C标准的团队都遵循这个标准，可以减少差异化。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"2-Doctype-作用-严格模式与混杂模式如何区分？它们有何意义\"><a href=\"#2-Doctype-作用-严格模式与混杂模式如何区分？它们有何意义\" class=\"headerlink\" title=\"2.Doctype 作用? 严格模式与混杂模式如何区分？它们有何意义?\"></a>2.Doctype 作用? 严格模式与混杂模式如何区分？它们有何意义?</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">（1）&lt;!DOCTYPE&gt; 声明位于文档中的最前面，处于 &lt;html&gt; 标签之前。告知浏览器以何种模式来渲染文档。\n\n（2）、严格模式的排版和 JS 运作模式是  以该浏览器支持的最高标准运行。\n\n（3）、在混杂模式中，页面以宽松的向后兼容的方式显示。模拟老式浏览器的行为以防止站点无法工作。\n\n（4）、DOCTYPE不存在或格式不正确会导致文档以混杂模式呈现。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"3-你知道多少种-Doctype-文档类型？\"><a href=\"#3-你知道多少种-Doctype-文档类型？\" class=\"headerlink\" title=\"3.你知道多少种 Doctype 文档类型？\"></a>3.你知道多少种 Doctype 文档类型？</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\"> 该标签可声明三种 DTD 类型，分别表示严格版本、过渡版本以及基于框架的 HTML 文档。\n HTML 4.01 规定了三种文档类型：Strict、Transitional 以及 Frameset。\n XHTML 1.0 规定了三种 XML 文档类型：Strict、Transitional 以及 Frameset。\nStandards （标准）模式（也就是严格呈现模式）用于呈现遵循最新标准的网页，而 Quirks\n （包容）模式（也就是松散呈现模式或者兼容模式）用于呈现为传统浏览器而设计的网页。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-DOM-操作——怎样添加、移除、移动、复制、创建和查找节点。\"><a href=\"#4-DOM-操作——怎样添加、移除、移动、复制、创建和查找节点。\" class=\"headerlink\" title=\"4.DOM 操作——怎样添加、移除、移动、复制、创建和查找节点。\"></a>4.DOM 操作——怎样添加、移除、移动、复制、创建和查找节点。</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">（1）创建新节点\n\n      createDocumentFragment()    &#x2F;&#x2F;创建一个DOM片段\n\n      createElement()   &#x2F;&#x2F;创建一个具体的元素\n\n      createTextNode()   &#x2F;&#x2F;创建一个文本节点\n\n（2）添加、移除、替换、插入\n\n      appendChild()\n\n      removeChild()\n\n      replaceChild()\n\n      insertBefore() &#x2F;&#x2F;在已有的子节点前插入一个新的子节点\n\n（3）查找\n\n      getElementsByTagName()    &#x2F;&#x2F;通过标签名称\n\n      getElementsByName()    &#x2F;&#x2F;通过元素的Name属性的值(IE容错能力较强，会得到一个数组，其中包括id等于name值的)\n\n      getElementById()    &#x2F;&#x2F;通过元素Id，唯一性<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"5-html5-有哪些新特性、移除了那些元素？如何处理-HTML5-新标签的浏览器兼容问题？如何区分-HTML-和-HTML5？\"><a href=\"#5-html5-有哪些新特性、移除了那些元素？如何处理-HTML5-新标签的浏览器兼容问题？如何区分-HTML-和-HTML5？\" class=\"headerlink\" title=\"5.html5 有哪些新特性、移除了那些元素？如何处理 HTML5 新标签的浏览器兼容问题？如何区分 HTML 和 HTML5？\"></a>5.html5 有哪些新特性、移除了那些元素？如何处理 HTML5 新标签的浏览器兼容问题？如何区分 HTML 和 HTML5？</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">* HTML5 现在已经不是 SGML 的子集，主要是关于图像，位置，存储，多任务等功能的增加。\n\n* 拖拽释放(Drag and drop) API\n  语义化更好的内容标签（header,nav,footer,aside,article,section）\n  音频、视频API(audio,video)\n  画布(Canvas) API\n  地理(Geolocation) API\n  本地离线存储 localStorage 长期存储数据，浏览器关闭后数据不丢失；\n  sessionStorage 的数据在浏览器关闭后自动删除\n\n  表单控件，calendar、date、time、email、url、search\n  新的技术webworker, websocket, Geolocation\n\n* 移除的元素\n\n纯表现的元素：basefont，big，center，font, s，strike，tt，u；\n\n对可用性产生负面影响的元素：frame，frameset，noframes；\n\n支持HTML5新标签：\n\n* IE8&#x2F;IE7&#x2F;IE6支持通过document.createElement方法产生的标签，\n  可以利用这一特性让这些浏览器支持HTML5新标签，\n\n  浏览器支持新标签后，还需要添加标签默认的样式：\n\n* 当然最好的方式是直接使用成熟的框架、使用最多的是html5shim框架\n   &lt;!--[if lt IE 9]&gt;\n   &lt;script&gt; src&#x3D;&quot;http:&#x2F;&#x2F;html5shim.googlecode.com&#x2F;svn&#x2F;trunk&#x2F;html5.js&quot;&lt;&#x2F;script&gt;\n   &lt;![endif]--&gt;\n如何区分：DOCTYPE声明新增的结构元素功能元素<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"6-documen-write-和-innerHTML-的区别\"><a href=\"#6-documen-write-和-innerHTML-的区别\" class=\"headerlink\" title=\"6.documen.write 和 innerHTML 的区别\"></a>6.documen.write 和 innerHTML 的区别</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">document.write只能重绘整个页面\n\ninnerHTML可以重绘页面的一部分<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"7-什么是-HTML5-以及和-HTML-的区别是什么\"><a href=\"#7-什么是-HTML5-以及和-HTML-的区别是什么\" class=\"headerlink\" title=\"7.什么是 HTML5 以及和 HTML 的区别是什么\"></a>7.什么是 HTML5 以及和 HTML 的区别是什么</h2><h3 id=\"概念\"><a href=\"#概念\" class=\"headerlink\" title=\"概念\"></a>概念</h3><p>HTML5 是 HTML 的新标准，其主要目标是无需任何额外的插件如 Flash、Sliverlight 等，就可以传输所有内容。他囊括了动画、视频、丰富的图形用户界面等。</p>\n<h3 id=\"区别\"><a href=\"#区别\" class=\"headerlink\" title=\"区别\"></a>区别</h3><h4 id=\"从语义结构上看：\"><a href=\"#从语义结构上看：\" class=\"headerlink\" title=\"从语义结构上看：\"></a>从语义结构上看：</h4><ul>\n<li>HTML4.0：没有体现结构语义化的标签，通常都是是这样来命名的<code>&lt;div id=&quot;header&quot;&gt;&lt;/div&gt;</code>，这样表示网站的头部。</li>\n<li>HTML5：在语义上却有很大的优势。提供了一些新的标签，比如<header><article><footer><aside></li>\n</ul>\n<h2 id=\"8-行内元素有哪些？块级元素有哪些？-空-void-元素有那些？\"><a href=\"#8-行内元素有哪些？块级元素有哪些？-空-void-元素有那些？\" class=\"headerlink\" title=\"8.行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？\"></a>8.行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？</h2><ul>\n<li>行内元素： <code>a</code>, <code>span</code>, <code>img</code>, <code>input</code>, <code>select</code>, <code>strong</code>;</li>\n<li>块级元素： <code>div</code>, <code>ul</code>, <code>li</code>, <code>dl</code>, <code>dt</code>, <code>dd</code>, <code>h1-5</code>, <code>p</code>等；</li>\n<li>空元素： <code>&lt;br&gt;</code>, <code>&lt;hr&gt;</code>, <code>&lt;img&gt;</code>, <code>&lt;link&gt;</code>, <code>&lt;meta&gt;</code>;</li>\n</ul>\n<h2 id=\"9-WebSocket-的实现和应用\"><a href=\"#9-WebSocket-的实现和应用\" class=\"headerlink\" title=\"9.WebSocket 的实现和应用\"></a>9.WebSocket 的实现和应用</h2><h3 id=\"什么是-webSocket？\"><a href=\"#什么是-webSocket？\" class=\"headerlink\" title=\"什么是 webSocket？\"></a>什么是 webSocket？</h3><p>WebSocket 是 HTML5 中的协议，支持持久连续，http 协议不支持持久性连接。</p>\n<h3 id=\"WebSocket-是什么样的协议，具体有什么优点。\"><a href=\"#WebSocket-是什么样的协议，具体有什么优点。\" class=\"headerlink\" title=\"WebSocket 是什么样的协议，具体有什么优点。\"></a>WebSocket 是什么样的协议，具体有什么优点。</h3><p>WebSocket 是基于 Http 协议的，或者说借用了 Http 协议来完成一部分握手，在握手阶段与 Http 是相同的。</p>\n<h2 id=\"10-HTML-元素如何体现其嵌套关系\"><a href=\"#10-HTML-元素如何体现其嵌套关系\" class=\"headerlink\" title=\"10.HTML 元素如何体现其嵌套关系\"></a>10.HTML 元素如何体现其嵌套关系</h2><ul>\n<li>块级元素可以包含行内元素</li>\n<li>块级元素不一定能包含块级元素</li>\n<li>行内元素一般不能包含块级元素（a 元素例外）</li>\n</ul>\n<h2 id=\"11-对-HTML5-有什么了解？\"><a href=\"#11-对-HTML5-有什么了解？\" class=\"headerlink\" title=\"11.对 HTML5 有什么了解？\"></a>11.对 HTML5 有什么了解？</h2><ul>\n<li>良好的移动性，以移动设备为主；</li>\n<li>响应式设计，以适应自动变化的屏幕尺寸</li>\n<li>支持离线缓存技术，webStorage 本地缓存</li>\n<li>新增的地理位置等</li>\n<li>新增 webSocket/webwork 技术</li>\n</ul>\n<h1 id=\"CSS-部分\"><a href=\"#CSS-部分\" class=\"headerlink\" title=\"CSS 部分\"></a>CSS 部分</h1><h2 id=\"1-标准的-CSS-盒子模型及其和低版本的-IE-盒子模型的区别？\"><a href=\"#1-标准的-CSS-盒子模型及其和低版本的-IE-盒子模型的区别？\" class=\"headerlink\" title=\"1.标准的 CSS 盒子模型及其和低版本的 IE 盒子模型的区别？\"></a>1.标准的 CSS 盒子模型及其和低版本的 IE 盒子模型的区别？</h2><p>标准（W3C）盒子模型：<code>width</code> = 内容宽度<code>（content） + border + padding + margin</code></p>\n<p>低版本 IE 盒子模型： <code>width</code> = 内容宽度<code>（content + border + padding）+ margin</code></p>\n<h2 id=\"2-display-有哪些值？他们的作用是什么？\"><a href=\"#2-display-有哪些值？他们的作用是什么？\" class=\"headerlink\" title=\"2.display 有哪些值？他们的作用是什么？\"></a>2.display 有哪些值？他们的作用是什么？</h2><ul>\n<li>none：使用后元素将不会显示</li>\n<li>grid：定义一个容器属性为网格布局</li>\n<li>flex：定义一个弹性布局</li>\n<li>block：使用后元素将变为块级元素显示，元素前后带有换行符</li>\n<li>inline：display 默认值。使用后原色变为行内元素显示，前后无换行符</li>\n<li>list-item：使用后元素作为列表显示</li>\n<li>table：使用后将作为块级表格显示（类似<table>），前后带有换行符</li>\n</ul>\n<h2 id=\"3-用-CSS-创建一个三角形\"><a href=\"#3-用-CSS-创建一个三角形\" class=\"headerlink\" title=\"3.用 CSS 创建一个三角形\"></a>3.用 CSS 创建一个三角形</h2><pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.content</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-top</span><span class=\"token punctuation\">:</span> 40px solid transparent<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-left</span><span class=\"token punctuation\">:</span> 40px solid transparent<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-right</span><span class=\"token punctuation\">:</span> 40px solid transparent<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-bottom</span><span class=\"token punctuation\">:</span> 40px solid #ff0000<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-什么是响应式设计？响应式设计的基本原理是什么？\"><a href=\"#4-什么是响应式设计？响应式设计的基本原理是什么？\" class=\"headerlink\" title=\"4.什么是响应式设计？响应式设计的基本原理是什么？\"></a>4.什么是响应式设计？响应式设计的基本原理是什么？</h2><p>响应式网站设计是一个网站能够兼容多个终端，而不是为每一个终端做一个特定的版本。</p>\n<p>关于原理：基本原理是通过媒体查询（@media）查询检测不同的设备屏幕尺寸做处理。</p>\n<p>关于兼容：页面头部必须有 meta 生命的 viewport</p>\n<h2 id=\"5-浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\"><a href=\"#5-浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\" class=\"headerlink\" title=\"5.浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？\"></a>5.浮动原理以及为什么会出现浮动和什么时候需要清除浮动？清除浮动的方式？</h2><p>非 IE 浏览器下，容器不设定高度且子元素浮动时，容器高度不能被内容撑开。此时，内容会溢出到容器外面而影响布局。此类现象被称为浮动（溢出）</p>\n<p>原理：</p>\n<ul>\n<li>浮动元素脱离文档流，不占据空间</li>\n<li>浮动元素碰到包含它的边框或其他浮动元素的边框停留。</li>\n</ul>\n<p>浮动会带来的问题：</p>\n<ul>\n<li>父级元素的高度将会无法被，会影响与父级元素同级的元素</li>\n<li>与浮动元素同级的非浮动元素（内联元素）会跟随其后</li>\n<li>若浮动的元素不是第一个元素，则该元素之前的元素也要浮动，否则会影响页面的显示结构。</li>\n</ul>\n<p>清除方式：</p>\n<ul>\n<li>父级盒子定义高度（height）</li>\n<li>最后一个浮动元素后面加一个 div 空标签，并且添加样式 clear:both</li>\n<li>包含浮动元素的父级标签添加样式 overflow 为 hidden/both</li>\n</ul>\n<h2 id=\"6-before-和-after-中双冒号和单冒号有什么区别？解释一下这-2-个伪元素的作用\"><a href=\"#6-before-和-after-中双冒号和单冒号有什么区别？解释一下这-2-个伪元素的作用\" class=\"headerlink\" title=\"6.::before 和:after 中双冒号和单冒号有什么区别？解释一下这 2 个伪元素的作用\"></a>6.::before 和:after 中双冒号和单冒号有什么区别？解释一下这 2 个伪元素的作用</h2><ul>\n<li>冒号用于 css3 伪类，双冒号用于 css3 伪元素</li>\n<li>::before 就是以一个子元素的存在，定义在元素主体内容之前的一个伪元素，并不存在于 dom 之中，只存在在页面之中。</li>\n</ul>\n<h2 id=\"7-display-float-position-有什么关系？\"><a href=\"#7-display-float-position-有什么关系？\" class=\"headerlink\" title=\"7.display,float,position 有什么关系？\"></a>7.display,float,position 有什么关系？</h2><ul>\n<li>如果 <code>display</code> 为<code>none</code>，那么<code>position</code>和<code>float</code>都不起作用，元素不显示；</li>\n<li>如果<code>position</code>值为<code>absolute</code>或者<code>fixed</code>，元素绝对定位，<code>float</code>的计算值为<code>none</code>，<code>display</code>根据下面的表格进行调整；</li>\n<li>如果<code>float</code>不是<code>none</code>，框是浮动的，<code>display</code>根据下表进行调整；</li>\n<li>其他情况下<code>display</code>的值为指定值 总结起来：绝对定位、浮动、根元素都需要调整 <code>display</code>；</li>\n</ul>\n<h2 id=\"8-什么是回流（重排）和重绘以及其区别？\"><a href=\"#8-什么是回流（重排）和重绘以及其区别？\" class=\"headerlink\" title=\"8.什么是回流（重排）和重绘以及其区别？\"></a>8.什么是回流（重排）和重绘以及其区别？</h2><ul>\n<li>回流（重排）reflow：当 render tree 中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变时而需要重新构建；</li>\n<li>重绘(repaint)：当 redner tree 中的一些元素需要更新属性，而这些属性只影响元素的外观，网格，而不会影响布局时，称其为重绘，例如颜色改变等。</li>\n<li><strong>每个页面至少需要引发一次重排+重绘，而且重排(回流)一定会引发重绘。</strong></li>\n</ul>\n<h1 id=\"计算机网络知识\"><a href=\"#计算机网络知识\" class=\"headerlink\" title=\"计算机网络知识\"></a>计算机网络知识</h1><h2 id=\"1-浏览器内核\"><a href=\"#1-浏览器内核\" class=\"headerlink\" title=\"1.浏览器内核\"></a>1.浏览器内核</h2><p>浏览器主要分为两个部分：渲染引擎和 JS 引擎</p>\n<p>渲染引擎：主要负责获取页面内容和排班渲染页面</p>\n<p>JS 引擎：解析和执行 JS 来实现页面的动态效果，以及交互内容。</p>\n<h2 id=\"2-TCP-三次握手和四次挥手\"><a href=\"#2-TCP-三次握手和四次挥手\" class=\"headerlink\" title=\"2.TCP 三次握手和四次挥手\"></a>2.TCP 三次握手和四次挥手</h2><p>为什么要进行三次握手：为了确认对方的发送和接受能力。</p>\n<h3 id=\"三次握手\"><a href=\"#三次握手\" class=\"headerlink\" title=\"三次握手\"></a>三次握手</h3><p>三次握手主要流程：</p>\n<ul>\n<li>一开始双方处于 CLOSED 状态，然后服务端开始监听某个端口进入 LISTEN 状态</li>\n<li>然后客户端主动发起连接，发送 SYN，然后自己变为 SYN-SENT，seq=x</li>\n<li>服务端收到之后，返回 SYN seq=y 和 ACk ack=x+1(对于客户端发来的 SYN)，自己变成 SYN-REVD</li>\n<li>之后客户端发送 ACK seq= x+ 1,ack= y + 1 给服务端，自己变成 EASTBLISHED 状态，服务端收到 ACK，也进入 ESTABLISHED</li>\n</ul>\n<h3 id=\"为什么不是两次\"><a href=\"#为什么不是两次\" class=\"headerlink\" title=\"为什么不是两次\"></a>为什么不是两次</h3><blockquote>\n<p>无法确认客户端的接收能力。</p>\n</blockquote>\n<h3 id=\"四次挥手\"><a href=\"#四次挥手\" class=\"headerlink\" title=\"四次挥手\"></a>四次挥手</h3><ul>\n<li>一开始都处于 ESTABLISH 状态，然后客户端发送 FIN 报文，带上 seq = p,状态变为 FIN-WAIT-1</li>\n<li>服务端收到之后，发送 ACK 确认，ack = p + 1,然后进入 CLOSE-WAIT 状态</li>\n<li>客户端收到之后进入 FIN-WAIT-2 状态</li>\n<li>过了一会等数据处理完，再次发送 FIN、ACK、seq = q ,ack = p +1，进入 LAST-ACK 阶段</li>\n<li>客户端收到 FIN 之后，客户端进入 TIME_WAIT（等待 2MSL），然后发送 ACK 给服务端 ack= 1+1</li>\n<li>服务端收到之后进入 CLOSED 状态</li>\n</ul>\n<h2 id=\"3-浏览器输入-url-之后发生了什么\"><a href=\"#3-浏览器输入-url-之后发生了什么\" class=\"headerlink\" title=\"3.浏览器输入 url 之后发生了什么\"></a>3.浏览器输入 url 之后发生了什么</h2><ol>\n<li>浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址；</li>\n<li>建立 TCP 连接（三次握手）；</li>\n<li>浏览器发出读取文件（URL 中域名后面部分对应的文件）的 HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器；</li>\n<li>服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器；</li>\n<li>释放 TCP 连接（四次挥手）</li>\n<li>浏览器将该 html 文本导出并显示内容</li>\n</ol>\n<h2 id=\"4-Cookie、sessionStorage、localStorage-区别\"><a href=\"#4-Cookie、sessionStorage、localStorage-区别\" class=\"headerlink\" title=\"4.Cookie、sessionStorage、localStorage 区别\"></a>4.Cookie、sessionStorage、localStorage 区别</h2><p>共同点：都是保存在浏览器端，且同源的。</p>\n<p>区别：</p>\n<ol>\n<li>cookie 数据始终在同源的 http 请求中携带，即 cookie 在浏览器中和服务器间来回传递。sessionStorage 和 localStorage 不会自动把数据发给服务器，仅在本地保存。</li>\n<li>cookie 数据不能超过 4k(适合保存小数据)。sessionStorage 和 localStorage 容量较大。</li>\n<li>数据有效期不同<ul>\n<li>sessionStorage:仅在当前浏览器窗口关闭前有效。</li>\n<li>localStorage:始终有效，窗口或浏览器关闭也一直保存，需手动清除。</li>\n<li>cookie 只在设置的 cookie 过期时间之前一直有效，即使窗口或浏览器关闭。</li>\n</ul>\n</li>\n<li>作用域不同。<ul>\n<li>sessionStorage 不在不同的浏览器窗口中共享。</li>\n<li>localStorage 在所有同源窗口中都是共享的。</li>\n<li>cookie 也是在所有同源窗口中都是共享的。</li>\n</ul>\n</li>\n<li>应用场景<ul>\n<li>localStorage：常用于长期登录（+判断用户是否已登录），适合长期保存在本地的数据。</li>\n<li>sessionStorage：敏感账号一次性登录。</li>\n<li>cookie 与服务器交互。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"5-原型和原型链\"><a href=\"#5-原型和原型链\" class=\"headerlink\" title=\"5.原型和原型链\"></a>5.原型和原型链</h2><p>创建了一个函数就会为其创建一个 prototype 属性，指向这个函数的原型对象，原型对象会自动获得 constructor 属性，指向 prototype 属性所在函数。</p>\n<p>当一个对象调用某个方法或者属性的时候，先在自身查找，如果找到就调用，如果没有就顺着<strong>proto</strong>到原型对象中查找，如果还没有就继续去原型的原型中查找，一直到 null，这样形成一条链叫做原型链。</p>\n<h2 id=\"6-作用域和闭包\"><a href=\"#6-作用域和闭包\" class=\"headerlink\" title=\"6.作用域和闭包\"></a>6.作用域和闭包</h2><p>作用域可理解为该上下文中声明的<strong>变量和声明的作用范围</strong>。</p>\n<p>闭包属于一种特殊的作用域，称为静态作用域。它的定义可以理解为：<strong>父函数被销毁</strong>的情况下，返回出的子函数仍然可以继续访问到父级的变量对象，这样的函数称为闭包。</p>\n<ul>\n<li>闭包会产生一个很经典的问题：<ul>\n<li>多个子函数的都是同时指向父级，是完全共享的。因此当父级的变量对象被修改时，所有子函数都受到影响。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"7-this-的指向问题\"><a href=\"#7-this-的指向问题\" class=\"headerlink\" title=\"7.this 的指向问题\"></a>7.this 的指向问题</h2><p>口诀：箭头函数、new、bind、apply 和 call、欧比届点（obj.）、直接调用、不在函数里。</p>\n<h3 id=\"1-箭头函数\"><a href=\"#1-箭头函数\" class=\"headerlink\" title=\"1.箭头函数\"></a>1.箭头函数</h3><p>箭头函数 this 不会被改变</p>\n<ol>\n<li>创建箭头函数时，就已经确定了它的 this 指向。</li>\n<li>箭头韩式内的 this 指向<strong>外层的 this。</strong></li>\n</ol>\n<h3 id=\"2-new\"><a href=\"#2-new\" class=\"headerlink\" title=\"2.new\"></a>2.new</h3><p><strong>当使用 new 关键字调用函数时，函数中的 this 一定是 JS 创建的新对象</strong>。</p>\n<h3 id=\"3-bind\"><a href=\"#3-bind\" class=\"headerlink\" title=\"3.bind\"></a>3.bind</h3><p>bind 指 Function.prototype.bind()</p>\n<h4 id=\"多次-bind-时只认第一次-bind-的值\"><a href=\"#多次-bind-时只认第一次-bind-的值\" class=\"headerlink\" title=\"多次 bind 时只认第一次 bind 的值\"></a>多次 bind 时只认第一次 bind 的值</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"箭头函数中-this-不会被修改\"><a href=\"#箭头函数中-this-不会被修改\" class=\"headerlink\" title=\"箭头函数中 this 不会被修改\"></a>箭头函数中 this 不会被修改</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//window 口诀1优先</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"4-apply-和-call\"><a href=\"#4-apply-和-call\" class=\"headerlink\" title=\"4.apply 和 call\"></a>4.apply 和 call</h3><p><code>apply()</code>和<code>call()</code>的第一个参数都是 this，区别在于通过 apply 调用时实参是放到数组中的，而通过 call 调用时实参是逗号分隔的。</p>\n<h4 id=\"bind-函数中-this-不会被修改\"><a href=\"#bind-函数中-this-不会被修改\" class=\"headerlink\" title=\"bind 函数中 this 不会被修改\"></a>bind 函数中 this 不会被修改</h4><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//这里this指向取决于外层this，参考口诀7不在函数里</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"5-欧比届点-obj\"><a href=\"#5-欧比届点-obj\" class=\"headerlink\" title=\"5.欧比届点(obj.)\"></a>5.欧比届点(obj.)</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nobj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> x<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>func <span class=\"token operator\">=</span> func<span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"6-直接调用\"><a href=\"#6-直接调用\" class=\"headerlink\" title=\"6.直接调用\"></a>6.直接调用</h3><p>在函数不满足前面的场景，被直接调用时，this 将指向全局对象。在浏览器环境中全局对象是 Window</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//window</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"7-不在函数里\"><a href=\"#7-不在函数里\" class=\"headerlink\" title=\"7.不在函数里\"></a>7.不在函数里</h3><p>不在函数中的场景，可分为浏览器的 <code>&lt;script /&gt;</code> 标签里，或 Node.js 的模块文件里。</p>\n<ol>\n<li>在 <code>&lt;script /&gt;</code> 标签里，this 指向 Window。</li>\n<li>在 Node.js 的模块文件里，this 指向 Module 的默认导出对象，也就是 module.exports。</li>\n</ol>\n<h2 id=\"9-数组去重\"><a href=\"#9-数组去重\" class=\"headerlink\" title=\"9.数组去重\"></a>9.数组去重</h2><ol>\n<li>定义一个新数组，并存放原数组的第一个元素，然后将元素组一一和新数组的元素对比，若不同则存放在新数组中。</li>\n<li>先将原数组排序，再与相邻的进行比较，如果不同则存入新数组。</li>\n<li>利用对象属性存在的特性，如果没有该属性则存入新数组。</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">unique</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n    obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>obj<span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">//如果能查找到，证明数组元素重复了</span>\n      obj<span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n      result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//打印结果：(3)[1,2,3]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"4\">\n<li><p>使用 es6 set,Set 数据结构，它类似于数组，其成员的值都是唯一的</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre></li>\n<li><p>使用 filter 过滤函数去重</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h2 id=\"10-防抖、节流\"><a href=\"#10-防抖、节流\" class=\"headerlink\" title=\"10.防抖、节流\"></a>10.防抖、节流</h2></li>\n</ol>\n<p>防抖：触发高频函数事件后，n 秒内函数只能执行一次，如果在 n 秒内这个事件再次被触发的话，那么会重新计算时间。</p>\n<p>​ 通常使用场景：用户输入，只需再输入完成后做一次输入校验即可。</p>\n<p>节流：指连续触发事件但是在 n 秒内只执行一次函数。节流会稀释函数的执行频率。</p>\n<p>​ 通常使用场景:滚动条事件或者 resize 事件，通常每隔 100~500ms 执行一次即可。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//防抖</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span>wait</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">let</span> timeout<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>itmeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeout<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\ttimeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>arguments<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>wait<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//节流</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span>wait</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">let</span> timeout<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\ttimeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span>\n\t\ttimeout <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>wait<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"11-ES6-的新特性\"><a href=\"#11-ES6-的新特性\" class=\"headerlink\" title=\"11.ES6 的新特性\"></a>11.ES6 的新特性</h2><ol>\n<li>声明 let / const</li>\n<li>解构赋值</li>\n<li>class/extend:类声明与继承</li>\n<li>Set / Map：新的数据结构</li>\n<li>箭头函数</li>\n<li>promise</li>\n<li>async/await</li>\n<li>数组/对象的扩展</li>\n</ol>\n<h2 id=\"12-跨域\"><a href=\"#12-跨域\" class=\"headerlink\" title=\"12.跨域\"></a>12.跨域</h2><h3 id=\"1-为什么会出现跨域问题\"><a href=\"#1-为什么会出现跨域问题\" class=\"headerlink\" title=\"1.为什么会出现跨域问题\"></a>1.为什么会出现跨域问题</h3><blockquote>\n<p>同源策略限制 不同源会造成跨域。以下任意一种情况不同，都是不同源。</p>\n</blockquote>\n<h3 id=\"2-什么情况才算做跨域\"><a href=\"#2-什么情况才算做跨域\" class=\"headerlink\" title=\"2.什么情况才算做跨域\"></a>2.什么情况才算做跨域</h3><p>非同源请求，均为跨域。名词解释：同源——如果两个页面拥有相同的协议(protocol)，端口(port)和主机(host)，那么这两个页面属于同一个源(origin)。</p>\n<h3 id=\"3-为什么有跨域需求？\"><a href=\"#3-为什么有跨域需求？\" class=\"headerlink\" title=\"3.为什么有跨域需求？\"></a>3.为什么有跨域需求？</h3><p>场景——工程服务化后，不同职责的服务分散在不同的工程中，往往这些工程的域名是不同的，但一个需求可能需要对应多个服务</p>\n<h3 id=\"4-如何实现跨域\"><a href=\"#4-如何实现跨域\" class=\"headerlink\" title=\"4.如何实现跨域\"></a>4.如何实现跨域</h3><h3 id=\"三种跨域方法\"><a href=\"#三种跨域方法\" class=\"headerlink\" title=\"三种跨域方法\"></a>三种跨域方法</h3><ul>\n<li>JSONP</li>\n<li>CORS</li>\n<li>postMessage</li>\n</ul>\n<h4 id=\"1-JSONP-只能解决-get-跨域\"><a href=\"#1-JSONP-只能解决-get-跨域\" class=\"headerlink\" title=\"1.JSONP 只能解决 get 跨域\"></a>1.JSONP 只能解决 get 跨域</h4><p><strong>单纯地为了实现跨域请求而创造的一个 trick。</strong></p>\n<p><strong>原理：动态创建一个 script 标签。利用 script 标签的 src 属性不受同源策略限制。因为所有的 src 属性和 href 属性都不受同源策略限制。可以请求第三方服务器数据内容。</strong></p>\n<h5 id=\"步骤\"><a href=\"#步骤\" class=\"headerlink\" title=\"步骤\"></a>步骤</h5><ol>\n<li><p>去创建一个 script 标签</p>\n</li>\n<li><p>script 的 src 属性设置接口地址</p>\n</li>\n<li><p>接口参数，必须要带一个自定义函数名，要不然后台无法返回数据</p>\n</li>\n<li><p>通过定义函数名器接受后台返回数据</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//去创建一个script标签</span>\n<span class=\"token keyword\">var</span> script <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//script的src属性设置接口地址 并带一个callback回调函数名称</span>\nscript<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'http://127.0.0.1:8888/index.php?callback=jsonpCallback'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//插入到页面</span>\ndocument<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//通过定义函数名去接收后台返回数据</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">jsonpCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//注意  jsonp返回的数据是json对象可以直接使用</span>\n  <span class=\"token comment\">//ajax  取得数据是json字符串需要转换成json对象才可以使用。</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"2-CORS：跨域资源共享\"><a href=\"#2-CORS：跨域资源共享\" class=\"headerlink\" title=\"2.CORS：跨域资源共享\"></a>2.CORS：跨域资源共享</h4></li>\n</ol>\n<ul>\n<li><strong>原理：服务器设置 Access-Control-Allow-OriginHTTP 响应头之后，浏览器将会允许跨域请求</strong></li>\n<li><strong>限制：浏览器需要支持 HTML5，可以支持 POST，PUT 等方法兼容 ie9 以上</strong></li>\n</ul>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">需要后台设置 Access-Control-Allow-Origin: * //允许所有域名访问，或者\nAccess-Control-Allow-Origin: http://a.com //只允许所有域名访问<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h4 id=\"3-设置-document-domain\"><a href=\"#3-设置-document-domain\" class=\"headerlink\" title=\"3.设置 document.domain\"></a>3.设置 document.domain</h4><ul>\n<li><strong>原理：相同主域名不同子域名下的页面，可以设置 document.domain 让他们同域</strong></li>\n<li><strong>限制：同域 document 提供的是页面间的互操作，需要载入 iframe 页面</strong></li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// URL http://a.com/foo</span>\n<span class=\"token keyword\">var</span> ifr <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'iframe'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nifr<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'http://b.a.com/bar'</span><span class=\"token punctuation\">;</span>\nifr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> ifrdoc <span class=\"token operator\">=</span> ifr<span class=\"token punctuation\">.</span>contentDocument <span class=\"token operator\">||</span> ifr<span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">;</span>\n    ifrdoc<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\nifr<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>ifr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"4-用-Apache-做转发-逆向代理-，让跨域变同域\"><a href=\"#4-用-Apache-做转发-逆向代理-，让跨域变同域\" class=\"headerlink\" title=\"4.用 Apache 做转发(逆向代理)，让跨域变同域\"></a>4.用 Apache 做转发(逆向代理)，让跨域变同域</h3><h2 id=\"13-TCP-IP-分为几层？各层的作用是什么\"><a href=\"#13-TCP-IP-分为几层？各层的作用是什么\" class=\"headerlink\" title=\"13.TCP/IP 分为几层？各层的作用是什么?\"></a>13.TCP/IP 分为几层？各层的作用是什么?</h2><ol>\n<li>应用层 2.传输层 3.网络层 4.网络接口层</li>\n</ol>\n<ul>\n<li>1、应用层<ul>\n<li>TCP/IP 协议族在这一层面有着很多协议来支持不同的应用，许多大家所熟悉的基于 Internet 的应用的实现就离不开这些协议。如我们进行万维网（WWW）访问用到了 HTTP 协议、文件传输用 FTP 协议、电子邮件发送用 SMTP、域名的解析用 DNS 协议、远程登录用 Telnet 协议等等，都是属于 TCP/IP 应用层的；就用户而言，看到的是由一个个软件所构筑的大多为图形化的操作界面，而实际后台运行的便是上述协议。（FTP、SMTP、telnet、DNS、tftp）</li>\n</ul>\n</li>\n<li>2、传输层<ul>\n<li>这一层的的功能主要是提供应用程序间的通信，TCP/IP 协议族在这一层的协议有 TCP 和 UDP。（UDP）</li>\n</ul>\n</li>\n<li>3、 网络层<ul>\n<li>是 TCP/IP 协议族中非常关键的一层，主要定义了 IP 地址格式，从而能够使得不同应用类型的数据在 Internet 上通畅地传输，IP 协议就是一个网络层协议。（IP 数据包）</li>\n</ul>\n</li>\n<li>4、网络接口层<ul>\n<li>这是 TCP/IP 软件的最低层，负责接收 IP 数据包并通过网络发送之，或者从网络上接收物理帧，抽出 IP 数据报，交给 IP 层。(帧，网络接口协议)</li>\n</ul>\n</li>\n</ul>"},{"title":"前端面试题","date":"2021-03-07T03:03:00.000Z","desecription":"前端面试题","_content":"\n## window 对象 和 document 对象\n\nwindow 对象：代表浏览器中一个打开的窗口\ndocument 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象\ndocument 对象是 window 对象的一部分，可以有 window. document 来访问\n\n<!--more-->\n\n## javascript 中的 this 指的对象是什么？\n\n查看 JavaScript 中 this 指向的对象，this 指向的一句话法则：\n\n永远指向其所在函数的所有者,如果没有所有者时，指向 window。\n\n理解 this 的要点：关键在于将函数与函数名分开看待。同一个函数，在不同的执行方法下，会有不同的效果。\n\n1）全局函数中的 this 指向\n\n2）对象方法中的 this 指向\n\n3）绑定函数时的 this\n\n4）绑定函数时的 this\n\n5）鼠标单击事件等进行函数的绑定时，this 的指向\n\n6）setTimeout 等传参形式的 this 指向\n\n7）改变 this 的方法：call,apply\n\n## 计时器\n\n- `setTimeout`\n- `Promises`\n- `setInterval`\n- `setImeediate`\n- `requestIdleCallback`\n- `requestdleCallback`\n\n### `setTimeout`和`setInterval`\n\n`setTimeout`将任务排在 x 毫秒之后运行，`setInterval`每隔 x 毫秒运行一次任务。\n\n### `promises`和`microtasks`\n\n一个`Promise`回调也被称为\"microtask\"，它以与 MutationObserver 回调相同的频率运行。\n\n## 浅拷贝，深拷贝\n\n- 浅拷贝是创建一个新对象，这个对象有着原始对象属性值得一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。\n- 深拷贝就是将一个对象从内存中完整的拷贝一份出来，从堆内存中开辟出一个新的区域存放新的对象，且修改新对象不会影响原对象。\n\n```javascript\nlet a1 = { b: { c: {} } };\n\nlet a2 = shallowClone(a1); //浅拷贝方法\na2.b.c === a1.b.c; //true  新旧对象还是共享同一块内存\n\nlet a3 = deepClone(a3); //深拷贝方法\na3.b.c === a1.b.c; // false 新对象跟原对象不共享内存\n```\n\n```javascript\n// 浅拷贝\nlet obj1 = {\n  name: '浪里行舟',\n  arr: [1, [2, 3], 4],\n};\nlet obj3 = shallowClone(obj1);\nobj3.name = '阿浪';\nobj3.arr[1] = [5, 6, 7]; // 新旧对象还是共享同一块内存\n// 这是个浅拷贝的方法\nfunction shallowClone(source) {\n  var target = {};\n  for (var i in source) {\n    if (source.hasOwnProperty(i)) {\n      target[i] = source[i];\n    }\n  }\n  return target;\n}\nconsole.log('obj1', obj1); // obj1 { name: '浪里行舟', arr: [ 1, [ 5, 6, 7 ], 4 ] }\nconsole.log('obj3', obj3); // obj3 { name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] }\n```\n\n```javascript\n// 深拷贝\nlet obj1 = {\n  name: '浪里行舟',\n  arr: [1, [2, 3], 4],\n};\nlet obj4 = deepClone(obj1);\nobj4.name = '阿浪';\nobj4.arr[1] = [5, 6, 7]; // 新对象跟原对象不共享内存\n// 这是个深拷贝的方法\nfunction deepClone(obj) {\n  if (obj === null) return obj;\n  if (obj instanceof Date) return new Date(obj);\n  if (obj instanceof RegExp) return new RegExp(obj);\n  if (typeof obj !== 'object') return obj;\n  let cloneObj = new obj.constructor();\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      // 实现一个递归拷贝\n      cloneObj[key] = deepClone(obj[key]);\n    }\n  }\n  return cloneObj;\n}\nconsole.log('obj1', obj1); // obj1 { name: '浪里行舟', arr: [ 1, [ 2, 3 ], 4 ] }\nconsole.log('obj4', obj4); // obj4 { name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] }\n```\n\n总而言之，浅拷贝只复制指向某个对象的指针，而不复制对象本身，**新旧对象还是共享同一块内存**。但深拷贝会另外创造一个一模一样的对象，**新对象跟原对象不共享内存**，修改新对象不会改到原对象。\n\n### 浅拷贝的实现方式\n\n1. **Object.assign()**\n\n   Object.assign()方法可以把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。\n\n   ```javascript\n   let obj1 = { person: { name: 'kobe', age: 41 }, sports: 'basketball' };\n   let obj2 = Object.assign({}, obj1);\n   obj2.person.name = 'wade';\n   obj2.sports = 'football';\n   console.log(obj1); //{ person: { name: 'wade', age: 41 }, sports: 'basketball' }\n   ```\n\n2. **函数库 lodash 的\\_.clone 方法**\n\n3. **展开运算符**\n\n   ```javascript\n   let obj1 = { name: 'Kobe', address: { x: 100, y: 100 } };\n   let obj2 = { ...obj1 };\n   obj1.address.x = 200;\n   obj1.name = 'wade';\n   console.log('obj2', obj2); // obj2 { name: 'Kobe', address: { x: 200, y: 100 } }\n   ```\n\n4. #### Array.prototype.concat()\n\n### 深拷贝的实现方式\n\n1. **JSON.parse(JSON.stringify())**\n\n   ```javascript\n   let arr = [\n     1,\n     3,\n     {\n       username: ' kobe',\n     },\n   ];\n   let arr4 = JSON.parse(JSON.stringify(arr));\n   arr4[2].username = 'duncan';\n   console.log(arr, arr4);\n   ```\n\n2. #### 函数库 lodash 的\\_.cloneDeep 方法\n\n3. #### 手写递归方法\n\n   递归方法实现深度克隆原理：**遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝**。\n\n   ```javascript\n   function deepClone(obj, hash = new WeakMap()) {\n     if (obj === null) return obj; // 如果是null或者undefined我就不进行拷贝操作\n     if (obj instanceof Date) return new Date(obj);\n     if (obj instanceof RegExp) return new RegExp(obj);\n     // 可能是对象或者普通的值  如果是函数的话是不需要深拷贝\n     if (typeof obj !== 'object') return obj;\n     // 是对象的话就要进行深拷贝\n     if (hash.get(obj)) return hash.get(obj);\n     let cloneObj = new obj.constructor();\n     // 找到的是所属类原型上的constructor,而原型上的 constructor指向的是当前类本身\n     hash.set(obj, cloneObj);\n     for (let key in obj) {\n       if (obj.hasOwnProperty(key)) {\n         // 实现一个递归拷贝\n         cloneObj[key] = deepClone(obj[key], hash);\n       }\n     }\n     return cloneObj;\n   }\n   let obj = { name: 1, address: { x: 100 } };\n   obj.o = obj; // 对象存在循环引用的情况\n   let d = deepClone(obj);\n   obj.address.x = 200;\n   console.log(d);\n   ```\n\n## 继承\n\n### 1.原型链继承\n\n### 2.借用构造函数继承\n\n### 3.组合继承\n\n### 4.原型式继承\n\n## 防抖、节流\n\n### 函数防抖\n\n> 在事件被触发 n 秒后再执行回调，如果在这 n 秒内又被触发，则重新计时\n>\n> 只执行最后一个被触发的，清除之前的异步任务，核心在于`清零`。\n\n例子：页面滚动处理事件，搜索框输入联想\n\n```javascript\n// 防抖\nfunction debounce(fn, delay) {\n  var timer = null;\n  return function () {\n    var that = this;\n    var args = arguments;\n    clearTimeout(timer); // 清除重新计时\n    timer = setTimeout(function () {\n      fn.apply(that, args);\n    }, delay || 500);\n  };\n}\n\n// 使用\nfunction clickHandler() {\n  console.log('防抖click!');\n}\nconst handler = debounce(clickHandler);\ndocument.getElementById('button').addEventListener('click', handler);\n```\n\n### 函数节流\n\n> 只在开始执行一次，未执行完成过程中触发的忽略，核心在于开关锁。\n\n例如：多次点击按钮提交表单，第一次有效\n\n```javascript\n//节流\nfunction throttle(fn, delay) {\n  let timer = null;\n  return function () {\n    if (timer) {\n      return false;\n    }\n    let that = this;\n    let args = arguments;\n    fn.apply(that, args);\n    timer = setTimeout(function () {\n      clearTimeout(timer);\n      timer = null;\n    }, delay || 500);\n  };\n}\n\n//使用\nfunction clickHandler() {\n  console.log('节流click');\n}\nconst handler = throttle(clickHandler);\ndocument.getElementById('button').addEventListener('click', handler);\n```\n\n节流第一次有效，防抖反之\n\n## ajax\n\n### 什么是 ajax？ajax 作用是什么\n\n```\n异步的javascript和xml  AJAX 是一种用于创建快速动态网页的技术。  ajax用来与后台交互\n```\n\n### 原生 ajax 的五步请求\n\n```javascript\n//1.创建XMLHttpRequest对象\nlet ajax = new XMLHttpRequest();\n//2.规定请求的类型、URL以及是否异步处理请求。\najax.open(\"GET\",url,true);\n//3.发送信息至服务器时内容编码类型\najax.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n//4.发送请求\najax.send(null);\n//5.接受服务器响应数据\najax.onreadystatechange = function (){\n\tif(obj.readyState === 4 && (obj.status === 200 || obj.status === 304))\n}\n```\n","source":"_posts/前端面试题.md","raw":"---\ntitle: 前端面试题\ndate: 2021-03-07 11:03\ndesecription: 前端面试题\ntags:\n  - 'front'\n---\n\n## window 对象 和 document 对象\n\nwindow 对象：代表浏览器中一个打开的窗口\ndocument 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象\ndocument 对象是 window 对象的一部分，可以有 window. document 来访问\n\n<!--more-->\n\n## javascript 中的 this 指的对象是什么？\n\n查看 JavaScript 中 this 指向的对象，this 指向的一句话法则：\n\n永远指向其所在函数的所有者,如果没有所有者时，指向 window。\n\n理解 this 的要点：关键在于将函数与函数名分开看待。同一个函数，在不同的执行方法下，会有不同的效果。\n\n1）全局函数中的 this 指向\n\n2）对象方法中的 this 指向\n\n3）绑定函数时的 this\n\n4）绑定函数时的 this\n\n5）鼠标单击事件等进行函数的绑定时，this 的指向\n\n6）setTimeout 等传参形式的 this 指向\n\n7）改变 this 的方法：call,apply\n\n## 计时器\n\n- `setTimeout`\n- `Promises`\n- `setInterval`\n- `setImeediate`\n- `requestIdleCallback`\n- `requestdleCallback`\n\n### `setTimeout`和`setInterval`\n\n`setTimeout`将任务排在 x 毫秒之后运行，`setInterval`每隔 x 毫秒运行一次任务。\n\n### `promises`和`microtasks`\n\n一个`Promise`回调也被称为\"microtask\"，它以与 MutationObserver 回调相同的频率运行。\n\n## 浅拷贝，深拷贝\n\n- 浅拷贝是创建一个新对象，这个对象有着原始对象属性值得一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。\n- 深拷贝就是将一个对象从内存中完整的拷贝一份出来，从堆内存中开辟出一个新的区域存放新的对象，且修改新对象不会影响原对象。\n\n```javascript\nlet a1 = { b: { c: {} } };\n\nlet a2 = shallowClone(a1); //浅拷贝方法\na2.b.c === a1.b.c; //true  新旧对象还是共享同一块内存\n\nlet a3 = deepClone(a3); //深拷贝方法\na3.b.c === a1.b.c; // false 新对象跟原对象不共享内存\n```\n\n```javascript\n// 浅拷贝\nlet obj1 = {\n  name: '浪里行舟',\n  arr: [1, [2, 3], 4],\n};\nlet obj3 = shallowClone(obj1);\nobj3.name = '阿浪';\nobj3.arr[1] = [5, 6, 7]; // 新旧对象还是共享同一块内存\n// 这是个浅拷贝的方法\nfunction shallowClone(source) {\n  var target = {};\n  for (var i in source) {\n    if (source.hasOwnProperty(i)) {\n      target[i] = source[i];\n    }\n  }\n  return target;\n}\nconsole.log('obj1', obj1); // obj1 { name: '浪里行舟', arr: [ 1, [ 5, 6, 7 ], 4 ] }\nconsole.log('obj3', obj3); // obj3 { name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] }\n```\n\n```javascript\n// 深拷贝\nlet obj1 = {\n  name: '浪里行舟',\n  arr: [1, [2, 3], 4],\n};\nlet obj4 = deepClone(obj1);\nobj4.name = '阿浪';\nobj4.arr[1] = [5, 6, 7]; // 新对象跟原对象不共享内存\n// 这是个深拷贝的方法\nfunction deepClone(obj) {\n  if (obj === null) return obj;\n  if (obj instanceof Date) return new Date(obj);\n  if (obj instanceof RegExp) return new RegExp(obj);\n  if (typeof obj !== 'object') return obj;\n  let cloneObj = new obj.constructor();\n  for (let key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      // 实现一个递归拷贝\n      cloneObj[key] = deepClone(obj[key]);\n    }\n  }\n  return cloneObj;\n}\nconsole.log('obj1', obj1); // obj1 { name: '浪里行舟', arr: [ 1, [ 2, 3 ], 4 ] }\nconsole.log('obj4', obj4); // obj4 { name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] }\n```\n\n总而言之，浅拷贝只复制指向某个对象的指针，而不复制对象本身，**新旧对象还是共享同一块内存**。但深拷贝会另外创造一个一模一样的对象，**新对象跟原对象不共享内存**，修改新对象不会改到原对象。\n\n### 浅拷贝的实现方式\n\n1. **Object.assign()**\n\n   Object.assign()方法可以把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。\n\n   ```javascript\n   let obj1 = { person: { name: 'kobe', age: 41 }, sports: 'basketball' };\n   let obj2 = Object.assign({}, obj1);\n   obj2.person.name = 'wade';\n   obj2.sports = 'football';\n   console.log(obj1); //{ person: { name: 'wade', age: 41 }, sports: 'basketball' }\n   ```\n\n2. **函数库 lodash 的\\_.clone 方法**\n\n3. **展开运算符**\n\n   ```javascript\n   let obj1 = { name: 'Kobe', address: { x: 100, y: 100 } };\n   let obj2 = { ...obj1 };\n   obj1.address.x = 200;\n   obj1.name = 'wade';\n   console.log('obj2', obj2); // obj2 { name: 'Kobe', address: { x: 200, y: 100 } }\n   ```\n\n4. #### Array.prototype.concat()\n\n### 深拷贝的实现方式\n\n1. **JSON.parse(JSON.stringify())**\n\n   ```javascript\n   let arr = [\n     1,\n     3,\n     {\n       username: ' kobe',\n     },\n   ];\n   let arr4 = JSON.parse(JSON.stringify(arr));\n   arr4[2].username = 'duncan';\n   console.log(arr, arr4);\n   ```\n\n2. #### 函数库 lodash 的\\_.cloneDeep 方法\n\n3. #### 手写递归方法\n\n   递归方法实现深度克隆原理：**遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝**。\n\n   ```javascript\n   function deepClone(obj, hash = new WeakMap()) {\n     if (obj === null) return obj; // 如果是null或者undefined我就不进行拷贝操作\n     if (obj instanceof Date) return new Date(obj);\n     if (obj instanceof RegExp) return new RegExp(obj);\n     // 可能是对象或者普通的值  如果是函数的话是不需要深拷贝\n     if (typeof obj !== 'object') return obj;\n     // 是对象的话就要进行深拷贝\n     if (hash.get(obj)) return hash.get(obj);\n     let cloneObj = new obj.constructor();\n     // 找到的是所属类原型上的constructor,而原型上的 constructor指向的是当前类本身\n     hash.set(obj, cloneObj);\n     for (let key in obj) {\n       if (obj.hasOwnProperty(key)) {\n         // 实现一个递归拷贝\n         cloneObj[key] = deepClone(obj[key], hash);\n       }\n     }\n     return cloneObj;\n   }\n   let obj = { name: 1, address: { x: 100 } };\n   obj.o = obj; // 对象存在循环引用的情况\n   let d = deepClone(obj);\n   obj.address.x = 200;\n   console.log(d);\n   ```\n\n## 继承\n\n### 1.原型链继承\n\n### 2.借用构造函数继承\n\n### 3.组合继承\n\n### 4.原型式继承\n\n## 防抖、节流\n\n### 函数防抖\n\n> 在事件被触发 n 秒后再执行回调，如果在这 n 秒内又被触发，则重新计时\n>\n> 只执行最后一个被触发的，清除之前的异步任务，核心在于`清零`。\n\n例子：页面滚动处理事件，搜索框输入联想\n\n```javascript\n// 防抖\nfunction debounce(fn, delay) {\n  var timer = null;\n  return function () {\n    var that = this;\n    var args = arguments;\n    clearTimeout(timer); // 清除重新计时\n    timer = setTimeout(function () {\n      fn.apply(that, args);\n    }, delay || 500);\n  };\n}\n\n// 使用\nfunction clickHandler() {\n  console.log('防抖click!');\n}\nconst handler = debounce(clickHandler);\ndocument.getElementById('button').addEventListener('click', handler);\n```\n\n### 函数节流\n\n> 只在开始执行一次，未执行完成过程中触发的忽略，核心在于开关锁。\n\n例如：多次点击按钮提交表单，第一次有效\n\n```javascript\n//节流\nfunction throttle(fn, delay) {\n  let timer = null;\n  return function () {\n    if (timer) {\n      return false;\n    }\n    let that = this;\n    let args = arguments;\n    fn.apply(that, args);\n    timer = setTimeout(function () {\n      clearTimeout(timer);\n      timer = null;\n    }, delay || 500);\n  };\n}\n\n//使用\nfunction clickHandler() {\n  console.log('节流click');\n}\nconst handler = throttle(clickHandler);\ndocument.getElementById('button').addEventListener('click', handler);\n```\n\n节流第一次有效，防抖反之\n\n## ajax\n\n### 什么是 ajax？ajax 作用是什么\n\n```\n异步的javascript和xml  AJAX 是一种用于创建快速动态网页的技术。  ajax用来与后台交互\n```\n\n### 原生 ajax 的五步请求\n\n```javascript\n//1.创建XMLHttpRequest对象\nlet ajax = new XMLHttpRequest();\n//2.规定请求的类型、URL以及是否异步处理请求。\najax.open(\"GET\",url,true);\n//3.发送信息至服务器时内容编码类型\najax.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n//4.发送请求\najax.send(null);\n//5.接受服务器响应数据\najax.onreadystatechange = function (){\n\tif(obj.readyState === 4 && (obj.status === 200 || obj.status === 304))\n}\n```\n","slug":"前端面试题","published":1,"updated":"2021-07-26T13:35:36.051Z","_id":"cknzd1p8s000hf4rq9p7z03jj","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"window-对象-和-document-对象\"><a href=\"#window-对象-和-document-对象\" class=\"headerlink\" title=\"window 对象 和 document 对象\"></a>window 对象 和 document 对象</h2><p>window 对象：代表浏览器中一个打开的窗口<br>document 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象<br>document 对象是 window 对象的一部分，可以有 window. document 来访问</p>\n<a id=\"more\"></a>\n\n<h2 id=\"javascript-中的-this-指的对象是什么？\"><a href=\"#javascript-中的-this-指的对象是什么？\" class=\"headerlink\" title=\"javascript 中的 this 指的对象是什么？\"></a>javascript 中的 this 指的对象是什么？</h2><p>查看 JavaScript 中 this 指向的对象，this 指向的一句话法则：</p>\n<p>永远指向其所在函数的所有者,如果没有所有者时，指向 window。</p>\n<p>理解 this 的要点：关键在于将函数与函数名分开看待。同一个函数，在不同的执行方法下，会有不同的效果。</p>\n<p>1）全局函数中的 this 指向</p>\n<p>2）对象方法中的 this 指向</p>\n<p>3）绑定函数时的 this</p>\n<p>4）绑定函数时的 this</p>\n<p>5）鼠标单击事件等进行函数的绑定时，this 的指向</p>\n<p>6）setTimeout 等传参形式的 this 指向</p>\n<p>7）改变 this 的方法：call,apply</p>\n<h2 id=\"计时器\"><a href=\"#计时器\" class=\"headerlink\" title=\"计时器\"></a>计时器</h2><ul>\n<li><code>setTimeout</code></li>\n<li><code>Promises</code></li>\n<li><code>setInterval</code></li>\n<li><code>setImeediate</code></li>\n<li><code>requestIdleCallback</code></li>\n<li><code>requestdleCallback</code></li>\n</ul>\n<h3 id=\"setTimeout和setInterval\"><a href=\"#setTimeout和setInterval\" class=\"headerlink\" title=\"setTimeout和setInterval\"></a><code>setTimeout</code>和<code>setInterval</code></h3><p><code>setTimeout</code>将任务排在 x 毫秒之后运行，<code>setInterval</code>每隔 x 毫秒运行一次任务。</p>\n<h3 id=\"promises和microtasks\"><a href=\"#promises和microtasks\" class=\"headerlink\" title=\"promises和microtasks\"></a><code>promises</code>和<code>microtasks</code></h3><p>一个<code>Promise</code>回调也被称为”microtask”，它以与 MutationObserver 回调相同的频率运行。</p>\n<h2 id=\"浅拷贝，深拷贝\"><a href=\"#浅拷贝，深拷贝\" class=\"headerlink\" title=\"浅拷贝，深拷贝\"></a>浅拷贝，深拷贝</h2><ul>\n<li>浅拷贝是创建一个新对象，这个对象有着原始对象属性值得一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。</li>\n<li>深拷贝就是将一个对象从内存中完整的拷贝一份出来，从堆内存中开辟出一个新的区域存放新的对象，且修改新对象不会影响原对象。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> a2 <span class=\"token operator\">=</span> <span class=\"token function\">shallowClone</span><span class=\"token punctuation\">(</span>a1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//浅拷贝方法</span>\na2<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c <span class=\"token operator\">===</span> a1<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">;</span> <span class=\"token comment\">//true  新旧对象还是共享同一块内存</span>\n\n<span class=\"token keyword\">let</span> a3 <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>a3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//深拷贝方法</span>\na3<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c <span class=\"token operator\">===</span> a1<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">;</span> <span class=\"token comment\">// false 新对象跟原对象不共享内存</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 浅拷贝</span>\n<span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'浪里行舟'</span><span class=\"token punctuation\">,</span>\n  arr<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj3 <span class=\"token operator\">=</span> <span class=\"token function\">shallowClone</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj3<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'阿浪'</span><span class=\"token punctuation\">;</span>\nobj3<span class=\"token punctuation\">.</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 新旧对象还是共享同一块内存</span>\n<span class=\"token comment\">// 这是个浅拷贝的方法</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">shallowClone</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">source</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token keyword\">in</span> source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      target<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> source<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span> obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj1 &#123; name: '浪里行舟', arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj3'</span><span class=\"token punctuation\">,</span> obj3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj3 &#123; name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 深拷贝</span>\n<span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'浪里行舟'</span><span class=\"token punctuation\">,</span>\n  arr<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj4 <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj4<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'阿浪'</span><span class=\"token punctuation\">;</span>\nobj4<span class=\"token punctuation\">.</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 新对象跟原对象不共享内存</span>\n<span class=\"token comment\">// 这是个深拷贝的方法</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">!==</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> cloneObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">obj<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 实现一个递归拷贝</span>\n      cloneObj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> cloneObj<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span> obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj1 &#123; name: '浪里行舟', arr: [ 1, [ 2, 3 ], 4 ] &#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj4'</span><span class=\"token punctuation\">,</span> obj4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj4 &#123; name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>总而言之，浅拷贝只复制指向某个对象的指针，而不复制对象本身，<strong>新旧对象还是共享同一块内存</strong>。但深拷贝会另外创造一个一模一样的对象，<strong>新对象跟原对象不共享内存</strong>，修改新对象不会改到原对象。</p>\n<h3 id=\"浅拷贝的实现方式\"><a href=\"#浅拷贝的实现方式\" class=\"headerlink\" title=\"浅拷贝的实现方式\"></a>浅拷贝的实现方式</h3><ol>\n<li><p><strong>Object.assign()</strong></p>\n<p>Object.assign()方法可以把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> person<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'kobe'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">:</span> <span class=\"token number\">41</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> sports<span class=\"token operator\">:</span> <span class=\"token string\">'basketball'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj2 <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj2<span class=\"token punctuation\">.</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'wade'</span><span class=\"token punctuation\">;</span>\nobj2<span class=\"token punctuation\">.</span>sports <span class=\"token operator\">=</span> <span class=\"token string\">'football'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//&#123; person: &#123; name: 'wade', age: 41 &#125;, sports: 'basketball' &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p><strong>函数库 lodash 的_.clone 方法</strong></p>\n</li>\n<li><p><strong>展开运算符</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Kobe'</span><span class=\"token punctuation\">,</span> address<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> x<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>obj1 <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nobj1<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\nobj1<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'wade'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj2'</span><span class=\"token punctuation\">,</span> obj2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj2 &#123; name: 'Kobe', address: &#123; x: 200, y: 100 &#125; &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"Array-prototype-concat\"><a href=\"#Array-prototype-concat\" class=\"headerlink\" title=\"Array.prototype.concat()\"></a>Array.prototype.concat()</h4></li>\n</ol>\n<h3 id=\"深拷贝的实现方式\"><a href=\"#深拷贝的实现方式\" class=\"headerlink\" title=\"深拷贝的实现方式\"></a>深拷贝的实现方式</h3><ol>\n<li><p><strong>JSON.parse(JSON.stringify())</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span>\n    username<span class=\"token operator\">:</span> <span class=\"token string\">' kobe'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> arr4 <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\narr4<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> <span class=\"token string\">'duncan'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> arr4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"函数库-lodash-的-cloneDeep-方法\"><a href=\"#函数库-lodash-的-cloneDeep-方法\" class=\"headerlink\" title=\"函数库 lodash 的_.cloneDeep 方法\"></a>函数库 lodash 的_.cloneDeep 方法</h4></li>\n<li><h4 id=\"手写递归方法\"><a href=\"#手写递归方法\" class=\"headerlink\" title=\"手写递归方法\"></a>手写递归方法</h4><p>递归方法实现深度克隆原理：<strong>遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝</strong>。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 如果是null或者undefined我就不进行拷贝操作</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 可能是对象或者普通的值  如果是函数的话是不需要深拷贝</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">!==</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 是对象的话就要进行深拷贝</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> cloneObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">obj<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 找到的是所属类原型上的constructor,而原型上的 constructor指向的是当前类本身</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> cloneObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 实现一个递归拷贝</span>\n      cloneObj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> cloneObj<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> address<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> x<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>o <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 对象存在循环引用的情况</span>\n<span class=\"token keyword\">let</span> d <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2></li>\n</ol>\n<h3 id=\"1-原型链继承\"><a href=\"#1-原型链继承\" class=\"headerlink\" title=\"1.原型链继承\"></a>1.原型链继承</h3><h3 id=\"2-借用构造函数继承\"><a href=\"#2-借用构造函数继承\" class=\"headerlink\" title=\"2.借用构造函数继承\"></a>2.借用构造函数继承</h3><h3 id=\"3-组合继承\"><a href=\"#3-组合继承\" class=\"headerlink\" title=\"3.组合继承\"></a>3.组合继承</h3><h3 id=\"4-原型式继承\"><a href=\"#4-原型式继承\" class=\"headerlink\" title=\"4.原型式继承\"></a>4.原型式继承</h3><h2 id=\"防抖、节流\"><a href=\"#防抖、节流\" class=\"headerlink\" title=\"防抖、节流\"></a>防抖、节流</h2><h3 id=\"函数防抖\"><a href=\"#函数防抖\" class=\"headerlink\" title=\"函数防抖\"></a>函数防抖</h3><blockquote>\n<p>在事件被触发 n 秒后再执行回调，如果在这 n 秒内又被触发，则重新计时</p>\n<p>只执行最后一个被触发的，清除之前的异步任务，核心在于<code>清零</code>。</p>\n</blockquote>\n<p>例子：页面滚动处理事件，搜索框输入联想</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 防抖</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> args <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 清除重新计时</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>that<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> delay <span class=\"token operator\">||</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">// 使用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">clickHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'防抖click!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span>clickHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数节流\"><a href=\"#函数节流\" class=\"headerlink\" title=\"函数节流\"></a>函数节流</h3><blockquote>\n<p>只在开始执行一次，未执行完成过程中触发的忽略，核心在于开关锁。</p>\n</blockquote>\n<p>例如：多次点击按钮提交表单，第一次有效</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//节流</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">let</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>that<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> delay <span class=\"token operator\">||</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">//使用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">clickHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'节流click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span>clickHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>节流第一次有效，防抖反之</p>\n<h2 id=\"ajax\"><a href=\"#ajax\" class=\"headerlink\" title=\"ajax\"></a>ajax</h2><h3 id=\"什么是-ajax？ajax-作用是什么\"><a href=\"#什么是-ajax？ajax-作用是什么\" class=\"headerlink\" title=\"什么是 ajax？ajax 作用是什么\"></a>什么是 ajax？ajax 作用是什么</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">异步的javascript和xml  AJAX 是一种用于创建快速动态网页的技术。  ajax用来与后台交互<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"原生-ajax-的五步请求\"><a href=\"#原生-ajax-的五步请求\" class=\"headerlink\" title=\"原生 ajax 的五步请求\"></a>原生 ajax 的五步请求</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//1.创建XMLHttpRequest对象</span>\n<span class=\"token keyword\">let</span> ajax <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//2.规定请求的类型、URL以及是否异步处理请求。</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span>url<span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//3.发送信息至服务器时内容编码类型</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-type\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"application/x-www-form-urlencoded\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//4.发送请求</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//5.接受服务器响应数据</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">===</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span> <span class=\"token operator\">||</span> obj<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">304</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","site":{"data":{}},"excerpt":"<h2 id=\"window-对象-和-document-对象\"><a href=\"#window-对象-和-document-对象\" class=\"headerlink\" title=\"window 对象 和 document 对象\"></a>window 对象 和 document 对象</h2><p>window 对象：代表浏览器中一个打开的窗口<br>document 对象：代表整个 HTML 文档，可以用来访问页面中的所有元素，且每个载入浏览器的 HTML 文档都是 document 对象<br>document 对象是 window 对象的一部分，可以有 window. document 来访问</p>","more":"<h2 id=\"javascript-中的-this-指的对象是什么？\"><a href=\"#javascript-中的-this-指的对象是什么？\" class=\"headerlink\" title=\"javascript 中的 this 指的对象是什么？\"></a>javascript 中的 this 指的对象是什么？</h2><p>查看 JavaScript 中 this 指向的对象，this 指向的一句话法则：</p>\n<p>永远指向其所在函数的所有者,如果没有所有者时，指向 window。</p>\n<p>理解 this 的要点：关键在于将函数与函数名分开看待。同一个函数，在不同的执行方法下，会有不同的效果。</p>\n<p>1）全局函数中的 this 指向</p>\n<p>2）对象方法中的 this 指向</p>\n<p>3）绑定函数时的 this</p>\n<p>4）绑定函数时的 this</p>\n<p>5）鼠标单击事件等进行函数的绑定时，this 的指向</p>\n<p>6）setTimeout 等传参形式的 this 指向</p>\n<p>7）改变 this 的方法：call,apply</p>\n<h2 id=\"计时器\"><a href=\"#计时器\" class=\"headerlink\" title=\"计时器\"></a>计时器</h2><ul>\n<li><code>setTimeout</code></li>\n<li><code>Promises</code></li>\n<li><code>setInterval</code></li>\n<li><code>setImeediate</code></li>\n<li><code>requestIdleCallback</code></li>\n<li><code>requestdleCallback</code></li>\n</ul>\n<h3 id=\"setTimeout和setInterval\"><a href=\"#setTimeout和setInterval\" class=\"headerlink\" title=\"setTimeout和setInterval\"></a><code>setTimeout</code>和<code>setInterval</code></h3><p><code>setTimeout</code>将任务排在 x 毫秒之后运行，<code>setInterval</code>每隔 x 毫秒运行一次任务。</p>\n<h3 id=\"promises和microtasks\"><a href=\"#promises和microtasks\" class=\"headerlink\" title=\"promises和microtasks\"></a><code>promises</code>和<code>microtasks</code></h3><p>一个<code>Promise</code>回调也被称为”microtask”，它以与 MutationObserver 回调相同的频率运行。</p>\n<h2 id=\"浅拷贝，深拷贝\"><a href=\"#浅拷贝，深拷贝\" class=\"headerlink\" title=\"浅拷贝，深拷贝\"></a>浅拷贝，深拷贝</h2><ul>\n<li>浅拷贝是创建一个新对象，这个对象有着原始对象属性值得一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址，所以如果其中一个对象改变了这个地址，就会影响到另一个对象。</li>\n<li>深拷贝就是将一个对象从内存中完整的拷贝一份出来，从堆内存中开辟出一个新的区域存放新的对象，且修改新对象不会影响原对象。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> a1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> b<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> c<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> a2 <span class=\"token operator\">=</span> <span class=\"token function\">shallowClone</span><span class=\"token punctuation\">(</span>a1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//浅拷贝方法</span>\na2<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c <span class=\"token operator\">===</span> a1<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">;</span> <span class=\"token comment\">//true  新旧对象还是共享同一块内存</span>\n\n<span class=\"token keyword\">let</span> a3 <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>a3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//深拷贝方法</span>\na3<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c <span class=\"token operator\">===</span> a1<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">;</span> <span class=\"token comment\">// false 新对象跟原对象不共享内存</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 浅拷贝</span>\n<span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'浪里行舟'</span><span class=\"token punctuation\">,</span>\n  arr<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj3 <span class=\"token operator\">=</span> <span class=\"token function\">shallowClone</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj3<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'阿浪'</span><span class=\"token punctuation\">;</span>\nobj3<span class=\"token punctuation\">.</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 新旧对象还是共享同一块内存</span>\n<span class=\"token comment\">// 这是个浅拷贝的方法</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">shallowClone</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">source</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token keyword\">in</span> source<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      target<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> source<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span> obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj1 &#123; name: '浪里行舟', arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj3'</span><span class=\"token punctuation\">,</span> obj3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj3 &#123; name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 深拷贝</span>\n<span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'浪里行舟'</span><span class=\"token punctuation\">,</span>\n  arr<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj4 <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj4<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'阿浪'</span><span class=\"token punctuation\">;</span>\nobj4<span class=\"token punctuation\">.</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 新对象跟原对象不共享内存</span>\n<span class=\"token comment\">// 这是个深拷贝的方法</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">!==</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> cloneObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">obj<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 实现一个递归拷贝</span>\n      cloneObj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> cloneObj<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj1'</span><span class=\"token punctuation\">,</span> obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj1 &#123; name: '浪里行舟', arr: [ 1, [ 2, 3 ], 4 ] &#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj4'</span><span class=\"token punctuation\">,</span> obj4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj4 &#123; name: '阿浪', arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>总而言之，浅拷贝只复制指向某个对象的指针，而不复制对象本身，<strong>新旧对象还是共享同一块内存</strong>。但深拷贝会另外创造一个一模一样的对象，<strong>新对象跟原对象不共享内存</strong>，修改新对象不会改到原对象。</p>\n<h3 id=\"浅拷贝的实现方式\"><a href=\"#浅拷贝的实现方式\" class=\"headerlink\" title=\"浅拷贝的实现方式\"></a>浅拷贝的实现方式</h3><ol>\n<li><p><strong>Object.assign()</strong></p>\n<p>Object.assign()方法可以把任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> person<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'kobe'</span><span class=\"token punctuation\">,</span> age<span class=\"token operator\">:</span> <span class=\"token number\">41</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> sports<span class=\"token operator\">:</span> <span class=\"token string\">'basketball'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj2 <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj2<span class=\"token punctuation\">.</span>person<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'wade'</span><span class=\"token punctuation\">;</span>\nobj2<span class=\"token punctuation\">.</span>sports <span class=\"token operator\">=</span> <span class=\"token string\">'football'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//&#123; person: &#123; name: 'wade', age: 41 &#125;, sports: 'basketball' &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p><strong>函数库 lodash 的_.clone 方法</strong></p>\n</li>\n<li><p><strong>展开运算符</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Kobe'</span><span class=\"token punctuation\">,</span> address<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> x<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token operator\">...</span>obj1 <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nobj1<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\nobj1<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'wade'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'obj2'</span><span class=\"token punctuation\">,</span> obj2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// obj2 &#123; name: 'Kobe', address: &#123; x: 200, y: 100 &#125; &#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"Array-prototype-concat\"><a href=\"#Array-prototype-concat\" class=\"headerlink\" title=\"Array.prototype.concat()\"></a>Array.prototype.concat()</h4></li>\n</ol>\n<h3 id=\"深拷贝的实现方式\"><a href=\"#深拷贝的实现方式\" class=\"headerlink\" title=\"深拷贝的实现方式\"></a>深拷贝的实现方式</h3><ol>\n<li><p><strong>JSON.parse(JSON.stringify())</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span>\n    username<span class=\"token operator\">:</span> <span class=\"token string\">' kobe'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> arr4 <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\narr4<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> <span class=\"token string\">'duncan'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> arr4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"函数库-lodash-的-cloneDeep-方法\"><a href=\"#函数库-lodash-的-cloneDeep-方法\" class=\"headerlink\" title=\"函数库 lodash 的_.cloneDeep 方法\"></a>函数库 lodash 的_.cloneDeep 方法</h4></li>\n<li><h4 id=\"手写递归方法\"><a href=\"#手写递归方法\" class=\"headerlink\" title=\"手写递归方法\"></a>手写递归方法</h4><p>递归方法实现深度克隆原理：<strong>遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝</strong>。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> hash <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WeakMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 如果是null或者undefined我就不进行拷贝操作</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 可能是对象或者普通的值  如果是函数的话是不需要深拷贝</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj <span class=\"token operator\">!==</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 是对象的话就要进行深拷贝</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> hash<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> cloneObj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">obj<span class=\"token punctuation\">.</span>constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 找到的是所属类原型上的constructor,而原型上的 constructor指向的是当前类本身</span>\n  hash<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> cloneObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 实现一个递归拷贝</span>\n      cloneObj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> hash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> cloneObj<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> address<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> x<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>o <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 对象存在循环引用的情况</span>\n<span class=\"token keyword\">let</span> d <span class=\"token operator\">=</span> <span class=\"token function\">deepClone</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2></li>\n</ol>\n<h3 id=\"1-原型链继承\"><a href=\"#1-原型链继承\" class=\"headerlink\" title=\"1.原型链继承\"></a>1.原型链继承</h3><h3 id=\"2-借用构造函数继承\"><a href=\"#2-借用构造函数继承\" class=\"headerlink\" title=\"2.借用构造函数继承\"></a>2.借用构造函数继承</h3><h3 id=\"3-组合继承\"><a href=\"#3-组合继承\" class=\"headerlink\" title=\"3.组合继承\"></a>3.组合继承</h3><h3 id=\"4-原型式继承\"><a href=\"#4-原型式继承\" class=\"headerlink\" title=\"4.原型式继承\"></a>4.原型式继承</h3><h2 id=\"防抖、节流\"><a href=\"#防抖、节流\" class=\"headerlink\" title=\"防抖、节流\"></a>防抖、节流</h2><h3 id=\"函数防抖\"><a href=\"#函数防抖\" class=\"headerlink\" title=\"函数防抖\"></a>函数防抖</h3><blockquote>\n<p>在事件被触发 n 秒后再执行回调，如果在这 n 秒内又被触发，则重新计时</p>\n<p>只执行最后一个被触发的，清除之前的异步任务，核心在于<code>清零</code>。</p>\n</blockquote>\n<p>例子：页面滚动处理事件，搜索框输入联想</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 防抖</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> args <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 清除重新计时</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>that<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> delay <span class=\"token operator\">||</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">// 使用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">clickHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'防抖click!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span>clickHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数节流\"><a href=\"#函数节流\" class=\"headerlink\" title=\"函数节流\"></a>函数节流</h3><blockquote>\n<p>只在开始执行一次，未执行完成过程中触发的忽略，核心在于开关锁。</p>\n</blockquote>\n<p>例如：多次点击按钮提交表单，第一次有效</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//节流</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">let</span> that <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> arguments<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>that<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> delay <span class=\"token operator\">||</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">//使用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">clickHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'节流click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span>clickHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>节流第一次有效，防抖反之</p>\n<h2 id=\"ajax\"><a href=\"#ajax\" class=\"headerlink\" title=\"ajax\"></a>ajax</h2><h3 id=\"什么是-ajax？ajax-作用是什么\"><a href=\"#什么是-ajax？ajax-作用是什么\" class=\"headerlink\" title=\"什么是 ajax？ajax 作用是什么\"></a>什么是 ajax？ajax 作用是什么</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">异步的javascript和xml  AJAX 是一种用于创建快速动态网页的技术。  ajax用来与后台交互<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"原生-ajax-的五步请求\"><a href=\"#原生-ajax-的五步请求\" class=\"headerlink\" title=\"原生 ajax 的五步请求\"></a>原生 ajax 的五步请求</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//1.创建XMLHttpRequest对象</span>\n<span class=\"token keyword\">let</span> ajax <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//2.规定请求的类型、URL以及是否异步处理请求。</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span>url<span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//3.发送信息至服务器时内容编码类型</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-type\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"application/x-www-form-urlencoded\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//4.发送请求</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//5.接受服务器响应数据</span>\najax<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">===</span> <span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span> <span class=\"token operator\">||</span> obj<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">304</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"原型链与继承","date":"2021-03-22T08:44:00.000Z","desecription":"原型链与继承","_content":"\n## 原型链与继承\n\n**概念**\n原型链是一种机制，指的是 JavaScript 每个对象`包括原型对象`都有一个内置的[[proto]]属性指向创建它的函数对象的原型对象，即 prototype 属性。\n\n<!--more-->\n\n**作用**\n原型链的存在，主要是为了实现对象的`继承`。\n\n例子：例如父亲有一百万，父亲的儿子可以继承这一百万\n\n```javascript\nconst array = []\narray.__proto__ === Array.prototype //return ture\nArray.prototype.__proto__ === Object.prototype //return true\nFunction.prototype === Array.__proto__ //return true\nFunction.prototype.__proto__ === Object.prototype //return true\nObject.prototype.__proto__ === null //return true\n```\n\n最终指向都是 Object.prototype\n\nObject.prototype.**proto** === null\n\n![原型链](/images/原型链.png)\n![原型链与继承](/images/原型链与继承.png)\n","source":"_posts/原型链与继承.md","raw":"---\ntitle: 原型链与继承\ndate: 2021-03-22 16:44\ndesecription: 原型链与继承\ntags:\n  - '原型链'\n---\n\n## 原型链与继承\n\n**概念**\n原型链是一种机制，指的是 JavaScript 每个对象`包括原型对象`都有一个内置的[[proto]]属性指向创建它的函数对象的原型对象，即 prototype 属性。\n\n<!--more-->\n\n**作用**\n原型链的存在，主要是为了实现对象的`继承`。\n\n例子：例如父亲有一百万，父亲的儿子可以继承这一百万\n\n```javascript\nconst array = []\narray.__proto__ === Array.prototype //return ture\nArray.prototype.__proto__ === Object.prototype //return true\nFunction.prototype === Array.__proto__ //return true\nFunction.prototype.__proto__ === Object.prototype //return true\nObject.prototype.__proto__ === null //return true\n```\n\n最终指向都是 Object.prototype\n\nObject.prototype.**proto** === null\n\n![原型链](/images/原型链.png)\n![原型链与继承](/images/原型链与继承.png)\n","slug":"原型链与继承","published":1,"updated":"2021-07-26T13:35:36.052Z","_id":"cknzd1p8t000if4rqew8p1dcq","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"原型链与继承\"><a href=\"#原型链与继承\" class=\"headerlink\" title=\"原型链与继承\"></a>原型链与继承</h2><p><strong>概念</strong><br>原型链是一种机制，指的是 JavaScript 每个对象<code>包括原型对象</code>都有一个内置的[[proto]]属性指向创建它的函数对象的原型对象，即 prototype 属性。</p>\n<a id=\"more\"></a>\n\n<p><strong>作用</strong><br>原型链的存在，主要是为了实现对象的<code>继承</code>。</p>\n<p>例子：例如父亲有一百万，父亲的儿子可以继承这一百万</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\narray<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">//return ture</span>\n<span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">//return true</span>\n<span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">.</span>__proto__ <span class=\"token comment\">//return true</span>\n<span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">//return true</span>\n<span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">//return true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>最终指向都是 Object.prototype</p>\n<p>Object.prototype.<strong>proto</strong> === null</p>\n<p><img src=\"/images/%E5%8E%9F%E5%9E%8B%E9%93%BE.png\" alt=\"原型链\"><br><img src=\"/images/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%BB%A7%E6%89%BF.png\" alt=\"原型链与继承\"></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"原型链与继承\"><a href=\"#原型链与继承\" class=\"headerlink\" title=\"原型链与继承\"></a>原型链与继承</h2><p><strong>概念</strong><br>原型链是一种机制，指的是 JavaScript 每个对象<code>包括原型对象</code>都有一个内置的[[proto]]属性指向创建它的函数对象的原型对象，即 prototype 属性。</p>","more":"<p><strong>作用</strong><br>原型链的存在，主要是为了实现对象的<code>继承</code>。</p>\n<p>例子：例如父亲有一百万，父亲的儿子可以继承这一百万</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\narray<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">//return ture</span>\n<span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">//return true</span>\n<span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">.</span>__proto__ <span class=\"token comment\">//return true</span>\n<span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">//return true</span>\n<span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">//return true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>最终指向都是 Object.prototype</p>\n<p>Object.prototype.<strong>proto</strong> === null</p>\n<p><img src=\"/images/%E5%8E%9F%E5%9E%8B%E9%93%BE.png\" alt=\"原型链\"><br><img src=\"/images/%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%BB%A7%E6%89%BF.png\" alt=\"原型链与继承\"></p>"},{"title":"浏览器：文档，事件，接口","date":"2021-02-23T13:50:00.000Z","desecription":"浏览器：文档，事件，接口","_content":"\n# DOM 树\n\nHTML 文档的主干是标签（tag）。\n\n根据文档对象模型（DOM），每个 HTML 标签都是一个对象。嵌套的标签是闭合标签的“子标签（children）”。标签内的文本也是一个对象。\n<!--more-->\n所有这些对象都可以通过 JavaScript 来访问，我们可以使用它们来修改页面。\n\n一共有 [12 种节点类型](https://dom.spec.whatwg.org/#node)。实际上，我们通常用到的是其中的 4 种：\n\n1. `document` — DOM 的“入口点”。\n2. 元素节点 — HTML 标签，树构建块。\n3. 文本节点 — 包含文本。\n4. 注释 — 有时我们可以将一些信息放入其中，它不会显示，但 JS 可以从 DOM 中读取它。\n\n**DOM 集合是只读的**\n\nDOM 集合，甚至可以说本章中列出的 **所有** 导航（navigation）属性都是只读的。\n\n我们不能通过类似 `childNodes[i] = ...` 的操作来替换一个子节点。\n\n修改子节点需要使用其它方法。我们将会在下一章中看到它们。\n\n**DOM 集合是实时的**\n\n除小部分例外，几乎所有的 DOM 集合都是 **实时** 的。换句话说，它们反映了 DOM 的当前状态。\n\n如果我们保留一个对 `elem.childNodes` 的引用，然后向 DOM 中添加/移除节点，那么这些节点的更新会自动出现在集合中。\n\n## [总结](https://zh.javascript.info/dom-nodes#zong-jie)\n\nHTML/XML 文档在浏览器内均被表示为 DOM 树。\n\n- 标签（tag）成为元素节点，并形成文档结构。\n- 文本（text）成为文本节点。\n- ……等，HTML 中的所有东西在 DOM 中都有它的位置，甚至对注释也是如此。\n\n# 遍历 DOM\n\nDOM 让我们可以对元素和它们中的内容做任何事，但是首先我们需要获取到对应的 DOM 对象。\n\n对 DOM 的所有操作都是以 `document` 对象开始。它是 DOM 的主“入口点”。从它我们可以访问任何节点。\n\n**在 DOM 的世界中，`null` 就意味着“不存在”**\n\n在 DOM 中，`null` 值就意味着“不存在”或者“没有这个节点”。\n\n**DOM 集合是只读的**\n\n**DOM 集合是实时的**\n\n**不要使用** `for..in` **来遍历集合**\n\n## [更多链接：表格](https://zh.javascript.info/dom-navigation#dom-navigation-tables)\n\n<table> 元素支持 (除了上面给出的，之外) 以下这些属性:\ntable.rows — <tr> 元素的集合。table.caption/tHead/tFoot — 引用元素 <caption>，<thead>，<tfoot>。table.tBodies — <tbody> 元素的集合（根据标准还有很多元素，但是这里至少会有一个 — 即使没有被写在 HTML 源文件中，浏览器也会将其放入 DOM 中）。\n\n<thead>，<tfoot>，<tbody> 元素提供了 rows 属性：\ntbody.rows — 表格内部 <tr> 元素的集合。\n\n<tr>：\ntr.cells — 在给定 <tr> 中的 <td> 和 <th> 单元格的集合。tr.sectionRowIndex — 给定的 <tr> 在封闭的 <thead>/<tbody>/<tfoot> 中的位置（索引）。tr.rowIndex — 在整个表格中 <tr> 的编号（包括表格的所有行）。\n\n<td> 和 <th>：\ntd.cellIndex — 在封闭的 <tr> 中单元格的编号。\n\n## [总结](https://zh.javascript.info/dom-navigation#zong-jie)\n\n给定一个 DOM 节点，我们可以使用导航（navigation）属性访问其直接的邻居。\n\n这些属性主要分为两组：\n\n- 对于所有节点：`parentNode`，`childNodes`，`firstChild`，`lastChild`，`previousSibling`，`nextSibling`。\n- 仅对于元素节点：`parentElement`，`children`，`firstElementChild`，`lastElementChild`，`previousElementSibling`，`nextElementSibling`。\n\n某些类型的 DOM 元素，例如 table，提供了用于访问其内容的其他属性和集合。\n\n# 搜索：getElement*，querySelector*\n\n## [document.getElementById 或者只使用 id](https://zh.javascript.info/searching-elements-dom#documentgetelementbyid-huo-zhe-zhi-shi-yong-id)\n\n如果一个元素有 `id` 特性（attribute），那我们就可以使用 `document.getElementById(id)` 方法获取该元素，无论它在哪里。\n\n**`id` 必须是唯一的**\n\n`id` 必须是唯一的。在文档中，只能有一个元素带有给定的 `id`。\n\n如果有多个元素都带有同一个 `id`，那么使用它的方法的行为是不可预测的，例如 `document.getElementById` 可能会随机返回其中一个元素。因此，请遵守规则，保持 `id` 的唯一性。\n\n**只有 `document.getElementById`，没有 `anyElem.getElementById`**\n\n`getElementById` 方法只能被在 `document` 对象上调用。它会在整个文档中查找给定的 `id`。\n\n## [querySelectorAll](https://zh.javascript.info/searching-elements-dom#querySelectorAll)\n\n到目前为止，最通用的方法是 `elem.querySelectorAll(css)`，它返回 `elem` 中与给定 CSS 选择器匹配的所有元素。\n\n## [matches](https://zh.javascript.info/searching-elements-dom#matches)\n\n之前的方法是搜索 DOM。\n\n[elem.matches(css)](http://dom.spec.whatwg.org/#dom-element-matches) 不会查找任何内容，它只会检查 `elem` 是否与给定的 CSS 选择器匹配。它返回 `true` 或 `false`。\n\n## [closest](https://zh.javascript.info/searching-elements-dom#closest)\n\n元素的祖先（ancestor）是：父级，父级的父级，它的父级等。祖先们一起组成了从元素到顶端的父级链。\n\n`elem.closest(css)` 方法会查找与 CSS 选择器匹配的最近的祖先。`elem` 自己也会被搜索。\n\n换句话说，方法 `closest` 在元素中得到了提升，并检查每个父级。如果它与选择器匹配，则停止搜索并返回该祖先。\n\n## [总结](https://zh.javascript.info/searching-elements-dom#zong-jie)\n\n目前为止，最常用的是 `querySelector` 和 `querySelectorAll`，但是 `getElement(s)By*` 可能会偶尔有用，或者可以在旧脚本中找到。\n\n此外：\n\n- `elem.matches(css)` 用于检查 `elem` 与给定的 CSS 选择器是否匹配。\n- `elem.closest(css)` 用于查找与给定 CSS 选择器相匹配的最近的祖先。`elem` 本身也会被检查。\n\n让我们在这里提一下另一种用来检查子级与父级之间关系的方法，因为它有时很有用：\n\n- 如果 `elemB` 在 `elemA` 内（`elemA` 的后代）或者 `elemA==elemB`，`elemA.contains(elemB)` 将返回 true。\n\n# 节点属性：type，tag 和 content\n\n## [DOM 节点类](https://zh.javascript.info/basic-dom-node-properties#dom-jie-dian-lei)\n\n不同的 DOM 节点可能有不同的属性。例如，标签 `<a>` 相对应的元素节点具有链接相关的（link-related）属性，标签 `<input>` 相对应的元素节点具有与输入相关的属性，等。文本节点与元素节点不同。但是所有这些标签对应的 DOM 节点之间也存在共有的属性和方法，因为所有类型的 DOM 节点都形成了一个单一层次的结构（single hierarchy）。\n\n每个 DOM 节点都属于相应的内建类。\n\n层次结构（hierarchy）的根节点是 [EventTarget](https://dom.spec.whatwg.org/#eventtarget)，[Node](http://dom.spec.whatwg.org/#interface-node) 继承自它，其他 DOM 节点继承自 Node。\n\n![image-20210202215947121](E:\\Markdown图片\\image-20210202215947121.png)\n\n# 特性和属性（Attributes and properties）\n\n当浏览器加载页面时，它会“读取”（或者称之为：“解析”）HTML 并从中生成 DOM 对象。对于元素节点，大多数标准的 HTML 特性（attributes）会自动变成 DOM 对象的属性（properties）。\n\n## [HTML 特性](https://zh.javascript.info/dom-attributes-and-properties#html-te-xing)\n\n在 HTML 中，标签可能拥有特性（attributes）。当浏览器解析 HTML 文本，并根据标签创建 DOM 对象时，浏览器会辨别 **标准的** 特性并以此创建 DOM 属性。\n\n所以，当一个元素有 `id` 或其他 **标准的** 特性，那么就会生成对应的 DOM 属性。但是非 **标准的** 特性则不会。\n\nHTML 特性有以下几个特征：\n\n- 它们的名字是大小写不敏感的（`id` 与 `ID` 相同）。\n- 它们的值总是字符串类型的。\n\n## [总结](https://zh.javascript.info/dom-attributes-and-properties#zong-jie)\n\n- 特性（attribute）— 写在 HTML 中的内容。\n- 属性（property）— DOM 对象中的内容。\n\n简略的对比：\n\n|      | 属性                                   | 特性                         |\n| :--- | :------------------------------------- | :--------------------------- |\n| 类型 | 任何值，标准的属性具有规范中描述的类型 | 字符串                       |\n| 名字 | 名字（name）是大小写敏感的             | 名字（name）是大小写不敏感的 |\n\n# Window 大小和滚动\n\n## [窗口的 width/height](https://zh.javascript.info/size-and-scroll-window#chuang-kou-de-widthheight)\n\n为了获取窗口（window）的宽度和高度，我们可以使用 `document.documentElement` 的 `clientWidth/clientHeight`：\n\n## [滚动：scrollTo，scrollBy，scrollIntoView](https://zh.javascript.info/size-and-scroll-window#window-scroll)\n\n可以通过更改 `scrollTop/scrollLeft` 来滚动常规元素。\n\n我们可以使用 `document.documentElement.scrollTop/scrollLeft` 对页面进行相同的操作（Safari 除外，而应该使用 `document.body.scrollTop/Left` 代替）。\n\n方法 `scrollBy(x,y)` 将页面滚动至 **相对于当前位置的 `(x, y)` 位置**。例如，`scrollBy(0,10)` 会将页面向下滚动 `10px`。\n\n方法 `scrollTo(pageX,pageY)` 将页面滚动至 **绝对坐标**，使得可见部分的左上角具有相对于文档左上角的坐标 `(pageX, pageY)`。就像设置了 `scrollLeft/scrollTop` 一样。\n\n要滚动到最开始，我们可以使用 `scrollTo(0,0)`。\n\n## [scrollIntoView](https://zh.javascript.info/size-and-scroll-window#scrollintoview)\n\n为了完整起见，让我们再介绍一种方法：[elem.scrollIntoView(top)](https://developer.mozilla.org/zh/docs/Web/API/Element/scrollIntoView)。\n\n对 `elem.scrollIntoView(top)` 的调用将滚动页面以使 `elem` 可见。它有一个参数：\n\n- 如果 `top=true`（默认值），页面滚动，使 `elem` 出现在窗口顶部。元素的上边缘将与窗口顶部对齐。\n- 如果 `top=false`，页面滚动，使 `elem` 出现在窗口底部。元素的底部边缘将与窗口底部对齐。\n\n下面这个按钮会滚动页面，以使其自身定位在窗口顶部：\n\nthis.scrollIntoView()\n\n下面这个按钮会滚动页面，以使其自身定位在窗口底部：\n\nthis.scrollIntoView(false)\n\n## [总结](https://zh.javascript.info/size-and-scroll-window#zong-jie)\n\n几何：\n\n- 文档可见部分的 width/height（内容区域的 width/height）：`document.documentElement.clientWidth/clientHeight`\n\n- 整个文档的 width/height，其中包括滚动出去的部分：\n\n  ```javascript\n  let scrollHeight = Math.max(\n    document.body.scrollHeight,\n    document.documentElement.scrollHeight,\n    document.body.offsetHeight,\n    document.documentElement.offsetHeight,\n    document.body.clientHeight,\n    document.documentElement.clientHeight\n  )\n  ```\n\n滚动：\n\n- 读取当前的滚动：`window.pageYOffset/pageXOffset`。\n- 更改当前的滚动：\n  - `window.scrollTo(pageX,pageY)` — 绝对坐标，\n  - `window.scrollBy(x,y)` — 相对当前位置进行滚动，\n  - `elem.scrollIntoView(top)` — 滚动以使 `elem` 可见（`elem` 与窗口的顶部/底部对齐）。\n\n# 创建自定义事件\n\n我们不仅可以分配事件处理程序，还可以从 JavaScript 生成事件。\n\n自定义事件可用于创建“图形组件”。\n\n## [事件构造器](https://zh.javascript.info/dispatch-events#shi-jian-gou-zao-qi)\n\n内建事件类形成一个层次结构（hierarchy），类似于 DOM 元素类。根是内建的 [Event](http://www.w3.org/TR/dom/#event) 类。\n\n我们可以像这样创建 `Event` 对象：\n\n```javascript\nlet event = new Event(type[, options]);\n```\n\n参数：\n\n- **type** —— 事件类型，可以是像这样 `\"click\"` 的字符串，或者我们自己的像这样 `\"my-event\"` 的参数。\n\n- **options** —— 具有两个可选属性的对象：\n\n  - `bubbles: true/false` —— 如果为 `true`，那么事件会冒泡。\n  - `cancelable: true/false` —— 如果为 `true`，那么“默认行为”就会被阻止。稍后我们会看到对于自定义事件，它意味着什么。\n\n  默认情况下，以上两者都为 false：`{bubbles: false, cancelable: false}`。\n\n## [dispatchEvent](https://zh.javascript.info/dispatch-events#dispatchevent)\n\n事件对象被创建后，我们应该使用 `elem.dispatchEvent(event)` 调用在元素上“运行”它。\n\n然后，处理程序会对它做出反应，就好像它是一个常规的浏览器事件一样。如果事件是用 `bubbles` 标志创建的，那么它会冒泡。\n\n# 表单属性和方法\n\n表单（form）以及例如 `<input>` 的控件（control）元素有许多特殊的属性和事件。\n\n## [导航：表单和元素](https://zh.javascript.info/form-elements#dao-hang-biao-dan-he-yuan-su)\n\n文档中的表单是特殊集合 `document.forms` 的成员。\n\n这就是所谓的“命名的集合”：既是被命名了的，也是有序的。我们既可以使用名字，也可以使用在文档中的编号来获取表单。\n\n```javascript\ndocument.forms.my - name=\"my\" 的表单\ndocument.forms[0] - 文档中的第一个表单\n```\n\n当我们有了一个表单时，其中的任何元素都可以通过命名的集合 `form.elements` 来获取到。\n\n## [反向引用：element.form](https://zh.javascript.info/form-elements#fan-xiang-yin-yong-elementform)\n\n对于任何元素，其对应的表单都可以通过 `element.form` 访问到。因此，表单引用了所有元素，元素也引用了表单。\n\n这是一张示意图：\n\n![image-20210221110537095](E:\\Markdown图片\\image-20210221110537095.png)\n\n## [表单元素](https://zh.javascript.info/form-elements#biao-dan-yuan-su)\n\n让我们来谈谈表单控件。\n\n### [input 和 textarea](https://zh.javascript.info/form-elements#input-he-textarea)\n\n我们可以通过 `input.value`（字符串）或 `input.checked`（布尔值）来访问复选框（checkbox）中的它们的 `value`。\n","source":"_posts/浏览器：文档，事件，接口.md","raw":"---\ntitle: 浏览器：文档，事件，接口\ndate: 2021-02-23 21:50\ndesecription: 浏览器：文档，事件，接口\ntags:\n  - '浏览器'\n---\n\n# DOM 树\n\nHTML 文档的主干是标签（tag）。\n\n根据文档对象模型（DOM），每个 HTML 标签都是一个对象。嵌套的标签是闭合标签的“子标签（children）”。标签内的文本也是一个对象。\n<!--more-->\n所有这些对象都可以通过 JavaScript 来访问，我们可以使用它们来修改页面。\n\n一共有 [12 种节点类型](https://dom.spec.whatwg.org/#node)。实际上，我们通常用到的是其中的 4 种：\n\n1. `document` — DOM 的“入口点”。\n2. 元素节点 — HTML 标签，树构建块。\n3. 文本节点 — 包含文本。\n4. 注释 — 有时我们可以将一些信息放入其中，它不会显示，但 JS 可以从 DOM 中读取它。\n\n**DOM 集合是只读的**\n\nDOM 集合，甚至可以说本章中列出的 **所有** 导航（navigation）属性都是只读的。\n\n我们不能通过类似 `childNodes[i] = ...` 的操作来替换一个子节点。\n\n修改子节点需要使用其它方法。我们将会在下一章中看到它们。\n\n**DOM 集合是实时的**\n\n除小部分例外，几乎所有的 DOM 集合都是 **实时** 的。换句话说，它们反映了 DOM 的当前状态。\n\n如果我们保留一个对 `elem.childNodes` 的引用，然后向 DOM 中添加/移除节点，那么这些节点的更新会自动出现在集合中。\n\n## [总结](https://zh.javascript.info/dom-nodes#zong-jie)\n\nHTML/XML 文档在浏览器内均被表示为 DOM 树。\n\n- 标签（tag）成为元素节点，并形成文档结构。\n- 文本（text）成为文本节点。\n- ……等，HTML 中的所有东西在 DOM 中都有它的位置，甚至对注释也是如此。\n\n# 遍历 DOM\n\nDOM 让我们可以对元素和它们中的内容做任何事，但是首先我们需要获取到对应的 DOM 对象。\n\n对 DOM 的所有操作都是以 `document` 对象开始。它是 DOM 的主“入口点”。从它我们可以访问任何节点。\n\n**在 DOM 的世界中，`null` 就意味着“不存在”**\n\n在 DOM 中，`null` 值就意味着“不存在”或者“没有这个节点”。\n\n**DOM 集合是只读的**\n\n**DOM 集合是实时的**\n\n**不要使用** `for..in` **来遍历集合**\n\n## [更多链接：表格](https://zh.javascript.info/dom-navigation#dom-navigation-tables)\n\n<table> 元素支持 (除了上面给出的，之外) 以下这些属性:\ntable.rows — <tr> 元素的集合。table.caption/tHead/tFoot — 引用元素 <caption>，<thead>，<tfoot>。table.tBodies — <tbody> 元素的集合（根据标准还有很多元素，但是这里至少会有一个 — 即使没有被写在 HTML 源文件中，浏览器也会将其放入 DOM 中）。\n\n<thead>，<tfoot>，<tbody> 元素提供了 rows 属性：\ntbody.rows — 表格内部 <tr> 元素的集合。\n\n<tr>：\ntr.cells — 在给定 <tr> 中的 <td> 和 <th> 单元格的集合。tr.sectionRowIndex — 给定的 <tr> 在封闭的 <thead>/<tbody>/<tfoot> 中的位置（索引）。tr.rowIndex — 在整个表格中 <tr> 的编号（包括表格的所有行）。\n\n<td> 和 <th>：\ntd.cellIndex — 在封闭的 <tr> 中单元格的编号。\n\n## [总结](https://zh.javascript.info/dom-navigation#zong-jie)\n\n给定一个 DOM 节点，我们可以使用导航（navigation）属性访问其直接的邻居。\n\n这些属性主要分为两组：\n\n- 对于所有节点：`parentNode`，`childNodes`，`firstChild`，`lastChild`，`previousSibling`，`nextSibling`。\n- 仅对于元素节点：`parentElement`，`children`，`firstElementChild`，`lastElementChild`，`previousElementSibling`，`nextElementSibling`。\n\n某些类型的 DOM 元素，例如 table，提供了用于访问其内容的其他属性和集合。\n\n# 搜索：getElement*，querySelector*\n\n## [document.getElementById 或者只使用 id](https://zh.javascript.info/searching-elements-dom#documentgetelementbyid-huo-zhe-zhi-shi-yong-id)\n\n如果一个元素有 `id` 特性（attribute），那我们就可以使用 `document.getElementById(id)` 方法获取该元素，无论它在哪里。\n\n**`id` 必须是唯一的**\n\n`id` 必须是唯一的。在文档中，只能有一个元素带有给定的 `id`。\n\n如果有多个元素都带有同一个 `id`，那么使用它的方法的行为是不可预测的，例如 `document.getElementById` 可能会随机返回其中一个元素。因此，请遵守规则，保持 `id` 的唯一性。\n\n**只有 `document.getElementById`，没有 `anyElem.getElementById`**\n\n`getElementById` 方法只能被在 `document` 对象上调用。它会在整个文档中查找给定的 `id`。\n\n## [querySelectorAll](https://zh.javascript.info/searching-elements-dom#querySelectorAll)\n\n到目前为止，最通用的方法是 `elem.querySelectorAll(css)`，它返回 `elem` 中与给定 CSS 选择器匹配的所有元素。\n\n## [matches](https://zh.javascript.info/searching-elements-dom#matches)\n\n之前的方法是搜索 DOM。\n\n[elem.matches(css)](http://dom.spec.whatwg.org/#dom-element-matches) 不会查找任何内容，它只会检查 `elem` 是否与给定的 CSS 选择器匹配。它返回 `true` 或 `false`。\n\n## [closest](https://zh.javascript.info/searching-elements-dom#closest)\n\n元素的祖先（ancestor）是：父级，父级的父级，它的父级等。祖先们一起组成了从元素到顶端的父级链。\n\n`elem.closest(css)` 方法会查找与 CSS 选择器匹配的最近的祖先。`elem` 自己也会被搜索。\n\n换句话说，方法 `closest` 在元素中得到了提升，并检查每个父级。如果它与选择器匹配，则停止搜索并返回该祖先。\n\n## [总结](https://zh.javascript.info/searching-elements-dom#zong-jie)\n\n目前为止，最常用的是 `querySelector` 和 `querySelectorAll`，但是 `getElement(s)By*` 可能会偶尔有用，或者可以在旧脚本中找到。\n\n此外：\n\n- `elem.matches(css)` 用于检查 `elem` 与给定的 CSS 选择器是否匹配。\n- `elem.closest(css)` 用于查找与给定 CSS 选择器相匹配的最近的祖先。`elem` 本身也会被检查。\n\n让我们在这里提一下另一种用来检查子级与父级之间关系的方法，因为它有时很有用：\n\n- 如果 `elemB` 在 `elemA` 内（`elemA` 的后代）或者 `elemA==elemB`，`elemA.contains(elemB)` 将返回 true。\n\n# 节点属性：type，tag 和 content\n\n## [DOM 节点类](https://zh.javascript.info/basic-dom-node-properties#dom-jie-dian-lei)\n\n不同的 DOM 节点可能有不同的属性。例如，标签 `<a>` 相对应的元素节点具有链接相关的（link-related）属性，标签 `<input>` 相对应的元素节点具有与输入相关的属性，等。文本节点与元素节点不同。但是所有这些标签对应的 DOM 节点之间也存在共有的属性和方法，因为所有类型的 DOM 节点都形成了一个单一层次的结构（single hierarchy）。\n\n每个 DOM 节点都属于相应的内建类。\n\n层次结构（hierarchy）的根节点是 [EventTarget](https://dom.spec.whatwg.org/#eventtarget)，[Node](http://dom.spec.whatwg.org/#interface-node) 继承自它，其他 DOM 节点继承自 Node。\n\n![image-20210202215947121](E:\\Markdown图片\\image-20210202215947121.png)\n\n# 特性和属性（Attributes and properties）\n\n当浏览器加载页面时，它会“读取”（或者称之为：“解析”）HTML 并从中生成 DOM 对象。对于元素节点，大多数标准的 HTML 特性（attributes）会自动变成 DOM 对象的属性（properties）。\n\n## [HTML 特性](https://zh.javascript.info/dom-attributes-and-properties#html-te-xing)\n\n在 HTML 中，标签可能拥有特性（attributes）。当浏览器解析 HTML 文本，并根据标签创建 DOM 对象时，浏览器会辨别 **标准的** 特性并以此创建 DOM 属性。\n\n所以，当一个元素有 `id` 或其他 **标准的** 特性，那么就会生成对应的 DOM 属性。但是非 **标准的** 特性则不会。\n\nHTML 特性有以下几个特征：\n\n- 它们的名字是大小写不敏感的（`id` 与 `ID` 相同）。\n- 它们的值总是字符串类型的。\n\n## [总结](https://zh.javascript.info/dom-attributes-and-properties#zong-jie)\n\n- 特性（attribute）— 写在 HTML 中的内容。\n- 属性（property）— DOM 对象中的内容。\n\n简略的对比：\n\n|      | 属性                                   | 特性                         |\n| :--- | :------------------------------------- | :--------------------------- |\n| 类型 | 任何值，标准的属性具有规范中描述的类型 | 字符串                       |\n| 名字 | 名字（name）是大小写敏感的             | 名字（name）是大小写不敏感的 |\n\n# Window 大小和滚动\n\n## [窗口的 width/height](https://zh.javascript.info/size-and-scroll-window#chuang-kou-de-widthheight)\n\n为了获取窗口（window）的宽度和高度，我们可以使用 `document.documentElement` 的 `clientWidth/clientHeight`：\n\n## [滚动：scrollTo，scrollBy，scrollIntoView](https://zh.javascript.info/size-and-scroll-window#window-scroll)\n\n可以通过更改 `scrollTop/scrollLeft` 来滚动常规元素。\n\n我们可以使用 `document.documentElement.scrollTop/scrollLeft` 对页面进行相同的操作（Safari 除外，而应该使用 `document.body.scrollTop/Left` 代替）。\n\n方法 `scrollBy(x,y)` 将页面滚动至 **相对于当前位置的 `(x, y)` 位置**。例如，`scrollBy(0,10)` 会将页面向下滚动 `10px`。\n\n方法 `scrollTo(pageX,pageY)` 将页面滚动至 **绝对坐标**，使得可见部分的左上角具有相对于文档左上角的坐标 `(pageX, pageY)`。就像设置了 `scrollLeft/scrollTop` 一样。\n\n要滚动到最开始，我们可以使用 `scrollTo(0,0)`。\n\n## [scrollIntoView](https://zh.javascript.info/size-and-scroll-window#scrollintoview)\n\n为了完整起见，让我们再介绍一种方法：[elem.scrollIntoView(top)](https://developer.mozilla.org/zh/docs/Web/API/Element/scrollIntoView)。\n\n对 `elem.scrollIntoView(top)` 的调用将滚动页面以使 `elem` 可见。它有一个参数：\n\n- 如果 `top=true`（默认值），页面滚动，使 `elem` 出现在窗口顶部。元素的上边缘将与窗口顶部对齐。\n- 如果 `top=false`，页面滚动，使 `elem` 出现在窗口底部。元素的底部边缘将与窗口底部对齐。\n\n下面这个按钮会滚动页面，以使其自身定位在窗口顶部：\n\nthis.scrollIntoView()\n\n下面这个按钮会滚动页面，以使其自身定位在窗口底部：\n\nthis.scrollIntoView(false)\n\n## [总结](https://zh.javascript.info/size-and-scroll-window#zong-jie)\n\n几何：\n\n- 文档可见部分的 width/height（内容区域的 width/height）：`document.documentElement.clientWidth/clientHeight`\n\n- 整个文档的 width/height，其中包括滚动出去的部分：\n\n  ```javascript\n  let scrollHeight = Math.max(\n    document.body.scrollHeight,\n    document.documentElement.scrollHeight,\n    document.body.offsetHeight,\n    document.documentElement.offsetHeight,\n    document.body.clientHeight,\n    document.documentElement.clientHeight\n  )\n  ```\n\n滚动：\n\n- 读取当前的滚动：`window.pageYOffset/pageXOffset`。\n- 更改当前的滚动：\n  - `window.scrollTo(pageX,pageY)` — 绝对坐标，\n  - `window.scrollBy(x,y)` — 相对当前位置进行滚动，\n  - `elem.scrollIntoView(top)` — 滚动以使 `elem` 可见（`elem` 与窗口的顶部/底部对齐）。\n\n# 创建自定义事件\n\n我们不仅可以分配事件处理程序，还可以从 JavaScript 生成事件。\n\n自定义事件可用于创建“图形组件”。\n\n## [事件构造器](https://zh.javascript.info/dispatch-events#shi-jian-gou-zao-qi)\n\n内建事件类形成一个层次结构（hierarchy），类似于 DOM 元素类。根是内建的 [Event](http://www.w3.org/TR/dom/#event) 类。\n\n我们可以像这样创建 `Event` 对象：\n\n```javascript\nlet event = new Event(type[, options]);\n```\n\n参数：\n\n- **type** —— 事件类型，可以是像这样 `\"click\"` 的字符串，或者我们自己的像这样 `\"my-event\"` 的参数。\n\n- **options** —— 具有两个可选属性的对象：\n\n  - `bubbles: true/false` —— 如果为 `true`，那么事件会冒泡。\n  - `cancelable: true/false` —— 如果为 `true`，那么“默认行为”就会被阻止。稍后我们会看到对于自定义事件，它意味着什么。\n\n  默认情况下，以上两者都为 false：`{bubbles: false, cancelable: false}`。\n\n## [dispatchEvent](https://zh.javascript.info/dispatch-events#dispatchevent)\n\n事件对象被创建后，我们应该使用 `elem.dispatchEvent(event)` 调用在元素上“运行”它。\n\n然后，处理程序会对它做出反应，就好像它是一个常规的浏览器事件一样。如果事件是用 `bubbles` 标志创建的，那么它会冒泡。\n\n# 表单属性和方法\n\n表单（form）以及例如 `<input>` 的控件（control）元素有许多特殊的属性和事件。\n\n## [导航：表单和元素](https://zh.javascript.info/form-elements#dao-hang-biao-dan-he-yuan-su)\n\n文档中的表单是特殊集合 `document.forms` 的成员。\n\n这就是所谓的“命名的集合”：既是被命名了的，也是有序的。我们既可以使用名字，也可以使用在文档中的编号来获取表单。\n\n```javascript\ndocument.forms.my - name=\"my\" 的表单\ndocument.forms[0] - 文档中的第一个表单\n```\n\n当我们有了一个表单时，其中的任何元素都可以通过命名的集合 `form.elements` 来获取到。\n\n## [反向引用：element.form](https://zh.javascript.info/form-elements#fan-xiang-yin-yong-elementform)\n\n对于任何元素，其对应的表单都可以通过 `element.form` 访问到。因此，表单引用了所有元素，元素也引用了表单。\n\n这是一张示意图：\n\n![image-20210221110537095](E:\\Markdown图片\\image-20210221110537095.png)\n\n## [表单元素](https://zh.javascript.info/form-elements#biao-dan-yuan-su)\n\n让我们来谈谈表单控件。\n\n### [input 和 textarea](https://zh.javascript.info/form-elements#input-he-textarea)\n\n我们可以通过 `input.value`（字符串）或 `input.checked`（布尔值）来访问复选框（checkbox）中的它们的 `value`。\n","slug":"浏览器：文档，事件，接口","published":1,"updated":"2021-07-26T13:35:36.052Z","_id":"cknzd1p8u000kf4rqg6gh1in4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"DOM-树\"><a href=\"#DOM-树\" class=\"headerlink\" title=\"DOM 树\"></a>DOM 树</h1><p>HTML 文档的主干是标签（tag）。</p>\n<p>根据文档对象模型（DOM），每个 HTML 标签都是一个对象。嵌套的标签是闭合标签的“子标签（children）”。标签内的文本也是一个对象。</p>\n<a id=\"more\"></a>\n<p>所有这些对象都可以通过 JavaScript 来访问，我们可以使用它们来修改页面。</p>\n<p>一共有 <a href=\"https://dom.spec.whatwg.org/#node\">12 种节点类型</a>。实际上，我们通常用到的是其中的 4 种：</p>\n<ol>\n<li><code>document</code> — DOM 的“入口点”。</li>\n<li>元素节点 — HTML 标签，树构建块。</li>\n<li>文本节点 — 包含文本。</li>\n<li>注释 — 有时我们可以将一些信息放入其中，它不会显示，但 JS 可以从 DOM 中读取它。</li>\n</ol>\n<p><strong>DOM 集合是只读的</strong></p>\n<p>DOM 集合，甚至可以说本章中列出的 <strong>所有</strong> 导航（navigation）属性都是只读的。</p>\n<p>我们不能通过类似 <code>childNodes[i] = ...</code> 的操作来替换一个子节点。</p>\n<p>修改子节点需要使用其它方法。我们将会在下一章中看到它们。</p>\n<p><strong>DOM 集合是实时的</strong></p>\n<p>除小部分例外，几乎所有的 DOM 集合都是 <strong>实时</strong> 的。换句话说，它们反映了 DOM 的当前状态。</p>\n<p>如果我们保留一个对 <code>elem.childNodes</code> 的引用，然后向 DOM 中添加/移除节点，那么这些节点的更新会自动出现在集合中。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/dom-nodes#zong-jie\">总结</a></h2><p>HTML/XML 文档在浏览器内均被表示为 DOM 树。</p>\n<ul>\n<li>标签（tag）成为元素节点，并形成文档结构。</li>\n<li>文本（text）成为文本节点。</li>\n<li>……等，HTML 中的所有东西在 DOM 中都有它的位置，甚至对注释也是如此。</li>\n</ul>\n<h1 id=\"遍历-DOM\"><a href=\"#遍历-DOM\" class=\"headerlink\" title=\"遍历 DOM\"></a>遍历 DOM</h1><p>DOM 让我们可以对元素和它们中的内容做任何事，但是首先我们需要获取到对应的 DOM 对象。</p>\n<p>对 DOM 的所有操作都是以 <code>document</code> 对象开始。它是 DOM 的主“入口点”。从它我们可以访问任何节点。</p>\n<p><strong>在 DOM 的世界中，<code>null</code> 就意味着“不存在”</strong></p>\n<p>在 DOM 中，<code>null</code> 值就意味着“不存在”或者“没有这个节点”。</p>\n<p><strong>DOM 集合是只读的</strong></p>\n<p><strong>DOM 集合是实时的</strong></p>\n<p><strong>不要使用</strong> <code>for..in</code> <strong>来遍历集合</strong></p>\n<h2 id=\"更多链接：表格\"><a href=\"#更多链接：表格\" class=\"headerlink\" title=\"更多链接：表格\"></a><a href=\"https://zh.javascript.info/dom-navigation#dom-navigation-tables\">更多链接：表格</a></h2><table> 元素支持 (除了上面给出的，之外) 以下这些属性:\ntable.rows — <tr> 元素的集合。table.caption/tHead/tFoot — 引用元素 <caption>，<thead>，<tfoot>。table.tBodies — <tbody> 元素的集合（根据标准还有很多元素，但是这里至少会有一个 — 即使没有被写在 HTML 源文件中，浏览器也会将其放入 DOM 中）。\n\n<thead>，<tfoot>，<tbody> 元素提供了 rows 属性：\ntbody.rows — 表格内部 <tr> 元素的集合。\n\n<tr>：\ntr.cells — 在给定 <tr> 中的 <td> 和 <th> 单元格的集合。tr.sectionRowIndex — 给定的 <tr> 在封闭的 <thead>/<tbody>/<tfoot> 中的位置（索引）。tr.rowIndex — 在整个表格中 <tr> 的编号（包括表格的所有行）。\n\n<td> 和 <th>：\ntd.cellIndex — 在封闭的 <tr> 中单元格的编号。\n\n<h2 id=\"总结-1\"><a href=\"#总结-1\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/dom-navigation#zong-jie\">总结</a></h2><p>给定一个 DOM 节点，我们可以使用导航（navigation）属性访问其直接的邻居。</p>\n<p>这些属性主要分为两组：</p>\n<ul>\n<li>对于所有节点：<code>parentNode</code>，<code>childNodes</code>，<code>firstChild</code>，<code>lastChild</code>，<code>previousSibling</code>，<code>nextSibling</code>。</li>\n<li>仅对于元素节点：<code>parentElement</code>，<code>children</code>，<code>firstElementChild</code>，<code>lastElementChild</code>，<code>previousElementSibling</code>，<code>nextElementSibling</code>。</li>\n</ul>\n<p>某些类型的 DOM 元素，例如 table，提供了用于访问其内容的其他属性和集合。</p>\n<h1 id=\"搜索：getElement，querySelector\"><a href=\"#搜索：getElement，querySelector\" class=\"headerlink\" title=\"搜索：getElement，querySelector\"></a>搜索：getElement<em>，querySelector</em></h1><h2 id=\"document-getElementById-或者只使用-id\"><a href=\"#document-getElementById-或者只使用-id\" class=\"headerlink\" title=\"document.getElementById 或者只使用 id\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#documentgetelementbyid-huo-zhe-zhi-shi-yong-id\">document.getElementById 或者只使用 id</a></h2><p>如果一个元素有 <code>id</code> 特性（attribute），那我们就可以使用 <code>document.getElementById(id)</code> 方法获取该元素，无论它在哪里。</p>\n<p><strong><code>id</code> 必须是唯一的</strong></p>\n<p><code>id</code> 必须是唯一的。在文档中，只能有一个元素带有给定的 <code>id</code>。</p>\n<p>如果有多个元素都带有同一个 <code>id</code>，那么使用它的方法的行为是不可预测的，例如 <code>document.getElementById</code> 可能会随机返回其中一个元素。因此，请遵守规则，保持 <code>id</code> 的唯一性。</p>\n<p><strong>只有 <code>document.getElementById</code>，没有 <code>anyElem.getElementById</code></strong></p>\n<p><code>getElementById</code> 方法只能被在 <code>document</code> 对象上调用。它会在整个文档中查找给定的 <code>id</code>。</p>\n<h2 id=\"querySelectorAll\"><a href=\"#querySelectorAll\" class=\"headerlink\" title=\"querySelectorAll\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#querySelectorAll\">querySelectorAll</a></h2><p>到目前为止，最通用的方法是 <code>elem.querySelectorAll(css)</code>，它返回 <code>elem</code> 中与给定 CSS 选择器匹配的所有元素。</p>\n<h2 id=\"matches\"><a href=\"#matches\" class=\"headerlink\" title=\"matches\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#matches\">matches</a></h2><p>之前的方法是搜索 DOM。</p>\n<p><a href=\"http://dom.spec.whatwg.org/#dom-element-matches\">elem.matches(css)</a> 不会查找任何内容，它只会检查 <code>elem</code> 是否与给定的 CSS 选择器匹配。它返回 <code>true</code> 或 <code>false</code>。</p>\n<h2 id=\"closest\"><a href=\"#closest\" class=\"headerlink\" title=\"closest\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#closest\">closest</a></h2><p>元素的祖先（ancestor）是：父级，父级的父级，它的父级等。祖先们一起组成了从元素到顶端的父级链。</p>\n<p><code>elem.closest(css)</code> 方法会查找与 CSS 选择器匹配的最近的祖先。<code>elem</code> 自己也会被搜索。</p>\n<p>换句话说，方法 <code>closest</code> 在元素中得到了提升，并检查每个父级。如果它与选择器匹配，则停止搜索并返回该祖先。</p>\n<h2 id=\"总结-2\"><a href=\"#总结-2\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#zong-jie\">总结</a></h2><p>目前为止，最常用的是 <code>querySelector</code> 和 <code>querySelectorAll</code>，但是 <code>getElement(s)By*</code> 可能会偶尔有用，或者可以在旧脚本中找到。</p>\n<p>此外：</p>\n<ul>\n<li><code>elem.matches(css)</code> 用于检查 <code>elem</code> 与给定的 CSS 选择器是否匹配。</li>\n<li><code>elem.closest(css)</code> 用于查找与给定 CSS 选择器相匹配的最近的祖先。<code>elem</code> 本身也会被检查。</li>\n</ul>\n<p>让我们在这里提一下另一种用来检查子级与父级之间关系的方法，因为它有时很有用：</p>\n<ul>\n<li>如果 <code>elemB</code> 在 <code>elemA</code> 内（<code>elemA</code> 的后代）或者 <code>elemA==elemB</code>，<code>elemA.contains(elemB)</code> 将返回 true。</li>\n</ul>\n<h1 id=\"节点属性：type，tag-和-content\"><a href=\"#节点属性：type，tag-和-content\" class=\"headerlink\" title=\"节点属性：type，tag 和 content\"></a>节点属性：type，tag 和 content</h1><h2 id=\"DOM-节点类\"><a href=\"#DOM-节点类\" class=\"headerlink\" title=\"DOM 节点类\"></a><a href=\"https://zh.javascript.info/basic-dom-node-properties#dom-jie-dian-lei\">DOM 节点类</a></h2><p>不同的 DOM 节点可能有不同的属性。例如，标签 <code>&lt;a&gt;</code> 相对应的元素节点具有链接相关的（link-related）属性，标签 <code>&lt;input&gt;</code> 相对应的元素节点具有与输入相关的属性，等。文本节点与元素节点不同。但是所有这些标签对应的 DOM 节点之间也存在共有的属性和方法，因为所有类型的 DOM 节点都形成了一个单一层次的结构（single hierarchy）。</p>\n<p>每个 DOM 节点都属于相应的内建类。</p>\n<p>层次结构（hierarchy）的根节点是 <a href=\"https://dom.spec.whatwg.org/#eventtarget\">EventTarget</a>，<a href=\"http://dom.spec.whatwg.org/#interface-node\">Node</a> 继承自它，其他 DOM 节点继承自 Node。</p>\n<p><img src=\"E:\\Markdown图片\\image-20210202215947121.png\" alt=\"image-20210202215947121\"></p>\n<h1 id=\"特性和属性（Attributes-and-properties）\"><a href=\"#特性和属性（Attributes-and-properties）\" class=\"headerlink\" title=\"特性和属性（Attributes and properties）\"></a>特性和属性（Attributes and properties）</h1><p>当浏览器加载页面时，它会“读取”（或者称之为：“解析”）HTML 并从中生成 DOM 对象。对于元素节点，大多数标准的 HTML 特性（attributes）会自动变成 DOM 对象的属性（properties）。</p>\n<h2 id=\"HTML-特性\"><a href=\"#HTML-特性\" class=\"headerlink\" title=\"HTML 特性\"></a><a href=\"https://zh.javascript.info/dom-attributes-and-properties#html-te-xing\">HTML 特性</a></h2><p>在 HTML 中，标签可能拥有特性（attributes）。当浏览器解析 HTML 文本，并根据标签创建 DOM 对象时，浏览器会辨别 <strong>标准的</strong> 特性并以此创建 DOM 属性。</p>\n<p>所以，当一个元素有 <code>id</code> 或其他 <strong>标准的</strong> 特性，那么就会生成对应的 DOM 属性。但是非 <strong>标准的</strong> 特性则不会。</p>\n<p>HTML 特性有以下几个特征：</p>\n<ul>\n<li>它们的名字是大小写不敏感的（<code>id</code> 与 <code>ID</code> 相同）。</li>\n<li>它们的值总是字符串类型的。</li>\n</ul>\n<h2 id=\"总结-3\"><a href=\"#总结-3\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/dom-attributes-and-properties#zong-jie\">总结</a></h2><ul>\n<li>特性（attribute）— 写在 HTML 中的内容。</li>\n<li>属性（property）— DOM 对象中的内容。</li>\n</ul>\n<p>简略的对比：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">属性</th>\n<th align=\"left\">特性</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">类型</td>\n<td align=\"left\">任何值，标准的属性具有规范中描述的类型</td>\n<td align=\"left\">字符串</td>\n</tr>\n<tr>\n<td align=\"left\">名字</td>\n<td align=\"left\">名字（name）是大小写敏感的</td>\n<td align=\"left\">名字（name）是大小写不敏感的</td>\n</tr>\n</tbody></table>\n<h1 id=\"Window-大小和滚动\"><a href=\"#Window-大小和滚动\" class=\"headerlink\" title=\"Window 大小和滚动\"></a>Window 大小和滚动</h1><h2 id=\"窗口的-width-height\"><a href=\"#窗口的-width-height\" class=\"headerlink\" title=\"窗口的 width/height\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#chuang-kou-de-widthheight\">窗口的 width/height</a></h2><p>为了获取窗口（window）的宽度和高度，我们可以使用 <code>document.documentElement</code> 的 <code>clientWidth/clientHeight</code>：</p>\n<h2 id=\"滚动：scrollTo，scrollBy，scrollIntoView\"><a href=\"#滚动：scrollTo，scrollBy，scrollIntoView\" class=\"headerlink\" title=\"滚动：scrollTo，scrollBy，scrollIntoView\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#window-scroll\">滚动：scrollTo，scrollBy，scrollIntoView</a></h2><p>可以通过更改 <code>scrollTop/scrollLeft</code> 来滚动常规元素。</p>\n<p>我们可以使用 <code>document.documentElement.scrollTop/scrollLeft</code> 对页面进行相同的操作（Safari 除外，而应该使用 <code>document.body.scrollTop/Left</code> 代替）。</p>\n<p>方法 <code>scrollBy(x,y)</code> 将页面滚动至 <strong>相对于当前位置的 <code>(x, y)</code> 位置</strong>。例如，<code>scrollBy(0,10)</code> 会将页面向下滚动 <code>10px</code>。</p>\n<p>方法 <code>scrollTo(pageX,pageY)</code> 将页面滚动至 <strong>绝对坐标</strong>，使得可见部分的左上角具有相对于文档左上角的坐标 <code>(pageX, pageY)</code>。就像设置了 <code>scrollLeft/scrollTop</code> 一样。</p>\n<p>要滚动到最开始，我们可以使用 <code>scrollTo(0,0)</code>。</p>\n<h2 id=\"scrollIntoView\"><a href=\"#scrollIntoView\" class=\"headerlink\" title=\"scrollIntoView\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#scrollintoview\">scrollIntoView</a></h2><p>为了完整起见，让我们再介绍一种方法：<a href=\"https://developer.mozilla.org/zh/docs/Web/API/Element/scrollIntoView\">elem.scrollIntoView(top)</a>。</p>\n<p>对 <code>elem.scrollIntoView(top)</code> 的调用将滚动页面以使 <code>elem</code> 可见。它有一个参数：</p>\n<ul>\n<li>如果 <code>top=true</code>（默认值），页面滚动，使 <code>elem</code> 出现在窗口顶部。元素的上边缘将与窗口顶部对齐。</li>\n<li>如果 <code>top=false</code>，页面滚动，使 <code>elem</code> 出现在窗口底部。元素的底部边缘将与窗口底部对齐。</li>\n</ul>\n<p>下面这个按钮会滚动页面，以使其自身定位在窗口顶部：</p>\n<p>this.scrollIntoView()</p>\n<p>下面这个按钮会滚动页面，以使其自身定位在窗口底部：</p>\n<p>this.scrollIntoView(false)</p>\n<h2 id=\"总结-4\"><a href=\"#总结-4\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#zong-jie\">总结</a></h2><p>几何：</p>\n<ul>\n<li><p>文档可见部分的 width/height（内容区域的 width/height）：<code>document.documentElement.clientWidth/clientHeight</code></p>\n</li>\n<li><p>整个文档的 width/height，其中包括滚动出去的部分：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> scrollHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>offsetHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>offsetHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>clientHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>clientHeight\n<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>滚动：</p>\n</li>\n<li><p>读取当前的滚动：<code>window.pageYOffset/pageXOffset</code>。</p>\n</li>\n<li><p>更改当前的滚动：</p>\n<ul>\n<li><code>window.scrollTo(pageX,pageY)</code> — 绝对坐标，</li>\n<li><code>window.scrollBy(x,y)</code> — 相对当前位置进行滚动，</li>\n<li><code>elem.scrollIntoView(top)</code> — 滚动以使 <code>elem</code> 可见（<code>elem</code> 与窗口的顶部/底部对齐）。</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"创建自定义事件\"><a href=\"#创建自定义事件\" class=\"headerlink\" title=\"创建自定义事件\"></a>创建自定义事件</h1><p>我们不仅可以分配事件处理程序，还可以从 JavaScript 生成事件。</p>\n<p>自定义事件可用于创建“图形组件”。</p>\n<h2 id=\"事件构造器\"><a href=\"#事件构造器\" class=\"headerlink\" title=\"事件构造器\"></a><a href=\"https://zh.javascript.info/dispatch-events#shi-jian-gou-zao-qi\">事件构造器</a></h2><p>内建事件类形成一个层次结构（hierarchy），类似于 DOM 元素类。根是内建的 <a href=\"http://www.w3.org/TR/dom/#event\">Event</a> 类。</p>\n<p>我们可以像这样创建 <code>Event</code> 对象：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> event <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Event</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>参数：</p>\n<ul>\n<li><p><strong>type</strong> —— 事件类型，可以是像这样 <code>&quot;click&quot;</code> 的字符串，或者我们自己的像这样 <code>&quot;my-event&quot;</code> 的参数。</p>\n</li>\n<li><p><strong>options</strong> —— 具有两个可选属性的对象：</p>\n<ul>\n<li><code>bubbles: true/false</code> —— 如果为 <code>true</code>，那么事件会冒泡。</li>\n<li><code>cancelable: true/false</code> —— 如果为 <code>true</code>，那么“默认行为”就会被阻止。稍后我们会看到对于自定义事件，它意味着什么。</li>\n</ul>\n<p>默认情况下，以上两者都为 false：<code>&#123;bubbles: false, cancelable: false&#125;</code>。</p>\n</li>\n</ul>\n<h2 id=\"dispatchEvent\"><a href=\"#dispatchEvent\" class=\"headerlink\" title=\"dispatchEvent\"></a><a href=\"https://zh.javascript.info/dispatch-events#dispatchevent\">dispatchEvent</a></h2><p>事件对象被创建后，我们应该使用 <code>elem.dispatchEvent(event)</code> 调用在元素上“运行”它。</p>\n<p>然后，处理程序会对它做出反应，就好像它是一个常规的浏览器事件一样。如果事件是用 <code>bubbles</code> 标志创建的，那么它会冒泡。</p>\n<h1 id=\"表单属性和方法\"><a href=\"#表单属性和方法\" class=\"headerlink\" title=\"表单属性和方法\"></a>表单属性和方法</h1><p>表单（form）以及例如 <code>&lt;input&gt;</code> 的控件（control）元素有许多特殊的属性和事件。</p>\n<h2 id=\"导航：表单和元素\"><a href=\"#导航：表单和元素\" class=\"headerlink\" title=\"导航：表单和元素\"></a><a href=\"https://zh.javascript.info/form-elements#dao-hang-biao-dan-he-yuan-su\">导航：表单和元素</a></h2><p>文档中的表单是特殊集合 <code>document.forms</code> 的成员。</p>\n<p>这就是所谓的“命名的集合”：既是被命名了的，也是有序的。我们既可以使用名字，也可以使用在文档中的编号来获取表单。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>my <span class=\"token operator\">-</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"my\"</span> 的表单\ndocument<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> 文档中的第一个表单<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>当我们有了一个表单时，其中的任何元素都可以通过命名的集合 <code>form.elements</code> 来获取到。</p>\n<h2 id=\"反向引用：element-form\"><a href=\"#反向引用：element-form\" class=\"headerlink\" title=\"反向引用：element.form\"></a><a href=\"https://zh.javascript.info/form-elements#fan-xiang-yin-yong-elementform\">反向引用：element.form</a></h2><p>对于任何元素，其对应的表单都可以通过 <code>element.form</code> 访问到。因此，表单引用了所有元素，元素也引用了表单。</p>\n<p>这是一张示意图：</p>\n<p><img src=\"E:\\Markdown图片\\image-20210221110537095.png\" alt=\"image-20210221110537095\"></p>\n<h2 id=\"表单元素\"><a href=\"#表单元素\" class=\"headerlink\" title=\"表单元素\"></a><a href=\"https://zh.javascript.info/form-elements#biao-dan-yuan-su\">表单元素</a></h2><p>让我们来谈谈表单控件。</p>\n<h3 id=\"input-和-textarea\"><a href=\"#input-和-textarea\" class=\"headerlink\" title=\"input 和 textarea\"></a><a href=\"https://zh.javascript.info/form-elements#input-he-textarea\">input 和 textarea</a></h3><p>我们可以通过 <code>input.value</code>（字符串）或 <code>input.checked</code>（布尔值）来访问复选框（checkbox）中的它们的 <code>value</code>。</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"DOM-树\"><a href=\"#DOM-树\" class=\"headerlink\" title=\"DOM 树\"></a>DOM 树</h1><p>HTML 文档的主干是标签（tag）。</p>\n<p>根据文档对象模型（DOM），每个 HTML 标签都是一个对象。嵌套的标签是闭合标签的“子标签（children）”。标签内的文本也是一个对象。</p>","more":"<p>所有这些对象都可以通过 JavaScript 来访问，我们可以使用它们来修改页面。</p>\n<p>一共有 <a href=\"https://dom.spec.whatwg.org/#node\">12 种节点类型</a>。实际上，我们通常用到的是其中的 4 种：</p>\n<ol>\n<li><code>document</code> — DOM 的“入口点”。</li>\n<li>元素节点 — HTML 标签，树构建块。</li>\n<li>文本节点 — 包含文本。</li>\n<li>注释 — 有时我们可以将一些信息放入其中，它不会显示，但 JS 可以从 DOM 中读取它。</li>\n</ol>\n<p><strong>DOM 集合是只读的</strong></p>\n<p>DOM 集合，甚至可以说本章中列出的 <strong>所有</strong> 导航（navigation）属性都是只读的。</p>\n<p>我们不能通过类似 <code>childNodes[i] = ...</code> 的操作来替换一个子节点。</p>\n<p>修改子节点需要使用其它方法。我们将会在下一章中看到它们。</p>\n<p><strong>DOM 集合是实时的</strong></p>\n<p>除小部分例外，几乎所有的 DOM 集合都是 <strong>实时</strong> 的。换句话说，它们反映了 DOM 的当前状态。</p>\n<p>如果我们保留一个对 <code>elem.childNodes</code> 的引用，然后向 DOM 中添加/移除节点，那么这些节点的更新会自动出现在集合中。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/dom-nodes#zong-jie\">总结</a></h2><p>HTML/XML 文档在浏览器内均被表示为 DOM 树。</p>\n<ul>\n<li>标签（tag）成为元素节点，并形成文档结构。</li>\n<li>文本（text）成为文本节点。</li>\n<li>……等，HTML 中的所有东西在 DOM 中都有它的位置，甚至对注释也是如此。</li>\n</ul>\n<h1 id=\"遍历-DOM\"><a href=\"#遍历-DOM\" class=\"headerlink\" title=\"遍历 DOM\"></a>遍历 DOM</h1><p>DOM 让我们可以对元素和它们中的内容做任何事，但是首先我们需要获取到对应的 DOM 对象。</p>\n<p>对 DOM 的所有操作都是以 <code>document</code> 对象开始。它是 DOM 的主“入口点”。从它我们可以访问任何节点。</p>\n<p><strong>在 DOM 的世界中，<code>null</code> 就意味着“不存在”</strong></p>\n<p>在 DOM 中，<code>null</code> 值就意味着“不存在”或者“没有这个节点”。</p>\n<p><strong>DOM 集合是只读的</strong></p>\n<p><strong>DOM 集合是实时的</strong></p>\n<p><strong>不要使用</strong> <code>for..in</code> <strong>来遍历集合</strong></p>\n<h2 id=\"更多链接：表格\"><a href=\"#更多链接：表格\" class=\"headerlink\" title=\"更多链接：表格\"></a><a href=\"https://zh.javascript.info/dom-navigation#dom-navigation-tables\">更多链接：表格</a></h2><table> 元素支持 (除了上面给出的，之外) 以下这些属性:\ntable.rows — <tr> 元素的集合。table.caption/tHead/tFoot — 引用元素 <caption>，<thead>，<tfoot>。table.tBodies — <tbody> 元素的集合（根据标准还有很多元素，但是这里至少会有一个 — 即使没有被写在 HTML 源文件中，浏览器也会将其放入 DOM 中）。\n\n<thead>，<tfoot>，<tbody> 元素提供了 rows 属性：\ntbody.rows — 表格内部 <tr> 元素的集合。\n\n<tr>：\ntr.cells — 在给定 <tr> 中的 <td> 和 <th> 单元格的集合。tr.sectionRowIndex — 给定的 <tr> 在封闭的 <thead>/<tbody>/<tfoot> 中的位置（索引）。tr.rowIndex — 在整个表格中 <tr> 的编号（包括表格的所有行）。\n\n<td> 和 <th>：\ntd.cellIndex — 在封闭的 <tr> 中单元格的编号。\n\n<h2 id=\"总结-1\"><a href=\"#总结-1\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/dom-navigation#zong-jie\">总结</a></h2><p>给定一个 DOM 节点，我们可以使用导航（navigation）属性访问其直接的邻居。</p>\n<p>这些属性主要分为两组：</p>\n<ul>\n<li>对于所有节点：<code>parentNode</code>，<code>childNodes</code>，<code>firstChild</code>，<code>lastChild</code>，<code>previousSibling</code>，<code>nextSibling</code>。</li>\n<li>仅对于元素节点：<code>parentElement</code>，<code>children</code>，<code>firstElementChild</code>，<code>lastElementChild</code>，<code>previousElementSibling</code>，<code>nextElementSibling</code>。</li>\n</ul>\n<p>某些类型的 DOM 元素，例如 table，提供了用于访问其内容的其他属性和集合。</p>\n<h1 id=\"搜索：getElement，querySelector\"><a href=\"#搜索：getElement，querySelector\" class=\"headerlink\" title=\"搜索：getElement，querySelector\"></a>搜索：getElement<em>，querySelector</em></h1><h2 id=\"document-getElementById-或者只使用-id\"><a href=\"#document-getElementById-或者只使用-id\" class=\"headerlink\" title=\"document.getElementById 或者只使用 id\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#documentgetelementbyid-huo-zhe-zhi-shi-yong-id\">document.getElementById 或者只使用 id</a></h2><p>如果一个元素有 <code>id</code> 特性（attribute），那我们就可以使用 <code>document.getElementById(id)</code> 方法获取该元素，无论它在哪里。</p>\n<p><strong><code>id</code> 必须是唯一的</strong></p>\n<p><code>id</code> 必须是唯一的。在文档中，只能有一个元素带有给定的 <code>id</code>。</p>\n<p>如果有多个元素都带有同一个 <code>id</code>，那么使用它的方法的行为是不可预测的，例如 <code>document.getElementById</code> 可能会随机返回其中一个元素。因此，请遵守规则，保持 <code>id</code> 的唯一性。</p>\n<p><strong>只有 <code>document.getElementById</code>，没有 <code>anyElem.getElementById</code></strong></p>\n<p><code>getElementById</code> 方法只能被在 <code>document</code> 对象上调用。它会在整个文档中查找给定的 <code>id</code>。</p>\n<h2 id=\"querySelectorAll\"><a href=\"#querySelectorAll\" class=\"headerlink\" title=\"querySelectorAll\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#querySelectorAll\">querySelectorAll</a></h2><p>到目前为止，最通用的方法是 <code>elem.querySelectorAll(css)</code>，它返回 <code>elem</code> 中与给定 CSS 选择器匹配的所有元素。</p>\n<h2 id=\"matches\"><a href=\"#matches\" class=\"headerlink\" title=\"matches\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#matches\">matches</a></h2><p>之前的方法是搜索 DOM。</p>\n<p><a href=\"http://dom.spec.whatwg.org/#dom-element-matches\">elem.matches(css)</a> 不会查找任何内容，它只会检查 <code>elem</code> 是否与给定的 CSS 选择器匹配。它返回 <code>true</code> 或 <code>false</code>。</p>\n<h2 id=\"closest\"><a href=\"#closest\" class=\"headerlink\" title=\"closest\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#closest\">closest</a></h2><p>元素的祖先（ancestor）是：父级，父级的父级，它的父级等。祖先们一起组成了从元素到顶端的父级链。</p>\n<p><code>elem.closest(css)</code> 方法会查找与 CSS 选择器匹配的最近的祖先。<code>elem</code> 自己也会被搜索。</p>\n<p>换句话说，方法 <code>closest</code> 在元素中得到了提升，并检查每个父级。如果它与选择器匹配，则停止搜索并返回该祖先。</p>\n<h2 id=\"总结-2\"><a href=\"#总结-2\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/searching-elements-dom#zong-jie\">总结</a></h2><p>目前为止，最常用的是 <code>querySelector</code> 和 <code>querySelectorAll</code>，但是 <code>getElement(s)By*</code> 可能会偶尔有用，或者可以在旧脚本中找到。</p>\n<p>此外：</p>\n<ul>\n<li><code>elem.matches(css)</code> 用于检查 <code>elem</code> 与给定的 CSS 选择器是否匹配。</li>\n<li><code>elem.closest(css)</code> 用于查找与给定 CSS 选择器相匹配的最近的祖先。<code>elem</code> 本身也会被检查。</li>\n</ul>\n<p>让我们在这里提一下另一种用来检查子级与父级之间关系的方法，因为它有时很有用：</p>\n<ul>\n<li>如果 <code>elemB</code> 在 <code>elemA</code> 内（<code>elemA</code> 的后代）或者 <code>elemA==elemB</code>，<code>elemA.contains(elemB)</code> 将返回 true。</li>\n</ul>\n<h1 id=\"节点属性：type，tag-和-content\"><a href=\"#节点属性：type，tag-和-content\" class=\"headerlink\" title=\"节点属性：type，tag 和 content\"></a>节点属性：type，tag 和 content</h1><h2 id=\"DOM-节点类\"><a href=\"#DOM-节点类\" class=\"headerlink\" title=\"DOM 节点类\"></a><a href=\"https://zh.javascript.info/basic-dom-node-properties#dom-jie-dian-lei\">DOM 节点类</a></h2><p>不同的 DOM 节点可能有不同的属性。例如，标签 <code>&lt;a&gt;</code> 相对应的元素节点具有链接相关的（link-related）属性，标签 <code>&lt;input&gt;</code> 相对应的元素节点具有与输入相关的属性，等。文本节点与元素节点不同。但是所有这些标签对应的 DOM 节点之间也存在共有的属性和方法，因为所有类型的 DOM 节点都形成了一个单一层次的结构（single hierarchy）。</p>\n<p>每个 DOM 节点都属于相应的内建类。</p>\n<p>层次结构（hierarchy）的根节点是 <a href=\"https://dom.spec.whatwg.org/#eventtarget\">EventTarget</a>，<a href=\"http://dom.spec.whatwg.org/#interface-node\">Node</a> 继承自它，其他 DOM 节点继承自 Node。</p>\n<p><img src=\"E:\\Markdown图片\\image-20210202215947121.png\" alt=\"image-20210202215947121\"></p>\n<h1 id=\"特性和属性（Attributes-and-properties）\"><a href=\"#特性和属性（Attributes-and-properties）\" class=\"headerlink\" title=\"特性和属性（Attributes and properties）\"></a>特性和属性（Attributes and properties）</h1><p>当浏览器加载页面时，它会“读取”（或者称之为：“解析”）HTML 并从中生成 DOM 对象。对于元素节点，大多数标准的 HTML 特性（attributes）会自动变成 DOM 对象的属性（properties）。</p>\n<h2 id=\"HTML-特性\"><a href=\"#HTML-特性\" class=\"headerlink\" title=\"HTML 特性\"></a><a href=\"https://zh.javascript.info/dom-attributes-and-properties#html-te-xing\">HTML 特性</a></h2><p>在 HTML 中，标签可能拥有特性（attributes）。当浏览器解析 HTML 文本，并根据标签创建 DOM 对象时，浏览器会辨别 <strong>标准的</strong> 特性并以此创建 DOM 属性。</p>\n<p>所以，当一个元素有 <code>id</code> 或其他 <strong>标准的</strong> 特性，那么就会生成对应的 DOM 属性。但是非 <strong>标准的</strong> 特性则不会。</p>\n<p>HTML 特性有以下几个特征：</p>\n<ul>\n<li>它们的名字是大小写不敏感的（<code>id</code> 与 <code>ID</code> 相同）。</li>\n<li>它们的值总是字符串类型的。</li>\n</ul>\n<h2 id=\"总结-3\"><a href=\"#总结-3\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/dom-attributes-and-properties#zong-jie\">总结</a></h2><ul>\n<li>特性（attribute）— 写在 HTML 中的内容。</li>\n<li>属性（property）— DOM 对象中的内容。</li>\n</ul>\n<p>简略的对比：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">属性</th>\n<th align=\"left\">特性</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">类型</td>\n<td align=\"left\">任何值，标准的属性具有规范中描述的类型</td>\n<td align=\"left\">字符串</td>\n</tr>\n<tr>\n<td align=\"left\">名字</td>\n<td align=\"left\">名字（name）是大小写敏感的</td>\n<td align=\"left\">名字（name）是大小写不敏感的</td>\n</tr>\n</tbody></table>\n<h1 id=\"Window-大小和滚动\"><a href=\"#Window-大小和滚动\" class=\"headerlink\" title=\"Window 大小和滚动\"></a>Window 大小和滚动</h1><h2 id=\"窗口的-width-height\"><a href=\"#窗口的-width-height\" class=\"headerlink\" title=\"窗口的 width/height\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#chuang-kou-de-widthheight\">窗口的 width/height</a></h2><p>为了获取窗口（window）的宽度和高度，我们可以使用 <code>document.documentElement</code> 的 <code>clientWidth/clientHeight</code>：</p>\n<h2 id=\"滚动：scrollTo，scrollBy，scrollIntoView\"><a href=\"#滚动：scrollTo，scrollBy，scrollIntoView\" class=\"headerlink\" title=\"滚动：scrollTo，scrollBy，scrollIntoView\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#window-scroll\">滚动：scrollTo，scrollBy，scrollIntoView</a></h2><p>可以通过更改 <code>scrollTop/scrollLeft</code> 来滚动常规元素。</p>\n<p>我们可以使用 <code>document.documentElement.scrollTop/scrollLeft</code> 对页面进行相同的操作（Safari 除外，而应该使用 <code>document.body.scrollTop/Left</code> 代替）。</p>\n<p>方法 <code>scrollBy(x,y)</code> 将页面滚动至 <strong>相对于当前位置的 <code>(x, y)</code> 位置</strong>。例如，<code>scrollBy(0,10)</code> 会将页面向下滚动 <code>10px</code>。</p>\n<p>方法 <code>scrollTo(pageX,pageY)</code> 将页面滚动至 <strong>绝对坐标</strong>，使得可见部分的左上角具有相对于文档左上角的坐标 <code>(pageX, pageY)</code>。就像设置了 <code>scrollLeft/scrollTop</code> 一样。</p>\n<p>要滚动到最开始，我们可以使用 <code>scrollTo(0,0)</code>。</p>\n<h2 id=\"scrollIntoView\"><a href=\"#scrollIntoView\" class=\"headerlink\" title=\"scrollIntoView\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#scrollintoview\">scrollIntoView</a></h2><p>为了完整起见，让我们再介绍一种方法：<a href=\"https://developer.mozilla.org/zh/docs/Web/API/Element/scrollIntoView\">elem.scrollIntoView(top)</a>。</p>\n<p>对 <code>elem.scrollIntoView(top)</code> 的调用将滚动页面以使 <code>elem</code> 可见。它有一个参数：</p>\n<ul>\n<li>如果 <code>top=true</code>（默认值），页面滚动，使 <code>elem</code> 出现在窗口顶部。元素的上边缘将与窗口顶部对齐。</li>\n<li>如果 <code>top=false</code>，页面滚动，使 <code>elem</code> 出现在窗口底部。元素的底部边缘将与窗口底部对齐。</li>\n</ul>\n<p>下面这个按钮会滚动页面，以使其自身定位在窗口顶部：</p>\n<p>this.scrollIntoView()</p>\n<p>下面这个按钮会滚动页面，以使其自身定位在窗口底部：</p>\n<p>this.scrollIntoView(false)</p>\n<h2 id=\"总结-4\"><a href=\"#总结-4\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/size-and-scroll-window#zong-jie\">总结</a></h2><p>几何：</p>\n<ul>\n<li><p>文档可见部分的 width/height（内容区域的 width/height）：<code>document.documentElement.clientWidth/clientHeight</code></p>\n</li>\n<li><p>整个文档的 width/height，其中包括滚动出去的部分：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> scrollHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>offsetHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>offsetHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>clientHeight<span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>clientHeight\n<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>滚动：</p>\n</li>\n<li><p>读取当前的滚动：<code>window.pageYOffset/pageXOffset</code>。</p>\n</li>\n<li><p>更改当前的滚动：</p>\n<ul>\n<li><code>window.scrollTo(pageX,pageY)</code> — 绝对坐标，</li>\n<li><code>window.scrollBy(x,y)</code> — 相对当前位置进行滚动，</li>\n<li><code>elem.scrollIntoView(top)</code> — 滚动以使 <code>elem</code> 可见（<code>elem</code> 与窗口的顶部/底部对齐）。</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"创建自定义事件\"><a href=\"#创建自定义事件\" class=\"headerlink\" title=\"创建自定义事件\"></a>创建自定义事件</h1><p>我们不仅可以分配事件处理程序，还可以从 JavaScript 生成事件。</p>\n<p>自定义事件可用于创建“图形组件”。</p>\n<h2 id=\"事件构造器\"><a href=\"#事件构造器\" class=\"headerlink\" title=\"事件构造器\"></a><a href=\"https://zh.javascript.info/dispatch-events#shi-jian-gou-zao-qi\">事件构造器</a></h2><p>内建事件类形成一个层次结构（hierarchy），类似于 DOM 元素类。根是内建的 <a href=\"http://www.w3.org/TR/dom/#event\">Event</a> 类。</p>\n<p>我们可以像这样创建 <code>Event</code> 对象：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> event <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Event</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>参数：</p>\n<ul>\n<li><p><strong>type</strong> —— 事件类型，可以是像这样 <code>&quot;click&quot;</code> 的字符串，或者我们自己的像这样 <code>&quot;my-event&quot;</code> 的参数。</p>\n</li>\n<li><p><strong>options</strong> —— 具有两个可选属性的对象：</p>\n<ul>\n<li><code>bubbles: true/false</code> —— 如果为 <code>true</code>，那么事件会冒泡。</li>\n<li><code>cancelable: true/false</code> —— 如果为 <code>true</code>，那么“默认行为”就会被阻止。稍后我们会看到对于自定义事件，它意味着什么。</li>\n</ul>\n<p>默认情况下，以上两者都为 false：<code>&#123;bubbles: false, cancelable: false&#125;</code>。</p>\n</li>\n</ul>\n<h2 id=\"dispatchEvent\"><a href=\"#dispatchEvent\" class=\"headerlink\" title=\"dispatchEvent\"></a><a href=\"https://zh.javascript.info/dispatch-events#dispatchevent\">dispatchEvent</a></h2><p>事件对象被创建后，我们应该使用 <code>elem.dispatchEvent(event)</code> 调用在元素上“运行”它。</p>\n<p>然后，处理程序会对它做出反应，就好像它是一个常规的浏览器事件一样。如果事件是用 <code>bubbles</code> 标志创建的，那么它会冒泡。</p>\n<h1 id=\"表单属性和方法\"><a href=\"#表单属性和方法\" class=\"headerlink\" title=\"表单属性和方法\"></a>表单属性和方法</h1><p>表单（form）以及例如 <code>&lt;input&gt;</code> 的控件（control）元素有许多特殊的属性和事件。</p>\n<h2 id=\"导航：表单和元素\"><a href=\"#导航：表单和元素\" class=\"headerlink\" title=\"导航：表单和元素\"></a><a href=\"https://zh.javascript.info/form-elements#dao-hang-biao-dan-he-yuan-su\">导航：表单和元素</a></h2><p>文档中的表单是特殊集合 <code>document.forms</code> 的成员。</p>\n<p>这就是所谓的“命名的集合”：既是被命名了的，也是有序的。我们既可以使用名字，也可以使用在文档中的编号来获取表单。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">document<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">.</span>my <span class=\"token operator\">-</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"my\"</span> 的表单\ndocument<span class=\"token punctuation\">.</span>forms<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> 文档中的第一个表单<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>当我们有了一个表单时，其中的任何元素都可以通过命名的集合 <code>form.elements</code> 来获取到。</p>\n<h2 id=\"反向引用：element-form\"><a href=\"#反向引用：element-form\" class=\"headerlink\" title=\"反向引用：element.form\"></a><a href=\"https://zh.javascript.info/form-elements#fan-xiang-yin-yong-elementform\">反向引用：element.form</a></h2><p>对于任何元素，其对应的表单都可以通过 <code>element.form</code> 访问到。因此，表单引用了所有元素，元素也引用了表单。</p>\n<p>这是一张示意图：</p>\n<p><img src=\"E:\\Markdown图片\\image-20210221110537095.png\" alt=\"image-20210221110537095\"></p>\n<h2 id=\"表单元素\"><a href=\"#表单元素\" class=\"headerlink\" title=\"表单元素\"></a><a href=\"https://zh.javascript.info/form-elements#biao-dan-yuan-su\">表单元素</a></h2><p>让我们来谈谈表单控件。</p>\n<h3 id=\"input-和-textarea\"><a href=\"#input-和-textarea\" class=\"headerlink\" title=\"input 和 textarea\"></a><a href=\"https://zh.javascript.info/form-elements#input-he-textarea\">input 和 textarea</a></h3><p>我们可以通过 <code>input.value</code>（字符串）或 <code>input.checked</code>（布尔值）来访问复选框（checkbox）中的它们的 <code>value</code>。</p>"},{"title":"递归创建从大到小排列的数组","date":"2021-03-02T07:27:00.000Z","desecription":"递归","_content":"\n### 使用递归创建从大到小排列的数组\n\n```javascript\nfunction countdown(n) {\n  if (n < 1) {\n    return []\n  } else {\n    const arr = countdown(n - 1)\n    arr.unshift(n)\n    return arr\n  }\n}\n```\n<!--more-->\n```javascript\nfunction countdown(n) {\n  if (n < 1) {\n    return []\n  } else {\n    const arr = countdown(n - 1)\n    arr.splice(0, 0, n)\n    return arr\n  }\n}\n```\n\n```javascript\nfunction countdown(n) {\n  return n < 1 ? [] : [n].concat(countdown(n - 1))\n}\n```\n\n```javascript\nfunction countdown(n) {\n  return n < 1 ? [] : [n, ...countdown(n - 1)]\n}\n```\n\n### **使用递归创建数组范围**\n\n```javascript\nfunction rangeOfNumbers(startNum, endNum) {\n  if (endNum - startNum === 0) {\n    return [startNum]\n  } else {\n    var numbers = rangeOfNumbers(startNum, endNum - 1)\n    numbers.push(endNum)\n    return numbers\n  }\n}\n```\n\n```javascript\nfunction rangeOfNumbers(startNum, endNum) {\n  return startNum === endNum\n    ? [startNum]\n    : rangeOfNumbers(startNum, endNum - 1).concat(endNum)\n}\n```\n\n```javascript\nfunction rangeOfNumbers(startNum, endNum) {\n  return startNum === endNum\n    ? [startNum]\n    : [...rangeOfNumbers(startNum, endNum - 1), endNum]\n}\n```\n","source":"_posts/递归从大到小排列的数组.md","raw":"---\ntitle: 递归创建从大到小排列的数组\ndate: 2021-03-02 15:27\ndesecription: 递归\ntags:\n  - 'JavaScript'\n---\n\n### 使用递归创建从大到小排列的数组\n\n```javascript\nfunction countdown(n) {\n  if (n < 1) {\n    return []\n  } else {\n    const arr = countdown(n - 1)\n    arr.unshift(n)\n    return arr\n  }\n}\n```\n<!--more-->\n```javascript\nfunction countdown(n) {\n  if (n < 1) {\n    return []\n  } else {\n    const arr = countdown(n - 1)\n    arr.splice(0, 0, n)\n    return arr\n  }\n}\n```\n\n```javascript\nfunction countdown(n) {\n  return n < 1 ? [] : [n].concat(countdown(n - 1))\n}\n```\n\n```javascript\nfunction countdown(n) {\n  return n < 1 ? [] : [n, ...countdown(n - 1)]\n}\n```\n\n### **使用递归创建数组范围**\n\n```javascript\nfunction rangeOfNumbers(startNum, endNum) {\n  if (endNum - startNum === 0) {\n    return [startNum]\n  } else {\n    var numbers = rangeOfNumbers(startNum, endNum - 1)\n    numbers.push(endNum)\n    return numbers\n  }\n}\n```\n\n```javascript\nfunction rangeOfNumbers(startNum, endNum) {\n  return startNum === endNum\n    ? [startNum]\n    : rangeOfNumbers(startNum, endNum - 1).concat(endNum)\n}\n```\n\n```javascript\nfunction rangeOfNumbers(startNum, endNum) {\n  return startNum === endNum\n    ? [startNum]\n    : [...rangeOfNumbers(startNum, endNum - 1), endNum]\n}\n```\n","slug":"递归从大到小排列的数组","published":1,"updated":"2021-07-26T13:35:36.053Z","_id":"cknzd1p8v000mf4rq85j41lyd","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"使用递归创建从大到小排列的数组\"><a href=\"#使用递归创建从大到小排列的数组\" class=\"headerlink\" title=\"使用递归创建从大到小排列的数组\"></a>使用递归创建从大到小排列的数组</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    arr<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> arr\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<a id=\"more\"></a>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    arr<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> arr\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"使用递归创建数组范围\"><a href=\"#使用递归创建数组范围\" class=\"headerlink\" title=\"使用递归创建数组范围\"></a><strong>使用递归创建数组范围</strong></h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">startNum<span class=\"token punctuation\">,</span> endNum</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>endNum <span class=\"token operator\">-</span> startNum <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>startNum<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> numbers <span class=\"token operator\">=</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span>startNum<span class=\"token punctuation\">,</span> endNum <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    numbers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>endNum<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> numbers\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">startNum<span class=\"token punctuation\">,</span> endNum</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> startNum <span class=\"token operator\">===</span> endNum\n    <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>startNum<span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">:</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span>startNum<span class=\"token punctuation\">,</span> endNum <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>endNum<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">startNum<span class=\"token punctuation\">,</span> endNum</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> startNum <span class=\"token operator\">===</span> endNum\n    <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>startNum<span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span>startNum<span class=\"token punctuation\">,</span> endNum <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> endNum<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>","site":{"data":{}},"excerpt":"<h3 id=\"使用递归创建从大到小排列的数组\"><a href=\"#使用递归创建从大到小排列的数组\" class=\"headerlink\" title=\"使用递归创建从大到小排列的数组\"></a>使用递归创建从大到小排列的数组</h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    arr<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> arr\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","more":"<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    arr<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> arr\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">countdown</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"使用递归创建数组范围\"><a href=\"#使用递归创建数组范围\" class=\"headerlink\" title=\"使用递归创建数组范围\"></a><strong>使用递归创建数组范围</strong></h3><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">startNum<span class=\"token punctuation\">,</span> endNum</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>endNum <span class=\"token operator\">-</span> startNum <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>startNum<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> numbers <span class=\"token operator\">=</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span>startNum<span class=\"token punctuation\">,</span> endNum <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    numbers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>endNum<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> numbers\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">startNum<span class=\"token punctuation\">,</span> endNum</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> startNum <span class=\"token operator\">===</span> endNum\n    <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>startNum<span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">:</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span>startNum<span class=\"token punctuation\">,</span> endNum <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>endNum<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">startNum<span class=\"token punctuation\">,</span> endNum</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> startNum <span class=\"token operator\">===</span> endNum\n    <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>startNum<span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">rangeOfNumbers</span><span class=\"token punctuation\">(</span>startNum<span class=\"token punctuation\">,</span> endNum <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> endNum<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"数据结构和算法","date":"2021-03-22T08:44:00.000Z","desecription":"数据结构和算法","_content":"\n## 栈\n\n1. 栈是一个后进先出的数据结构\n2. JavaScript 中没有栈，但可以用 Array 实现栈的所有功能\n3. 栈常用操作:push、pop、stack[stack.length-1]\n<!--more-->\n\n### 栈的应用\n\n**1、把十进制数转为二进制数**\n\n```javascript\n// 函数：将十进制转成二进制\n// 十进制  二进制\n// Decimal binary\nfunction dec2bin(decNumber) {\n  // 1、定义栈对象\n  let stack = new Stack();\n  // 2、循环操作\n  while (decNumber > 0) {\n    // 2.1、获取余数，并且放入到栈中\n    stack.push(decNumber % 2);\n\n    //2.2、获取整除后的结果，作为下一次运行的数字\n    decNumber = Math.floor(decNumber / 2);\n  }\n\n  // 3、从栈中取出0和1\n  let binaryString = '';\n  while (!stack.isEmpty()) {\n    binaryString += stack.pop();\n  }\n  return binaryString;\n}\n//测试十进制转二进制的函数\nconsole.log(dec2bin(5)); //101\nconsole.log(dec2bin(50)); //110010\n```\n\n## 队列(queue)\n\n> 只允许在一端插入数据操作，在另一端进行删除数据操作的特殊线性表；\n> 进行插入操作的一端称为队尾（入队列），进行删除操作的一端称为队头（出队列）；队列具有先进先出（FIFO）的特性。\n\njs 队列的实现（线性存储）\n\n```javascript\n//封装队列类\nfunction Queue() {\n  //队列中的属性\n  this.items = [];\n  //栈的相关操作\n  //  1、将元素加入到队列中\n  Queue.prototype.add = function (element) {\n    this.items.push(element);\n  };\n  // 2、从队列中删除前端元素\n  Queue.prototype.delete = function () {\n    return this.items.shift();\n  };\n  //3、查看队列前端元素\n  Queue.prototype.front = function () {\n    return this.items[0];\n  };\n  // 4、判断队列是否为空\n  Queue.prototype.isEmpty = function () {\n    return this.items.length == 0;\n  };\n  // 5、获取队列中元素的个数\n  Queue.prototype.size = function () {\n    return this.items.length;\n  };\n  // 6、toString方法\n  Queue.prototype.toString = function () {\n    let resultString = '';\n    for (let i = 0; i < this.items.length; i++) {\n      resultString += this.items[i] + ' ';\n    }\n    return resultString;\n  };\n}\n//队列的使用\nlet q = new Queue();\nq.add('22');\nq.add('33');\nq.add('44');\nq.delete();\nconsole.log(q);\nconsole.log(q.size());\nconsole.log(q.front());\nconsole.log(q.isEmpty());\n```\n\n## 链表结构\n\n- 多个元素组成的列表。\n- 元素存储不连续，用 next 指针连在一起。\n\n![链表](/images/链表.jpg)\n\n### 数组 vs 链表\n\n- 数组：增删非首尾元素是往往需要移动元素。\n- 链表：增删非首尾元素，不需要移动元素，只需要更改 next 的指向即可。\n\n## 集合\n\n- 一种无序且唯一的数据结构\n- ES6 中有集合，名为 set\n- 集合的常用操作：去重，判断某元素是否在集合中、求交集\n\n```javascript\n//使用set对象\nlet mySet = new Set();\n\nmySet.add(1);\nmySet.add(5);\nmySet.add(5);\nmySet.add('some text');\nlet o = { a: 1, b: 2 };\nmySet.add(o);\nmySet.add({ a: 1, b: 2 });\n//是否存在该元素\nconst has = mySet.has(o);\nmySet.delete(5);\n//遍历\nfor (let item of mySet) {\n  console.log(item);\n}\n//转换成数组\nconst myArr = [...mySet];\nconst myArrs = Array.from(mySet);\n\nconst mySet2 = new Set([1, 2, 3, 4]);\n//求交集\nconst intersection = new Set([...mySet].filter((x) => mySet2.has(x)));\n//求并集\nconst difference = new Set([...mySet2].filter((x) => !mySet2.has(x)));\n```\n\n## 字典\n\n> 字典是以[键，值]的形式来存储元素。字典也称作映射、符号表或关联数组。\n>\n> 集合、字典、散列表都可以存储不重复的数据。字典和我们上面实现的集合很像。\n>\n> ES5 包含了一个 Map 类的实现，即我们所说的字典。\n\n```javascript\nconst m = new Map();\n\n//增\nm.set('a', 'aa');\nm.set('b', 'bb');\n//删\nm.delete('b');\n// m.clear();\n\n//改\nm.set('a', 'aaa');\n\n//查\nm.get(a);\n```\n\n两数之和\n\n给定一个整数数组 `nums` 和一个整数目标值 `target`，请你在该数组中找出 **和为目标值** 的那 **两个** 整数，并返回它们的数组下标。\n\n你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。\n\n你可以按任意顺序返回答案。\n\n```javascript\nvar twoSum = function (nums, target) {\n  const map = new Map();\n  for (let i = 0; i < nums.length; i++) {\n    const n = nums[i];\n    const n2 = target - n;\n    if (map.has(n2)) {\n      return [map.get(n2), i];\n    } else {\n      map.set(n, i);\n    }\n  }\n};\nconst nums = [4, 5, 6, 7],\n  target = 9;\ntwoSum(nums, target);\n```\n\n## 树\n\n- 一种分层数据的抽象模型\n\n- 前端工作中常见的树包括：DOM、树、级联选择、树形控件\n\n- JS 中没有树，但是可以用 Object 和 Array 构建树\n\n- 树的常用操作：深度/广度优先遍历、先中后序遍历\n\n  - 深度优先遍历：尽可能深的搜索树的分支\n\n  - 广度优先遍历：先访问离根节点最近的节点\n\n![树](/images/树.png)\n\n### 深度优先遍历算法口诀\n\n1. 访问根节点\n2. 对根节点的 children 挨个进行深度优先遍历\n\n```javascript\nconst tree = {\n  val: 'a',\n  children: [\n    {\n      val: 'b',\n      children: [\n        {\n          val: 'd',\n          children: [],\n        },\n        {\n          val: 'e',\n          children: [],\n        },\n      ],\n    },\n    {\n      val: 'c',\n      children: [\n        {\n          val: 'f',\n          children: [],\n        },\n        {\n          val: 'g',\n          children: [],\n        },\n      ],\n    },\n  ],\n};\nconst dfs = (root) => {\n  console.log(root.val);\n  root.children.forEach(dfs);\n};\n\ndfs(tree);\n```\n\n### 广度优先遍历算法口诀\n\n1. 新建一个队列，把根节点入队。\n2. 把队头出队并访问。\n3. 把队头的 children 挨个入队\n4. 重复第二、三步，直到队列为空。\n\n```javascript\nconst bfs = (root) => {\n  const q = [root];\n  while (q.length > 0) {\n    const n = q.shift();\n    console.log(n.val);\n    n.children.forEach((child) => {\n      q.push(child);\n    });\n  }\n};\n\nbfs(tree);\n```\n\n### 二叉树是什么？\n\n- 树中每个节点最多只能有两个子节点。\n- 在 JS 中通常用 Object 来模拟二叉树。\n  ![二叉树遍历](/images/二叉树遍历.jpg)\n\n### 先序遍历算法口诀\n\n1. 访问根节点。\n\n2. 对根节点的左子树进行先序遍历。\n\n3. 对根节点的右子树进行先序遍历。\n\n   ```javascript\n   const bt = {\n     val: 1,\n     left: {\n       val: 2,\n       left: {\n         val: 4,\n         left: null,\n         right: null,\n       },\n       right: {\n         val: 5,\n         left: null,\n         right: null,\n       },\n     },\n     right: {\n       val: 3,\n       left: {\n         val: 6,\n         left: null,\n         right: null,\n       },\n       right: {\n         val: 7,\n         left: null,\n         right: null,\n       },\n     },\n   };\n\n   module.exports = bt;\n   const bt = require('./bt');\n   //先序遍历算法\n   const preorder = (root) => {\n     if (!root) {\n       return;\n     }\n     console.log(root.val);\n     preorder(root.left);\n     preorder(root.right);\n   };\n\n   preorder(bt);\n   //函数调用堆栈，先序遍历非递归版\n   const preorder = (root) => {\n     if (!root) {\n       return;\n     }\n     const stack = [root];\n     while (stack.length) {\n       const n = stack.pop();\n       console.log(n.val);\n       if (n.right) {\n         stack.push(n.right);\n       }\n       if (n.left) {\n         stack.push(n.left);\n       }\n     }\n   };\n   preorder(bt);\n   ```\n\n![二叉树](/images/二叉树.png)\n\n### 中序遍历算法口诀\n\n1. 对根节点的左子树进行中序遍历。\n\n2. 访问根节点。\n\n3. 对根节点的右子树进行中序遍历。\n\n```javascript\nconst bt = require('./bt');\n//中序遍历算法\nconst inorder = (root) => {\n  if (!root) {\n    return;\n  }\n  inorder(root.left);\n  console.log(root.val);\n  inorder(root.right);\n};\ninorder(bt);\n//中序遍历算法，非递归版\nconst inorder = (root) => {\n  if (!root) {\n    return;\n  }\n  const stack = [];\n  let p = root;\n  while (p || stack.length) {\n    while (p) {\n      stack.push(p);\n      p = p.left;\n    }\n    const n = stack.pop();\n    console.log(n.val);\n    p = n.right;\n  }\n};\ninorder(bt);\n```\n\n### 后序遍历算法口诀\n\n1. 对根节点的左子树进行后序遍历。\n2. 对根节点的右子树进行后续遍历。\n3. 访问根节点。\n\n```javascript\nconst bt = require('./bt');\n//后续遍历算法口诀，递归版\nconst postorder = (root) => {\n  if (!root) {\n    return;\n  }\n  postorder(root.left);\n  postorder(root.right);\n  console.log(root.val);\n};\npostorder(bt);\n//后续遍历算法，非递归版\nconst postorder = (root) => {\n  if (!root) {\n    return;\n  }\n  const outputStack = [];\n  const stack = [root];\n  while (stack.length) {\n    const n = stack.pop();\n    outputStack.push(n);\n    if (n.left) {\n      stack.push(n.left);\n    }\n    if (n.right) {\n      stack.push(n.right);\n    }\n  }\n  while (outputStack.length) {\n    const n = outputStack.pop();\n    console.log(n.val);\n  }\n};\n\npostorder(bt);\n```\n\n## 图\n\n- 图是网络结构的抽象模型，是一组由边连接的节点。\n- 图可以表示任何二元关系，比如道路、航班\n\n### 图是什么\n\n- JS 中没有图，但是可以用 Object 和 Array 构建图\n- 图的表示法：领接矩阵、邻接表、关联矩阵\n\n![image-20210409193407452](/images/图的表示方法-领接矩阵.png)\n\n![image-20210409193416004](/images/图的表示方法-邻接表.png)\n\n### 图的常用操作\n\n- 深度优先遍历\n\n  尽可能深的搜索图的分支。\n\n- 广度优先遍历\n\n  先访问离根节点最近的节点。\n\n#### 深度优先遍历算法口诀\n\n1. 访问根节点。\n2. 对根节点的没访问过的相邻接点挨个进行深度优先遍历。\n\n![图的深度优先遍历](/images/图的深度优先遍历.png)\n\n#### 广度优先遍历算法口诀\n\n1. 新建一个队列，把根节点入队。\n2. 把队头出队并访问。\n3. 把队头的没访问过的相邻节点入队。\n4. 重复第二三步，直到队列为空。\n\n![图的广度优先遍历](/images/图的广度优先遍历.png)\n\n## 堆\n\n- 堆是一种特殊的完全二叉树\n- 所有的节点都大于等于（最大堆）或小于等于（最小堆）它的子节点\n\n### JS 中的堆\n\n- JS 通常用数组表示堆。\n- 左侧子节点的位置是 2 \\* index + 1。\n- 右侧子节点的位置是 2 \\* index + 2。\n- 父节点位置是(index - 1) / 2。\n\n### 堆的应用\n\n- 堆能高效、快速地找出最大值和最小值\n- 时间复杂度：o(1)；\n- 找出第 k 个最大(小)元素\n\n第 k 个最大元素\n\n![堆](/images/堆.png)\n\n- 构建一个最小堆，并将元素依次插入堆中。\n- 当堆的容量超过 k，就删除堆顶。\n- 插入结束后，堆顶就是第 K 个最大元素。\n\n## JavaScript：冒泡排序\n\n- 比较所有相邻元素，如果第一个比第二个大，则交换他们。\n- 一轮下来可以保证，最后一个数是最大的。\n- 执行 n-1 轮，就可以完成排序。\n\n```javascript\nArray.prototype.bubbleSort = function () {\n  for (let i = 0; i < this.length - 1; i++) {\n    for (let j = 0; j < this.length - 1 - i; j++) {\n      if (this[j] > this[j + 1]) {\n        const temp = this[j];\n        this[j] = this[j + 1];\n        this[j + 1] = temp;\n      }\n    }\n  }\n  return this;\n};\nlet arr = [5, 4, 3, 2, 1];\narr.bubbleSort(); //return [1,2,3,4,5]\n//逆序则把if里的>换成<\n```\n\n## JavaScript：选择排序\n\n- 找到数组中的最小值，选中它并将其放置在第一位\n- 接着找到第二小的值，选中它并将其放置在第二位\n- 以此类推，执行 n-1 轮。\n\n```}javascript\nArray.prototype.selectionSort = function () {\n  for (let i = 0; i < this.length - 1; i++) {\n    let indexMin = i;\n    for (let j = i; j < this.length; j += 1) {\n      if (this[j] < this[indexMin]) {\n        indexMin = j;\n      }\n    }\n    if (indexMin !== i) {\n      const temp = this[i];\n      this[i] = this[indexMin];\n      this[indexMin] = temp;\n    }\n  }\n  console.log(this);\n};\nlet arr = [5,4,3,2,1]\narr.selectionSort(); //return [1,2,3,4,5]\n```\n\n## JavaScript：插入排序\n\n- 从第二个数开始往前比。\n- 比他大就往后排。\n- 以此类推进行到最后一个数。\n\n```javascript\nArray.prototype.insertionSort = function () {\n  for (let i = 1; i < this.length; i++) {\n    const temp = this[i];\n    let j = i;\n    while (j > 0) {\n      if (this[j - i] > temp) {\n        this[j] = this[j - i];\n      } else {\n        break;\n      }\n      j -= i;\n    }\n    this[j] = temp;\n  }\n  return this;\n};\n\nconst arr = [5, 4, 3, 2, 1];\nconsole.log(arr.insertionSort());\n```\n\n## JavaScript：归并排序\n\n时间复杂度 O(n\\*logn)\n\n- 分：把数组劈成两半，再递归地对数组进行“分”操作，直到分成一个个单独的数。\n- 合：把两个数合并为有序数组，再对有序数组进行合并，直到全部子数组合并为一个完整数组。\n\n### 合并两个有序数组\n\n- 新建一个空数组 res，用于存放最终排序后的数组。\n- 比较两个有序数组的头部，较小者出队并推入 res 中。\n- 如果两个数组还有值，就重复第二步。\n\n```javascript\nArray.prototype.mergeSort = function () {\n  const rec = (arr) => {\n    if (arr.length === 1) {\n      return arr;\n    }\n    const mid = Math.floor(arr.length / 2);\n    const left = arr.slice(0, mid);\n    const right = arr.slice(mid, arr.length);\n    const orderLeft = rec(left);\n    const orderRight = rec(right);\n    const res = [];\n    while (orderLeft.length || orderRight.length) {\n      if (orderLeft.length && orderRight.length) {\n        res.push(\n          orderLeft[0] < orderRight ? orderLeft.shift() : orderRight.shift()\n        );\n      } else if (orderLeft.length) {\n        res.push(orderLeft.shift());\n      } else if (orderRight.length) {\n        res.push(orderRight.shift());\n      }\n    }\n    return res;\n  };\n  const res = rec(this);\n  res.forEach((n, i) => {\n    this[i] = n;\n  });\n  return res;\n};\nconst arr = [5, 4, 3, 2, 1];\nconsole.log(arr.mergeSort());\n//分的时间复杂度O(logN)\n//合的时间复杂度是O(n);\n//总的时间复杂度是O(n*logN)\n```\n\n## JavaScript：快速排序\n\n- 分区：从数组中任意选择一个“基准”，所有比基准小的元素放在基准前面，比基准大的元素放在基准的后面。\n- 递归：递归地对基准前后的子数组进行分区。\n- 时间复杂度\n  - 递归的时间复杂度是 O(logN)\n  - 分区操作的时间复杂度是 O(n)\n  - 时间复杂度 O(nlogN)\n\n```javascript\nArray.prototype.quickSort = function () {\n  const rec = (arr) => {\n    if (arr.length === 1) {\n      return arr;\n    }\n    const left = [];\n    const right = [];\n    const mid = arr[0];\n    for (let i = 1; i < arr.length; i++) {\n      if (arr[i] < mid) {\n        left.push(arr[i]);\n      } else {\n        right.push(arr[i]);\n      }\n    }\n    return [...rec(left), mid, ...rec(right)];\n  };\n  const res = rec(this);\n  res.forEach((n, i) => {\n    this[i] = n;\n  });\n  return res;\n};\nconst arr = [2, 4, 5, 3, 1];\nconsole.log(arr.quickSort());\n```\n\n## JavaScript 实现：二分搜索\n\n### 思路\n\n- 从数组的中间元素开始，如果中间元素正好是目标值，则搜索结束。\n- 如果目标值大于或者小于中间元素，则在大于或小于中间元素的那一半数组中搜索。\n\n时间复杂度：O(logN)\n\n```javascript\nArray.prototype.binarySearch = function (item) {\n  let low = 0;\n  let high = this.length - 1;\n  while (low <= high) {\n    const mid = Math.floor((low + high) / 2);\n    const element = this[mid];\n    if (element < item) {\n      low = mid + 1;\n    } else if (element > item) {\n      high = mid - 1;\n    } else {\n      return mid;\n    }\n  }\n  return -1;\n};\n\nconst res = [1, 2, 3, 4, 5].binarySearch(4);\nconsole.log(res);\n```\n\n## 分而治之\n\n- 分而治之是算法设计中的一种方法。\n- 它将一个问题分成多个和原问题相似的小问题，递归解决小问题，再将结果合并以解决原来的问题。\n\n### 场景一：归并排序\n\n- 分：把数组从中间一分为二。\n- 解：递归地对两个子数组进行归并排序。\n- 合：合并有序子数组。\n\n### 场景二：快速排序\n\n- 分：选基准，按基准把数组分成两个子数组。\n- 解：递归地对两个子数组进行快速排序。\n- 合：对两个子数组进行合并。\n","source":"_posts/数据结构和算法.md","raw":"---\ntitle: 数据结构和算法\ndate: 2021-03-22 16:44\ndesecription: 数据结构和算法\ntags:\n  - '数据结构和算法'\n---\n\n## 栈\n\n1. 栈是一个后进先出的数据结构\n2. JavaScript 中没有栈，但可以用 Array 实现栈的所有功能\n3. 栈常用操作:push、pop、stack[stack.length-1]\n<!--more-->\n\n### 栈的应用\n\n**1、把十进制数转为二进制数**\n\n```javascript\n// 函数：将十进制转成二进制\n// 十进制  二进制\n// Decimal binary\nfunction dec2bin(decNumber) {\n  // 1、定义栈对象\n  let stack = new Stack();\n  // 2、循环操作\n  while (decNumber > 0) {\n    // 2.1、获取余数，并且放入到栈中\n    stack.push(decNumber % 2);\n\n    //2.2、获取整除后的结果，作为下一次运行的数字\n    decNumber = Math.floor(decNumber / 2);\n  }\n\n  // 3、从栈中取出0和1\n  let binaryString = '';\n  while (!stack.isEmpty()) {\n    binaryString += stack.pop();\n  }\n  return binaryString;\n}\n//测试十进制转二进制的函数\nconsole.log(dec2bin(5)); //101\nconsole.log(dec2bin(50)); //110010\n```\n\n## 队列(queue)\n\n> 只允许在一端插入数据操作，在另一端进行删除数据操作的特殊线性表；\n> 进行插入操作的一端称为队尾（入队列），进行删除操作的一端称为队头（出队列）；队列具有先进先出（FIFO）的特性。\n\njs 队列的实现（线性存储）\n\n```javascript\n//封装队列类\nfunction Queue() {\n  //队列中的属性\n  this.items = [];\n  //栈的相关操作\n  //  1、将元素加入到队列中\n  Queue.prototype.add = function (element) {\n    this.items.push(element);\n  };\n  // 2、从队列中删除前端元素\n  Queue.prototype.delete = function () {\n    return this.items.shift();\n  };\n  //3、查看队列前端元素\n  Queue.prototype.front = function () {\n    return this.items[0];\n  };\n  // 4、判断队列是否为空\n  Queue.prototype.isEmpty = function () {\n    return this.items.length == 0;\n  };\n  // 5、获取队列中元素的个数\n  Queue.prototype.size = function () {\n    return this.items.length;\n  };\n  // 6、toString方法\n  Queue.prototype.toString = function () {\n    let resultString = '';\n    for (let i = 0; i < this.items.length; i++) {\n      resultString += this.items[i] + ' ';\n    }\n    return resultString;\n  };\n}\n//队列的使用\nlet q = new Queue();\nq.add('22');\nq.add('33');\nq.add('44');\nq.delete();\nconsole.log(q);\nconsole.log(q.size());\nconsole.log(q.front());\nconsole.log(q.isEmpty());\n```\n\n## 链表结构\n\n- 多个元素组成的列表。\n- 元素存储不连续，用 next 指针连在一起。\n\n![链表](/images/链表.jpg)\n\n### 数组 vs 链表\n\n- 数组：增删非首尾元素是往往需要移动元素。\n- 链表：增删非首尾元素，不需要移动元素，只需要更改 next 的指向即可。\n\n## 集合\n\n- 一种无序且唯一的数据结构\n- ES6 中有集合，名为 set\n- 集合的常用操作：去重，判断某元素是否在集合中、求交集\n\n```javascript\n//使用set对象\nlet mySet = new Set();\n\nmySet.add(1);\nmySet.add(5);\nmySet.add(5);\nmySet.add('some text');\nlet o = { a: 1, b: 2 };\nmySet.add(o);\nmySet.add({ a: 1, b: 2 });\n//是否存在该元素\nconst has = mySet.has(o);\nmySet.delete(5);\n//遍历\nfor (let item of mySet) {\n  console.log(item);\n}\n//转换成数组\nconst myArr = [...mySet];\nconst myArrs = Array.from(mySet);\n\nconst mySet2 = new Set([1, 2, 3, 4]);\n//求交集\nconst intersection = new Set([...mySet].filter((x) => mySet2.has(x)));\n//求并集\nconst difference = new Set([...mySet2].filter((x) => !mySet2.has(x)));\n```\n\n## 字典\n\n> 字典是以[键，值]的形式来存储元素。字典也称作映射、符号表或关联数组。\n>\n> 集合、字典、散列表都可以存储不重复的数据。字典和我们上面实现的集合很像。\n>\n> ES5 包含了一个 Map 类的实现，即我们所说的字典。\n\n```javascript\nconst m = new Map();\n\n//增\nm.set('a', 'aa');\nm.set('b', 'bb');\n//删\nm.delete('b');\n// m.clear();\n\n//改\nm.set('a', 'aaa');\n\n//查\nm.get(a);\n```\n\n两数之和\n\n给定一个整数数组 `nums` 和一个整数目标值 `target`，请你在该数组中找出 **和为目标值** 的那 **两个** 整数，并返回它们的数组下标。\n\n你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。\n\n你可以按任意顺序返回答案。\n\n```javascript\nvar twoSum = function (nums, target) {\n  const map = new Map();\n  for (let i = 0; i < nums.length; i++) {\n    const n = nums[i];\n    const n2 = target - n;\n    if (map.has(n2)) {\n      return [map.get(n2), i];\n    } else {\n      map.set(n, i);\n    }\n  }\n};\nconst nums = [4, 5, 6, 7],\n  target = 9;\ntwoSum(nums, target);\n```\n\n## 树\n\n- 一种分层数据的抽象模型\n\n- 前端工作中常见的树包括：DOM、树、级联选择、树形控件\n\n- JS 中没有树，但是可以用 Object 和 Array 构建树\n\n- 树的常用操作：深度/广度优先遍历、先中后序遍历\n\n  - 深度优先遍历：尽可能深的搜索树的分支\n\n  - 广度优先遍历：先访问离根节点最近的节点\n\n![树](/images/树.png)\n\n### 深度优先遍历算法口诀\n\n1. 访问根节点\n2. 对根节点的 children 挨个进行深度优先遍历\n\n```javascript\nconst tree = {\n  val: 'a',\n  children: [\n    {\n      val: 'b',\n      children: [\n        {\n          val: 'd',\n          children: [],\n        },\n        {\n          val: 'e',\n          children: [],\n        },\n      ],\n    },\n    {\n      val: 'c',\n      children: [\n        {\n          val: 'f',\n          children: [],\n        },\n        {\n          val: 'g',\n          children: [],\n        },\n      ],\n    },\n  ],\n};\nconst dfs = (root) => {\n  console.log(root.val);\n  root.children.forEach(dfs);\n};\n\ndfs(tree);\n```\n\n### 广度优先遍历算法口诀\n\n1. 新建一个队列，把根节点入队。\n2. 把队头出队并访问。\n3. 把队头的 children 挨个入队\n4. 重复第二、三步，直到队列为空。\n\n```javascript\nconst bfs = (root) => {\n  const q = [root];\n  while (q.length > 0) {\n    const n = q.shift();\n    console.log(n.val);\n    n.children.forEach((child) => {\n      q.push(child);\n    });\n  }\n};\n\nbfs(tree);\n```\n\n### 二叉树是什么？\n\n- 树中每个节点最多只能有两个子节点。\n- 在 JS 中通常用 Object 来模拟二叉树。\n  ![二叉树遍历](/images/二叉树遍历.jpg)\n\n### 先序遍历算法口诀\n\n1. 访问根节点。\n\n2. 对根节点的左子树进行先序遍历。\n\n3. 对根节点的右子树进行先序遍历。\n\n   ```javascript\n   const bt = {\n     val: 1,\n     left: {\n       val: 2,\n       left: {\n         val: 4,\n         left: null,\n         right: null,\n       },\n       right: {\n         val: 5,\n         left: null,\n         right: null,\n       },\n     },\n     right: {\n       val: 3,\n       left: {\n         val: 6,\n         left: null,\n         right: null,\n       },\n       right: {\n         val: 7,\n         left: null,\n         right: null,\n       },\n     },\n   };\n\n   module.exports = bt;\n   const bt = require('./bt');\n   //先序遍历算法\n   const preorder = (root) => {\n     if (!root) {\n       return;\n     }\n     console.log(root.val);\n     preorder(root.left);\n     preorder(root.right);\n   };\n\n   preorder(bt);\n   //函数调用堆栈，先序遍历非递归版\n   const preorder = (root) => {\n     if (!root) {\n       return;\n     }\n     const stack = [root];\n     while (stack.length) {\n       const n = stack.pop();\n       console.log(n.val);\n       if (n.right) {\n         stack.push(n.right);\n       }\n       if (n.left) {\n         stack.push(n.left);\n       }\n     }\n   };\n   preorder(bt);\n   ```\n\n![二叉树](/images/二叉树.png)\n\n### 中序遍历算法口诀\n\n1. 对根节点的左子树进行中序遍历。\n\n2. 访问根节点。\n\n3. 对根节点的右子树进行中序遍历。\n\n```javascript\nconst bt = require('./bt');\n//中序遍历算法\nconst inorder = (root) => {\n  if (!root) {\n    return;\n  }\n  inorder(root.left);\n  console.log(root.val);\n  inorder(root.right);\n};\ninorder(bt);\n//中序遍历算法，非递归版\nconst inorder = (root) => {\n  if (!root) {\n    return;\n  }\n  const stack = [];\n  let p = root;\n  while (p || stack.length) {\n    while (p) {\n      stack.push(p);\n      p = p.left;\n    }\n    const n = stack.pop();\n    console.log(n.val);\n    p = n.right;\n  }\n};\ninorder(bt);\n```\n\n### 后序遍历算法口诀\n\n1. 对根节点的左子树进行后序遍历。\n2. 对根节点的右子树进行后续遍历。\n3. 访问根节点。\n\n```javascript\nconst bt = require('./bt');\n//后续遍历算法口诀，递归版\nconst postorder = (root) => {\n  if (!root) {\n    return;\n  }\n  postorder(root.left);\n  postorder(root.right);\n  console.log(root.val);\n};\npostorder(bt);\n//后续遍历算法，非递归版\nconst postorder = (root) => {\n  if (!root) {\n    return;\n  }\n  const outputStack = [];\n  const stack = [root];\n  while (stack.length) {\n    const n = stack.pop();\n    outputStack.push(n);\n    if (n.left) {\n      stack.push(n.left);\n    }\n    if (n.right) {\n      stack.push(n.right);\n    }\n  }\n  while (outputStack.length) {\n    const n = outputStack.pop();\n    console.log(n.val);\n  }\n};\n\npostorder(bt);\n```\n\n## 图\n\n- 图是网络结构的抽象模型，是一组由边连接的节点。\n- 图可以表示任何二元关系，比如道路、航班\n\n### 图是什么\n\n- JS 中没有图，但是可以用 Object 和 Array 构建图\n- 图的表示法：领接矩阵、邻接表、关联矩阵\n\n![image-20210409193407452](/images/图的表示方法-领接矩阵.png)\n\n![image-20210409193416004](/images/图的表示方法-邻接表.png)\n\n### 图的常用操作\n\n- 深度优先遍历\n\n  尽可能深的搜索图的分支。\n\n- 广度优先遍历\n\n  先访问离根节点最近的节点。\n\n#### 深度优先遍历算法口诀\n\n1. 访问根节点。\n2. 对根节点的没访问过的相邻接点挨个进行深度优先遍历。\n\n![图的深度优先遍历](/images/图的深度优先遍历.png)\n\n#### 广度优先遍历算法口诀\n\n1. 新建一个队列，把根节点入队。\n2. 把队头出队并访问。\n3. 把队头的没访问过的相邻节点入队。\n4. 重复第二三步，直到队列为空。\n\n![图的广度优先遍历](/images/图的广度优先遍历.png)\n\n## 堆\n\n- 堆是一种特殊的完全二叉树\n- 所有的节点都大于等于（最大堆）或小于等于（最小堆）它的子节点\n\n### JS 中的堆\n\n- JS 通常用数组表示堆。\n- 左侧子节点的位置是 2 \\* index + 1。\n- 右侧子节点的位置是 2 \\* index + 2。\n- 父节点位置是(index - 1) / 2。\n\n### 堆的应用\n\n- 堆能高效、快速地找出最大值和最小值\n- 时间复杂度：o(1)；\n- 找出第 k 个最大(小)元素\n\n第 k 个最大元素\n\n![堆](/images/堆.png)\n\n- 构建一个最小堆，并将元素依次插入堆中。\n- 当堆的容量超过 k，就删除堆顶。\n- 插入结束后，堆顶就是第 K 个最大元素。\n\n## JavaScript：冒泡排序\n\n- 比较所有相邻元素，如果第一个比第二个大，则交换他们。\n- 一轮下来可以保证，最后一个数是最大的。\n- 执行 n-1 轮，就可以完成排序。\n\n```javascript\nArray.prototype.bubbleSort = function () {\n  for (let i = 0; i < this.length - 1; i++) {\n    for (let j = 0; j < this.length - 1 - i; j++) {\n      if (this[j] > this[j + 1]) {\n        const temp = this[j];\n        this[j] = this[j + 1];\n        this[j + 1] = temp;\n      }\n    }\n  }\n  return this;\n};\nlet arr = [5, 4, 3, 2, 1];\narr.bubbleSort(); //return [1,2,3,4,5]\n//逆序则把if里的>换成<\n```\n\n## JavaScript：选择排序\n\n- 找到数组中的最小值，选中它并将其放置在第一位\n- 接着找到第二小的值，选中它并将其放置在第二位\n- 以此类推，执行 n-1 轮。\n\n```}javascript\nArray.prototype.selectionSort = function () {\n  for (let i = 0; i < this.length - 1; i++) {\n    let indexMin = i;\n    for (let j = i; j < this.length; j += 1) {\n      if (this[j] < this[indexMin]) {\n        indexMin = j;\n      }\n    }\n    if (indexMin !== i) {\n      const temp = this[i];\n      this[i] = this[indexMin];\n      this[indexMin] = temp;\n    }\n  }\n  console.log(this);\n};\nlet arr = [5,4,3,2,1]\narr.selectionSort(); //return [1,2,3,4,5]\n```\n\n## JavaScript：插入排序\n\n- 从第二个数开始往前比。\n- 比他大就往后排。\n- 以此类推进行到最后一个数。\n\n```javascript\nArray.prototype.insertionSort = function () {\n  for (let i = 1; i < this.length; i++) {\n    const temp = this[i];\n    let j = i;\n    while (j > 0) {\n      if (this[j - i] > temp) {\n        this[j] = this[j - i];\n      } else {\n        break;\n      }\n      j -= i;\n    }\n    this[j] = temp;\n  }\n  return this;\n};\n\nconst arr = [5, 4, 3, 2, 1];\nconsole.log(arr.insertionSort());\n```\n\n## JavaScript：归并排序\n\n时间复杂度 O(n\\*logn)\n\n- 分：把数组劈成两半，再递归地对数组进行“分”操作，直到分成一个个单独的数。\n- 合：把两个数合并为有序数组，再对有序数组进行合并，直到全部子数组合并为一个完整数组。\n\n### 合并两个有序数组\n\n- 新建一个空数组 res，用于存放最终排序后的数组。\n- 比较两个有序数组的头部，较小者出队并推入 res 中。\n- 如果两个数组还有值，就重复第二步。\n\n```javascript\nArray.prototype.mergeSort = function () {\n  const rec = (arr) => {\n    if (arr.length === 1) {\n      return arr;\n    }\n    const mid = Math.floor(arr.length / 2);\n    const left = arr.slice(0, mid);\n    const right = arr.slice(mid, arr.length);\n    const orderLeft = rec(left);\n    const orderRight = rec(right);\n    const res = [];\n    while (orderLeft.length || orderRight.length) {\n      if (orderLeft.length && orderRight.length) {\n        res.push(\n          orderLeft[0] < orderRight ? orderLeft.shift() : orderRight.shift()\n        );\n      } else if (orderLeft.length) {\n        res.push(orderLeft.shift());\n      } else if (orderRight.length) {\n        res.push(orderRight.shift());\n      }\n    }\n    return res;\n  };\n  const res = rec(this);\n  res.forEach((n, i) => {\n    this[i] = n;\n  });\n  return res;\n};\nconst arr = [5, 4, 3, 2, 1];\nconsole.log(arr.mergeSort());\n//分的时间复杂度O(logN)\n//合的时间复杂度是O(n);\n//总的时间复杂度是O(n*logN)\n```\n\n## JavaScript：快速排序\n\n- 分区：从数组中任意选择一个“基准”，所有比基准小的元素放在基准前面，比基准大的元素放在基准的后面。\n- 递归：递归地对基准前后的子数组进行分区。\n- 时间复杂度\n  - 递归的时间复杂度是 O(logN)\n  - 分区操作的时间复杂度是 O(n)\n  - 时间复杂度 O(nlogN)\n\n```javascript\nArray.prototype.quickSort = function () {\n  const rec = (arr) => {\n    if (arr.length === 1) {\n      return arr;\n    }\n    const left = [];\n    const right = [];\n    const mid = arr[0];\n    for (let i = 1; i < arr.length; i++) {\n      if (arr[i] < mid) {\n        left.push(arr[i]);\n      } else {\n        right.push(arr[i]);\n      }\n    }\n    return [...rec(left), mid, ...rec(right)];\n  };\n  const res = rec(this);\n  res.forEach((n, i) => {\n    this[i] = n;\n  });\n  return res;\n};\nconst arr = [2, 4, 5, 3, 1];\nconsole.log(arr.quickSort());\n```\n\n## JavaScript 实现：二分搜索\n\n### 思路\n\n- 从数组的中间元素开始，如果中间元素正好是目标值，则搜索结束。\n- 如果目标值大于或者小于中间元素，则在大于或小于中间元素的那一半数组中搜索。\n\n时间复杂度：O(logN)\n\n```javascript\nArray.prototype.binarySearch = function (item) {\n  let low = 0;\n  let high = this.length - 1;\n  while (low <= high) {\n    const mid = Math.floor((low + high) / 2);\n    const element = this[mid];\n    if (element < item) {\n      low = mid + 1;\n    } else if (element > item) {\n      high = mid - 1;\n    } else {\n      return mid;\n    }\n  }\n  return -1;\n};\n\nconst res = [1, 2, 3, 4, 5].binarySearch(4);\nconsole.log(res);\n```\n\n## 分而治之\n\n- 分而治之是算法设计中的一种方法。\n- 它将一个问题分成多个和原问题相似的小问题，递归解决小问题，再将结果合并以解决原来的问题。\n\n### 场景一：归并排序\n\n- 分：把数组从中间一分为二。\n- 解：递归地对两个子数组进行归并排序。\n- 合：合并有序子数组。\n\n### 场景二：快速排序\n\n- 分：选基准，按基准把数组分成两个子数组。\n- 解：递归地对两个子数组进行快速排序。\n- 合：对两个子数组进行合并。\n","slug":"数据结构和算法","published":1,"updated":"2021-07-26T13:35:36.052Z","_id":"cknzd1p8w000nf4rq5krka0jw","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"栈\"><a href=\"#栈\" class=\"headerlink\" title=\"栈\"></a>栈</h2><ol>\n<li>栈是一个后进先出的数据结构</li>\n<li>JavaScript 中没有栈，但可以用 Array 实现栈的所有功能</li>\n<li>栈常用操作:push、pop、stack[stack.length-1]<a id=\"more\"></a>\n\n</li>\n</ol>\n<h3 id=\"栈的应用\"><a href=\"#栈的应用\" class=\"headerlink\" title=\"栈的应用\"></a>栈的应用</h3><p><strong>1、把十进制数转为二进制数</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 函数：将十进制转成二进制</span>\n<span class=\"token comment\">// 十进制  二进制</span>\n<span class=\"token comment\">// Decimal binary</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">dec2bin</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">decNumber</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 1、定义栈对象</span>\n  <span class=\"token keyword\">let</span> stack <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 2、循环操作</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>decNumber <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 2.1、获取余数，并且放入到栈中</span>\n    stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>decNumber <span class=\"token operator\">%</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//2.2、获取整除后的结果，作为下一次运行的数字</span>\n    decNumber <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>decNumber <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token comment\">// 3、从栈中取出0和1</span>\n  <span class=\"token keyword\">let</span> binaryString <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stack<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    binaryString <span class=\"token operator\">+=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> binaryString<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//测试十进制转二进制的函数</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">dec2bin</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//101</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">dec2bin</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//110010</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"队列-queue\"><a href=\"#队列-queue\" class=\"headerlink\" title=\"队列(queue)\"></a>队列(queue)</h2><blockquote>\n<p>只允许在一端插入数据操作，在另一端进行删除数据操作的特殊线性表；<br>进行插入操作的一端称为队尾（入队列），进行删除操作的一端称为队头（出队列）；队列具有先进先出（FIFO）的特性。</p>\n</blockquote>\n<p>js 队列的实现（线性存储）</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//封装队列类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//队列中的属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//栈的相关操作</span>\n  <span class=\"token comment\">//  1、将元素加入到队列中</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 2、从队列中删除前端元素</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">delete</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//3、查看队列前端元素</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">front</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 4、判断队列是否为空</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">isEmpty</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 5、获取队列中元素的个数</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">size</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 6、toString方法</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toString</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">let</span> resultString <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      resultString <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> resultString<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//队列的使用</span>\n<span class=\"token keyword\">let</span> q <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'22'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'33'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'44'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"链表结构\"><a href=\"#链表结构\" class=\"headerlink\" title=\"链表结构\"></a>链表结构</h2><ul>\n<li>多个元素组成的列表。</li>\n<li>元素存储不连续，用 next 指针连在一起。</li>\n</ul>\n<p><img src=\"/images/%E9%93%BE%E8%A1%A8.jpg\" alt=\"链表\"></p>\n<h3 id=\"数组-vs-链表\"><a href=\"#数组-vs-链表\" class=\"headerlink\" title=\"数组 vs 链表\"></a>数组 vs 链表</h3><ul>\n<li>数组：增删非首尾元素是往往需要移动元素。</li>\n<li>链表：增删非首尾元素，不需要移动元素，只需要更改 next 的指向即可。</li>\n</ul>\n<h2 id=\"集合\"><a href=\"#集合\" class=\"headerlink\" title=\"集合\"></a>集合</h2><ul>\n<li>一种无序且唯一的数据结构</li>\n<li>ES6 中有集合，名为 set</li>\n<li>集合的常用操作：去重，判断某元素是否在集合中、求交集</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//使用set对象</span>\n<span class=\"token keyword\">let</span> mySet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'some text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> o <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//是否存在该元素</span>\n<span class=\"token keyword\">const</span> has <span class=\"token operator\">=</span> mySet<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//遍历</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> item <span class=\"token keyword\">of</span> mySet<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//转换成数组</span>\n<span class=\"token keyword\">const</span> myArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>mySet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> myArrs <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>mySet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> mySet2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//求交集</span>\n<span class=\"token keyword\">const</span> intersection <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>mySet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> mySet2<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//求并集</span>\n<span class=\"token keyword\">const</span> difference <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>mySet2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>mySet2<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"字典\"><a href=\"#字典\" class=\"headerlink\" title=\"字典\"></a>字典</h2><blockquote>\n<p>字典是以[键，值]的形式来存储元素。字典也称作映射、符号表或关联数组。</p>\n<p>集合、字典、散列表都可以存储不重复的数据。字典和我们上面实现的集合很像。</p>\n<p>ES5 包含了一个 Map 类的实现，即我们所说的字典。</p>\n</blockquote>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> m <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//增</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//删</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// m.clear();</span>\n\n<span class=\"token comment\">//改</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aaa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//查</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>两数之和</p>\n<p>给定一个整数数组 <code>nums</code> 和一个整数目标值 <code>target</code>，请你在该数组中找出 <strong>和为目标值</strong> 的那 <strong>两个</strong> 整数，并返回它们的数组下标。</p>\n<p>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。</p>\n<p>你可以按任意顺序返回答案。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">twoSum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">nums<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nums<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> n2 <span class=\"token operator\">=</span> target <span class=\"token operator\">-</span> n<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>n2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>n2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n      map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nums <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  target <span class=\"token operator\">=</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">twoSum</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"树\"><a href=\"#树\" class=\"headerlink\" title=\"树\"></a>树</h2><ul>\n<li><p>一种分层数据的抽象模型</p>\n</li>\n<li><p>前端工作中常见的树包括：DOM、树、级联选择、树形控件</p>\n</li>\n<li><p>JS 中没有树，但是可以用 Object 和 Array 构建树</p>\n</li>\n<li><p>树的常用操作：深度/广度优先遍历、先中后序遍历</p>\n<ul>\n<li><p>深度优先遍历：尽可能深的搜索树的分支</p>\n</li>\n<li><p>广度优先遍历：先访问离根节点最近的节点</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/images/%E6%A0%91.png\" alt=\"树\"></p>\n<h3 id=\"深度优先遍历算法口诀\"><a href=\"#深度优先遍历算法口诀\" class=\"headerlink\" title=\"深度优先遍历算法口诀\"></a>深度优先遍历算法口诀</h3><ol>\n<li>访问根节点</li>\n<li>对根节点的 children 挨个进行深度优先遍历</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> tree <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  val<span class=\"token operator\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>\n  children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span>\n      children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'e'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span>\n      children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dfs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  root<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>dfs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"广度优先遍历算法口诀\"><a href=\"#广度优先遍历算法口诀\" class=\"headerlink\" title=\"广度优先遍历算法口诀\"></a>广度优先遍历算法口诀</h3><ol>\n<li>新建一个队列，把根节点入队。</li>\n<li>把队头出队并访问。</li>\n<li>把队头的 children 挨个入队</li>\n<li>重复第二、三步，直到队列为空。</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bfs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> q <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>root<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> q<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    n<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"二叉树是什么？\"><a href=\"#二叉树是什么？\" class=\"headerlink\" title=\"二叉树是什么？\"></a>二叉树是什么？</h3><ul>\n<li>树中每个节点最多只能有两个子节点。</li>\n<li>在 JS 中通常用 Object 来模拟二叉树。<br><img src=\"/images/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86.jpg\" alt=\"二叉树遍历\"></li>\n</ul>\n<h3 id=\"先序遍历算法口诀\"><a href=\"#先序遍历算法口诀\" class=\"headerlink\" title=\"先序遍历算法口诀\"></a>先序遍历算法口诀</h3><ol>\n<li><p>访问根节点。</p>\n</li>\n<li><p>对根节点的左子树进行先序遍历。</p>\n</li>\n<li><p>对根节点的右子树进行先序遍历。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  val<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  left<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    val<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    left<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    right<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  right<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    val<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    left<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    right<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> bt<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./bt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//先序遍历算法</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">preorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//函数调用堆栈，先序遍历非递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">preorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>root<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"/images/%E4%BA%8C%E5%8F%89%E6%A0%91.png\" alt=\"二叉树\"></p>\n</li>\n</ol>\n<h3 id=\"中序遍历算法口诀\"><a href=\"#中序遍历算法口诀\" class=\"headerlink\" title=\"中序遍历算法口诀\"></a>中序遍历算法口诀</h3><ol>\n<li><p>对根节点的左子树进行中序遍历。</p>\n</li>\n<li><p>访问根节点。</p>\n</li>\n<li><p>对根节点的右子树进行中序遍历。</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./bt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//中序遍历算法</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">inorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//中序遍历算法，非递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">inorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> root<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>p <span class=\"token operator\">||</span> stack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      p <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    p <span class=\"token operator\">=</span> n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"后序遍历算法口诀\"><a href=\"#后序遍历算法口诀\" class=\"headerlink\" title=\"后序遍历算法口诀\"></a>后序遍历算法口诀</h3><ol>\n<li>对根节点的左子树进行后序遍历。</li>\n<li>对根节点的右子树进行后续遍历。</li>\n<li>访问根节点。</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./bt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//后续遍历算法口诀，递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">postorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//后续遍历算法，非递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">postorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">const</span> outputStack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>root<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    outputStack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>outputStack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> outputStack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"图\"><a href=\"#图\" class=\"headerlink\" title=\"图\"></a>图</h2><ul>\n<li>图是网络结构的抽象模型，是一组由边连接的节点。</li>\n<li>图可以表示任何二元关系，比如道路、航班</li>\n</ul>\n<h3 id=\"图是什么\"><a href=\"#图是什么\" class=\"headerlink\" title=\"图是什么\"></a>图是什么</h3><ul>\n<li>JS 中没有图，但是可以用 Object 和 Array 构建图</li>\n<li>图的表示法：领接矩阵、邻接表、关联矩阵</li>\n</ul>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95-%E9%A2%86%E6%8E%A5%E7%9F%A9%E9%98%B5.png\" alt=\"image-20210409193407452\"></p>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95-%E9%82%BB%E6%8E%A5%E8%A1%A8.png\" alt=\"image-20210409193416004\"></p>\n<h3 id=\"图的常用操作\"><a href=\"#图的常用操作\" class=\"headerlink\" title=\"图的常用操作\"></a>图的常用操作</h3><ul>\n<li><p>深度优先遍历</p>\n<p>尽可能深的搜索图的分支。</p>\n</li>\n<li><p>广度优先遍历</p>\n<p>先访问离根节点最近的节点。</p>\n</li>\n</ul>\n<h4 id=\"深度优先遍历算法口诀-1\"><a href=\"#深度优先遍历算法口诀-1\" class=\"headerlink\" title=\"深度优先遍历算法口诀\"></a>深度优先遍历算法口诀</h4><ol>\n<li>访问根节点。</li>\n<li>对根节点的没访问过的相邻接点挨个进行深度优先遍历。</li>\n</ol>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86.png\" alt=\"图的深度优先遍历\"></p>\n<h4 id=\"广度优先遍历算法口诀-1\"><a href=\"#广度优先遍历算法口诀-1\" class=\"headerlink\" title=\"广度优先遍历算法口诀\"></a>广度优先遍历算法口诀</h4><ol>\n<li>新建一个队列，把根节点入队。</li>\n<li>把队头出队并访问。</li>\n<li>把队头的没访问过的相邻节点入队。</li>\n<li>重复第二三步，直到队列为空。</li>\n</ol>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86.png\" alt=\"图的广度优先遍历\"></p>\n<h2 id=\"堆\"><a href=\"#堆\" class=\"headerlink\" title=\"堆\"></a>堆</h2><ul>\n<li>堆是一种特殊的完全二叉树</li>\n<li>所有的节点都大于等于（最大堆）或小于等于（最小堆）它的子节点</li>\n</ul>\n<h3 id=\"JS-中的堆\"><a href=\"#JS-中的堆\" class=\"headerlink\" title=\"JS 中的堆\"></a>JS 中的堆</h3><ul>\n<li>JS 通常用数组表示堆。</li>\n<li>左侧子节点的位置是 2 * index + 1。</li>\n<li>右侧子节点的位置是 2 * index + 2。</li>\n<li>父节点位置是(index - 1) / 2。</li>\n</ul>\n<h3 id=\"堆的应用\"><a href=\"#堆的应用\" class=\"headerlink\" title=\"堆的应用\"></a>堆的应用</h3><ul>\n<li>堆能高效、快速地找出最大值和最小值</li>\n<li>时间复杂度：o(1)；</li>\n<li>找出第 k 个最大(小)元素</li>\n</ul>\n<p>第 k 个最大元素</p>\n<p><img src=\"/images/%E5%A0%86.png\" alt=\"堆\"></p>\n<ul>\n<li>构建一个最小堆，并将元素依次插入堆中。</li>\n<li>当堆的容量超过 k，就删除堆顶。</li>\n<li>插入结束后，堆顶就是第 K 个最大元素。</li>\n</ul>\n<h2 id=\"JavaScript：冒泡排序\"><a href=\"#JavaScript：冒泡排序\" class=\"headerlink\" title=\"JavaScript：冒泡排序\"></a>JavaScript：冒泡排序</h2><ul>\n<li>比较所有相邻元素，如果第一个比第二个大，则交换他们。</li>\n<li>一轮下来可以保证，最后一个数是最大的。</li>\n<li>执行 n-1 轮，就可以完成排序。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">bubbleSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> i<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">bubbleSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//return [1,2,3,4,5]</span>\n<span class=\"token comment\">//逆序则把if里的>换成&lt;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：选择排序\"><a href=\"#JavaScript：选择排序\" class=\"headerlink\" title=\"JavaScript：选择排序\"></a>JavaScript：选择排序</h2><ul>\n<li>找到数组中的最小值，选中它并将其放置在第一位</li>\n<li>接着找到第二小的值，选中它并将其放置在第二位</li>\n<li>以此类推，执行 n-1 轮。</li>\n</ul>\n<pre class=\"line-numbers language-&#125;javascript\" data-language=\"&#125;javascript\"><code class=\"language-&#125;javascript\">Array.prototype.selectionSort &#x3D; function () &#123;\n  for (let i &#x3D; 0; i &lt; this.length - 1; i++) &#123;\n    let indexMin &#x3D; i;\n    for (let j &#x3D; i; j &lt; this.length; j +&#x3D; 1) &#123;\n      if (this[j] &lt; this[indexMin]) &#123;\n        indexMin &#x3D; j;\n      &#125;\n    &#125;\n    if (indexMin !&#x3D;&#x3D; i) &#123;\n      const temp &#x3D; this[i];\n      this[i] &#x3D; this[indexMin];\n      this[indexMin] &#x3D; temp;\n    &#125;\n  &#125;\n  console.log(this);\n&#125;;\nlet arr &#x3D; [5,4,3,2,1]\narr.selectionSort(); &#x2F;&#x2F;return [1,2,3,4,5]<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：插入排序\"><a href=\"#JavaScript：插入排序\" class=\"headerlink\" title=\"JavaScript：插入排序\"></a>JavaScript：插入排序</h2><ul>\n<li>从第二个数开始往前比。</li>\n<li>比他大就往后排。</li>\n<li>以此类推进行到最后一个数。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">insertionSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> i<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> temp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n      j <span class=\"token operator\">-=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">insertionSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：归并排序\"><a href=\"#JavaScript：归并排序\" class=\"headerlink\" title=\"JavaScript：归并排序\"></a>JavaScript：归并排序</h2><p>时间复杂度 O(n*logn)</p>\n<ul>\n<li>分：把数组劈成两半，再递归地对数组进行“分”操作，直到分成一个个单独的数。</li>\n<li>合：把两个数合并为有序数组，再对有序数组进行合并，直到全部子数组合并为一个完整数组。</li>\n</ul>\n<h3 id=\"合并两个有序数组\"><a href=\"#合并两个有序数组\" class=\"headerlink\" title=\"合并两个有序数组\"></a>合并两个有序数组</h3><ul>\n<li>新建一个空数组 res，用于存放最终排序后的数组。</li>\n<li>比较两个有序数组的头部，较小者出队并推入 res 中。</li>\n<li>如果两个数组还有值，就重复第二步。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">mergeSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rec</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> right <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>mid<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> orderLeft <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> orderRight <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span>length <span class=\"token operator\">||</span> orderRight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> orderRight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n          orderLeft<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> orderRight <span class=\"token operator\">?</span> orderLeft<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> orderRight<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderRight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>orderRight<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//分的时间复杂度O(logN)</span>\n<span class=\"token comment\">//合的时间复杂度是O(n);</span>\n<span class=\"token comment\">//总的时间复杂度是O(n*logN)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：快速排序\"><a href=\"#JavaScript：快速排序\" class=\"headerlink\" title=\"JavaScript：快速排序\"></a>JavaScript：快速排序</h2><ul>\n<li>分区：从数组中任意选择一个“基准”，所有比基准小的元素放在基准前面，比基准大的元素放在基准的后面。</li>\n<li>递归：递归地对基准前后的子数组进行分区。</li>\n<li>时间复杂度<ul>\n<li>递归的时间复杂度是 O(logN)</li>\n<li>分区操作的时间复杂度是 O(n)</li>\n<li>时间复杂度 O(nlogN)</li>\n</ul>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">quickSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rec</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> right <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> mid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        left<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n        right<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript-实现：二分搜索\"><a href=\"#JavaScript-实现：二分搜索\" class=\"headerlink\" title=\"JavaScript 实现：二分搜索\"></a>JavaScript 实现：二分搜索</h2><h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ul>\n<li>从数组的中间元素开始，如果中间元素正好是目标值，则搜索结束。</li>\n<li>如果目标值大于或者小于中间元素，则在大于或小于中间元素的那一半数组中搜索。</li>\n</ul>\n<p>时间复杂度：O(logN)</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">binarySearch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> low <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> high <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>low <span class=\"token operator\">&lt;=</span> high<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>low <span class=\"token operator\">+</span> high<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>mid<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">&lt;</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      low <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">></span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      high <span class=\"token operator\">=</span> mid <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> mid<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"分而治之\"><a href=\"#分而治之\" class=\"headerlink\" title=\"分而治之\"></a>分而治之</h2><ul>\n<li>分而治之是算法设计中的一种方法。</li>\n<li>它将一个问题分成多个和原问题相似的小问题，递归解决小问题，再将结果合并以解决原来的问题。</li>\n</ul>\n<h3 id=\"场景一：归并排序\"><a href=\"#场景一：归并排序\" class=\"headerlink\" title=\"场景一：归并排序\"></a>场景一：归并排序</h3><ul>\n<li>分：把数组从中间一分为二。</li>\n<li>解：递归地对两个子数组进行归并排序。</li>\n<li>合：合并有序子数组。</li>\n</ul>\n<h3 id=\"场景二：快速排序\"><a href=\"#场景二：快速排序\" class=\"headerlink\" title=\"场景二：快速排序\"></a>场景二：快速排序</h3><ul>\n<li>分：选基准，按基准把数组分成两个子数组。</li>\n<li>解：递归地对两个子数组进行快速排序。</li>\n<li>合：对两个子数组进行合并。</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h2 id=\"栈\"><a href=\"#栈\" class=\"headerlink\" title=\"栈\"></a>栈</h2><ol>\n<li>栈是一个后进先出的数据结构</li>\n<li>JavaScript 中没有栈，但可以用 Array 实现栈的所有功能</li>\n<li>栈常用操作:push、pop、stack[stack.length-1]","more":"</li>\n</ol>\n<h3 id=\"栈的应用\"><a href=\"#栈的应用\" class=\"headerlink\" title=\"栈的应用\"></a>栈的应用</h3><p><strong>1、把十进制数转为二进制数</strong></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 函数：将十进制转成二进制</span>\n<span class=\"token comment\">// 十进制  二进制</span>\n<span class=\"token comment\">// Decimal binary</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">dec2bin</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">decNumber</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 1、定义栈对象</span>\n  <span class=\"token keyword\">let</span> stack <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 2、循环操作</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>decNumber <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 2.1、获取余数，并且放入到栈中</span>\n    stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>decNumber <span class=\"token operator\">%</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//2.2、获取整除后的结果，作为下一次运行的数字</span>\n    decNumber <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>decNumber <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token comment\">// 3、从栈中取出0和1</span>\n  <span class=\"token keyword\">let</span> binaryString <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stack<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    binaryString <span class=\"token operator\">+=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> binaryString<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//测试十进制转二进制的函数</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">dec2bin</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//101</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">dec2bin</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//110010</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"队列-queue\"><a href=\"#队列-queue\" class=\"headerlink\" title=\"队列(queue)\"></a>队列(queue)</h2><blockquote>\n<p>只允许在一端插入数据操作，在另一端进行删除数据操作的特殊线性表；<br>进行插入操作的一端称为队尾（入队列），进行删除操作的一端称为队头（出队列）；队列具有先进先出（FIFO）的特性。</p>\n</blockquote>\n<p>js 队列的实现（线性存储）</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//封装队列类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//队列中的属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//栈的相关操作</span>\n  <span class=\"token comment\">//  1、将元素加入到队列中</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 2、从队列中删除前端元素</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">delete</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//3、查看队列前端元素</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">front</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 4、判断队列是否为空</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">isEmpty</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 5、获取队列中元素的个数</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">size</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 6、toString方法</span>\n  <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toString</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">let</span> resultString <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      resultString <span class=\"token operator\">+=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> resultString<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//队列的使用</span>\n<span class=\"token keyword\">let</span> q <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'22'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'33'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'44'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nq<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"链表结构\"><a href=\"#链表结构\" class=\"headerlink\" title=\"链表结构\"></a>链表结构</h2><ul>\n<li>多个元素组成的列表。</li>\n<li>元素存储不连续，用 next 指针连在一起。</li>\n</ul>\n<p><img src=\"/images/%E9%93%BE%E8%A1%A8.jpg\" alt=\"链表\"></p>\n<h3 id=\"数组-vs-链表\"><a href=\"#数组-vs-链表\" class=\"headerlink\" title=\"数组 vs 链表\"></a>数组 vs 链表</h3><ul>\n<li>数组：增删非首尾元素是往往需要移动元素。</li>\n<li>链表：增删非首尾元素，不需要移动元素，只需要更改 next 的指向即可。</li>\n</ul>\n<h2 id=\"集合\"><a href=\"#集合\" class=\"headerlink\" title=\"集合\"></a>集合</h2><ul>\n<li>一种无序且唯一的数据结构</li>\n<li>ES6 中有集合，名为 set</li>\n<li>集合的常用操作：去重，判断某元素是否在集合中、求交集</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//使用set对象</span>\n<span class=\"token keyword\">let</span> mySet <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'some text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> o <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//是否存在该元素</span>\n<span class=\"token keyword\">const</span> has <span class=\"token operator\">=</span> mySet<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmySet<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//遍历</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> item <span class=\"token keyword\">of</span> mySet<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//转换成数组</span>\n<span class=\"token keyword\">const</span> myArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>mySet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> myArrs <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>mySet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> mySet2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//求交集</span>\n<span class=\"token keyword\">const</span> intersection <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>mySet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> mySet2<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//求并集</span>\n<span class=\"token keyword\">const</span> difference <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>mySet2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>mySet2<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"字典\"><a href=\"#字典\" class=\"headerlink\" title=\"字典\"></a>字典</h2><blockquote>\n<p>字典是以[键，值]的形式来存储元素。字典也称作映射、符号表或关联数组。</p>\n<p>集合、字典、散列表都可以存储不重复的数据。字典和我们上面实现的集合很像。</p>\n<p>ES5 包含了一个 Map 类的实现，即我们所说的字典。</p>\n</blockquote>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> m <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//增</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'bb'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//删</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// m.clear();</span>\n\n<span class=\"token comment\">//改</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'aaa'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//查</span>\nm<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>两数之和</p>\n<p>给定一个整数数组 <code>nums</code> 和一个整数目标值 <code>target</code>，请你在该数组中找出 <strong>和为目标值</strong> 的那 <strong>两个</strong> 整数，并返回它们的数组下标。</p>\n<p>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。</p>\n<p>你可以按任意顺序返回答案。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">twoSum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">nums<span class=\"token punctuation\">,</span> target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nums<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> nums<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> n2 <span class=\"token operator\">=</span> target <span class=\"token operator\">-</span> n<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>n2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>n2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n      map<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nums <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  target <span class=\"token operator\">=</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">twoSum</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"树\"><a href=\"#树\" class=\"headerlink\" title=\"树\"></a>树</h2><ul>\n<li><p>一种分层数据的抽象模型</p>\n</li>\n<li><p>前端工作中常见的树包括：DOM、树、级联选择、树形控件</p>\n</li>\n<li><p>JS 中没有树，但是可以用 Object 和 Array 构建树</p>\n</li>\n<li><p>树的常用操作：深度/广度优先遍历、先中后序遍历</p>\n<ul>\n<li><p>深度优先遍历：尽可能深的搜索树的分支</p>\n</li>\n<li><p>广度优先遍历：先访问离根节点最近的节点</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/images/%E6%A0%91.png\" alt=\"树\"></p>\n<h3 id=\"深度优先遍历算法口诀\"><a href=\"#深度优先遍历算法口诀\" class=\"headerlink\" title=\"深度优先遍历算法口诀\"></a>深度优先遍历算法口诀</h3><ol>\n<li>访问根节点</li>\n<li>对根节点的 children 挨个进行深度优先遍历</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> tree <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  val<span class=\"token operator\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span>\n  children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span>\n      children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'e'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span>\n      children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span>\n          val<span class=\"token operator\">:</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">,</span>\n          children<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dfs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  root<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>dfs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">dfs</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"广度优先遍历算法口诀\"><a href=\"#广度优先遍历算法口诀\" class=\"headerlink\" title=\"广度优先遍历算法口诀\"></a>广度优先遍历算法口诀</h3><ol>\n<li>新建一个队列，把根节点入队。</li>\n<li>把队头出队并访问。</li>\n<li>把队头的 children 挨个入队</li>\n<li>重复第二、三步，直到队列为空。</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">bfs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> q <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>root<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>q<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> q<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    n<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      q<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">bfs</span><span class=\"token punctuation\">(</span>tree<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"二叉树是什么？\"><a href=\"#二叉树是什么？\" class=\"headerlink\" title=\"二叉树是什么？\"></a>二叉树是什么？</h3><ul>\n<li>树中每个节点最多只能有两个子节点。</li>\n<li>在 JS 中通常用 Object 来模拟二叉树。<br><img src=\"/images/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86.jpg\" alt=\"二叉树遍历\"></li>\n</ul>\n<h3 id=\"先序遍历算法口诀\"><a href=\"#先序遍历算法口诀\" class=\"headerlink\" title=\"先序遍历算法口诀\"></a>先序遍历算法口诀</h3><ol>\n<li><p>访问根节点。</p>\n</li>\n<li><p>对根节点的左子树进行先序遍历。</p>\n</li>\n<li><p>对根节点的右子树进行先序遍历。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  val<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  left<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    val<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    left<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    right<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  right<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    val<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    left<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    right<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      val<span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n      left<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      right<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> bt<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./bt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//先序遍历算法</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">preorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//函数调用堆栈，先序遍历非递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">preorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>root<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">preorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"/images/%E4%BA%8C%E5%8F%89%E6%A0%91.png\" alt=\"二叉树\"></p>\n</li>\n</ol>\n<h3 id=\"中序遍历算法口诀\"><a href=\"#中序遍历算法口诀\" class=\"headerlink\" title=\"中序遍历算法口诀\"></a>中序遍历算法口诀</h3><ol>\n<li><p>对根节点的左子树进行中序遍历。</p>\n</li>\n<li><p>访问根节点。</p>\n</li>\n<li><p>对根节点的右子树进行中序遍历。</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./bt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//中序遍历算法</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">inorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//中序遍历算法，非递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">inorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> root<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>p <span class=\"token operator\">||</span> stack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      p <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    p <span class=\"token operator\">=</span> n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">inorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"后序遍历算法口诀\"><a href=\"#后序遍历算法口诀\" class=\"headerlink\" title=\"后序遍历算法口诀\"></a>后序遍历算法口诀</h3><ol>\n<li>对根节点的左子树进行后序遍历。</li>\n<li>对根节点的右子树进行后续遍历。</li>\n<li>访问根节点。</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> bt <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./bt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//后续遍历算法口诀，递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">postorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//后续遍历算法，非递归版</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">postorder</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">root</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">const</span> outputStack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>root<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    outputStack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>outputStack<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> outputStack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">postorder</span><span class=\"token punctuation\">(</span>bt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"图\"><a href=\"#图\" class=\"headerlink\" title=\"图\"></a>图</h2><ul>\n<li>图是网络结构的抽象模型，是一组由边连接的节点。</li>\n<li>图可以表示任何二元关系，比如道路、航班</li>\n</ul>\n<h3 id=\"图是什么\"><a href=\"#图是什么\" class=\"headerlink\" title=\"图是什么\"></a>图是什么</h3><ul>\n<li>JS 中没有图，但是可以用 Object 和 Array 构建图</li>\n<li>图的表示法：领接矩阵、邻接表、关联矩阵</li>\n</ul>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95-%E9%A2%86%E6%8E%A5%E7%9F%A9%E9%98%B5.png\" alt=\"image-20210409193407452\"></p>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%96%B9%E6%B3%95-%E9%82%BB%E6%8E%A5%E8%A1%A8.png\" alt=\"image-20210409193416004\"></p>\n<h3 id=\"图的常用操作\"><a href=\"#图的常用操作\" class=\"headerlink\" title=\"图的常用操作\"></a>图的常用操作</h3><ul>\n<li><p>深度优先遍历</p>\n<p>尽可能深的搜索图的分支。</p>\n</li>\n<li><p>广度优先遍历</p>\n<p>先访问离根节点最近的节点。</p>\n</li>\n</ul>\n<h4 id=\"深度优先遍历算法口诀-1\"><a href=\"#深度优先遍历算法口诀-1\" class=\"headerlink\" title=\"深度优先遍历算法口诀\"></a>深度优先遍历算法口诀</h4><ol>\n<li>访问根节点。</li>\n<li>对根节点的没访问过的相邻接点挨个进行深度优先遍历。</li>\n</ol>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86.png\" alt=\"图的深度优先遍历\"></p>\n<h4 id=\"广度优先遍历算法口诀-1\"><a href=\"#广度优先遍历算法口诀-1\" class=\"headerlink\" title=\"广度优先遍历算法口诀\"></a>广度优先遍历算法口诀</h4><ol>\n<li>新建一个队列，把根节点入队。</li>\n<li>把队头出队并访问。</li>\n<li>把队头的没访问过的相邻节点入队。</li>\n<li>重复第二三步，直到队列为空。</li>\n</ol>\n<p><img src=\"/images/%E5%9B%BE%E7%9A%84%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86.png\" alt=\"图的广度优先遍历\"></p>\n<h2 id=\"堆\"><a href=\"#堆\" class=\"headerlink\" title=\"堆\"></a>堆</h2><ul>\n<li>堆是一种特殊的完全二叉树</li>\n<li>所有的节点都大于等于（最大堆）或小于等于（最小堆）它的子节点</li>\n</ul>\n<h3 id=\"JS-中的堆\"><a href=\"#JS-中的堆\" class=\"headerlink\" title=\"JS 中的堆\"></a>JS 中的堆</h3><ul>\n<li>JS 通常用数组表示堆。</li>\n<li>左侧子节点的位置是 2 * index + 1。</li>\n<li>右侧子节点的位置是 2 * index + 2。</li>\n<li>父节点位置是(index - 1) / 2。</li>\n</ul>\n<h3 id=\"堆的应用\"><a href=\"#堆的应用\" class=\"headerlink\" title=\"堆的应用\"></a>堆的应用</h3><ul>\n<li>堆能高效、快速地找出最大值和最小值</li>\n<li>时间复杂度：o(1)；</li>\n<li>找出第 k 个最大(小)元素</li>\n</ul>\n<p>第 k 个最大元素</p>\n<p><img src=\"/images/%E5%A0%86.png\" alt=\"堆\"></p>\n<ul>\n<li>构建一个最小堆，并将元素依次插入堆中。</li>\n<li>当堆的容量超过 k，就删除堆顶。</li>\n<li>插入结束后，堆顶就是第 K 个最大元素。</li>\n</ul>\n<h2 id=\"JavaScript：冒泡排序\"><a href=\"#JavaScript：冒泡排序\" class=\"headerlink\" title=\"JavaScript：冒泡排序\"></a>JavaScript：冒泡排序</h2><ul>\n<li>比较所有相邻元素，如果第一个比第二个大，则交换他们。</li>\n<li>一轮下来可以保证，最后一个数是最大的。</li>\n<li>执行 n-1 轮，就可以完成排序。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">bubbleSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">-</span> i<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">bubbleSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//return [1,2,3,4,5]</span>\n<span class=\"token comment\">//逆序则把if里的>换成&lt;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：选择排序\"><a href=\"#JavaScript：选择排序\" class=\"headerlink\" title=\"JavaScript：选择排序\"></a>JavaScript：选择排序</h2><ul>\n<li>找到数组中的最小值，选中它并将其放置在第一位</li>\n<li>接着找到第二小的值，选中它并将其放置在第二位</li>\n<li>以此类推，执行 n-1 轮。</li>\n</ul>\n<pre class=\"line-numbers language-&#125;javascript\" data-language=\"&#125;javascript\"><code class=\"language-&#125;javascript\">Array.prototype.selectionSort &#x3D; function () &#123;\n  for (let i &#x3D; 0; i &lt; this.length - 1; i++) &#123;\n    let indexMin &#x3D; i;\n    for (let j &#x3D; i; j &lt; this.length; j +&#x3D; 1) &#123;\n      if (this[j] &lt; this[indexMin]) &#123;\n        indexMin &#x3D; j;\n      &#125;\n    &#125;\n    if (indexMin !&#x3D;&#x3D; i) &#123;\n      const temp &#x3D; this[i];\n      this[i] &#x3D; this[indexMin];\n      this[indexMin] &#x3D; temp;\n    &#125;\n  &#125;\n  console.log(this);\n&#125;;\nlet arr &#x3D; [5,4,3,2,1]\narr.selectionSort(); &#x2F;&#x2F;return [1,2,3,4,5]<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：插入排序\"><a href=\"#JavaScript：插入排序\" class=\"headerlink\" title=\"JavaScript：插入排序\"></a>JavaScript：插入排序</h2><ul>\n<li>从第二个数开始往前比。</li>\n<li>比他大就往后排。</li>\n<li>以此类推进行到最后一个数。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">insertionSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> j <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> i<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> temp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j <span class=\"token operator\">-</span> i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n      j <span class=\"token operator\">-=</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">insertionSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：归并排序\"><a href=\"#JavaScript：归并排序\" class=\"headerlink\" title=\"JavaScript：归并排序\"></a>JavaScript：归并排序</h2><p>时间复杂度 O(n*logn)</p>\n<ul>\n<li>分：把数组劈成两半，再递归地对数组进行“分”操作，直到分成一个个单独的数。</li>\n<li>合：把两个数合并为有序数组，再对有序数组进行合并，直到全部子数组合并为一个完整数组。</li>\n</ul>\n<h3 id=\"合并两个有序数组\"><a href=\"#合并两个有序数组\" class=\"headerlink\" title=\"合并两个有序数组\"></a>合并两个有序数组</h3><ul>\n<li>新建一个空数组 res，用于存放最终排序后的数组。</li>\n<li>比较两个有序数组的头部，较小者出队并推入 res 中。</li>\n<li>如果两个数组还有值，就重复第二步。</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">mergeSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rec</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> right <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>mid<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> orderLeft <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> orderRight <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span>length <span class=\"token operator\">||</span> orderRight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> orderRight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n          orderLeft<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> orderRight <span class=\"token operator\">?</span> orderLeft<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> orderRight<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>orderLeft<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderRight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>orderRight<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">mergeSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//分的时间复杂度O(logN)</span>\n<span class=\"token comment\">//合的时间复杂度是O(n);</span>\n<span class=\"token comment\">//总的时间复杂度是O(n*logN)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript：快速排序\"><a href=\"#JavaScript：快速排序\" class=\"headerlink\" title=\"JavaScript：快速排序\"></a>JavaScript：快速排序</h2><ul>\n<li>分区：从数组中任意选择一个“基准”，所有比基准小的元素放在基准前面，比基准大的元素放在基准的后面。</li>\n<li>递归：递归地对基准前后的子数组进行分区。</li>\n<li>时间复杂度<ul>\n<li>递归的时间复杂度是 O(logN)</li>\n<li>分区操作的时间复杂度是 O(n)</li>\n<li>时间复杂度 O(nlogN)</li>\n</ul>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">quickSort</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rec</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> left <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> right <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> mid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        left<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n        right<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token function\">rec</span><span class=\"token punctuation\">(</span>right<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">rec</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> n<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">quickSort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"JavaScript-实现：二分搜索\"><a href=\"#JavaScript-实现：二分搜索\" class=\"headerlink\" title=\"JavaScript 实现：二分搜索\"></a>JavaScript 实现：二分搜索</h2><h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ul>\n<li>从数组的中间元素开始，如果中间元素正好是目标值，则搜索结束。</li>\n<li>如果目标值大于或者小于中间元素，则在大于或小于中间元素的那一半数组中搜索。</li>\n</ul>\n<p>时间复杂度：O(logN)</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">binarySearch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> low <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> high <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>low <span class=\"token operator\">&lt;=</span> high<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> mid <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>low <span class=\"token operator\">+</span> high<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>mid<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">&lt;</span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      low <span class=\"token operator\">=</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">></span> item<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      high <span class=\"token operator\">=</span> mid <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> mid<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">binarySearch</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"分而治之\"><a href=\"#分而治之\" class=\"headerlink\" title=\"分而治之\"></a>分而治之</h2><ul>\n<li>分而治之是算法设计中的一种方法。</li>\n<li>它将一个问题分成多个和原问题相似的小问题，递归解决小问题，再将结果合并以解决原来的问题。</li>\n</ul>\n<h3 id=\"场景一：归并排序\"><a href=\"#场景一：归并排序\" class=\"headerlink\" title=\"场景一：归并排序\"></a>场景一：归并排序</h3><ul>\n<li>分：把数组从中间一分为二。</li>\n<li>解：递归地对两个子数组进行归并排序。</li>\n<li>合：合并有序子数组。</li>\n</ul>\n<h3 id=\"场景二：快速排序\"><a href=\"#场景二：快速排序\" class=\"headerlink\" title=\"场景二：快速排序\"></a>场景二：快速排序</h3><ul>\n<li>分：选基准，按基准把数组分成两个子数组。</li>\n<li>解：递归地对两个子数组进行快速排序。</li>\n<li>合：对两个子数组进行合并。</li>\n</ul>"},{"title":"javaScript学习笔记","date":"2021-02-06T08:50:00.000Z","desecription":"javaScript学习笔记","_content":"\n# javascript\n\n## 对象引用和复制\n\n与原始类型相比，对象的根本区别之一是对象是“通过引用”被存储和复制的，与原始类型值相反：字符串，数字，布尔值等 —— 始终是以“整体值”的形式被复制的。\n\n<!--more-->\n\n### 克隆与合并，Object.assign\n\nObject.assign(dest, [src1, src2, src3...])\n\n- 第一个参数 dest 是指目标对象。\n- 更后面的参数 src1, ..., srcN（可按需传递多个参数）是源对象。\n- 该方法将所有源对象的属性拷贝到目标对象 dest 中。换句话说，从第二个开始的所有参数的属性都被拷贝到第一个参数的对象中。\n- 调用结果返回 dest。\n- 可以用它来合并多个对象\n\n​ 对象方法,\"this\"\n\n- 对象方法的调用时基于“引用类型”的调用\n\n### Symbol 类型\n\n      1. 防止自己在对象中写的属性被其他人篡改，隐藏该属性\n      2. 用for..in.., Object.keys(obj)访问不到，但是使用Object.assign是可以复制过来的\n\n## 对象\n\n      1. 对象是具有一些特殊特性的关联数组。\n      2. 它们存储属性（键值对），其中：\n           1. 属性的键必须是字符串或者 symbol（通常是字符串）。\n           2. 值可以是任何类型。\n      3. 下面的方法访问属性\n           1. 点符号: obj.property。\n           2. 方括号 obj[\"property\"]，方括号允许从变量中获取键，例如 obj[varWithKey]。\n      4. 其他操作：\n           1. 删除属性：delete obj.prop。\n           2. 检查是否存在给定键的属性：\"key\" in obj。\n           3. 遍历对象：for(let key in obj) 循环。\n\n### 原始类型的方法\n\n- 基本类型不是对象。\n- 基本类型不能存储数据。\n- 所有的属性/方法操作都是在临时对象的帮助下执行的。\n\n### 数字类型\n\n​ parseInt(str, radix)` 的第二个参数\n\n- parseInt() 函数具有可选的第二个参数。它指定了数字系统的基数，因此 parseInt 还可以解析十六进制数字、二进制数字等的字符串：\n- alert( parseInt('0xff', 16) ); // 255\n- alert( parseInt('ff', 16) ); // 255，没有 0x 仍然有效\n- alert( parseInt('2n9c', 36) ); // 123456\n\n​ prompt\n\n- 注意在 prompt 前面的一元加号 +。它将立即把值转换成数字。\n- 否则，a 和 b 将会是字符串，它们的总和将是它们的连接，即：\"1\" + \"2\" = \"12\"。\n\n## 字符串\n\n### str\n\n### 1. str.indexOf(substr, pos)。\n\n​ 1. 它从给定位置 pos 开始，在 str 中查找 substr，如果没有找到，则返回 -1，否则返回匹配成功的位置。\n​ 2. 还有一个类似的方法 str.lastIndexOf(substr, position)，它从字符串的末尾开始搜索到开头。\n\n### 2. 按位（bitwise）NOT 技巧\n\n​ 1. 它将数字转换为 32-bit 整数（如果存在小数部分，则删除小数部分），然后对其二进制表示形式中的所有位均取反。\n\n### 3. 获取子字符串\n\n     1.  JavaScript 中有三种获取字符串的方法：substring、substr 和 slice。\n                 1.  str.slice(start [, end])，返回字符串从 start 到（但不包括）end 的部分。\n                 2.  如果没有第二个参数，slice 会一直运行到字符串末尾：\n                        1.  let str = \"stringify\";\n                                   alert( str.slice(0, 5) ); // 'strin'，从 0 到 5 的子字符串（不包括 5）\n                                   alert( str.slice(0, 1) ); // 's'，从 0 到 1，但不包括 1，所以只有在 0 处的字符\n                                   let str = \"stringify\";\n                                   alert( str.slice(2) ); // 从第二个位置直到结束\n                           2.  str.substring(start [, end])返回字符串在 start 和 end 之间 的部分。这与 slice 几乎相同，但它允许 start 大于 end。\n                                   et str = \"stringify\";\n                                          // 这些对于 substring 是相同的\n                                          alert( str.substring(2, 6) ); // \"ring\"\n                                          alert( str.substring(6, 2) ); // \"ring\"\n                                          // ……但对 slice 是不同的：\n                                          alert( str.slice(2, 6) ); // \"ring\"（一样）\n                                          alert( str.slice(6, 2) ); // \"\"（空字符串）\n               3.  str.substr(start [, length]) 返回字符串从 start 开始的给定 length 的部分。与以前的方法相比，这个允许我们指定 length 而不是结束位置：\n                       . let str = \"stringify\";\n                              alert( str.substr(2, 4) ); // 'ring'，从位置 2 开始，获取 4 个字符\n                              2. 第一个参数可能是负数，从结尾算起：\n                                     let str = \"stringify\";\n                                     alert( str.substr(-4, 2) ); // 'gi'，从第 4 位获取 2 个字符\n\n​ 方法 选择方式…… 负值参数  \n​ - slice(start, end) 从 start 到 end（不含 end） 允许\n​ - substring(start, end) start 与 end 之间（包括 start，但不包括 end） 负值代表 0\n​ - substr(start, length) 从 start 开始获取长为 length 的字符串 允许 start 为负数\n\n​\n\n## 数组\n\n- 数组, 声明, pop/push, shift/unshift 方法, 内部, 性能, 循环, 关于 “length”, new Array(), 多维数组, toString, 不要使用 == 比较数组\n\n​ Iterable object（可迭代对象）\n\n- 可迭代（Iterable） 对象是数组的泛化。这个概念是说任何对象都可以被定制为可在 for..of 循环中使用的对象。\n\n## Map and Set（映射和集合）\n\n### Map\n\n- Map 是一个带键的数据项的集合，就像一个 Object 一样。 但是它们最大的差别是 Map 允许任何类型的键（key）。\n\n它的方法和属性如下：\n\n- new Map() —— 创建 map。\n- map.set(key, value) —— 根据键存储值。\n- map.get(key) —— 根据键来返回值，如果 map 中不存在对应的 key，则返回 undefined。\n- map.has(key) —— 如果 key 存在则返回 true，否则返回 false。\n- map.delete(key) —— 删除指定键的值。\n- map.clear() —— 清空 map。\n- map.size —— 返回当前元素个数。\n\n### Map 迭代\n\n如果要在 map 里使用循环，可以使用以下三个方法：\n\n- map.keys() —— 遍历并返回所有的键（returns an iterable for keys），\n- map.values() —— 遍历并返回所有的值（returns an iterable for values），\n- map.entries() —— 遍历并返回所有的实体（returns an iterable for entries）[key, value]，for..of 在默认情况下使用的就是这个。\n\n### Object.entries：从对象创建 Map\n\n如果我们想从一个已有的普通对象（plain object）来创建一个 Map，那么我们可以使用内建方法 Object.entries(obj)，该返回对象的键/值对数组，该数组格式完全按照 Map 所需的格式。\n\n### Object.fromEntries：从 Map 创建对象\n\nObject.fromEntries 方法的作用是相反的：给定一个具有 [key, value] 键值对的数组，它会根据给定数组创建一个对象：\n\n## Set\n\nSet 是一个特殊的类型集合 —— “值的集合”（没有键），它的每一个值只能出现一次。\n\n它的主要方法如下：\n\n- new Set(iterable) —— 创建一个 set，如果提供了一个 iterable 对象（通常是数组），将会从数组里面复制值到 set 中。\n- set.add(value) —— 添加一个值，返回 set 本身\n- set.delete(value) —— 删除值，如果 value 在这个方法调用的时候存在则返回 true ，否则返回 false。\n- set.has(value) —— 如果 value 在 set 中，返回 true，否则返回 false。\n- set.clear() —— 清空 set。\n- set.size —— 返回元素个数。\n\nMap 中用于迭代的方法在 Set 中也同样支持：\n\n- set.keys() —— 遍历并返回所有的值（returns an iterable object for values），\n- set.values() —— 与 set.keys() 作用相同，这是为了兼容 Map，\n- set.entries() —— 遍历并返回所有的实体（returns an iterable object for entries）[value, value]，它的存在也是为了兼容 Map。\n\n## 解构赋值\n\n解构赋值 是一种特殊的语法，它使我们可以将数组或对象“拆包”为到一系列变量中，因为有时候使用变量更加方便。解构操作对那些具有很多参数和默认值等的函数也很奏效。\n解构赋值, 数组解构, 对象解构, 嵌套解构, 智能函数参数\n\n- 解构赋值可以立即将一个对象或数组映射到多个变量上。\n- 解构对象的完整语法：\n  - let {prop : varName = default, ...rest} = object\n  - 这表示属性 prop 会被赋值给变量 varName，如果没有这个属性的话，就会使用默认值 default。\n  - 没有对应映射的对象属性会被复制到 rest 对象。\n- 解构数组的完整语法：\n  - let [item1 = default, item2, ...rest] = array\n  - 数组的第一个元素被赋值给 item1，第二个元素被赋值给 item2，剩下的所有元素被复制到另一个数组 rest。\n- 从嵌套数组/对象中提取数据也是可以的，此时等号左侧必须和等号右侧有相同的结构。\n\n## 日期和时间\n\n该对象存储日期和时间，并提供了日期/时间的管理方法。\n例如，我们可以使用它来存储创建/修改时间，或者用来测量时间，再或者仅用来打印当前时间。\n\n### 创建\n\n创建一个新的 Date 对象，只需要调用 new Date()，在调用时可以带有下面这些参数之一：\n\n- new Date()\n\n  - 不带参数 —— 创建一个表示当前日期和时间的 Date 对象：\n    - let now = new Date();\n\n- new Date(milliseconds)\n  - 创建一个 Date 对象，其时间等于 1970-01-01 00:00:00 UTC+0 再过一毫秒（1/1000 秒）。\n  - 传入的整数参数代表的是自 1970-01-01 00:00:00 以来经过的毫秒数，该整数被称为 时间戳。\n  - 这是一种日期的轻量级数字表示形式。我们通常使用 new Date(timestamp) 通过时间戳来创建日期，并可以使用 date.getTime() 将现有的 Date 对象转化为时间戳。\n- new Date(datestring)\n  - 如果只有一个参数，并且是字符串，那么它会被自动解析。该算法与 Date.parse 所使用的算法相同\n- new Date(year, month, date, hours, minutes, seconds, ms)\n  - 使用当前时区中的给定组件创建日期。只有前两个参数是必须的。\n  - 自动校准（Autocorrection）\n\n自动校准 是 Date 对象的一个非常方便的特性。我们可以设置超范围的数值，它会自动校准。\n超出范围的日期组件将会被自动分配。\n\n## JSON 方法，toJSON\n\n假设我们有一个复杂的对象，我们希望将其转换为字符串，以通过网络发送，或者只是为了在日志中输出它。\n\n当然，这样的字符串应该包含所有重要的属性。\n\n### JSON.stringify\n\nJSON（JavaScript Object Notation）是表示值和对象的通用格式。在 RFC 4627 标准中有对其的描述。最初它是为 JavaScript 而创建的，但许多其他编程语言也有用于处理它的库。因此，当客户端使用 JavaScript 而服务器端是使用 Ruby/PHP/Java 等语言编写的时，使用 JSON 可以很容易地进行数据交换。\n\nJavaScript 提供了如下方法：\n\n- JSON.stringify 将对象转换为 JSON。\n- JSON.parse 将 JSON 转换回对象。\n\n方法 JSON.stringify(student) 接收对象并将其转换为字符串。\n得到的 json 字符串是一个被称为 JSON 编码（JSON-encoded） 或 序列化（serialized） 或 字符串化（stringified） 或 编组化（marshalled） 的对象。\n\n请注意，JSON 编码的对象与对象字面量有几个重要的区别：:\n\n- 字符串使用双引号。JSON 中没有单引号或反引号。所以 'John' 被转换为 \"John\"。\n- 对象属性名称也是双引号的。这是强制性的。所以 age:30 被转换成 \"age\":30。\n\nJSON.stringify 也可以应用于原始（primitive）数据类型。\nJSON 支持以下数据类型：\n\n- Objects { ... }\n- Arrays [ ... ]\n- Primitives：\n  - strings，\n  - numbers，\n  - boolean values true/false，\n  - null。\n\nJSON 是语言无关的纯数据规范，因此一些特定于 JavaScript 的对象属性会被 JSON.stringify 跳过。\n即：\n\n- 函数属性（方法）。\n- Symbol 类型的属性。\n- 存储 undefined 的属性。\n\n​ 排除和转换：replacer\n\nJSON.stringify 的完整语法是：\nlet json = JSON.stringify(value, [replacer, space])  \n value\n要编码的值。\nreplacer\n要编码的属性数组或映射函数 function(key, value)。\nspace\n用于格式化的空格数量\n\n## Rest 参数与 Spread 语法\n\n在 JavaScript 中，很多内建函数都支持传入任意数量的参数。\n例如：\n\n- Math.max(arg1, arg2, ..., argN) —— 返回入参中的最大值。\n- Object.assign(dest, src1, ..., srcN) —— 依次将属性从 src1..N 复制到 dest。\n\n### Rest 参数 ...\n\n在 JavaScript 中，无论函数是如何定义的，你都可以使用任意数量的参数调用函数。\nRest 参数可以通过使用三个点 ... 并在后面跟着包含剩余参数的数组名称，来将它们包含在函数定义中。这些点的字面意思是“将剩余参数收集到一个数组中”。\nRest 参数必须放到参数列表的末尾\nRest 参数会收集剩余的所有参数，因此下面这种用法没有意义，并且会导致错误：\nfunction f(arg1, ...rest, arg2) { // arg2 在 ...rest 后面？！\n// error\n}\n...rest 必须处在最后。\n\n​ “arguments” 变量\n\n有一个名为 arguments 的特殊的类数组对象，该对象按参数索引包含所有参数。\n\n在过去，JavaScript 中没有 rest 参数，而使用 arguments 是获取函数所有参数的唯一方法。现在它仍然有效，我们可以在一些老代码里找到它。\n\n但缺点是，尽管 arguments 是一个类数组，也是可迭代对象，但它终究不是数组。它不支持数组方法，因此我们不能调用 arguments.map(...) 等方法。\n\n此外，它始终包含所有参数，我们不能像使用 rest 参数那样只截取入参的一部分。\n\n因此，当我们需要这些功能时，最好使用 rest 参数。\n\n### Spread 语法\n\n在脚本执行时，可能参数数组中有很多个元素，也可能一个都没有。并且这样设置的代码也很丑。\nSpread 语法 来帮助你了！它看起来和 rest 参数很像，也使用 ...，但是二者的用途完全相反。\n当在函数调用中使用 ...arr 时，它会把可迭代对象 arr “展开”到参数列表中。\n\n以 Math.max 为例：\n\n      1. - let arr = [3, 5, 1];\n      2. - alert( Math.max(...arr) ); // 5（spread 语法把数组转换为参数列表）\n\n我们还可以通过这种方式传递多个可迭代对象：\n\n      1. let arr1 = [1, -2, 3, 4];\n      2. let arr2 = [8, 3, -8, 1];\n      3.\n      4. alert( Math.max(...arr1, ...arr2) ); // 8\n\n我们甚至还可以将 spread 语法与常规值结合使用：\n\n      1. let arr1 = [1, -2, 3, 4];\n      2. let arr2 = [8, 3, -8, 1];\n      3.\n      4. alert( Math.max(1, ...arr1, 2, ...arr2, 25) ); // 25\n\n并且，我们还可以使用 spread 语法来合并数组：\n\n      1. let arr = [3, 5, 1];\n      2. let arr2 = [8, 9, 15];\n      3.\n      4. let merged = [0, ...arr, 2, ...arr2];\n      5.\n      6. alert(merged); // 0,3,5,1,2,8,9,15（0，然后是 arr，然后是 2，然后是 arr2）\n\n在上面的示例中，我们使用数组展示了 spread 语法，其实任何可迭代对象都可以。\n\n例如，在这儿我们使用 spread 语法将字符串转换为字符数组：\n\n- let str = \"Hello\";\n- alert( [...str] ); // H,e,l,l,o\n  Spread 语法内部使用了迭代器来收集元素，与 for..of 的方式相同\n\n不过 Array.from(obj) 和 [...obj] 存在一个细微的差别：\n\n- Array.from 适用于类数组对象也适用于可迭代对象。\n- Spread 语法只适用于可迭代对象。\n  因此，对于将一些“东西”转换为数组的任务，Array.from 往往更通用。\n\n​ 总结  \n 当我们在代码中看到 \"...\" 时，它要么是 rest 参数，要么就是 spread 语法。\n\n有一个简单的方法可以区分它们：\n\n- 若 ... 出现在函数参数列表的最后，那么它就是 rest 参数，它会把参数列表中剩余的参数收集到一个数组中。\n- 若 ... 出现在函数调用或类似的表达式中，那它就是 spread 语法，它会把一个数组展开为列表。\n- 使用场景：\n\n- Rest 参数用于创建可接受任意数量参数的函数。\n- Spread 语法用于将数组传递给通常需要含有许多参数的列表的函数。\n  它们俩的出现帮助我们轻松地在列表和参数数组之间来回转换。\n\n“旧式”的 arguments（类数组且可迭代的对象）也依然能够帮助我们获取函数调用中的所有参数。\n\n## 变量作用域，闭包\n\n### Step 1. 变量\n\n在 JavaScript 中，每个运行的函数，代码块 {...} 以及整个脚本，都有一个被称为 词法环境（Lexical Environment） 的内部（隐藏）的关联对象。\n\n词法环境对象由两部分组成：\n\n      1. 环境记录（Environment Record） —— 一个存储所有局部变量作为其属性（包括一些其他信息，例如 this 的值）的对象。\n      2. 对 外部词法环境 的引用，与外部代码相关联。\n\n一个“变量”只是 环境记录 这个特殊的内部对象的一个属性。“获取或修改变量”意味着“获取或修改词法环境的一个属性”。\n\n- 变量是特殊内部对象的属性，与当前正在执行的（代码）块/函数/脚本有关。\n- 操作变量实际上是操作该对象的属性。\n\n### Step 2. 函数声明\n\n一个函数其实也是一个值，就像变量一样。\n\n**\\* \\*不同之处在于函数声明的初始化会被立即完成。 \\*\\***\n\n当创建了一个词法环境（Lexical Environment）时，函数声明会立即变为即用型函数（不像 let 那样直到声明处才可用）。\n\n### Step 3. 内部和外部的词法环境\n\n在一个函数运行时，在调用刚开始时，会自动创建一个新的词法环境以存储这个调用的局部变量和参数。\n\n**\\* \\*当代码要访问一个变量时 —— 首先会搜索内部词法环境，然后搜索外部环境，然后搜索更外部的环境，以此类推，直到全局词法环境。 \\*\\***\n\n如果在任何地方都找不到这个变量，那么在严格模式下就会报错（在非严格模式下，为了向下兼容，给未定义的变量赋值会创建一个全局变量）。\n\n### Step 4. 返回函数\n\n所有的函数在“诞生”时都会记住创建它们的词法环境。从技术上讲，这里没有什么魔法：所有函数都有名为 [[Environment]] 的隐藏属性，该属性保存了对创建该函数的词法环境的引用。\n\n### **闭包**\n\n开发者通常应该都知道“闭包”这个通用的编程术语。\n\n[闭包](<https://en.wikipedia.org/wiki/Closure_(computer_programming)>) 是指内部函数总是可以访问其所在的外部函数中声明的变量和参数，即使在其外部函数被返回（寿命终结）了之后。\n\n也就是说：JavaScript 中的函数会自动通过隐藏的 `[[Environment]]` 属性记住创建它们的位置，所以它们都可以访问外部变量。\n\n在面试时，前端开发者通常会被问到“什么是闭包？”，正确的回答应该是闭包的定义，并解释清楚为什么 JavaScript 中的所有函数都是闭包的，以及可能的关于 `[[Environment]]` 属性和词法环境原理的技术细节。\n\n### **垃圾收集**\n\n通常，函数调用完成后，会将词法环境和其中的所有变量从内存中删除。因为现在没有任何对它们的引用了。与 JavaScript 中的任何其他对象一样，词法环境仅在可达时才会被保留在内存中。\n\n但是，如果有一个嵌套的函数在函数结束后仍可达，则它将具有引用词法环境的 `[[Environment]]` 属性。\n\n### 实际开发中的优化\n\n正如我们所看到的，理论上当函数可达时，它外部的所有变量也都将存在。\n\n但在实际中，JavaScript 引擎会试图优化它。它们会分析变量的使用情况，如果从代码中可以明显看出有未使用的外部变量，那么就会将其删除。\n\n**在 V8（Chrome，Edge，Opera）中的一个重要的副作用是，此类变量在调试中将不可用。**\n\n# 函数对象, NFE\n\n在 JavaScript 中，函数就是对象。\n\n## 属性 “name”\n\n函数对象包含一些便于使用的属性。\n\n1. 一个函数的名字可以通过属性 “name” 来访问。\n\n2. 名称赋值的逻辑很智能。即使函数被创建时没有名字，名称赋值的逻辑也能给它赋予一个正确的名字，然后进行赋值。\n\n3. 以默认值的方式完成了赋值时，它也有效。\n\n4. 如果函数自己没有提供，那么在赋值中，会根据上下文来推测一个。\n\n   对象方法也有名字，\n\n## 属性 “length”\n\n内置属性 “length”，它返回函数入参的个数\n\n属性 `length` 有时在操作其它函数的函数中用于做 [内省/运行时检查（introspection）](<https://zh.wikipedia.org/wiki/内省_(计算机科学)>)。\n\n## 自定义属性\n\n**属性不是变量**\n\n被赋值给函数的属性，比如 `sayHi.counter = 0`，**不会** 在函数内定义一个局部变量 `counter`。换句话说，属性 `counter` 和变量 `let counter` 是毫不相关的两个东西。\n\n我们可以把函数当作对象，在它里面存储属性，但是这对它的执行没有任何影响。变量不是函数属性，反之亦然。它们之间是平行的。\n\n## 命名函数表达式\n\n命名函数表达式（NFE，Named Function Expression），指带有名字的函数表达式的术语。\n\n```\nlet sayHi = function func(who) {\n  alert(`Hello, ${who}`);\n};\n\nsayHi(\"John\"); // Hello, John\n```\n\n关于名字 `func` 有两个特殊的地方，这就是添加它的原因：\n\n1. 它允许函数在内部引用自己。\n2. 它在函数外是不可见的。\n\n下面的函数 `sayHi` 会在没有入参 `who` 时，以 `\"Guest\"` 为入参调用自己：\n\n```javascript\nlet sayHi = function func(who) {\n  if (who) {\n    alert(`Hello, ${who}`)\n  } else {\n    func('Guest') // 使用 func 再次调用函数自身\n  }\n}\nsayHi() // Hello, Guest\n// 但这不工作：\nfunc() // Error, func is not defined（在函数外不可见）\n```\n\n## 问题（待解决）\n\n### [任意数量的括号求和](https://zh.javascript.info/function-object#ren-yi-shu-liang-de-kuo-hao-qiu-he)\n\n重要程度: 2\n\n写一个函数 `sum`，它有这样的功能：\n\n```javascript\nsum(1)(2) == 3 // 1 + 2\nsum(1)(2)(3) == 6 // 1 + 2 + 3\nsum(5)(-1)(2) == 6\nsum(6)(-1)(-2)(-3) == 0\nsum(0)(1)(2)(3)(4)(5) == 15\n```\n\nP.S. 提示：你可能需要创建自定义对象来为你的函数提供基本类型转换。\n\n## [总结](https://zh.javascript.info/function-object#zong-jie)\n\n函数就是对象。\n\n它们的一些属性：\n\n- `name` —— 函数的名字。通常取自函数定义，但如果函数定义时没设定函数名，JavaScript 会尝试通过函数的上下文猜一个函数名（例如把赋值的变量名取为函数名）。\n- `length` —— 函数定义时的入参的个数。Rest 参数不参与计数。\n\n# 调度：setTimeout 和 setInterval\n\n有时我们并不想立即执行一个函数，而是等待特定一段时间之后再执行。这就是所谓的“计划调用（scheduling a call）”。\n\n目前有两种方式可以实现：\n\n- `setTimeout` 允许我们将函数推迟到一段时间间隔之后再执行。\n- `setInterval` 允许我们重复运行一个函数，从一段时间间隔之后开始运行，之后以该时间间隔连续重复运行该函数。\n\n这两个方法并不在 JavaScript 的规范中。但是大多数运行环境都有内建的调度程序，并且提供了这些方法。目前来讲，所有浏览器以及 Node.js 都支持这两个方法。\n\n## setTimeout\n\n语法：\n\n```javascript\nlet timerId = setTimeout(func|code, [delay], [arg1], [arg2], ...)\n```\n\n参数说明：\n\n- `func|code`\n\n  想要执行的函数或代码字符串。 一般传入的都是函数。由于某些历史原因，支持传入代码字符串，但是不建议这样做。\n\n- `delay`\n\n  执行前的延时，以毫秒为单位（1000 毫秒 = 1 秒），默认值是 0；\n\n- `arg1`，`arg2`…\n\n  要传入被执行函数（或代码字符串）的参数列表（IE9 以下不支持）\n\n## [嵌套的 setTimeout](https://zh.javascript.info/settimeout-setinterval#qian-tao-de-settimeout)\n\n周期性调度有两种方式。\n\n一种是使用 `setInterval`，另外一种就是嵌套的 `setTimeout`，就像这样：\n\n```javascript\n/** instead of:\nlet timerId = setInterval(() => alert('tick'), 2000);\n*/\n\nlet timerId = setTimeout(function tick() {\n  alert('tick')\n  timerId = setTimeout(tick, 2000) // (*)\n}, 2000)\n```\n\n上面这个 `setTimeout` 在当前这一次函数执行完时 `(*)` 立即调度下一次调用。\n\n嵌套的 `setTimeout` 要比 `setInterval` 灵活得多。采用这种方式可以根据当前执行结果来调度下一次调用，因此下一次调用可以与当前这一次不同。\n\n**传入一个函数，但不要执行它**\n\n新手开发者有时候会误将一对括号 `()` 加在函数后面：\n\n```javascript\n// 错的！\nsetTimeout(sayHi(), 1000)\n```\n\n这样不行，因为 `setTimeout` 期望得到一个对函数的引用。而这里的 `sayHi()` 很明显是在执行函数，所以实际上传入 `setTimeout` 的是 **函数的执行结果**。在这个例子中，`sayHi()` 的执行结果是 `undefined`（也就是说函数没有返回任何结果），所以实际上什么也没有调度。\n\n### [用 clearTimeout 来取消调度](https://zh.javascript.info/settimeout-setinterval#yong-cleartimeout-lai-qu-xiao-tiao-du)\n\n`setTimeout` 在调用时会返回一个“定时器标识符（timer identifier）”，在我们的例子中是 `timerId`，我们可以使用它来取消执行。\n\n取消调度的语法：\n\n```javascript\nlet timerId = setTimeout(...);\nclearTimeout(timerId);\n```\n\n## [setInterval](https://zh.javascript.info/settimeout-setinterval#setinterval)\n\n`setInterval` 方法和 `setTimeout` 的语法相同：\n\n```javascript\nlet timerId = setInterval(func|code, [delay], [arg1], [arg2], ...)\n```\n\n所有参数的意义也是相同的。不过与 `setTimeout` 只执行一次不同，`setInterval` 是每间隔给定的时间周期性执行。\n\n想要阻止后续调用，我们需要调用 `clearInterval(timerId)`。\n\n**alert 弹窗显示的时候计时器依然在进行计时**\n\n在大多数浏览器中，包括 Chrome 和 Firefox，在显示 `alert/confirm/prompt` 弹窗时，内部的定时器仍旧会继续“嘀嗒”。\n\n所以，在运行上面的代码时，如果在一定时间内没有关掉 `alert` 弹窗，那么在你关闭弹窗后，下一个 `alert` 会立即显示。两次 `alert` 之间的时间间隔将小于 2 秒。\n\n**嵌套的 `setTimeout` 能够精确地设置两次执行之间的延时，而 `setInterval` 却不能。**\n\n## [零延时的 setTimeout](https://zh.javascript.info/settimeout-setinterval#ling-yan-shi-de-settimeout)\n\n这儿有一种特殊的用法：`setTimeout(func, 0)`，或者仅仅是 `setTimeout(func)`。\n\n这样调度可以让 `func` 尽快执行。但是只有在当前正在执行的脚本执行完成后，调度程序才会调用它。\n\n也就是说，该函数被调度在当前脚本执行完成“之后”立即执行。\n\n例如，下面这段代码会先输出 “Hello”，然后立即输出 “World”：\n\n```javascript\nsetTimeout(() => alert('World'))\n\nalert('Hello')\n```\n\n第一行代码“将调用安排到日程（calendar）0 毫秒处”。但是调度程序只有在当前脚本执行完毕时才会去“检查日程”，所以先输出 `\"Hello\"`，然后才输出 `\"World\"`。\n\n**零延时实际上不为零（在浏览器中）**\n\n## [总结](https://zh.javascript.info/settimeout-setinterval#zong-jie)\n\n- `setTimeout(func, delay, ...args)` 和 `setInterval(func, delay, ...args)` 方法允许我们在 `delay` 毫秒之后运行 `func` 一次或以 `delay` 毫秒为时间间隔周期性运行 `func`。\n- 要取消函数的执行，我们应该调用 `clearInterval/clearTimeout`，并将 `setInterval/setTimeout` 返回的值作为入参传入。\n- 嵌套的 `setTimeout` 比 `setInterval` 用起来更加灵活，允许我们更精确地设置两次执行之间的时间。\n- 零延时调度 `setTimeout(func, 0)`（与 `setTimeout(func)` 相同）用来调度需要尽快执行的调用，但是会在当前脚本执行完成后进行调用。\n- 浏览器会将 `setTimeout` 或 `setInterval` 的五层或更多层嵌套调用（调用五次之后）的最小延时限制在 4ms。这是历史遗留问题。\n\n# 函数绑定\n\n当将对象方法作为回调进行传递，例如传递给 `setTimeout`，这儿会存在一个常见的问题：“丢失 `this`”。\n\n## [丢失 “this”](https://zh.javascript.info/bind#diu-shi-this)\n\n下面是使用 `setTimeout` 时 `this` 是如何丢失的：\n\n```javascript\nlet user = {\n  firstName: 'John',\n  sayHi() {\n    alert(`Hello, ${this.firstName}!`)\n  },\n}\n\nsetTimeout(user.sayHi, 1000) // Hello, undefined!\n```\n\n## [解决方案 1：包装器](https://zh.javascript.info/bind#jie-jue-fang-an-1-bao-zhuang-qi)\n\n最简单的解决方案是使用一个包装函数：\n\n```javascript\nlet user = {\n  firstName: 'John',\n  sayHi() {\n    alert(`Hello, ${this.firstName}!`)\n  },\n}\n\nsetTimeout(function () {\n  user.sayHi() // Hello, John!\n}, 1000)\n```\n\n现在它可以正常工作了，因为它从外部词法环境中获取到了 `user`，就可以正常地调用方法了。\n\n## [解决方案 2：bind](https://zh.javascript.info/bind#jie-jue-fang-an-2-bind)\n\n函数提供了一个内建方法 [bind](https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)，它可以绑定 `this`。\n\n基本的语法是：\n\n```javascript\n// 稍后将会有更复杂的语法\nlet boundFunc = func.bind(context)\n```\n\n`func.bind(context)` 的结果是一个特殊的类似于函数的“外来对象（exotic object）”，它可以像函数一样被调用，并且透明地（transparently）将调用传递给 `func` 并设定 `this=context`。\n\n`boundFunc` 调用就像绑定了 `this` 的 `func`。\n\n## [在没有上下文情况下的 partial](https://zh.javascript.info/bind#zai-mei-you-shang-xia-wen-qing-kuang-xia-de-partial)\n\n当我们想绑定一些参数（arguments），但是这里没有上下文 `this`，应该怎么办？例如，对于一个对象方法。\n\n原生的 `bind` 不允许这种情况。我们不可以省略上下文直接跳到参数（arguments）。\n\n`partial(func[, arg1, arg2...])` 调用的结果是一个包装器 `(*)`，它调用 `func` 并具有以下内容：\n\n- 与它获得的函数具有相同的 `this`（对于 `user.sayNow` 调用来说，它是 `user`）\n- 然后给它 `...argsBound` —— 来自于 `partial` 调用的参数（`\"10:00\"`）\n- 然后给它 `...args` —— 给包装器的参数（`\"Hello\"`）\n\n## [总结](https://zh.javascript.info/bind#zong-jie)\n\n方法 `func.bind(context, ...args)` 返回函数 `func` 的“绑定的（bound）变体”，它绑定了上下文 `this` 和第一个参数（如果给定了）。\n\n通常我们应用 `bind` 来绑定对象方法的 `this`，这样我们就可以把它们传递到其他地方使用。例如，传递给 `setTimeout`。\n\n当我们绑定一个现有的函数的某些参数时，绑定后的（不太通用的）函数被称为 **partially applied** 或 **partial**。\n\n当我们不想一遍又一遍地重复相同的参数时，partial 非常有用。就像我们有一个 `send(from, to)` 函数，并且对于我们的任务来说，`from` 应该总是一样的，那么我们就可以搞一个 partial 并使用它。\n\n# 深入理解箭头函数\n\n让我们深入研究一下箭头函数。\n\n箭头函数不仅仅是编写简洁代码的“捷径”。它还具有非常特殊且有用的特性。\n\nJavaScript 充满了我们需要编写在其他地方执行的小函数的情况。\n\n```javascript\nlet sum = (a, b) => a + b\n\n/* 这个箭头函数是下面这个函数的更短的版本：\n\nlet sum = function(a, b) {\n  return a + b;\n};\n*/\n\nalert(sum(1, 2)) // 3\n```\n\n- 如果我们只有一个参数，还可以省略掉参数外的圆括号，使代码更短。\n- 如果没有参数，括号将是空的（但括号应该保留）：\n\n## [箭头函数没有 “this”](https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-this)\n\n正如我们在 [对象方法，\"this\"](https://zh.javascript.info/object-methods) 一章中所学到的，箭头函数没有 `this`。如果访问 `this`，则会从外部获取。\n\n**不能对箭头函数进行 `new` 操作**\n\n不具有 `this` 自然也就意味着另一个限制：箭头函数不能用作构造器（constructor）。不能用 `new` 调用它们。\n\n## [箭头函数没有 “arguments”](https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-arguments)\n\n箭头函数也没有 `arguments` 变量。\n\n当我们需要使用当前的 `this` 和 `arguments` 转发一个调用时，这对装饰器（decorators）来说非常有用。\n\n## [总结](https://zh.javascript.info/arrow-functions#zong-jie)\n\n箭头函数：\n\n- 没有 `this`\n- 没有 `arguments`\n- 不能使用 `new` 进行调用\n- 它们也没有 `super`\n\n# Mixin 模式\n\n[mixin](https://en.wikipedia.org/wiki/Mixin) 是一个包含可被其他类使用而无需继承的方法的类。\n\n## [EventMixin](https://zh.javascript.info/mixins#eventmixin)\n\n现在让我们为实际运用构造一个 mixin。\n\n例如，许多浏览器对象的一个重要功能是它们可以生成事件。事件是向任何有需要的人“广播信息”的好方法。因此，让我们构造一个 mixin，使我们能够轻松地将与事件相关的函数添加到任意 class/object 中。\n\n- Mixin 将提供 `.trigger(name, [...data])` 方法，以在发生重要的事情时“生成一个事件”。`name` 参数（arguments）是事件的名称，`[...data]` 是可选的带有事件数据的其他参数（arguments）。\n- 此外还有 `.on(name, handler)` 方法，它为具有给定名称的事件添加了 `handler` 函数作为监听器（listener）。当具有给定 `name` 的事件触发时将调用该方法，并从 `.trigger` 调用中获取参数（arguments）。\n- ……还有 `.off(name, handler)` 方法，它会删除 `handler` 监听器（listener）。\n\n## [总结](https://zh.javascript.info/mixins#zong-jie)\n\n_Mixin_ — 是一个通用的面向对象编程术语：一个包含其他类的方法的类。\n\n一些其它编程语言允许多重继承。JavaScript 不支持多重继承，但是可以通过将方法拷贝到原型中来实现 mixin。\n\n我们可以使用 mixin 作为一种通过添加多种行为（例如上文中所提到的事件处理）来扩充类的方法。\n\n**受保护的属性通常以下划线 `_` 作为前缀。**\n\n# 简介：回调\n\nJavaScript 主机（host）环境提供了许多函数，这些函数允许我们计划 **异步** 行为（action）。\n\n脚本是“异步”调用的，因为它从现在开始加载，但是在这个加载函数执行完成后才运行。\n\n# Promise\n\nPromise 对象的构造器（constructor）语法如下：\n\n```javascript\nlet promise = new Promise(function (resolve, reject) {\n  // executor（生产者代码，“歌手”）\n})\n```\n\n传递给 `new Promise` 的函数被称为 **executor**。当 `new Promise` 被创建，executor 会自动运行。\n\n当 executor 获得了结果，无论是早还是晚都没关系，它应该调用以下回调之一：\n\n- `resolve(value)` — 如果任务成功完成并带有结果 `value`。\n- `reject(error)` — 如果出现了 error，`error` 即为 error 对象。\n\nexecutor 会自动运行并尝试执行一项工作。尝试结束后，如果成功则调用 `resolve`，如果出现 error 则调用 `reject`。\n\n由 `new Promise` 构造器返回的 `promise` 对象具有以下内部属性：\n\n- `state` — 最初是 `\"pending\"`，然后在 `resolve` 被调用时变为 `\"fulfilled\"`，或者在 `reject` 被调用时变为 `\"rejected\"`。\n- `result` — 最初是 `undefined`，然后在 `resolve(value)` 被调用时变为 `value`，或者在 `reject(error)` 被调用时变为 `error`。\n\n| Promises                                                                                                                                                                                                           | Callbacks                                                                                                                                                            |\n| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Promises 允许我们按照自然顺序进行编码。首先，我们运行 `loadScript` 和 `.then` 来处理结果。                                                                                                                         | 在调用 `loadScript(script, callback)` 时，在我们处理的地方（disposal）必须有一个 `callback` 函数。换句话说，在调用 `loadScript` **之前**，我们必须知道如何处理结果。 |\n| 我们可以根据需要，在 promise 上多次调用 `.then`。每次调用，我们都会在“订阅列表”中添加一个新的“分析”，一个新的订阅函数。在下一章将对此内容进行详细介绍：[Promise 链](https://zh.javascript.info/promise-chaining)。 | 只能有一个回调。                                                                                                                                                     |\n\n因此，promise 为我们提供了更好的代码流和灵活性。\n\n一个 promise 构造器和一个简单的 executor 函数，该 executor 函数具有包含时间（即 `setTimeout`）的“生产者代码”：\n\n```javascript\nlet promise = new Promise(function (resolve, reject) {\n  // 当 promise 被构造完成时，自动执行此函数\n\n  // 1 秒后发出工作已经被完成的信号，并带有结果 \"done\"\n  setTimeout(() => resolve('done'), 1000)\n})\n```\n\n在 new Promise()的时候，Promise 的执行器就会立马执行，但是**调用 resolve()会触发异步操作，传入的 then()方法的函数会被添加到任务队列并异步执行**\n\n`promise` 对象代表异步执行结果，通过构造函数 `new Promise` 创建，其参数是 executor function 可能有一些异步代码，对象其后的方法 `.then`、`.catch`、`.finally` 相当于回调函数。\n\n一开始创建的 `promise` 对象状态是 `pending`（表示初始状态）然后在 executor function 中会有条件地执行 `resolve` 或 `reject` 之一，这样就会改变 `promise` 对象的状态为 `settled`（表示状态确定，可以触发对象后的方法 `.finally`）\n\n`promise` 对象确定的状态其实有两种，如果在 executor function 调用的是 `resolve` 状态就变成 `resolved` 相应地会调用对象后的方法 `.then`；而如果在 executor function 调用的是 `reject` 状态就变成 `rejected` 相应地会调用对象后的方法 `.catch`（其实这是 `.then(null, rejectFunc)` 缩写形式）\n\n# Promise 链\n\n它的理念是将 result 通过 `.then` 处理程序（handler）链进行传递。\n\n运行流程如下：\n\n1. 初始 promise 在 1 秒后进行 resolve `(*)`，\n2. 然后 `.then` 处理程序（handler）被调用 `(**)`。\n3. 它返回的值被传入下一个 `.then` 处理程序（handler）`(***)`\n4. ……依此类推。\n\n**新手常犯的一个经典错误：从技术上讲，我们也可以将多个 `.then` 添加到一个 promise 上。但这并不是 promise 链（chaining）。**\n\n## [总结](https://zh.javascript.info/promise-chaining#zong-jie)\n\n如果 `.then`（或 `catch/finally` 都可以）处理程序（handler）返回一个 promise，那么链的其余部分将会等待，直到它状态变为 settled。当它被 settled 后，其 result（或 error）将被进一步传递下去。\n\n![image-20210128140346440](E:\\Markdown图片\\image-20210128140346440.png)\n\n# 使用 promise 进行错误处理\n\nPromise 链在错误（error）处理中十分强大。当一个 promise 被 reject 时，控制权将移交至最近的 rejection 处理程序（handler）。\n\n## [隐式 try…catch](https://zh.javascript.info/promise-error-handling#yin-shi-trycatch)\n\nPromise 的执行者（executor）和 promise 的处理程序（handler）周围有一个“隐式的 `try..catch`”。如果发生异常，它（译注：指异常）就会被捕获，并被视为 rejection 进行处理。\n\n下面这段代码：\n\n```javascript\nnew Promise((resolve, reject) => {\n  throw new Error('Whoops!')\n}).catch(alert) // Error: Whoops!\n```\n\n……与下面这段代码工作上完全相同：\n\n```javascript\nnew Promise((resolve, reject) => {\n  reject(new Error('Whoops!'))\n}).catch(alert) // Error: Whoops!\n```\n\n在 executor 周围的“隐式 `try..catch`”自动捕获了 error，并将其变为 rejected promise。\n\n这不仅仅发生在 executor 函数中，同样也发生在其 handler 中。如果我们在 `.then` 处理程序（handler）中 `throw`，这意味着 promise 被 rejected，因此控制权移交至最近的 error 处理程序（handler）。\n\n一个例子：\n\n```javascript\nnew Promise((resolve, reject) => {\n  resolve('ok')\n})\n  .then((result) => {\n    throw new Error('Whoops!') // reject 这个 promise\n  })\n  .catch(alert) // Error: Whoops!\n```\n\n## [再次抛出（Rethrowing）](https://zh.javascript.info/promise-error-handling#zai-ci-pao-chu-rethrowing)\n\n链尾端的 `.catch` 的表现有点像 `try..catch`。我们可能有许多个 `.then` 处理程序（handler），然后在尾端使用一个 `.catch` 处理上面的所有 error。\n\n## [总结](https://zh.javascript.info/promise-error-handling#zong-jie)\n\n- `.catch` 处理 promise 中的各种 error：在 `reject()` 调用中的，或者在处理程序（handler）中抛出的（thrown）error。\n- 我们应该将 `.catch` 准确地放到我们想要处理 error，并知道如何处理这些 error 的地方。处理程序应该分析 error（可以自定义 error 类来帮助分析）并再次抛出未知的 error（可能它们是编程错误）。\n- 如果没有办法从 error 中恢复的话，不使用 `.catch` 也可以。\n- 在任何情况下我们都应该有 `unhandledrejection` 事件处理程序（用于浏览器，以及其他环境的模拟），以跟踪未处理的 error 并告知用户（可能还有我们的服务器）有关信息，以使我们的应用程序永远不会“死掉”。\n\n# Promise API\n\n## [Promise.all](https://zh.javascript.info/promise-api#promiseall)\n\n假设我们希望并行执行多个 promise，并等待所有 promise 都准备就绪。语法：\n\n```javascript\nlet promise = Promise.all([...promises...]);\n```\n\n`Promise.all(iterable)` **允许在** `iterable` **中使用 non-promise 的“常规”值**\n\n`Promise.all` 接受一个 promise 数组作为参数（从技术上讲，它可以是任何可迭代的，但通常是一个数组）并返回一个新的 promise。\n\n**如果任意一个 promise 被 reject，由 `Promise.all` 返回的 promise 就会立即 reject，并且带有的就是这个 error。**\n\n## [Promise.allSettled](https://zh.javascript.info/promise-api#promiseallsettled)\n\n`Promise.allSettled` 等待所有的 promise 都被 settle，无论结果如何。结果数组具有：\n\n- `{status:\"fulfilled\", value:result}` 对于成功的响应，\n- `{status:\"rejected\", reason:error}` 对于 error。\n\n## [Promise.race](https://zh.javascript.info/promise-api#promiserace)\n\n与 `Promise.all` 类似，但只等待第一个 settled 的 promise 并获取其结果（或 error）。\n\n`Promise.all` 可能是在实战中使用最多的。\n\n# 微任务（Microtask）\n\nPromise 的处理程序（handlers）`.then`、`.catch` 和 `.finally` 都是异步的。\n\n即便一个 promise 立即被 resolve，`.then`、`.catch` 和 `.finally` **下面** 的代码也会在这些处理程序（handler）之前被执行。\n\n## [微任务队列（Microtask queue）](https://zh.javascript.info/microtask-queue#wei-ren-wu-dui-lie-microtaskqueue)\n\n异步任务需要适当的管理。为此，ECMA 标准规定了一个内部队列 `PromiseJobs`，通常被称为“微任务队列（microtask queue）”（ES8 术语）。\n\n如 [规范](https://tc39.github.io/ecma262/#sec-jobs-and-job-queues) 中所述：\n\n- 队列（queue）是先进先出的：首先进入队列的任务会首先运行。\n- 只有在 JavaScript 引擎中没有其它任务在运行时，才开始执行任务队列中的任务。\n\n当一个 promise 准备就绪时，它的 `.then/catch/finally` 处理程序（handler）就会被放入队列中：但是它们不会立即被执行。当 JavaScript 引擎执行完当前的代码，它会从队列中获取任务并执行它。\n\n如果有一个包含多个 `.then/catch/finally` 的链，那么它们中的每一个都是异步执行的。也就是说，它会首先进入队列，然后在当前代码执行完成并且先前排队的处理程序（handler）都完成时才会被执行。\n\n## [总结](https://zh.javascript.info/microtask-queue#zong-jie)\n\nPromise 处理始终是异步的，因为所有 promise 行为都会通过内部的 “promise jobs” 队列，也被称为“微任务队列”（ES8 术语）。\n\n因此，`.then/catch/finally` 处理程序（handler）总是在当前代码完成后才会被调用。\n\n如果我们需要确保一段代码在 `.then/catch/finally` 之后被执行，我们可以将它添加到链式调用的 `.then` 中。\n\n# Async/await\n\n## [Async function](https://zh.javascript.info/async-await#asyncfunction)\n\nAsync/await 是以更舒适的方式使用 promise 的一种特殊语法，同时它也非常易于理解和使用。\n\n```javascript\nasync function f() {\n  return 1\n}\n```\n\n在函数前面的 “async” 这个单词表达了一个简单的事情：即这个函数总是返回一个 promise。其他值将自动被包装在一个 resolved 的 promise 中。\n\n## [Await](https://zh.javascript.info/async-await#await)\n\n语法如下：\n\n```javascript\n// 只在 async 函数内工作\nlet value = await promise\n```\n\n关键字 `await` 让 JavaScript 引擎等待直到 promise 完成（settle）并返回结果。\n\n# Generator\n\n常规函数只会返回一个单一值（或者不返回任何值）。\n\n而 Generator 可以按需一个接一个地返回（“yield”）多个值。它们可与 [iterable](https://zh.javascript.info/iterable) 完美配合使用，从而可以轻松地创建数据流。\n\n## [Generator 函数](https://zh.javascript.info/generators#generator-han-shu)\n\n要创建一个 generator，我们需要一个特殊的语法结构：`function*`，即所谓的 “generator function”。\n\n像这样：\n\n```javascript\nfunction* generateSequence() {\n  yield 1\n  yield 2\n  return 3\n}\n```\n\n一个 generator 的主要方法就是 `next()`。当被调用时（译注：指 `next()` 方法），它会恢复上图所示的运行，执行直到最近的 `yield <value>` 语句（`value` 可以被省略，默认为 `undefined`）。然后函数执行暂停，并将产出的（yielded）值返回到外部代码。\n\n`next()` 的结果始终是一个具有两个属性的对象：\n\n- `value`: 产出的（yielded）的值。\n- `done`: 如果 generator 函数已执行完成则为 `true`，否则为 `false`。\n\n代码恢复执行并返回下一个 `yield` 的值：\n\n```javascript\nlet two = generator.next()\n\nalert(JSON.stringify(two)) // {value: 2, done: false}\n```\n\n**`function\\* f(…)` 或 `function \\*f(…)`？**\n\n这两种语法都是对的。\n\n但是通常更倾向于第一种语法，因为星号 `*` 表示它是一个 generator 函数，它描述的是函数种类而不是名称，因此 `*` 应该和 `function` 关键字紧贴一起。\n\n## [“yield” 是一条双向路](https://zh.javascript.info/generators#yield-shi-yi-tiao-shuang-xiang-lu)\n\n目前看来，generator 和可迭代对象类似，都具有用来生成值的特殊语法。但实际上，generator 更加强大且灵活。\n\n这是因为 `yield` 是一条双向路（two-way street）：它不仅可以向外返回结果，而且还可以将外部的值传递到 generator 内。\n\n调用 `generator.next(arg)`，我们就能将参数 `arg` 传递到 generator 内部。这个 `arg` 参数会变成 `yield` 的结果。\n\n## [generator.throw](https://zh.javascript.info/generators#generatorthrow)\n\n正如我们在上面的例子中观察到的那样，外部代码可能会将一个值传递到 generator，作为 `yield` 的结果。\n\n……但是它也可以在那里发起（抛出）一个 error。这很自然，因为 error 本身也是一种结果。\n\n要向 `yield` 传递一个 error，我们应该调用 `generator.throw(err)`。在这种情况下，`err` 将被抛到对应的 `yield` 所在的那一行。\n\n## [总结](https://zh.javascript.info/generators#zong-jie)\n\n- Generator 是通过 generator 函数 `function* f(…) {…}` 创建的。\n- 在 generator（仅在）内部，存在 `yield` 操作。\n- 外部代码和 generator 可能会通过 `next/yield` 调用交换结果。\n\n# 异步迭代和 generator\n\n异步迭代允许我们对按需通过异步请求而得到的数据进行迭代。\n\n当值是以异步的形式出现时，例如在 `setTimeout` 或者另一种延迟之后，就需要异步迭代。\n\n最常见的场景是，对象需要发送一个网络请求以传递下一个值，稍后我们将看到一个它的真实示例。\n\n要使对象异步迭代：\n\n1. 使用 `Symbol.asyncIterator` 取代 `Symbol.iterator`。\n2. `next()` 方法应该返回一个 `promise`（带有下一个值，并且状态为 `fulfilled`）。\n   - 关键字 `async` 可以实现这一点，我们可以简单地使用 `async next()`。\n3. 我们应该使用 `for await (let item of iterable)` 循环来迭代这样的对象。\n   - 注意关键字 `await`。\n\n作为开始的示例，让我们创建一个可迭代的 `range` 对象，与前面的那个类似，不过现在它将异步地每秒返回一个值。\n\n我们需要做的就是对上面代码中的部分代码进行替换：\n\n```javascript\nlet range = {\n  from: 1,\n  to: 5,\n\n  [Symbol.asyncIterator]() {\n    // (1)\n    return {\n      current: this.from,\n      last: this.to,\n\n      async next() {\n        // (2)\n\n        // 注意：我们可以在 async next 内部使用 \"await\"\n        await new Promise((resolve) => setTimeout(resolve, 1000)) // (3)\n\n        if (this.current <= this.last) {\n          return { done: false, value: this.current++ }\n        } else {\n          return { done: true }\n        }\n      },\n    }\n  },\n}\n\n;(async () => {\n  for await (let value of range) {\n    // (4)\n    alert(value) // 1,2,3,4,5\n  }\n})()\n```\n\n正如我们所看到的，其结构与常规的 iterator 类似:\n\n1. 为了使一个对象可以异步迭代，它必须具有方法 `Symbol.asyncIterator` `(1)`。\n2. 这个方法必须返回一个带有 `next()` 方法的对象，`next()` 方法会返回一个 promise `(2)`。\n3. 这个 `next()` 方法可以不是 `async` 的，它可以是一个返回值是一个 `promise` 的常规的方法，但是使用 `async` 关键字可以允许我们在方法内部使用 `await`，所以会更加方便。这里我们只是用于延迟 1 秒的操作 `(3)`。\n4. 我们使用 `for await(let value of range)` `(4)` 来进行迭代，也就是在 `for` 后面添加 `await`。它会调用一次 `range[Symbol.asyncIterator]()` 方法一次，然后调用它的 `next()` 方法获取值。\n\n这是一个对比 Iterator 和异步 iterator 之间差异的表格：\n\n|                          | Iterator          | 异步 iterator          |\n| :----------------------- | :---------------- | :--------------------- |\n| 提供 iterator 的对象方法 | `Symbol.iterator` | `Symbol.asyncIterator` |\n| `next()` 返回的值是      | 任意值            | `Promise`              |\n| 要进行循环，使用         | `for..of`         | `for await..of`        |\n\n# 模块 (Module) 简介\n\n社区发明了许多种方法来将代码组织到模块中，使用特殊的库按需加载模块。\n\n列举一些（出于历史原因）：\n\n- [AMD](https://en.wikipedia.org/wiki/Asynchronous_module_definition) —— 最古老的模块系统之一，最初由 [require.js](http://requirejs.org/) 库实现。\n- [CommonJS](http://wiki.commonjs.org/wiki/Modules/1.1) —— 为 Node.js 服务器创建的模块系统。\n- [UMD](https://github.com/umdjs/umd) —— 另外一个模块系统，建议作为通用的模块系统，它与 AMD 和 CommonJS 都兼容。\n\n## [什么是模块？](https://zh.javascript.info/modules-intro#shi-mo-shi-mo-kuai)\n\n一个模块（module）就是一个文件。一个脚本就是一个模块。就这么简单。\n\n模块可以相互加载，并可以使用特殊的指令 `export` 和 `import` 来交换功能，从另一个模块调用一个模块的函数：\n\n- `export` 关键字标记了可以从当前模块外部访问的变量和函数。\n- `import` 关键字允许从其他模块导入功能。\n\n## [模块核心功能](https://zh.javascript.info/modules-intro#mo-kuai-he-xin-gong-neng)\n\n### [始终使用 “use strict”](https://zh.javascript.info/modules-intro#shi-zhong-shi-yong-usestrict)\n\n模块始终默认使用 `use strict`，例如，对一个未声明的变量赋值将产生错误（译注：在浏览器控制台可以看到 error 信息）。\n\n### [模块级作用域](https://zh.javascript.info/modules-intro#mo-kuai-ji-zuo-yong-yu)\n\n每个模块都有自己的顶级作用域（top-level scope）。换句话说，一个模块中的顶级作用域变量和函数在其他脚本中是不可见的。\n\n### [模块代码仅在第一次导入时被解析](https://zh.javascript.info/modules-intro#mo-kuai-dai-ma-jin-zai-di-yi-ci-dao-ru-shi-bei-jie-xi)\n\n如果同一个模块被导入到多个其他位置，那么它的代码仅会在第一次导入时执行，然后将导出（export）的内容提供给所有的导入（importer）。\n\n### [在一个模块中，“this” 是 undefined](https://zh.javascript.info/modules-intro#zai-yi-ge-mo-kuai-zhong-this-shi-undefined)\n\n这是一个小功能，但为了完整性，我们应该提到它。\n\n在一个模块中，顶级 `this` 是 undefined。\n\n### [import.meta](https://zh.javascript.info/modules-intro#importmeta)\n\n`import.meta` 对象包含关于当前模块的信息。\n\n它的内容取决于其所在的环境。在浏览器环境中，它包含当前脚本的 URL，或者如果它是在 HTML 中的话，则包含当前页面的 URL。\n\n### [模块脚本是延迟的](https://zh.javascript.info/modules-intro#mo-kuai-jiao-ben-shi-yan-chi-de)\n\n模块脚本 **总是** 被延迟的，与 `defer` 特性（在 [脚本：async，defer](https://zh.javascript.info/script-async-defer) 一章中描述的）对外部脚本和内联脚本（inline script）的影响相同。\n\n也就是说：\n\n- 下载外部模块脚本 `<script type=\"module\" src=\"...\">` 不会阻塞 HTML 的处理，它们会与其他资源并行加载。\n- 模块脚本会等到 HTML 文档完全准备就绪（即使它们很小并且比 HTML 加载速度更快），然后才会运行。\n- 保持脚本的相对顺序：在文档中排在前面的脚本先执行。\n\n它的一个副作用是，模块脚本总是会“看到”已完全加载的 HTML 页面，包括在它们下方的 HTML 元素。\n\n### [不允许裸模块（“bare” module）](https://zh.javascript.info/modules-intro#bu-yun-xu-luo-mo-kuai-baremodule)\n\n在浏览器中，`import` 必须给出相对或绝对的 URL 路径。没有任何路径的模块被称为“裸（bare）”模块。在 `import` 中不允许这种模块。\n\n### [兼容性，“nomodule”](https://zh.javascript.info/modules-intro#jian-rong-xing-nomodule)\n\n旧时的浏览器不理解 `type=\"module\"`。未知类型的脚本会被忽略。\n\n## [构建工具](https://zh.javascript.info/modules-intro#gou-jian-gong-ju)\n\n在实际开发中，浏览器模块很少被以“原始”形式进行使用。通常，我们会使用一些特殊工具，例如 [Webpack](https://webpack.js.org/)，将它们打包在一起，然后部署到生产环境的服务器。\n\n使用打包工具的一个好处是 —— 它们可以更好地控制模块的解析方式，允许我们使用裸模块和更多的功能，例如 CSS/HTML 模块等。\n\n构建工具做以下这些事儿：\n\n1. 从一个打算放在 HTML 中的 `<script type=\"module\">` “主”模块开始。\n2. 分析它的依赖：它的导入，以及它的导入的导入等。\n3. 使用所有模块构建一个文件（或者多个文件，这是可调的），并用打包函数（bundler function）替代原生的 `import` 调用，以使其正常工作。还支持像 HTML/CSS 模块等“特殊”的模块类型。\n4. 在处理过程中，可能会应用其他转换和优化：\n   - 删除无法访问的代码。\n   - 删除未使用的导出（“tree-shaking”）。\n   - 删除特定于开发的像 `console` 和 `debugger` 这样的语句。\n   - 可以使用 [Babel](https://babeljs.io/) 将前沿的现代的 JavaScript 语法转换为具有类似功能的旧的 JavaScript 语法。\n   - 压缩生成的文件（删除空格，用短的名字替换变量等）。\n\n## [总结](https://zh.javascript.info/modules-intro#zong-jie)\n\n下面总结一下模块的核心概念：\n\n1. 一个模块就是一个文件。浏览器需要使用<script type=\"module\">以使 import/export 可以工作。模块（译注：相较于常规脚本）有几点差别：\n   - 默认是延迟解析的（deferred）。\n   - Async 可用于内联脚本。\n   - 要从另一个源（域/协议/端口）加载外部脚本，需要 CORS header。\n   - 重复的外部脚本会被忽略\n2. 模块具有自己的本地顶级作用域，并可以通过 `import/export` 交换功能。\n3. 模块始终使用 `use strict`。\n4. 模块代码只执行一次。导出仅创建一次，然后会在导入之间共享。\n\n# Proxy 和 Reflect\n\n一个 `Proxy` 对象包装另一个对象并拦截诸如读取/写入属性和其他操作，可以选择自行处理它们，或者透明地允许该对象处理它们。\n\nProxy 被用于了许多库和某些浏览器框架。\n\n## [Proxy](https://zh.javascript.info/proxy#proxy)\n\n语法：\n\n```javascript\nlet proxy = new Proxy(target, handler)\n```\n\n- `target` —— 是要包装的对象，可以是任何东西，包括函数。\n- `handler` —— 代理配置：带有“捕捉器”（“traps”，即拦截操作的方法）的对象。比如 `get` 捕捉器用于读取 `target` 的属性，`set` 捕捉器用于写入 `target` 的属性，等等。\n\n对 `proxy` 进行操作，如果在 `handler` 中存在相应的捕捉器，则它将运行，并且 Proxy 有机会对其进行处理，否则将直接对 target 进行处理。\n\n由于没有捕捉器，所有对 `proxy` 的操作都直接转发给了 `target`。\n\n1. 写入操作 `proxy.test=` 会将值写入 `target`。\n2. 读取操作 `proxy.test` 会从 `target` 返回对应的值。\n3. 迭代 `proxy` 会从 `target` 返回对应的值。\n\n## [带有 “get” 捕捉器的默认值](https://zh.javascript.info/proxy#dai-you-get-bu-zhuo-qi-de-mo-ren-zhi)\n\n最常见的捕捉器是用于读取/写入的属性。\n\n要拦截读取操作，`handler` 应该有 `get(target, property, receiver)` 方法。\n\n读取属性时触发该方法，参数如下：\n\n- `target` —— 是目标对象，该对象被作为第一个参数传递给 `new Proxy`，\n- `property` —— 目标属性名，\n- `receiver` —— 如果目标属性是一个 getter 访问器属性，则 `receiver` 就是本次读取属性所在的 `this` 对象。通常，这就是 `proxy` 对象本身（或者，如果我们从 proxy 继承，则是从该 proxy 继承的对象）。现在我们不需要此参数，因此稍后我们将对其进行详细介绍。\n\n## [使用 “set” 捕捉器进行验证](https://zh.javascript.info/proxy#shi-yong-set-bu-zhuo-qi-jin-hang-yan-zheng)\n\n假设我们想要一个专门用于数字的数组。如果添加了其他类型的值，则应该抛出一个错误。\n\n当写入属性时 `set` 捕捉器被触发。\n\n`set(target, property, value, receiver)`：\n\n- `target` —— 是目标对象，该对象被作为第一个参数传递给 `new Proxy`，\n- `property` —— 目标属性名称，\n- `value` —— 目标属性的值，\n- `receiver` —— 与 `get` 捕捉器类似，仅与 setter 访问器属性相关。\n\n如果写入操作（setting）成功，`set` 捕捉器应该返回 `true`，否则返回 `false`（触发 `TypeError`）。\n\n## [使用 “ownKeys” 和 “getOwnPropertyDescriptor” 进行迭代](https://zh.javascript.info/proxy#shi-yong-ownkeys-he-getownpropertydescriptor-jin-hang-die-dai)\n\n`Object.keys`，`for..in` 循环和大多数其他遍历对象属性的方法都使用内部方法 `[[OwnPropertyKeys]]`（由 `ownKeys` 捕捉器拦截) 来获取属性列表。\n\n这些方法在细节上有所不同：\n\n- `Object.getOwnPropertyNames(obj)` 返回非 Symbol 键。\n- `Object.getOwnPropertySymbols(obj)` 返回 Symbol 键。\n- `Object.keys/values()` 返回带有 `enumerable` 标志的非 Symbol 键/值（属性标志在 [属性标志和属性描述符](https://zh.javascript.info/property-descriptors) 一章有详细讲解)。\n- `for..in` 循环遍历所有带有 `enumerable` 标志的非 Symbol 键，以及原型对象的键。\n","source":"_posts/javaScript学习笔记.md","raw":"---\ntitle: javaScript学习笔记\ndate: 2021-02-06 16:50\ndesecription: javaScript学习笔记\ntags:\n  - 'JavaScript'\n---\n\n# javascript\n\n## 对象引用和复制\n\n与原始类型相比，对象的根本区别之一是对象是“通过引用”被存储和复制的，与原始类型值相反：字符串，数字，布尔值等 —— 始终是以“整体值”的形式被复制的。\n\n<!--more-->\n\n### 克隆与合并，Object.assign\n\nObject.assign(dest, [src1, src2, src3...])\n\n- 第一个参数 dest 是指目标对象。\n- 更后面的参数 src1, ..., srcN（可按需传递多个参数）是源对象。\n- 该方法将所有源对象的属性拷贝到目标对象 dest 中。换句话说，从第二个开始的所有参数的属性都被拷贝到第一个参数的对象中。\n- 调用结果返回 dest。\n- 可以用它来合并多个对象\n\n​ 对象方法,\"this\"\n\n- 对象方法的调用时基于“引用类型”的调用\n\n### Symbol 类型\n\n      1. 防止自己在对象中写的属性被其他人篡改，隐藏该属性\n      2. 用for..in.., Object.keys(obj)访问不到，但是使用Object.assign是可以复制过来的\n\n## 对象\n\n      1. 对象是具有一些特殊特性的关联数组。\n      2. 它们存储属性（键值对），其中：\n           1. 属性的键必须是字符串或者 symbol（通常是字符串）。\n           2. 值可以是任何类型。\n      3. 下面的方法访问属性\n           1. 点符号: obj.property。\n           2. 方括号 obj[\"property\"]，方括号允许从变量中获取键，例如 obj[varWithKey]。\n      4. 其他操作：\n           1. 删除属性：delete obj.prop。\n           2. 检查是否存在给定键的属性：\"key\" in obj。\n           3. 遍历对象：for(let key in obj) 循环。\n\n### 原始类型的方法\n\n- 基本类型不是对象。\n- 基本类型不能存储数据。\n- 所有的属性/方法操作都是在临时对象的帮助下执行的。\n\n### 数字类型\n\n​ parseInt(str, radix)` 的第二个参数\n\n- parseInt() 函数具有可选的第二个参数。它指定了数字系统的基数，因此 parseInt 还可以解析十六进制数字、二进制数字等的字符串：\n- alert( parseInt('0xff', 16) ); // 255\n- alert( parseInt('ff', 16) ); // 255，没有 0x 仍然有效\n- alert( parseInt('2n9c', 36) ); // 123456\n\n​ prompt\n\n- 注意在 prompt 前面的一元加号 +。它将立即把值转换成数字。\n- 否则，a 和 b 将会是字符串，它们的总和将是它们的连接，即：\"1\" + \"2\" = \"12\"。\n\n## 字符串\n\n### str\n\n### 1. str.indexOf(substr, pos)。\n\n​ 1. 它从给定位置 pos 开始，在 str 中查找 substr，如果没有找到，则返回 -1，否则返回匹配成功的位置。\n​ 2. 还有一个类似的方法 str.lastIndexOf(substr, position)，它从字符串的末尾开始搜索到开头。\n\n### 2. 按位（bitwise）NOT 技巧\n\n​ 1. 它将数字转换为 32-bit 整数（如果存在小数部分，则删除小数部分），然后对其二进制表示形式中的所有位均取反。\n\n### 3. 获取子字符串\n\n     1.  JavaScript 中有三种获取字符串的方法：substring、substr 和 slice。\n                 1.  str.slice(start [, end])，返回字符串从 start 到（但不包括）end 的部分。\n                 2.  如果没有第二个参数，slice 会一直运行到字符串末尾：\n                        1.  let str = \"stringify\";\n                                   alert( str.slice(0, 5) ); // 'strin'，从 0 到 5 的子字符串（不包括 5）\n                                   alert( str.slice(0, 1) ); // 's'，从 0 到 1，但不包括 1，所以只有在 0 处的字符\n                                   let str = \"stringify\";\n                                   alert( str.slice(2) ); // 从第二个位置直到结束\n                           2.  str.substring(start [, end])返回字符串在 start 和 end 之间 的部分。这与 slice 几乎相同，但它允许 start 大于 end。\n                                   et str = \"stringify\";\n                                          // 这些对于 substring 是相同的\n                                          alert( str.substring(2, 6) ); // \"ring\"\n                                          alert( str.substring(6, 2) ); // \"ring\"\n                                          // ……但对 slice 是不同的：\n                                          alert( str.slice(2, 6) ); // \"ring\"（一样）\n                                          alert( str.slice(6, 2) ); // \"\"（空字符串）\n               3.  str.substr(start [, length]) 返回字符串从 start 开始的给定 length 的部分。与以前的方法相比，这个允许我们指定 length 而不是结束位置：\n                       . let str = \"stringify\";\n                              alert( str.substr(2, 4) ); // 'ring'，从位置 2 开始，获取 4 个字符\n                              2. 第一个参数可能是负数，从结尾算起：\n                                     let str = \"stringify\";\n                                     alert( str.substr(-4, 2) ); // 'gi'，从第 4 位获取 2 个字符\n\n​ 方法 选择方式…… 负值参数  \n​ - slice(start, end) 从 start 到 end（不含 end） 允许\n​ - substring(start, end) start 与 end 之间（包括 start，但不包括 end） 负值代表 0\n​ - substr(start, length) 从 start 开始获取长为 length 的字符串 允许 start 为负数\n\n​\n\n## 数组\n\n- 数组, 声明, pop/push, shift/unshift 方法, 内部, 性能, 循环, 关于 “length”, new Array(), 多维数组, toString, 不要使用 == 比较数组\n\n​ Iterable object（可迭代对象）\n\n- 可迭代（Iterable） 对象是数组的泛化。这个概念是说任何对象都可以被定制为可在 for..of 循环中使用的对象。\n\n## Map and Set（映射和集合）\n\n### Map\n\n- Map 是一个带键的数据项的集合，就像一个 Object 一样。 但是它们最大的差别是 Map 允许任何类型的键（key）。\n\n它的方法和属性如下：\n\n- new Map() —— 创建 map。\n- map.set(key, value) —— 根据键存储值。\n- map.get(key) —— 根据键来返回值，如果 map 中不存在对应的 key，则返回 undefined。\n- map.has(key) —— 如果 key 存在则返回 true，否则返回 false。\n- map.delete(key) —— 删除指定键的值。\n- map.clear() —— 清空 map。\n- map.size —— 返回当前元素个数。\n\n### Map 迭代\n\n如果要在 map 里使用循环，可以使用以下三个方法：\n\n- map.keys() —— 遍历并返回所有的键（returns an iterable for keys），\n- map.values() —— 遍历并返回所有的值（returns an iterable for values），\n- map.entries() —— 遍历并返回所有的实体（returns an iterable for entries）[key, value]，for..of 在默认情况下使用的就是这个。\n\n### Object.entries：从对象创建 Map\n\n如果我们想从一个已有的普通对象（plain object）来创建一个 Map，那么我们可以使用内建方法 Object.entries(obj)，该返回对象的键/值对数组，该数组格式完全按照 Map 所需的格式。\n\n### Object.fromEntries：从 Map 创建对象\n\nObject.fromEntries 方法的作用是相反的：给定一个具有 [key, value] 键值对的数组，它会根据给定数组创建一个对象：\n\n## Set\n\nSet 是一个特殊的类型集合 —— “值的集合”（没有键），它的每一个值只能出现一次。\n\n它的主要方法如下：\n\n- new Set(iterable) —— 创建一个 set，如果提供了一个 iterable 对象（通常是数组），将会从数组里面复制值到 set 中。\n- set.add(value) —— 添加一个值，返回 set 本身\n- set.delete(value) —— 删除值，如果 value 在这个方法调用的时候存在则返回 true ，否则返回 false。\n- set.has(value) —— 如果 value 在 set 中，返回 true，否则返回 false。\n- set.clear() —— 清空 set。\n- set.size —— 返回元素个数。\n\nMap 中用于迭代的方法在 Set 中也同样支持：\n\n- set.keys() —— 遍历并返回所有的值（returns an iterable object for values），\n- set.values() —— 与 set.keys() 作用相同，这是为了兼容 Map，\n- set.entries() —— 遍历并返回所有的实体（returns an iterable object for entries）[value, value]，它的存在也是为了兼容 Map。\n\n## 解构赋值\n\n解构赋值 是一种特殊的语法，它使我们可以将数组或对象“拆包”为到一系列变量中，因为有时候使用变量更加方便。解构操作对那些具有很多参数和默认值等的函数也很奏效。\n解构赋值, 数组解构, 对象解构, 嵌套解构, 智能函数参数\n\n- 解构赋值可以立即将一个对象或数组映射到多个变量上。\n- 解构对象的完整语法：\n  - let {prop : varName = default, ...rest} = object\n  - 这表示属性 prop 会被赋值给变量 varName，如果没有这个属性的话，就会使用默认值 default。\n  - 没有对应映射的对象属性会被复制到 rest 对象。\n- 解构数组的完整语法：\n  - let [item1 = default, item2, ...rest] = array\n  - 数组的第一个元素被赋值给 item1，第二个元素被赋值给 item2，剩下的所有元素被复制到另一个数组 rest。\n- 从嵌套数组/对象中提取数据也是可以的，此时等号左侧必须和等号右侧有相同的结构。\n\n## 日期和时间\n\n该对象存储日期和时间，并提供了日期/时间的管理方法。\n例如，我们可以使用它来存储创建/修改时间，或者用来测量时间，再或者仅用来打印当前时间。\n\n### 创建\n\n创建一个新的 Date 对象，只需要调用 new Date()，在调用时可以带有下面这些参数之一：\n\n- new Date()\n\n  - 不带参数 —— 创建一个表示当前日期和时间的 Date 对象：\n    - let now = new Date();\n\n- new Date(milliseconds)\n  - 创建一个 Date 对象，其时间等于 1970-01-01 00:00:00 UTC+0 再过一毫秒（1/1000 秒）。\n  - 传入的整数参数代表的是自 1970-01-01 00:00:00 以来经过的毫秒数，该整数被称为 时间戳。\n  - 这是一种日期的轻量级数字表示形式。我们通常使用 new Date(timestamp) 通过时间戳来创建日期，并可以使用 date.getTime() 将现有的 Date 对象转化为时间戳。\n- new Date(datestring)\n  - 如果只有一个参数，并且是字符串，那么它会被自动解析。该算法与 Date.parse 所使用的算法相同\n- new Date(year, month, date, hours, minutes, seconds, ms)\n  - 使用当前时区中的给定组件创建日期。只有前两个参数是必须的。\n  - 自动校准（Autocorrection）\n\n自动校准 是 Date 对象的一个非常方便的特性。我们可以设置超范围的数值，它会自动校准。\n超出范围的日期组件将会被自动分配。\n\n## JSON 方法，toJSON\n\n假设我们有一个复杂的对象，我们希望将其转换为字符串，以通过网络发送，或者只是为了在日志中输出它。\n\n当然，这样的字符串应该包含所有重要的属性。\n\n### JSON.stringify\n\nJSON（JavaScript Object Notation）是表示值和对象的通用格式。在 RFC 4627 标准中有对其的描述。最初它是为 JavaScript 而创建的，但许多其他编程语言也有用于处理它的库。因此，当客户端使用 JavaScript 而服务器端是使用 Ruby/PHP/Java 等语言编写的时，使用 JSON 可以很容易地进行数据交换。\n\nJavaScript 提供了如下方法：\n\n- JSON.stringify 将对象转换为 JSON。\n- JSON.parse 将 JSON 转换回对象。\n\n方法 JSON.stringify(student) 接收对象并将其转换为字符串。\n得到的 json 字符串是一个被称为 JSON 编码（JSON-encoded） 或 序列化（serialized） 或 字符串化（stringified） 或 编组化（marshalled） 的对象。\n\n请注意，JSON 编码的对象与对象字面量有几个重要的区别：:\n\n- 字符串使用双引号。JSON 中没有单引号或反引号。所以 'John' 被转换为 \"John\"。\n- 对象属性名称也是双引号的。这是强制性的。所以 age:30 被转换成 \"age\":30。\n\nJSON.stringify 也可以应用于原始（primitive）数据类型。\nJSON 支持以下数据类型：\n\n- Objects { ... }\n- Arrays [ ... ]\n- Primitives：\n  - strings，\n  - numbers，\n  - boolean values true/false，\n  - null。\n\nJSON 是语言无关的纯数据规范，因此一些特定于 JavaScript 的对象属性会被 JSON.stringify 跳过。\n即：\n\n- 函数属性（方法）。\n- Symbol 类型的属性。\n- 存储 undefined 的属性。\n\n​ 排除和转换：replacer\n\nJSON.stringify 的完整语法是：\nlet json = JSON.stringify(value, [replacer, space])  \n value\n要编码的值。\nreplacer\n要编码的属性数组或映射函数 function(key, value)。\nspace\n用于格式化的空格数量\n\n## Rest 参数与 Spread 语法\n\n在 JavaScript 中，很多内建函数都支持传入任意数量的参数。\n例如：\n\n- Math.max(arg1, arg2, ..., argN) —— 返回入参中的最大值。\n- Object.assign(dest, src1, ..., srcN) —— 依次将属性从 src1..N 复制到 dest。\n\n### Rest 参数 ...\n\n在 JavaScript 中，无论函数是如何定义的，你都可以使用任意数量的参数调用函数。\nRest 参数可以通过使用三个点 ... 并在后面跟着包含剩余参数的数组名称，来将它们包含在函数定义中。这些点的字面意思是“将剩余参数收集到一个数组中”。\nRest 参数必须放到参数列表的末尾\nRest 参数会收集剩余的所有参数，因此下面这种用法没有意义，并且会导致错误：\nfunction f(arg1, ...rest, arg2) { // arg2 在 ...rest 后面？！\n// error\n}\n...rest 必须处在最后。\n\n​ “arguments” 变量\n\n有一个名为 arguments 的特殊的类数组对象，该对象按参数索引包含所有参数。\n\n在过去，JavaScript 中没有 rest 参数，而使用 arguments 是获取函数所有参数的唯一方法。现在它仍然有效，我们可以在一些老代码里找到它。\n\n但缺点是，尽管 arguments 是一个类数组，也是可迭代对象，但它终究不是数组。它不支持数组方法，因此我们不能调用 arguments.map(...) 等方法。\n\n此外，它始终包含所有参数，我们不能像使用 rest 参数那样只截取入参的一部分。\n\n因此，当我们需要这些功能时，最好使用 rest 参数。\n\n### Spread 语法\n\n在脚本执行时，可能参数数组中有很多个元素，也可能一个都没有。并且这样设置的代码也很丑。\nSpread 语法 来帮助你了！它看起来和 rest 参数很像，也使用 ...，但是二者的用途完全相反。\n当在函数调用中使用 ...arr 时，它会把可迭代对象 arr “展开”到参数列表中。\n\n以 Math.max 为例：\n\n      1. - let arr = [3, 5, 1];\n      2. - alert( Math.max(...arr) ); // 5（spread 语法把数组转换为参数列表）\n\n我们还可以通过这种方式传递多个可迭代对象：\n\n      1. let arr1 = [1, -2, 3, 4];\n      2. let arr2 = [8, 3, -8, 1];\n      3.\n      4. alert( Math.max(...arr1, ...arr2) ); // 8\n\n我们甚至还可以将 spread 语法与常规值结合使用：\n\n      1. let arr1 = [1, -2, 3, 4];\n      2. let arr2 = [8, 3, -8, 1];\n      3.\n      4. alert( Math.max(1, ...arr1, 2, ...arr2, 25) ); // 25\n\n并且，我们还可以使用 spread 语法来合并数组：\n\n      1. let arr = [3, 5, 1];\n      2. let arr2 = [8, 9, 15];\n      3.\n      4. let merged = [0, ...arr, 2, ...arr2];\n      5.\n      6. alert(merged); // 0,3,5,1,2,8,9,15（0，然后是 arr，然后是 2，然后是 arr2）\n\n在上面的示例中，我们使用数组展示了 spread 语法，其实任何可迭代对象都可以。\n\n例如，在这儿我们使用 spread 语法将字符串转换为字符数组：\n\n- let str = \"Hello\";\n- alert( [...str] ); // H,e,l,l,o\n  Spread 语法内部使用了迭代器来收集元素，与 for..of 的方式相同\n\n不过 Array.from(obj) 和 [...obj] 存在一个细微的差别：\n\n- Array.from 适用于类数组对象也适用于可迭代对象。\n- Spread 语法只适用于可迭代对象。\n  因此，对于将一些“东西”转换为数组的任务，Array.from 往往更通用。\n\n​ 总结  \n 当我们在代码中看到 \"...\" 时，它要么是 rest 参数，要么就是 spread 语法。\n\n有一个简单的方法可以区分它们：\n\n- 若 ... 出现在函数参数列表的最后，那么它就是 rest 参数，它会把参数列表中剩余的参数收集到一个数组中。\n- 若 ... 出现在函数调用或类似的表达式中，那它就是 spread 语法，它会把一个数组展开为列表。\n- 使用场景：\n\n- Rest 参数用于创建可接受任意数量参数的函数。\n- Spread 语法用于将数组传递给通常需要含有许多参数的列表的函数。\n  它们俩的出现帮助我们轻松地在列表和参数数组之间来回转换。\n\n“旧式”的 arguments（类数组且可迭代的对象）也依然能够帮助我们获取函数调用中的所有参数。\n\n## 变量作用域，闭包\n\n### Step 1. 变量\n\n在 JavaScript 中，每个运行的函数，代码块 {...} 以及整个脚本，都有一个被称为 词法环境（Lexical Environment） 的内部（隐藏）的关联对象。\n\n词法环境对象由两部分组成：\n\n      1. 环境记录（Environment Record） —— 一个存储所有局部变量作为其属性（包括一些其他信息，例如 this 的值）的对象。\n      2. 对 外部词法环境 的引用，与外部代码相关联。\n\n一个“变量”只是 环境记录 这个特殊的内部对象的一个属性。“获取或修改变量”意味着“获取或修改词法环境的一个属性”。\n\n- 变量是特殊内部对象的属性，与当前正在执行的（代码）块/函数/脚本有关。\n- 操作变量实际上是操作该对象的属性。\n\n### Step 2. 函数声明\n\n一个函数其实也是一个值，就像变量一样。\n\n**\\* \\*不同之处在于函数声明的初始化会被立即完成。 \\*\\***\n\n当创建了一个词法环境（Lexical Environment）时，函数声明会立即变为即用型函数（不像 let 那样直到声明处才可用）。\n\n### Step 3. 内部和外部的词法环境\n\n在一个函数运行时，在调用刚开始时，会自动创建一个新的词法环境以存储这个调用的局部变量和参数。\n\n**\\* \\*当代码要访问一个变量时 —— 首先会搜索内部词法环境，然后搜索外部环境，然后搜索更外部的环境，以此类推，直到全局词法环境。 \\*\\***\n\n如果在任何地方都找不到这个变量，那么在严格模式下就会报错（在非严格模式下，为了向下兼容，给未定义的变量赋值会创建一个全局变量）。\n\n### Step 4. 返回函数\n\n所有的函数在“诞生”时都会记住创建它们的词法环境。从技术上讲，这里没有什么魔法：所有函数都有名为 [[Environment]] 的隐藏属性，该属性保存了对创建该函数的词法环境的引用。\n\n### **闭包**\n\n开发者通常应该都知道“闭包”这个通用的编程术语。\n\n[闭包](<https://en.wikipedia.org/wiki/Closure_(computer_programming)>) 是指内部函数总是可以访问其所在的外部函数中声明的变量和参数，即使在其外部函数被返回（寿命终结）了之后。\n\n也就是说：JavaScript 中的函数会自动通过隐藏的 `[[Environment]]` 属性记住创建它们的位置，所以它们都可以访问外部变量。\n\n在面试时，前端开发者通常会被问到“什么是闭包？”，正确的回答应该是闭包的定义，并解释清楚为什么 JavaScript 中的所有函数都是闭包的，以及可能的关于 `[[Environment]]` 属性和词法环境原理的技术细节。\n\n### **垃圾收集**\n\n通常，函数调用完成后，会将词法环境和其中的所有变量从内存中删除。因为现在没有任何对它们的引用了。与 JavaScript 中的任何其他对象一样，词法环境仅在可达时才会被保留在内存中。\n\n但是，如果有一个嵌套的函数在函数结束后仍可达，则它将具有引用词法环境的 `[[Environment]]` 属性。\n\n### 实际开发中的优化\n\n正如我们所看到的，理论上当函数可达时，它外部的所有变量也都将存在。\n\n但在实际中，JavaScript 引擎会试图优化它。它们会分析变量的使用情况，如果从代码中可以明显看出有未使用的外部变量，那么就会将其删除。\n\n**在 V8（Chrome，Edge，Opera）中的一个重要的副作用是，此类变量在调试中将不可用。**\n\n# 函数对象, NFE\n\n在 JavaScript 中，函数就是对象。\n\n## 属性 “name”\n\n函数对象包含一些便于使用的属性。\n\n1. 一个函数的名字可以通过属性 “name” 来访问。\n\n2. 名称赋值的逻辑很智能。即使函数被创建时没有名字，名称赋值的逻辑也能给它赋予一个正确的名字，然后进行赋值。\n\n3. 以默认值的方式完成了赋值时，它也有效。\n\n4. 如果函数自己没有提供，那么在赋值中，会根据上下文来推测一个。\n\n   对象方法也有名字，\n\n## 属性 “length”\n\n内置属性 “length”，它返回函数入参的个数\n\n属性 `length` 有时在操作其它函数的函数中用于做 [内省/运行时检查（introspection）](<https://zh.wikipedia.org/wiki/内省_(计算机科学)>)。\n\n## 自定义属性\n\n**属性不是变量**\n\n被赋值给函数的属性，比如 `sayHi.counter = 0`，**不会** 在函数内定义一个局部变量 `counter`。换句话说，属性 `counter` 和变量 `let counter` 是毫不相关的两个东西。\n\n我们可以把函数当作对象，在它里面存储属性，但是这对它的执行没有任何影响。变量不是函数属性，反之亦然。它们之间是平行的。\n\n## 命名函数表达式\n\n命名函数表达式（NFE，Named Function Expression），指带有名字的函数表达式的术语。\n\n```\nlet sayHi = function func(who) {\n  alert(`Hello, ${who}`);\n};\n\nsayHi(\"John\"); // Hello, John\n```\n\n关于名字 `func` 有两个特殊的地方，这就是添加它的原因：\n\n1. 它允许函数在内部引用自己。\n2. 它在函数外是不可见的。\n\n下面的函数 `sayHi` 会在没有入参 `who` 时，以 `\"Guest\"` 为入参调用自己：\n\n```javascript\nlet sayHi = function func(who) {\n  if (who) {\n    alert(`Hello, ${who}`)\n  } else {\n    func('Guest') // 使用 func 再次调用函数自身\n  }\n}\nsayHi() // Hello, Guest\n// 但这不工作：\nfunc() // Error, func is not defined（在函数外不可见）\n```\n\n## 问题（待解决）\n\n### [任意数量的括号求和](https://zh.javascript.info/function-object#ren-yi-shu-liang-de-kuo-hao-qiu-he)\n\n重要程度: 2\n\n写一个函数 `sum`，它有这样的功能：\n\n```javascript\nsum(1)(2) == 3 // 1 + 2\nsum(1)(2)(3) == 6 // 1 + 2 + 3\nsum(5)(-1)(2) == 6\nsum(6)(-1)(-2)(-3) == 0\nsum(0)(1)(2)(3)(4)(5) == 15\n```\n\nP.S. 提示：你可能需要创建自定义对象来为你的函数提供基本类型转换。\n\n## [总结](https://zh.javascript.info/function-object#zong-jie)\n\n函数就是对象。\n\n它们的一些属性：\n\n- `name` —— 函数的名字。通常取自函数定义，但如果函数定义时没设定函数名，JavaScript 会尝试通过函数的上下文猜一个函数名（例如把赋值的变量名取为函数名）。\n- `length` —— 函数定义时的入参的个数。Rest 参数不参与计数。\n\n# 调度：setTimeout 和 setInterval\n\n有时我们并不想立即执行一个函数，而是等待特定一段时间之后再执行。这就是所谓的“计划调用（scheduling a call）”。\n\n目前有两种方式可以实现：\n\n- `setTimeout` 允许我们将函数推迟到一段时间间隔之后再执行。\n- `setInterval` 允许我们重复运行一个函数，从一段时间间隔之后开始运行，之后以该时间间隔连续重复运行该函数。\n\n这两个方法并不在 JavaScript 的规范中。但是大多数运行环境都有内建的调度程序，并且提供了这些方法。目前来讲，所有浏览器以及 Node.js 都支持这两个方法。\n\n## setTimeout\n\n语法：\n\n```javascript\nlet timerId = setTimeout(func|code, [delay], [arg1], [arg2], ...)\n```\n\n参数说明：\n\n- `func|code`\n\n  想要执行的函数或代码字符串。 一般传入的都是函数。由于某些历史原因，支持传入代码字符串，但是不建议这样做。\n\n- `delay`\n\n  执行前的延时，以毫秒为单位（1000 毫秒 = 1 秒），默认值是 0；\n\n- `arg1`，`arg2`…\n\n  要传入被执行函数（或代码字符串）的参数列表（IE9 以下不支持）\n\n## [嵌套的 setTimeout](https://zh.javascript.info/settimeout-setinterval#qian-tao-de-settimeout)\n\n周期性调度有两种方式。\n\n一种是使用 `setInterval`，另外一种就是嵌套的 `setTimeout`，就像这样：\n\n```javascript\n/** instead of:\nlet timerId = setInterval(() => alert('tick'), 2000);\n*/\n\nlet timerId = setTimeout(function tick() {\n  alert('tick')\n  timerId = setTimeout(tick, 2000) // (*)\n}, 2000)\n```\n\n上面这个 `setTimeout` 在当前这一次函数执行完时 `(*)` 立即调度下一次调用。\n\n嵌套的 `setTimeout` 要比 `setInterval` 灵活得多。采用这种方式可以根据当前执行结果来调度下一次调用，因此下一次调用可以与当前这一次不同。\n\n**传入一个函数，但不要执行它**\n\n新手开发者有时候会误将一对括号 `()` 加在函数后面：\n\n```javascript\n// 错的！\nsetTimeout(sayHi(), 1000)\n```\n\n这样不行，因为 `setTimeout` 期望得到一个对函数的引用。而这里的 `sayHi()` 很明显是在执行函数，所以实际上传入 `setTimeout` 的是 **函数的执行结果**。在这个例子中，`sayHi()` 的执行结果是 `undefined`（也就是说函数没有返回任何结果），所以实际上什么也没有调度。\n\n### [用 clearTimeout 来取消调度](https://zh.javascript.info/settimeout-setinterval#yong-cleartimeout-lai-qu-xiao-tiao-du)\n\n`setTimeout` 在调用时会返回一个“定时器标识符（timer identifier）”，在我们的例子中是 `timerId`，我们可以使用它来取消执行。\n\n取消调度的语法：\n\n```javascript\nlet timerId = setTimeout(...);\nclearTimeout(timerId);\n```\n\n## [setInterval](https://zh.javascript.info/settimeout-setinterval#setinterval)\n\n`setInterval` 方法和 `setTimeout` 的语法相同：\n\n```javascript\nlet timerId = setInterval(func|code, [delay], [arg1], [arg2], ...)\n```\n\n所有参数的意义也是相同的。不过与 `setTimeout` 只执行一次不同，`setInterval` 是每间隔给定的时间周期性执行。\n\n想要阻止后续调用，我们需要调用 `clearInterval(timerId)`。\n\n**alert 弹窗显示的时候计时器依然在进行计时**\n\n在大多数浏览器中，包括 Chrome 和 Firefox，在显示 `alert/confirm/prompt` 弹窗时，内部的定时器仍旧会继续“嘀嗒”。\n\n所以，在运行上面的代码时，如果在一定时间内没有关掉 `alert` 弹窗，那么在你关闭弹窗后，下一个 `alert` 会立即显示。两次 `alert` 之间的时间间隔将小于 2 秒。\n\n**嵌套的 `setTimeout` 能够精确地设置两次执行之间的延时，而 `setInterval` 却不能。**\n\n## [零延时的 setTimeout](https://zh.javascript.info/settimeout-setinterval#ling-yan-shi-de-settimeout)\n\n这儿有一种特殊的用法：`setTimeout(func, 0)`，或者仅仅是 `setTimeout(func)`。\n\n这样调度可以让 `func` 尽快执行。但是只有在当前正在执行的脚本执行完成后，调度程序才会调用它。\n\n也就是说，该函数被调度在当前脚本执行完成“之后”立即执行。\n\n例如，下面这段代码会先输出 “Hello”，然后立即输出 “World”：\n\n```javascript\nsetTimeout(() => alert('World'))\n\nalert('Hello')\n```\n\n第一行代码“将调用安排到日程（calendar）0 毫秒处”。但是调度程序只有在当前脚本执行完毕时才会去“检查日程”，所以先输出 `\"Hello\"`，然后才输出 `\"World\"`。\n\n**零延时实际上不为零（在浏览器中）**\n\n## [总结](https://zh.javascript.info/settimeout-setinterval#zong-jie)\n\n- `setTimeout(func, delay, ...args)` 和 `setInterval(func, delay, ...args)` 方法允许我们在 `delay` 毫秒之后运行 `func` 一次或以 `delay` 毫秒为时间间隔周期性运行 `func`。\n- 要取消函数的执行，我们应该调用 `clearInterval/clearTimeout`，并将 `setInterval/setTimeout` 返回的值作为入参传入。\n- 嵌套的 `setTimeout` 比 `setInterval` 用起来更加灵活，允许我们更精确地设置两次执行之间的时间。\n- 零延时调度 `setTimeout(func, 0)`（与 `setTimeout(func)` 相同）用来调度需要尽快执行的调用，但是会在当前脚本执行完成后进行调用。\n- 浏览器会将 `setTimeout` 或 `setInterval` 的五层或更多层嵌套调用（调用五次之后）的最小延时限制在 4ms。这是历史遗留问题。\n\n# 函数绑定\n\n当将对象方法作为回调进行传递，例如传递给 `setTimeout`，这儿会存在一个常见的问题：“丢失 `this`”。\n\n## [丢失 “this”](https://zh.javascript.info/bind#diu-shi-this)\n\n下面是使用 `setTimeout` 时 `this` 是如何丢失的：\n\n```javascript\nlet user = {\n  firstName: 'John',\n  sayHi() {\n    alert(`Hello, ${this.firstName}!`)\n  },\n}\n\nsetTimeout(user.sayHi, 1000) // Hello, undefined!\n```\n\n## [解决方案 1：包装器](https://zh.javascript.info/bind#jie-jue-fang-an-1-bao-zhuang-qi)\n\n最简单的解决方案是使用一个包装函数：\n\n```javascript\nlet user = {\n  firstName: 'John',\n  sayHi() {\n    alert(`Hello, ${this.firstName}!`)\n  },\n}\n\nsetTimeout(function () {\n  user.sayHi() // Hello, John!\n}, 1000)\n```\n\n现在它可以正常工作了，因为它从外部词法环境中获取到了 `user`，就可以正常地调用方法了。\n\n## [解决方案 2：bind](https://zh.javascript.info/bind#jie-jue-fang-an-2-bind)\n\n函数提供了一个内建方法 [bind](https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)，它可以绑定 `this`。\n\n基本的语法是：\n\n```javascript\n// 稍后将会有更复杂的语法\nlet boundFunc = func.bind(context)\n```\n\n`func.bind(context)` 的结果是一个特殊的类似于函数的“外来对象（exotic object）”，它可以像函数一样被调用，并且透明地（transparently）将调用传递给 `func` 并设定 `this=context`。\n\n`boundFunc` 调用就像绑定了 `this` 的 `func`。\n\n## [在没有上下文情况下的 partial](https://zh.javascript.info/bind#zai-mei-you-shang-xia-wen-qing-kuang-xia-de-partial)\n\n当我们想绑定一些参数（arguments），但是这里没有上下文 `this`，应该怎么办？例如，对于一个对象方法。\n\n原生的 `bind` 不允许这种情况。我们不可以省略上下文直接跳到参数（arguments）。\n\n`partial(func[, arg1, arg2...])` 调用的结果是一个包装器 `(*)`，它调用 `func` 并具有以下内容：\n\n- 与它获得的函数具有相同的 `this`（对于 `user.sayNow` 调用来说，它是 `user`）\n- 然后给它 `...argsBound` —— 来自于 `partial` 调用的参数（`\"10:00\"`）\n- 然后给它 `...args` —— 给包装器的参数（`\"Hello\"`）\n\n## [总结](https://zh.javascript.info/bind#zong-jie)\n\n方法 `func.bind(context, ...args)` 返回函数 `func` 的“绑定的（bound）变体”，它绑定了上下文 `this` 和第一个参数（如果给定了）。\n\n通常我们应用 `bind` 来绑定对象方法的 `this`，这样我们就可以把它们传递到其他地方使用。例如，传递给 `setTimeout`。\n\n当我们绑定一个现有的函数的某些参数时，绑定后的（不太通用的）函数被称为 **partially applied** 或 **partial**。\n\n当我们不想一遍又一遍地重复相同的参数时，partial 非常有用。就像我们有一个 `send(from, to)` 函数，并且对于我们的任务来说，`from` 应该总是一样的，那么我们就可以搞一个 partial 并使用它。\n\n# 深入理解箭头函数\n\n让我们深入研究一下箭头函数。\n\n箭头函数不仅仅是编写简洁代码的“捷径”。它还具有非常特殊且有用的特性。\n\nJavaScript 充满了我们需要编写在其他地方执行的小函数的情况。\n\n```javascript\nlet sum = (a, b) => a + b\n\n/* 这个箭头函数是下面这个函数的更短的版本：\n\nlet sum = function(a, b) {\n  return a + b;\n};\n*/\n\nalert(sum(1, 2)) // 3\n```\n\n- 如果我们只有一个参数，还可以省略掉参数外的圆括号，使代码更短。\n- 如果没有参数，括号将是空的（但括号应该保留）：\n\n## [箭头函数没有 “this”](https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-this)\n\n正如我们在 [对象方法，\"this\"](https://zh.javascript.info/object-methods) 一章中所学到的，箭头函数没有 `this`。如果访问 `this`，则会从外部获取。\n\n**不能对箭头函数进行 `new` 操作**\n\n不具有 `this` 自然也就意味着另一个限制：箭头函数不能用作构造器（constructor）。不能用 `new` 调用它们。\n\n## [箭头函数没有 “arguments”](https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-arguments)\n\n箭头函数也没有 `arguments` 变量。\n\n当我们需要使用当前的 `this` 和 `arguments` 转发一个调用时，这对装饰器（decorators）来说非常有用。\n\n## [总结](https://zh.javascript.info/arrow-functions#zong-jie)\n\n箭头函数：\n\n- 没有 `this`\n- 没有 `arguments`\n- 不能使用 `new` 进行调用\n- 它们也没有 `super`\n\n# Mixin 模式\n\n[mixin](https://en.wikipedia.org/wiki/Mixin) 是一个包含可被其他类使用而无需继承的方法的类。\n\n## [EventMixin](https://zh.javascript.info/mixins#eventmixin)\n\n现在让我们为实际运用构造一个 mixin。\n\n例如，许多浏览器对象的一个重要功能是它们可以生成事件。事件是向任何有需要的人“广播信息”的好方法。因此，让我们构造一个 mixin，使我们能够轻松地将与事件相关的函数添加到任意 class/object 中。\n\n- Mixin 将提供 `.trigger(name, [...data])` 方法，以在发生重要的事情时“生成一个事件”。`name` 参数（arguments）是事件的名称，`[...data]` 是可选的带有事件数据的其他参数（arguments）。\n- 此外还有 `.on(name, handler)` 方法，它为具有给定名称的事件添加了 `handler` 函数作为监听器（listener）。当具有给定 `name` 的事件触发时将调用该方法，并从 `.trigger` 调用中获取参数（arguments）。\n- ……还有 `.off(name, handler)` 方法，它会删除 `handler` 监听器（listener）。\n\n## [总结](https://zh.javascript.info/mixins#zong-jie)\n\n_Mixin_ — 是一个通用的面向对象编程术语：一个包含其他类的方法的类。\n\n一些其它编程语言允许多重继承。JavaScript 不支持多重继承，但是可以通过将方法拷贝到原型中来实现 mixin。\n\n我们可以使用 mixin 作为一种通过添加多种行为（例如上文中所提到的事件处理）来扩充类的方法。\n\n**受保护的属性通常以下划线 `_` 作为前缀。**\n\n# 简介：回调\n\nJavaScript 主机（host）环境提供了许多函数，这些函数允许我们计划 **异步** 行为（action）。\n\n脚本是“异步”调用的，因为它从现在开始加载，但是在这个加载函数执行完成后才运行。\n\n# Promise\n\nPromise 对象的构造器（constructor）语法如下：\n\n```javascript\nlet promise = new Promise(function (resolve, reject) {\n  // executor（生产者代码，“歌手”）\n})\n```\n\n传递给 `new Promise` 的函数被称为 **executor**。当 `new Promise` 被创建，executor 会自动运行。\n\n当 executor 获得了结果，无论是早还是晚都没关系，它应该调用以下回调之一：\n\n- `resolve(value)` — 如果任务成功完成并带有结果 `value`。\n- `reject(error)` — 如果出现了 error，`error` 即为 error 对象。\n\nexecutor 会自动运行并尝试执行一项工作。尝试结束后，如果成功则调用 `resolve`，如果出现 error 则调用 `reject`。\n\n由 `new Promise` 构造器返回的 `promise` 对象具有以下内部属性：\n\n- `state` — 最初是 `\"pending\"`，然后在 `resolve` 被调用时变为 `\"fulfilled\"`，或者在 `reject` 被调用时变为 `\"rejected\"`。\n- `result` — 最初是 `undefined`，然后在 `resolve(value)` 被调用时变为 `value`，或者在 `reject(error)` 被调用时变为 `error`。\n\n| Promises                                                                                                                                                                                                           | Callbacks                                                                                                                                                            |\n| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Promises 允许我们按照自然顺序进行编码。首先，我们运行 `loadScript` 和 `.then` 来处理结果。                                                                                                                         | 在调用 `loadScript(script, callback)` 时，在我们处理的地方（disposal）必须有一个 `callback` 函数。换句话说，在调用 `loadScript` **之前**，我们必须知道如何处理结果。 |\n| 我们可以根据需要，在 promise 上多次调用 `.then`。每次调用，我们都会在“订阅列表”中添加一个新的“分析”，一个新的订阅函数。在下一章将对此内容进行详细介绍：[Promise 链](https://zh.javascript.info/promise-chaining)。 | 只能有一个回调。                                                                                                                                                     |\n\n因此，promise 为我们提供了更好的代码流和灵活性。\n\n一个 promise 构造器和一个简单的 executor 函数，该 executor 函数具有包含时间（即 `setTimeout`）的“生产者代码”：\n\n```javascript\nlet promise = new Promise(function (resolve, reject) {\n  // 当 promise 被构造完成时，自动执行此函数\n\n  // 1 秒后发出工作已经被完成的信号，并带有结果 \"done\"\n  setTimeout(() => resolve('done'), 1000)\n})\n```\n\n在 new Promise()的时候，Promise 的执行器就会立马执行，但是**调用 resolve()会触发异步操作，传入的 then()方法的函数会被添加到任务队列并异步执行**\n\n`promise` 对象代表异步执行结果，通过构造函数 `new Promise` 创建，其参数是 executor function 可能有一些异步代码，对象其后的方法 `.then`、`.catch`、`.finally` 相当于回调函数。\n\n一开始创建的 `promise` 对象状态是 `pending`（表示初始状态）然后在 executor function 中会有条件地执行 `resolve` 或 `reject` 之一，这样就会改变 `promise` 对象的状态为 `settled`（表示状态确定，可以触发对象后的方法 `.finally`）\n\n`promise` 对象确定的状态其实有两种，如果在 executor function 调用的是 `resolve` 状态就变成 `resolved` 相应地会调用对象后的方法 `.then`；而如果在 executor function 调用的是 `reject` 状态就变成 `rejected` 相应地会调用对象后的方法 `.catch`（其实这是 `.then(null, rejectFunc)` 缩写形式）\n\n# Promise 链\n\n它的理念是将 result 通过 `.then` 处理程序（handler）链进行传递。\n\n运行流程如下：\n\n1. 初始 promise 在 1 秒后进行 resolve `(*)`，\n2. 然后 `.then` 处理程序（handler）被调用 `(**)`。\n3. 它返回的值被传入下一个 `.then` 处理程序（handler）`(***)`\n4. ……依此类推。\n\n**新手常犯的一个经典错误：从技术上讲，我们也可以将多个 `.then` 添加到一个 promise 上。但这并不是 promise 链（chaining）。**\n\n## [总结](https://zh.javascript.info/promise-chaining#zong-jie)\n\n如果 `.then`（或 `catch/finally` 都可以）处理程序（handler）返回一个 promise，那么链的其余部分将会等待，直到它状态变为 settled。当它被 settled 后，其 result（或 error）将被进一步传递下去。\n\n![image-20210128140346440](E:\\Markdown图片\\image-20210128140346440.png)\n\n# 使用 promise 进行错误处理\n\nPromise 链在错误（error）处理中十分强大。当一个 promise 被 reject 时，控制权将移交至最近的 rejection 处理程序（handler）。\n\n## [隐式 try…catch](https://zh.javascript.info/promise-error-handling#yin-shi-trycatch)\n\nPromise 的执行者（executor）和 promise 的处理程序（handler）周围有一个“隐式的 `try..catch`”。如果发生异常，它（译注：指异常）就会被捕获，并被视为 rejection 进行处理。\n\n下面这段代码：\n\n```javascript\nnew Promise((resolve, reject) => {\n  throw new Error('Whoops!')\n}).catch(alert) // Error: Whoops!\n```\n\n……与下面这段代码工作上完全相同：\n\n```javascript\nnew Promise((resolve, reject) => {\n  reject(new Error('Whoops!'))\n}).catch(alert) // Error: Whoops!\n```\n\n在 executor 周围的“隐式 `try..catch`”自动捕获了 error，并将其变为 rejected promise。\n\n这不仅仅发生在 executor 函数中，同样也发生在其 handler 中。如果我们在 `.then` 处理程序（handler）中 `throw`，这意味着 promise 被 rejected，因此控制权移交至最近的 error 处理程序（handler）。\n\n一个例子：\n\n```javascript\nnew Promise((resolve, reject) => {\n  resolve('ok')\n})\n  .then((result) => {\n    throw new Error('Whoops!') // reject 这个 promise\n  })\n  .catch(alert) // Error: Whoops!\n```\n\n## [再次抛出（Rethrowing）](https://zh.javascript.info/promise-error-handling#zai-ci-pao-chu-rethrowing)\n\n链尾端的 `.catch` 的表现有点像 `try..catch`。我们可能有许多个 `.then` 处理程序（handler），然后在尾端使用一个 `.catch` 处理上面的所有 error。\n\n## [总结](https://zh.javascript.info/promise-error-handling#zong-jie)\n\n- `.catch` 处理 promise 中的各种 error：在 `reject()` 调用中的，或者在处理程序（handler）中抛出的（thrown）error。\n- 我们应该将 `.catch` 准确地放到我们想要处理 error，并知道如何处理这些 error 的地方。处理程序应该分析 error（可以自定义 error 类来帮助分析）并再次抛出未知的 error（可能它们是编程错误）。\n- 如果没有办法从 error 中恢复的话，不使用 `.catch` 也可以。\n- 在任何情况下我们都应该有 `unhandledrejection` 事件处理程序（用于浏览器，以及其他环境的模拟），以跟踪未处理的 error 并告知用户（可能还有我们的服务器）有关信息，以使我们的应用程序永远不会“死掉”。\n\n# Promise API\n\n## [Promise.all](https://zh.javascript.info/promise-api#promiseall)\n\n假设我们希望并行执行多个 promise，并等待所有 promise 都准备就绪。语法：\n\n```javascript\nlet promise = Promise.all([...promises...]);\n```\n\n`Promise.all(iterable)` **允许在** `iterable` **中使用 non-promise 的“常规”值**\n\n`Promise.all` 接受一个 promise 数组作为参数（从技术上讲，它可以是任何可迭代的，但通常是一个数组）并返回一个新的 promise。\n\n**如果任意一个 promise 被 reject，由 `Promise.all` 返回的 promise 就会立即 reject，并且带有的就是这个 error。**\n\n## [Promise.allSettled](https://zh.javascript.info/promise-api#promiseallsettled)\n\n`Promise.allSettled` 等待所有的 promise 都被 settle，无论结果如何。结果数组具有：\n\n- `{status:\"fulfilled\", value:result}` 对于成功的响应，\n- `{status:\"rejected\", reason:error}` 对于 error。\n\n## [Promise.race](https://zh.javascript.info/promise-api#promiserace)\n\n与 `Promise.all` 类似，但只等待第一个 settled 的 promise 并获取其结果（或 error）。\n\n`Promise.all` 可能是在实战中使用最多的。\n\n# 微任务（Microtask）\n\nPromise 的处理程序（handlers）`.then`、`.catch` 和 `.finally` 都是异步的。\n\n即便一个 promise 立即被 resolve，`.then`、`.catch` 和 `.finally` **下面** 的代码也会在这些处理程序（handler）之前被执行。\n\n## [微任务队列（Microtask queue）](https://zh.javascript.info/microtask-queue#wei-ren-wu-dui-lie-microtaskqueue)\n\n异步任务需要适当的管理。为此，ECMA 标准规定了一个内部队列 `PromiseJobs`，通常被称为“微任务队列（microtask queue）”（ES8 术语）。\n\n如 [规范](https://tc39.github.io/ecma262/#sec-jobs-and-job-queues) 中所述：\n\n- 队列（queue）是先进先出的：首先进入队列的任务会首先运行。\n- 只有在 JavaScript 引擎中没有其它任务在运行时，才开始执行任务队列中的任务。\n\n当一个 promise 准备就绪时，它的 `.then/catch/finally` 处理程序（handler）就会被放入队列中：但是它们不会立即被执行。当 JavaScript 引擎执行完当前的代码，它会从队列中获取任务并执行它。\n\n如果有一个包含多个 `.then/catch/finally` 的链，那么它们中的每一个都是异步执行的。也就是说，它会首先进入队列，然后在当前代码执行完成并且先前排队的处理程序（handler）都完成时才会被执行。\n\n## [总结](https://zh.javascript.info/microtask-queue#zong-jie)\n\nPromise 处理始终是异步的，因为所有 promise 行为都会通过内部的 “promise jobs” 队列，也被称为“微任务队列”（ES8 术语）。\n\n因此，`.then/catch/finally` 处理程序（handler）总是在当前代码完成后才会被调用。\n\n如果我们需要确保一段代码在 `.then/catch/finally` 之后被执行，我们可以将它添加到链式调用的 `.then` 中。\n\n# Async/await\n\n## [Async function](https://zh.javascript.info/async-await#asyncfunction)\n\nAsync/await 是以更舒适的方式使用 promise 的一种特殊语法，同时它也非常易于理解和使用。\n\n```javascript\nasync function f() {\n  return 1\n}\n```\n\n在函数前面的 “async” 这个单词表达了一个简单的事情：即这个函数总是返回一个 promise。其他值将自动被包装在一个 resolved 的 promise 中。\n\n## [Await](https://zh.javascript.info/async-await#await)\n\n语法如下：\n\n```javascript\n// 只在 async 函数内工作\nlet value = await promise\n```\n\n关键字 `await` 让 JavaScript 引擎等待直到 promise 完成（settle）并返回结果。\n\n# Generator\n\n常规函数只会返回一个单一值（或者不返回任何值）。\n\n而 Generator 可以按需一个接一个地返回（“yield”）多个值。它们可与 [iterable](https://zh.javascript.info/iterable) 完美配合使用，从而可以轻松地创建数据流。\n\n## [Generator 函数](https://zh.javascript.info/generators#generator-han-shu)\n\n要创建一个 generator，我们需要一个特殊的语法结构：`function*`，即所谓的 “generator function”。\n\n像这样：\n\n```javascript\nfunction* generateSequence() {\n  yield 1\n  yield 2\n  return 3\n}\n```\n\n一个 generator 的主要方法就是 `next()`。当被调用时（译注：指 `next()` 方法），它会恢复上图所示的运行，执行直到最近的 `yield <value>` 语句（`value` 可以被省略，默认为 `undefined`）。然后函数执行暂停，并将产出的（yielded）值返回到外部代码。\n\n`next()` 的结果始终是一个具有两个属性的对象：\n\n- `value`: 产出的（yielded）的值。\n- `done`: 如果 generator 函数已执行完成则为 `true`，否则为 `false`。\n\n代码恢复执行并返回下一个 `yield` 的值：\n\n```javascript\nlet two = generator.next()\n\nalert(JSON.stringify(two)) // {value: 2, done: false}\n```\n\n**`function\\* f(…)` 或 `function \\*f(…)`？**\n\n这两种语法都是对的。\n\n但是通常更倾向于第一种语法，因为星号 `*` 表示它是一个 generator 函数，它描述的是函数种类而不是名称，因此 `*` 应该和 `function` 关键字紧贴一起。\n\n## [“yield” 是一条双向路](https://zh.javascript.info/generators#yield-shi-yi-tiao-shuang-xiang-lu)\n\n目前看来，generator 和可迭代对象类似，都具有用来生成值的特殊语法。但实际上，generator 更加强大且灵活。\n\n这是因为 `yield` 是一条双向路（two-way street）：它不仅可以向外返回结果，而且还可以将外部的值传递到 generator 内。\n\n调用 `generator.next(arg)`，我们就能将参数 `arg` 传递到 generator 内部。这个 `arg` 参数会变成 `yield` 的结果。\n\n## [generator.throw](https://zh.javascript.info/generators#generatorthrow)\n\n正如我们在上面的例子中观察到的那样，外部代码可能会将一个值传递到 generator，作为 `yield` 的结果。\n\n……但是它也可以在那里发起（抛出）一个 error。这很自然，因为 error 本身也是一种结果。\n\n要向 `yield` 传递一个 error，我们应该调用 `generator.throw(err)`。在这种情况下，`err` 将被抛到对应的 `yield` 所在的那一行。\n\n## [总结](https://zh.javascript.info/generators#zong-jie)\n\n- Generator 是通过 generator 函数 `function* f(…) {…}` 创建的。\n- 在 generator（仅在）内部，存在 `yield` 操作。\n- 外部代码和 generator 可能会通过 `next/yield` 调用交换结果。\n\n# 异步迭代和 generator\n\n异步迭代允许我们对按需通过异步请求而得到的数据进行迭代。\n\n当值是以异步的形式出现时，例如在 `setTimeout` 或者另一种延迟之后，就需要异步迭代。\n\n最常见的场景是，对象需要发送一个网络请求以传递下一个值，稍后我们将看到一个它的真实示例。\n\n要使对象异步迭代：\n\n1. 使用 `Symbol.asyncIterator` 取代 `Symbol.iterator`。\n2. `next()` 方法应该返回一个 `promise`（带有下一个值，并且状态为 `fulfilled`）。\n   - 关键字 `async` 可以实现这一点，我们可以简单地使用 `async next()`。\n3. 我们应该使用 `for await (let item of iterable)` 循环来迭代这样的对象。\n   - 注意关键字 `await`。\n\n作为开始的示例，让我们创建一个可迭代的 `range` 对象，与前面的那个类似，不过现在它将异步地每秒返回一个值。\n\n我们需要做的就是对上面代码中的部分代码进行替换：\n\n```javascript\nlet range = {\n  from: 1,\n  to: 5,\n\n  [Symbol.asyncIterator]() {\n    // (1)\n    return {\n      current: this.from,\n      last: this.to,\n\n      async next() {\n        // (2)\n\n        // 注意：我们可以在 async next 内部使用 \"await\"\n        await new Promise((resolve) => setTimeout(resolve, 1000)) // (3)\n\n        if (this.current <= this.last) {\n          return { done: false, value: this.current++ }\n        } else {\n          return { done: true }\n        }\n      },\n    }\n  },\n}\n\n;(async () => {\n  for await (let value of range) {\n    // (4)\n    alert(value) // 1,2,3,4,5\n  }\n})()\n```\n\n正如我们所看到的，其结构与常规的 iterator 类似:\n\n1. 为了使一个对象可以异步迭代，它必须具有方法 `Symbol.asyncIterator` `(1)`。\n2. 这个方法必须返回一个带有 `next()` 方法的对象，`next()` 方法会返回一个 promise `(2)`。\n3. 这个 `next()` 方法可以不是 `async` 的，它可以是一个返回值是一个 `promise` 的常规的方法，但是使用 `async` 关键字可以允许我们在方法内部使用 `await`，所以会更加方便。这里我们只是用于延迟 1 秒的操作 `(3)`。\n4. 我们使用 `for await(let value of range)` `(4)` 来进行迭代，也就是在 `for` 后面添加 `await`。它会调用一次 `range[Symbol.asyncIterator]()` 方法一次，然后调用它的 `next()` 方法获取值。\n\n这是一个对比 Iterator 和异步 iterator 之间差异的表格：\n\n|                          | Iterator          | 异步 iterator          |\n| :----------------------- | :---------------- | :--------------------- |\n| 提供 iterator 的对象方法 | `Symbol.iterator` | `Symbol.asyncIterator` |\n| `next()` 返回的值是      | 任意值            | `Promise`              |\n| 要进行循环，使用         | `for..of`         | `for await..of`        |\n\n# 模块 (Module) 简介\n\n社区发明了许多种方法来将代码组织到模块中，使用特殊的库按需加载模块。\n\n列举一些（出于历史原因）：\n\n- [AMD](https://en.wikipedia.org/wiki/Asynchronous_module_definition) —— 最古老的模块系统之一，最初由 [require.js](http://requirejs.org/) 库实现。\n- [CommonJS](http://wiki.commonjs.org/wiki/Modules/1.1) —— 为 Node.js 服务器创建的模块系统。\n- [UMD](https://github.com/umdjs/umd) —— 另外一个模块系统，建议作为通用的模块系统，它与 AMD 和 CommonJS 都兼容。\n\n## [什么是模块？](https://zh.javascript.info/modules-intro#shi-mo-shi-mo-kuai)\n\n一个模块（module）就是一个文件。一个脚本就是一个模块。就这么简单。\n\n模块可以相互加载，并可以使用特殊的指令 `export` 和 `import` 来交换功能，从另一个模块调用一个模块的函数：\n\n- `export` 关键字标记了可以从当前模块外部访问的变量和函数。\n- `import` 关键字允许从其他模块导入功能。\n\n## [模块核心功能](https://zh.javascript.info/modules-intro#mo-kuai-he-xin-gong-neng)\n\n### [始终使用 “use strict”](https://zh.javascript.info/modules-intro#shi-zhong-shi-yong-usestrict)\n\n模块始终默认使用 `use strict`，例如，对一个未声明的变量赋值将产生错误（译注：在浏览器控制台可以看到 error 信息）。\n\n### [模块级作用域](https://zh.javascript.info/modules-intro#mo-kuai-ji-zuo-yong-yu)\n\n每个模块都有自己的顶级作用域（top-level scope）。换句话说，一个模块中的顶级作用域变量和函数在其他脚本中是不可见的。\n\n### [模块代码仅在第一次导入时被解析](https://zh.javascript.info/modules-intro#mo-kuai-dai-ma-jin-zai-di-yi-ci-dao-ru-shi-bei-jie-xi)\n\n如果同一个模块被导入到多个其他位置，那么它的代码仅会在第一次导入时执行，然后将导出（export）的内容提供给所有的导入（importer）。\n\n### [在一个模块中，“this” 是 undefined](https://zh.javascript.info/modules-intro#zai-yi-ge-mo-kuai-zhong-this-shi-undefined)\n\n这是一个小功能，但为了完整性，我们应该提到它。\n\n在一个模块中，顶级 `this` 是 undefined。\n\n### [import.meta](https://zh.javascript.info/modules-intro#importmeta)\n\n`import.meta` 对象包含关于当前模块的信息。\n\n它的内容取决于其所在的环境。在浏览器环境中，它包含当前脚本的 URL，或者如果它是在 HTML 中的话，则包含当前页面的 URL。\n\n### [模块脚本是延迟的](https://zh.javascript.info/modules-intro#mo-kuai-jiao-ben-shi-yan-chi-de)\n\n模块脚本 **总是** 被延迟的，与 `defer` 特性（在 [脚本：async，defer](https://zh.javascript.info/script-async-defer) 一章中描述的）对外部脚本和内联脚本（inline script）的影响相同。\n\n也就是说：\n\n- 下载外部模块脚本 `<script type=\"module\" src=\"...\">` 不会阻塞 HTML 的处理，它们会与其他资源并行加载。\n- 模块脚本会等到 HTML 文档完全准备就绪（即使它们很小并且比 HTML 加载速度更快），然后才会运行。\n- 保持脚本的相对顺序：在文档中排在前面的脚本先执行。\n\n它的一个副作用是，模块脚本总是会“看到”已完全加载的 HTML 页面，包括在它们下方的 HTML 元素。\n\n### [不允许裸模块（“bare” module）](https://zh.javascript.info/modules-intro#bu-yun-xu-luo-mo-kuai-baremodule)\n\n在浏览器中，`import` 必须给出相对或绝对的 URL 路径。没有任何路径的模块被称为“裸（bare）”模块。在 `import` 中不允许这种模块。\n\n### [兼容性，“nomodule”](https://zh.javascript.info/modules-intro#jian-rong-xing-nomodule)\n\n旧时的浏览器不理解 `type=\"module\"`。未知类型的脚本会被忽略。\n\n## [构建工具](https://zh.javascript.info/modules-intro#gou-jian-gong-ju)\n\n在实际开发中，浏览器模块很少被以“原始”形式进行使用。通常，我们会使用一些特殊工具，例如 [Webpack](https://webpack.js.org/)，将它们打包在一起，然后部署到生产环境的服务器。\n\n使用打包工具的一个好处是 —— 它们可以更好地控制模块的解析方式，允许我们使用裸模块和更多的功能，例如 CSS/HTML 模块等。\n\n构建工具做以下这些事儿：\n\n1. 从一个打算放在 HTML 中的 `<script type=\"module\">` “主”模块开始。\n2. 分析它的依赖：它的导入，以及它的导入的导入等。\n3. 使用所有模块构建一个文件（或者多个文件，这是可调的），并用打包函数（bundler function）替代原生的 `import` 调用，以使其正常工作。还支持像 HTML/CSS 模块等“特殊”的模块类型。\n4. 在处理过程中，可能会应用其他转换和优化：\n   - 删除无法访问的代码。\n   - 删除未使用的导出（“tree-shaking”）。\n   - 删除特定于开发的像 `console` 和 `debugger` 这样的语句。\n   - 可以使用 [Babel](https://babeljs.io/) 将前沿的现代的 JavaScript 语法转换为具有类似功能的旧的 JavaScript 语法。\n   - 压缩生成的文件（删除空格，用短的名字替换变量等）。\n\n## [总结](https://zh.javascript.info/modules-intro#zong-jie)\n\n下面总结一下模块的核心概念：\n\n1. 一个模块就是一个文件。浏览器需要使用<script type=\"module\">以使 import/export 可以工作。模块（译注：相较于常规脚本）有几点差别：\n   - 默认是延迟解析的（deferred）。\n   - Async 可用于内联脚本。\n   - 要从另一个源（域/协议/端口）加载外部脚本，需要 CORS header。\n   - 重复的外部脚本会被忽略\n2. 模块具有自己的本地顶级作用域，并可以通过 `import/export` 交换功能。\n3. 模块始终使用 `use strict`。\n4. 模块代码只执行一次。导出仅创建一次，然后会在导入之间共享。\n\n# Proxy 和 Reflect\n\n一个 `Proxy` 对象包装另一个对象并拦截诸如读取/写入属性和其他操作，可以选择自行处理它们，或者透明地允许该对象处理它们。\n\nProxy 被用于了许多库和某些浏览器框架。\n\n## [Proxy](https://zh.javascript.info/proxy#proxy)\n\n语法：\n\n```javascript\nlet proxy = new Proxy(target, handler)\n```\n\n- `target` —— 是要包装的对象，可以是任何东西，包括函数。\n- `handler` —— 代理配置：带有“捕捉器”（“traps”，即拦截操作的方法）的对象。比如 `get` 捕捉器用于读取 `target` 的属性，`set` 捕捉器用于写入 `target` 的属性，等等。\n\n对 `proxy` 进行操作，如果在 `handler` 中存在相应的捕捉器，则它将运行，并且 Proxy 有机会对其进行处理，否则将直接对 target 进行处理。\n\n由于没有捕捉器，所有对 `proxy` 的操作都直接转发给了 `target`。\n\n1. 写入操作 `proxy.test=` 会将值写入 `target`。\n2. 读取操作 `proxy.test` 会从 `target` 返回对应的值。\n3. 迭代 `proxy` 会从 `target` 返回对应的值。\n\n## [带有 “get” 捕捉器的默认值](https://zh.javascript.info/proxy#dai-you-get-bu-zhuo-qi-de-mo-ren-zhi)\n\n最常见的捕捉器是用于读取/写入的属性。\n\n要拦截读取操作，`handler` 应该有 `get(target, property, receiver)` 方法。\n\n读取属性时触发该方法，参数如下：\n\n- `target` —— 是目标对象，该对象被作为第一个参数传递给 `new Proxy`，\n- `property` —— 目标属性名，\n- `receiver` —— 如果目标属性是一个 getter 访问器属性，则 `receiver` 就是本次读取属性所在的 `this` 对象。通常，这就是 `proxy` 对象本身（或者，如果我们从 proxy 继承，则是从该 proxy 继承的对象）。现在我们不需要此参数，因此稍后我们将对其进行详细介绍。\n\n## [使用 “set” 捕捉器进行验证](https://zh.javascript.info/proxy#shi-yong-set-bu-zhuo-qi-jin-hang-yan-zheng)\n\n假设我们想要一个专门用于数字的数组。如果添加了其他类型的值，则应该抛出一个错误。\n\n当写入属性时 `set` 捕捉器被触发。\n\n`set(target, property, value, receiver)`：\n\n- `target` —— 是目标对象，该对象被作为第一个参数传递给 `new Proxy`，\n- `property` —— 目标属性名称，\n- `value` —— 目标属性的值，\n- `receiver` —— 与 `get` 捕捉器类似，仅与 setter 访问器属性相关。\n\n如果写入操作（setting）成功，`set` 捕捉器应该返回 `true`，否则返回 `false`（触发 `TypeError`）。\n\n## [使用 “ownKeys” 和 “getOwnPropertyDescriptor” 进行迭代](https://zh.javascript.info/proxy#shi-yong-ownkeys-he-getownpropertydescriptor-jin-hang-die-dai)\n\n`Object.keys`，`for..in` 循环和大多数其他遍历对象属性的方法都使用内部方法 `[[OwnPropertyKeys]]`（由 `ownKeys` 捕捉器拦截) 来获取属性列表。\n\n这些方法在细节上有所不同：\n\n- `Object.getOwnPropertyNames(obj)` 返回非 Symbol 键。\n- `Object.getOwnPropertySymbols(obj)` 返回 Symbol 键。\n- `Object.keys/values()` 返回带有 `enumerable` 标志的非 Symbol 键/值（属性标志在 [属性标志和属性描述符](https://zh.javascript.info/property-descriptors) 一章有详细讲解)。\n- `for..in` 循环遍历所有带有 `enumerable` 标志的非 Symbol 键，以及原型对象的键。\n","slug":"javaScript学习笔记","published":1,"updated":"2021-07-26T13:35:36.050Z","_id":"cknzd1p90000uf4rq18vw40pn","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"javascript\"><a href=\"#javascript\" class=\"headerlink\" title=\"javascript\"></a>javascript</h1><h2 id=\"对象引用和复制\"><a href=\"#对象引用和复制\" class=\"headerlink\" title=\"对象引用和复制\"></a>对象引用和复制</h2><p>与原始类型相比，对象的根本区别之一是对象是“通过引用”被存储和复制的，与原始类型值相反：字符串，数字，布尔值等 —— 始终是以“整体值”的形式被复制的。</p>\n<a id=\"more\"></a>\n\n<h3 id=\"克隆与合并，Object-assign\"><a href=\"#克隆与合并，Object-assign\" class=\"headerlink\" title=\"克隆与合并，Object.assign\"></a>克隆与合并，Object.assign</h3><p>Object.assign(dest, [src1, src2, src3…])</p>\n<ul>\n<li>第一个参数 dest 是指目标对象。</li>\n<li>更后面的参数 src1, …, srcN（可按需传递多个参数）是源对象。</li>\n<li>该方法将所有源对象的属性拷贝到目标对象 dest 中。换句话说，从第二个开始的所有参数的属性都被拷贝到第一个参数的对象中。</li>\n<li>调用结果返回 dest。</li>\n<li>可以用它来合并多个对象</li>\n</ul>\n<p>​ 对象方法,”this”</p>\n<ul>\n<li>对象方法的调用时基于“引用类型”的调用</li>\n</ul>\n<h3 id=\"Symbol-类型\"><a href=\"#Symbol-类型\" class=\"headerlink\" title=\"Symbol 类型\"></a>Symbol 类型</h3><pre><code>  1. 防止自己在对象中写的属性被其他人篡改，隐藏该属性\n  2. 用for..in.., Object.keys(obj)访问不到，但是使用Object.assign是可以复制过来的</code></pre>\n<h2 id=\"对象\"><a href=\"#对象\" class=\"headerlink\" title=\"对象\"></a>对象</h2><pre><code>  1. 对象是具有一些特殊特性的关联数组。\n  2. 它们存储属性（键值对），其中：\n       1. 属性的键必须是字符串或者 symbol（通常是字符串）。\n       2. 值可以是任何类型。\n  3. 下面的方法访问属性\n       1. 点符号: obj.property。\n       2. 方括号 obj[&quot;property&quot;]，方括号允许从变量中获取键，例如 obj[varWithKey]。\n  4. 其他操作：\n       1. 删除属性：delete obj.prop。\n       2. 检查是否存在给定键的属性：&quot;key&quot; in obj。\n       3. 遍历对象：for(let key in obj) 循环。</code></pre>\n<h3 id=\"原始类型的方法\"><a href=\"#原始类型的方法\" class=\"headerlink\" title=\"原始类型的方法\"></a>原始类型的方法</h3><ul>\n<li>基本类型不是对象。</li>\n<li>基本类型不能存储数据。</li>\n<li>所有的属性/方法操作都是在临时对象的帮助下执行的。</li>\n</ul>\n<h3 id=\"数字类型\"><a href=\"#数字类型\" class=\"headerlink\" title=\"数字类型\"></a>数字类型</h3><p>​ parseInt(str, radix)` 的第二个参数</p>\n<ul>\n<li>parseInt() 函数具有可选的第二个参数。它指定了数字系统的基数，因此 parseInt 还可以解析十六进制数字、二进制数字等的字符串：</li>\n<li>alert( parseInt(‘0xff’, 16) ); // 255</li>\n<li>alert( parseInt(‘ff’, 16) ); // 255，没有 0x 仍然有效</li>\n<li>alert( parseInt(‘2n9c’, 36) ); // 123456</li>\n</ul>\n<p>​ prompt</p>\n<ul>\n<li>注意在 prompt 前面的一元加号 +。它将立即把值转换成数字。</li>\n<li>否则，a 和 b 将会是字符串，它们的总和将是它们的连接，即：”1” + “2” = “12”。</li>\n</ul>\n<h2 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h2><h3 id=\"str\"><a href=\"#str\" class=\"headerlink\" title=\"str\"></a>str</h3><h3 id=\"1-str-indexOf-substr-pos-。\"><a href=\"#1-str-indexOf-substr-pos-。\" class=\"headerlink\" title=\"1. str.indexOf(substr, pos)。\"></a>1. str.indexOf(substr, pos)。</h3><p>​ 1. 它从给定位置 pos 开始，在 str 中查找 substr，如果没有找到，则返回 -1，否则返回匹配成功的位置。<br>​ 2. 还有一个类似的方法 str.lastIndexOf(substr, position)，它从字符串的末尾开始搜索到开头。</p>\n<h3 id=\"2-按位（bitwise）NOT-技巧\"><a href=\"#2-按位（bitwise）NOT-技巧\" class=\"headerlink\" title=\"2. 按位（bitwise）NOT 技巧\"></a>2. 按位（bitwise）NOT 技巧</h3><p>​ 1. 它将数字转换为 32-bit 整数（如果存在小数部分，则删除小数部分），然后对其二进制表示形式中的所有位均取反。</p>\n<h3 id=\"3-获取子字符串\"><a href=\"#3-获取子字符串\" class=\"headerlink\" title=\"3. 获取子字符串\"></a>3. 获取子字符串</h3><pre><code> 1.  JavaScript 中有三种获取字符串的方法：substring、substr 和 slice。\n             1.  str.slice(start [, end])，返回字符串从 start 到（但不包括）end 的部分。\n             2.  如果没有第二个参数，slice 会一直运行到字符串末尾：\n                    1.  let str = &quot;stringify&quot;;\n                               alert( str.slice(0, 5) ); // &#39;strin&#39;，从 0 到 5 的子字符串（不包括 5）\n                               alert( str.slice(0, 1) ); // &#39;s&#39;，从 0 到 1，但不包括 1，所以只有在 0 处的字符\n                               let str = &quot;stringify&quot;;\n                               alert( str.slice(2) ); // 从第二个位置直到结束\n                       2.  str.substring(start [, end])返回字符串在 start 和 end 之间 的部分。这与 slice 几乎相同，但它允许 start 大于 end。\n                               et str = &quot;stringify&quot;;\n                                      // 这些对于 substring 是相同的\n                                      alert( str.substring(2, 6) ); // &quot;ring&quot;\n                                      alert( str.substring(6, 2) ); // &quot;ring&quot;\n                                      // ……但对 slice 是不同的：\n                                      alert( str.slice(2, 6) ); // &quot;ring&quot;（一样）\n                                      alert( str.slice(6, 2) ); // &quot;&quot;（空字符串）\n           3.  str.substr(start [, length]) 返回字符串从 start 开始的给定 length 的部分。与以前的方法相比，这个允许我们指定 length 而不是结束位置：\n                   . let str = &quot;stringify&quot;;\n                          alert( str.substr(2, 4) ); // &#39;ring&#39;，从位置 2 开始，获取 4 个字符\n                          2. 第一个参数可能是负数，从结尾算起：\n                                 let str = &quot;stringify&quot;;\n                                 alert( str.substr(-4, 2) ); // &#39;gi&#39;，从第 4 位获取 2 个字符</code></pre>\n<p>​ 方法 选择方式…… 负值参数<br>​ - slice(start, end) 从 start 到 end（不含 end） 允许<br>​ - substring(start, end) start 与 end 之间（包括 start，但不包括 end） 负值代表 0<br>​ - substr(start, length) 从 start 开始获取长为 length 的字符串 允许 start 为负数</p>\n<p>​</p>\n<h2 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h2><ul>\n<li>数组, 声明, pop/push, shift/unshift 方法, 内部, 性能, 循环, 关于 “length”, new Array(), 多维数组, toString, 不要使用 == 比较数组</li>\n</ul>\n<p>​ Iterable object（可迭代对象）</p>\n<ul>\n<li>可迭代（Iterable） 对象是数组的泛化。这个概念是说任何对象都可以被定制为可在 for..of 循环中使用的对象。</li>\n</ul>\n<h2 id=\"Map-and-Set（映射和集合）\"><a href=\"#Map-and-Set（映射和集合）\" class=\"headerlink\" title=\"Map and Set（映射和集合）\"></a>Map and Set（映射和集合）</h2><h3 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h3><ul>\n<li>Map 是一个带键的数据项的集合，就像一个 Object 一样。 但是它们最大的差别是 Map 允许任何类型的键（key）。</li>\n</ul>\n<p>它的方法和属性如下：</p>\n<ul>\n<li>new Map() —— 创建 map。</li>\n<li>map.set(key, value) —— 根据键存储值。</li>\n<li>map.get(key) —— 根据键来返回值，如果 map 中不存在对应的 key，则返回 undefined。</li>\n<li>map.has(key) —— 如果 key 存在则返回 true，否则返回 false。</li>\n<li>map.delete(key) —— 删除指定键的值。</li>\n<li>map.clear() —— 清空 map。</li>\n<li>map.size —— 返回当前元素个数。</li>\n</ul>\n<h3 id=\"Map-迭代\"><a href=\"#Map-迭代\" class=\"headerlink\" title=\"Map 迭代\"></a>Map 迭代</h3><p>如果要在 map 里使用循环，可以使用以下三个方法：</p>\n<ul>\n<li>map.keys() —— 遍历并返回所有的键（returns an iterable for keys），</li>\n<li>map.values() —— 遍历并返回所有的值（returns an iterable for values），</li>\n<li>map.entries() —— 遍历并返回所有的实体（returns an iterable for entries）[key, value]，for..of 在默认情况下使用的就是这个。</li>\n</ul>\n<h3 id=\"Object-entries：从对象创建-Map\"><a href=\"#Object-entries：从对象创建-Map\" class=\"headerlink\" title=\"Object.entries：从对象创建 Map\"></a>Object.entries：从对象创建 Map</h3><p>如果我们想从一个已有的普通对象（plain object）来创建一个 Map，那么我们可以使用内建方法 Object.entries(obj)，该返回对象的键/值对数组，该数组格式完全按照 Map 所需的格式。</p>\n<h3 id=\"Object-fromEntries：从-Map-创建对象\"><a href=\"#Object-fromEntries：从-Map-创建对象\" class=\"headerlink\" title=\"Object.fromEntries：从 Map 创建对象\"></a>Object.fromEntries：从 Map 创建对象</h3><p>Object.fromEntries 方法的作用是相反的：给定一个具有 [key, value] 键值对的数组，它会根据给定数组创建一个对象：</p>\n<h2 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h2><p>Set 是一个特殊的类型集合 —— “值的集合”（没有键），它的每一个值只能出现一次。</p>\n<p>它的主要方法如下：</p>\n<ul>\n<li>new Set(iterable) —— 创建一个 set，如果提供了一个 iterable 对象（通常是数组），将会从数组里面复制值到 set 中。</li>\n<li>set.add(value) —— 添加一个值，返回 set 本身</li>\n<li>set.delete(value) —— 删除值，如果 value 在这个方法调用的时候存在则返回 true ，否则返回 false。</li>\n<li>set.has(value) —— 如果 value 在 set 中，返回 true，否则返回 false。</li>\n<li>set.clear() —— 清空 set。</li>\n<li>set.size —— 返回元素个数。</li>\n</ul>\n<p>Map 中用于迭代的方法在 Set 中也同样支持：</p>\n<ul>\n<li>set.keys() —— 遍历并返回所有的值（returns an iterable object for values），</li>\n<li>set.values() —— 与 set.keys() 作用相同，这是为了兼容 Map，</li>\n<li>set.entries() —— 遍历并返回所有的实体（returns an iterable object for entries）[value, value]，它的存在也是为了兼容 Map。</li>\n</ul>\n<h2 id=\"解构赋值\"><a href=\"#解构赋值\" class=\"headerlink\" title=\"解构赋值\"></a>解构赋值</h2><p>解构赋值 是一种特殊的语法，它使我们可以将数组或对象“拆包”为到一系列变量中，因为有时候使用变量更加方便。解构操作对那些具有很多参数和默认值等的函数也很奏效。<br>解构赋值, 数组解构, 对象解构, 嵌套解构, 智能函数参数</p>\n<ul>\n<li>解构赋值可以立即将一个对象或数组映射到多个变量上。</li>\n<li>解构对象的完整语法：<ul>\n<li>let {prop : varName = default, …rest} = object</li>\n<li>这表示属性 prop 会被赋值给变量 varName，如果没有这个属性的话，就会使用默认值 default。</li>\n<li>没有对应映射的对象属性会被复制到 rest 对象。</li>\n</ul>\n</li>\n<li>解构数组的完整语法：<ul>\n<li>let [item1 = default, item2, …rest] = array</li>\n<li>数组的第一个元素被赋值给 item1，第二个元素被赋值给 item2，剩下的所有元素被复制到另一个数组 rest。</li>\n</ul>\n</li>\n<li>从嵌套数组/对象中提取数据也是可以的，此时等号左侧必须和等号右侧有相同的结构。</li>\n</ul>\n<h2 id=\"日期和时间\"><a href=\"#日期和时间\" class=\"headerlink\" title=\"日期和时间\"></a>日期和时间</h2><p>该对象存储日期和时间，并提供了日期/时间的管理方法。<br>例如，我们可以使用它来存储创建/修改时间，或者用来测量时间，再或者仅用来打印当前时间。</p>\n<h3 id=\"创建\"><a href=\"#创建\" class=\"headerlink\" title=\"创建\"></a>创建</h3><p>创建一个新的 Date 对象，只需要调用 new Date()，在调用时可以带有下面这些参数之一：</p>\n<ul>\n<li><p>new Date()</p>\n<ul>\n<li>不带参数 —— 创建一个表示当前日期和时间的 Date 对象：<ul>\n<li>let now = new Date();</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>new Date(milliseconds)</p>\n<ul>\n<li>创建一个 Date 对象，其时间等于 1970-01-01 00:00:00 UTC+0 再过一毫秒（1/1000 秒）。</li>\n<li>传入的整数参数代表的是自 1970-01-01 00:00:00 以来经过的毫秒数，该整数被称为 时间戳。</li>\n<li>这是一种日期的轻量级数字表示形式。我们通常使用 new Date(timestamp) 通过时间戳来创建日期，并可以使用 date.getTime() 将现有的 Date 对象转化为时间戳。</li>\n</ul>\n</li>\n<li><p>new Date(datestring)</p>\n<ul>\n<li>如果只有一个参数，并且是字符串，那么它会被自动解析。该算法与 Date.parse 所使用的算法相同</li>\n</ul>\n</li>\n<li><p>new Date(year, month, date, hours, minutes, seconds, ms)</p>\n<ul>\n<li>使用当前时区中的给定组件创建日期。只有前两个参数是必须的。</li>\n<li>自动校准（Autocorrection）</li>\n</ul>\n</li>\n</ul>\n<p>自动校准 是 Date 对象的一个非常方便的特性。我们可以设置超范围的数值，它会自动校准。<br>超出范围的日期组件将会被自动分配。</p>\n<h2 id=\"JSON-方法，toJSON\"><a href=\"#JSON-方法，toJSON\" class=\"headerlink\" title=\"JSON 方法，toJSON\"></a>JSON 方法，toJSON</h2><p>假设我们有一个复杂的对象，我们希望将其转换为字符串，以通过网络发送，或者只是为了在日志中输出它。</p>\n<p>当然，这样的字符串应该包含所有重要的属性。</p>\n<h3 id=\"JSON-stringify\"><a href=\"#JSON-stringify\" class=\"headerlink\" title=\"JSON.stringify\"></a>JSON.stringify</h3><p>JSON（JavaScript Object Notation）是表示值和对象的通用格式。在 RFC 4627 标准中有对其的描述。最初它是为 JavaScript 而创建的，但许多其他编程语言也有用于处理它的库。因此，当客户端使用 JavaScript 而服务器端是使用 Ruby/PHP/Java 等语言编写的时，使用 JSON 可以很容易地进行数据交换。</p>\n<p>JavaScript 提供了如下方法：</p>\n<ul>\n<li>JSON.stringify 将对象转换为 JSON。</li>\n<li>JSON.parse 将 JSON 转换回对象。</li>\n</ul>\n<p>方法 JSON.stringify(student) 接收对象并将其转换为字符串。<br>得到的 json 字符串是一个被称为 JSON 编码（JSON-encoded） 或 序列化（serialized） 或 字符串化（stringified） 或 编组化（marshalled） 的对象。</p>\n<p>请注意，JSON 编码的对象与对象字面量有几个重要的区别：:</p>\n<ul>\n<li>字符串使用双引号。JSON 中没有单引号或反引号。所以 ‘John’ 被转换为 “John”。</li>\n<li>对象属性名称也是双引号的。这是强制性的。所以 age:30 被转换成 “age”:30。</li>\n</ul>\n<p>JSON.stringify 也可以应用于原始（primitive）数据类型。<br>JSON 支持以下数据类型：</p>\n<ul>\n<li>Objects { … }</li>\n<li>Arrays [ … ]</li>\n<li>Primitives：<ul>\n<li>strings，</li>\n<li>numbers，</li>\n<li>boolean values true/false，</li>\n<li>null。</li>\n</ul>\n</li>\n</ul>\n<p>JSON 是语言无关的纯数据规范，因此一些特定于 JavaScript 的对象属性会被 JSON.stringify 跳过。<br>即：</p>\n<ul>\n<li>函数属性（方法）。</li>\n<li>Symbol 类型的属性。</li>\n<li>存储 undefined 的属性。</li>\n</ul>\n<p>​ 排除和转换：replacer</p>\n<p>JSON.stringify 的完整语法是：<br>let json = JSON.stringify(value, [replacer, space])<br> value<br>要编码的值。<br>replacer<br>要编码的属性数组或映射函数 function(key, value)。<br>space<br>用于格式化的空格数量</p>\n<h2 id=\"Rest-参数与-Spread-语法\"><a href=\"#Rest-参数与-Spread-语法\" class=\"headerlink\" title=\"Rest 参数与 Spread 语法\"></a>Rest 参数与 Spread 语法</h2><p>在 JavaScript 中，很多内建函数都支持传入任意数量的参数。<br>例如：</p>\n<ul>\n<li>Math.max(arg1, arg2, …, argN) —— 返回入参中的最大值。</li>\n<li>Object.assign(dest, src1, …, srcN) —— 依次将属性从 src1..N 复制到 dest。</li>\n</ul>\n<h3 id=\"Rest-参数-…\"><a href=\"#Rest-参数-…\" class=\"headerlink\" title=\"Rest 参数 …\"></a>Rest 参数 …</h3><p>在 JavaScript 中，无论函数是如何定义的，你都可以使用任意数量的参数调用函数。<br>Rest 参数可以通过使用三个点 … 并在后面跟着包含剩余参数的数组名称，来将它们包含在函数定义中。这些点的字面意思是“将剩余参数收集到一个数组中”。<br>Rest 参数必须放到参数列表的末尾<br>Rest 参数会收集剩余的所有参数，因此下面这种用法没有意义，并且会导致错误：<br>function f(arg1, …rest, arg2) { // arg2 在 …rest 后面？！<br>// error<br>}<br>…rest 必须处在最后。</p>\n<p>​ “arguments” 变量</p>\n<p>有一个名为 arguments 的特殊的类数组对象，该对象按参数索引包含所有参数。</p>\n<p>在过去，JavaScript 中没有 rest 参数，而使用 arguments 是获取函数所有参数的唯一方法。现在它仍然有效，我们可以在一些老代码里找到它。</p>\n<p>但缺点是，尽管 arguments 是一个类数组，也是可迭代对象，但它终究不是数组。它不支持数组方法，因此我们不能调用 arguments.map(…) 等方法。</p>\n<p>此外，它始终包含所有参数，我们不能像使用 rest 参数那样只截取入参的一部分。</p>\n<p>因此，当我们需要这些功能时，最好使用 rest 参数。</p>\n<h3 id=\"Spread-语法\"><a href=\"#Spread-语法\" class=\"headerlink\" title=\"Spread 语法\"></a>Spread 语法</h3><p>在脚本执行时，可能参数数组中有很多个元素，也可能一个都没有。并且这样设置的代码也很丑。<br>Spread 语法 来帮助你了！它看起来和 rest 参数很像，也使用 …，但是二者的用途完全相反。<br>当在函数调用中使用 …arr 时，它会把可迭代对象 arr “展开”到参数列表中。</p>\n<p>以 Math.max 为例：</p>\n<pre><code>  1. - let arr = [3, 5, 1];\n  2. - alert( Math.max(...arr) ); // 5（spread 语法把数组转换为参数列表）</code></pre>\n<p>我们还可以通过这种方式传递多个可迭代对象：</p>\n<pre><code>  1. let arr1 = [1, -2, 3, 4];\n  2. let arr2 = [8, 3, -8, 1];\n  3.\n  4. alert( Math.max(...arr1, ...arr2) ); // 8</code></pre>\n<p>我们甚至还可以将 spread 语法与常规值结合使用：</p>\n<pre><code>  1. let arr1 = [1, -2, 3, 4];\n  2. let arr2 = [8, 3, -8, 1];\n  3.\n  4. alert( Math.max(1, ...arr1, 2, ...arr2, 25) ); // 25</code></pre>\n<p>并且，我们还可以使用 spread 语法来合并数组：</p>\n<pre><code>  1. let arr = [3, 5, 1];\n  2. let arr2 = [8, 9, 15];\n  3.\n  4. let merged = [0, ...arr, 2, ...arr2];\n  5.\n  6. alert(merged); // 0,3,5,1,2,8,9,15（0，然后是 arr，然后是 2，然后是 arr2）</code></pre>\n<p>在上面的示例中，我们使用数组展示了 spread 语法，其实任何可迭代对象都可以。</p>\n<p>例如，在这儿我们使用 spread 语法将字符串转换为字符数组：</p>\n<ul>\n<li>let str = “Hello”;</li>\n<li>alert( […str] ); // H,e,l,l,o<br>Spread 语法内部使用了迭代器来收集元素，与 for..of 的方式相同</li>\n</ul>\n<p>不过 Array.from(obj) 和 […obj] 存在一个细微的差别：</p>\n<ul>\n<li>Array.from 适用于类数组对象也适用于可迭代对象。</li>\n<li>Spread 语法只适用于可迭代对象。<br>因此，对于将一些“东西”转换为数组的任务，Array.from 往往更通用。</li>\n</ul>\n<p>​ 总结<br> 当我们在代码中看到 “…” 时，它要么是 rest 参数，要么就是 spread 语法。</p>\n<p>有一个简单的方法可以区分它们：</p>\n<ul>\n<li><p>若 … 出现在函数参数列表的最后，那么它就是 rest 参数，它会把参数列表中剩余的参数收集到一个数组中。</p>\n</li>\n<li><p>若 … 出现在函数调用或类似的表达式中，那它就是 spread 语法，它会把一个数组展开为列表。</p>\n</li>\n<li><p>使用场景：</p>\n</li>\n<li><p>Rest 参数用于创建可接受任意数量参数的函数。</p>\n</li>\n<li><p>Spread 语法用于将数组传递给通常需要含有许多参数的列表的函数。<br>它们俩的出现帮助我们轻松地在列表和参数数组之间来回转换。</p>\n</li>\n</ul>\n<p>“旧式”的 arguments（类数组且可迭代的对象）也依然能够帮助我们获取函数调用中的所有参数。</p>\n<h2 id=\"变量作用域，闭包\"><a href=\"#变量作用域，闭包\" class=\"headerlink\" title=\"变量作用域，闭包\"></a>变量作用域，闭包</h2><h3 id=\"Step-1-变量\"><a href=\"#Step-1-变量\" class=\"headerlink\" title=\"Step 1. 变量\"></a>Step 1. 变量</h3><p>在 JavaScript 中，每个运行的函数，代码块 {…} 以及整个脚本，都有一个被称为 词法环境（Lexical Environment） 的内部（隐藏）的关联对象。</p>\n<p>词法环境对象由两部分组成：</p>\n<pre><code>  1. 环境记录（Environment Record） —— 一个存储所有局部变量作为其属性（包括一些其他信息，例如 this 的值）的对象。\n  2. 对 外部词法环境 的引用，与外部代码相关联。</code></pre>\n<p>一个“变量”只是 环境记录 这个特殊的内部对象的一个属性。“获取或修改变量”意味着“获取或修改词法环境的一个属性”。</p>\n<ul>\n<li>变量是特殊内部对象的属性，与当前正在执行的（代码）块/函数/脚本有关。</li>\n<li>操作变量实际上是操作该对象的属性。</li>\n</ul>\n<h3 id=\"Step-2-函数声明\"><a href=\"#Step-2-函数声明\" class=\"headerlink\" title=\"Step 2. 函数声明\"></a>Step 2. 函数声明</h3><p>一个函数其实也是一个值，就像变量一样。</p>\n<p><strong>* *不同之处在于函数声明的初始化会被立即完成。 **</strong></p>\n<p>当创建了一个词法环境（Lexical Environment）时，函数声明会立即变为即用型函数（不像 let 那样直到声明处才可用）。</p>\n<h3 id=\"Step-3-内部和外部的词法环境\"><a href=\"#Step-3-内部和外部的词法环境\" class=\"headerlink\" title=\"Step 3. 内部和外部的词法环境\"></a>Step 3. 内部和外部的词法环境</h3><p>在一个函数运行时，在调用刚开始时，会自动创建一个新的词法环境以存储这个调用的局部变量和参数。</p>\n<p><strong>* *当代码要访问一个变量时 —— 首先会搜索内部词法环境，然后搜索外部环境，然后搜索更外部的环境，以此类推，直到全局词法环境。 **</strong></p>\n<p>如果在任何地方都找不到这个变量，那么在严格模式下就会报错（在非严格模式下，为了向下兼容，给未定义的变量赋值会创建一个全局变量）。</p>\n<h3 id=\"Step-4-返回函数\"><a href=\"#Step-4-返回函数\" class=\"headerlink\" title=\"Step 4. 返回函数\"></a>Step 4. 返回函数</h3><p>所有的函数在“诞生”时都会记住创建它们的词法环境。从技术上讲，这里没有什么魔法：所有函数都有名为 [[Environment]] 的隐藏属性，该属性保存了对创建该函数的词法环境的引用。</p>\n<h3 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a><strong>闭包</strong></h3><p>开发者通常应该都知道“闭包”这个通用的编程术语。</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Closure_(computer_programming)\">闭包</a> 是指内部函数总是可以访问其所在的外部函数中声明的变量和参数，即使在其外部函数被返回（寿命终结）了之后。</p>\n<p>也就是说：JavaScript 中的函数会自动通过隐藏的 <code>[[Environment]]</code> 属性记住创建它们的位置，所以它们都可以访问外部变量。</p>\n<p>在面试时，前端开发者通常会被问到“什么是闭包？”，正确的回答应该是闭包的定义，并解释清楚为什么 JavaScript 中的所有函数都是闭包的，以及可能的关于 <code>[[Environment]]</code> 属性和词法环境原理的技术细节。</p>\n<h3 id=\"垃圾收集\"><a href=\"#垃圾收集\" class=\"headerlink\" title=\"垃圾收集\"></a><strong>垃圾收集</strong></h3><p>通常，函数调用完成后，会将词法环境和其中的所有变量从内存中删除。因为现在没有任何对它们的引用了。与 JavaScript 中的任何其他对象一样，词法环境仅在可达时才会被保留在内存中。</p>\n<p>但是，如果有一个嵌套的函数在函数结束后仍可达，则它将具有引用词法环境的 <code>[[Environment]]</code> 属性。</p>\n<h3 id=\"实际开发中的优化\"><a href=\"#实际开发中的优化\" class=\"headerlink\" title=\"实际开发中的优化\"></a>实际开发中的优化</h3><p>正如我们所看到的，理论上当函数可达时，它外部的所有变量也都将存在。</p>\n<p>但在实际中，JavaScript 引擎会试图优化它。它们会分析变量的使用情况，如果从代码中可以明显看出有未使用的外部变量，那么就会将其删除。</p>\n<p><strong>在 V8（Chrome，Edge，Opera）中的一个重要的副作用是，此类变量在调试中将不可用。</strong></p>\n<h1 id=\"函数对象-NFE\"><a href=\"#函数对象-NFE\" class=\"headerlink\" title=\"函数对象, NFE\"></a>函数对象, NFE</h1><p>在 JavaScript 中，函数就是对象。</p>\n<h2 id=\"属性-“name”\"><a href=\"#属性-“name”\" class=\"headerlink\" title=\"属性 “name”\"></a>属性 “name”</h2><p>函数对象包含一些便于使用的属性。</p>\n<ol>\n<li><p>一个函数的名字可以通过属性 “name” 来访问。</p>\n</li>\n<li><p>名称赋值的逻辑很智能。即使函数被创建时没有名字，名称赋值的逻辑也能给它赋予一个正确的名字，然后进行赋值。</p>\n</li>\n<li><p>以默认值的方式完成了赋值时，它也有效。</p>\n</li>\n<li><p>如果函数自己没有提供，那么在赋值中，会根据上下文来推测一个。</p>\n<p>对象方法也有名字，</p>\n</li>\n</ol>\n<h2 id=\"属性-“length”\"><a href=\"#属性-“length”\" class=\"headerlink\" title=\"属性 “length”\"></a>属性 “length”</h2><p>内置属性 “length”，它返回函数入参的个数</p>\n<p>属性 <code>length</code> 有时在操作其它函数的函数中用于做 <a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E7%9C%81_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)\">内省/运行时检查（introspection）</a>。</p>\n<h2 id=\"自定义属性\"><a href=\"#自定义属性\" class=\"headerlink\" title=\"自定义属性\"></a>自定义属性</h2><p><strong>属性不是变量</strong></p>\n<p>被赋值给函数的属性，比如 <code>sayHi.counter = 0</code>，<strong>不会</strong> 在函数内定义一个局部变量 <code>counter</code>。换句话说，属性 <code>counter</code> 和变量 <code>let counter</code> 是毫不相关的两个东西。</p>\n<p>我们可以把函数当作对象，在它里面存储属性，但是这对它的执行没有任何影响。变量不是函数属性，反之亦然。它们之间是平行的。</p>\n<h2 id=\"命名函数表达式\"><a href=\"#命名函数表达式\" class=\"headerlink\" title=\"命名函数表达式\"></a>命名函数表达式</h2><p>命名函数表达式（NFE，Named Function Expression），指带有名字的函数表达式的术语。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">let sayHi &#x3D; function func(who) &#123;\n  alert(&#96;Hello, $&#123;who&#125;&#96;);\n&#125;;\n\nsayHi(&quot;John&quot;); &#x2F;&#x2F; Hello, John<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>关于名字 <code>func</code> 有两个特殊的地方，这就是添加它的原因：</p>\n<ol>\n<li>它允许函数在内部引用自己。</li>\n<li>它在函数外是不可见的。</li>\n</ol>\n<p>下面的函数 <code>sayHi</code> 会在没有入参 <code>who</code> 时，以 <code>&quot;Guest&quot;</code> 为入参调用自己：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">who</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>who<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>who<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Guest'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 使用 func 再次调用函数自身</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello, Guest</span>\n<span class=\"token comment\">// 但这不工作：</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error, func is not defined（在函数外不可见）</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"问题（待解决）\"><a href=\"#问题（待解决）\" class=\"headerlink\" title=\"问题（待解决）\"></a>问题（待解决）</h2><h3 id=\"任意数量的括号求和\"><a href=\"#任意数量的括号求和\" class=\"headerlink\" title=\"任意数量的括号求和\"></a><a href=\"https://zh.javascript.info/function-object#ren-yi-shu-liang-de-kuo-hao-qiu-he\">任意数量的括号求和</a></h3><p>重要程度: 2</p>\n<p>写一个函数 <code>sum</code>，它有这样的功能：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span> <span class=\"token comment\">// 1 + 2</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">6</span> <span class=\"token comment\">// 1 + 2 + 3</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">6</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">15</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>P.S. 提示：你可能需要创建自定义对象来为你的函数提供基本类型转换。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/function-object#zong-jie\">总结</a></h2><p>函数就是对象。</p>\n<p>它们的一些属性：</p>\n<ul>\n<li><code>name</code> —— 函数的名字。通常取自函数定义，但如果函数定义时没设定函数名，JavaScript 会尝试通过函数的上下文猜一个函数名（例如把赋值的变量名取为函数名）。</li>\n<li><code>length</code> —— 函数定义时的入参的个数。Rest 参数不参与计数。</li>\n</ul>\n<h1 id=\"调度：setTimeout-和-setInterval\"><a href=\"#调度：setTimeout-和-setInterval\" class=\"headerlink\" title=\"调度：setTimeout 和 setInterval\"></a>调度：setTimeout 和 setInterval</h1><p>有时我们并不想立即执行一个函数，而是等待特定一段时间之后再执行。这就是所谓的“计划调用（scheduling a call）”。</p>\n<p>目前有两种方式可以实现：</p>\n<ul>\n<li><code>setTimeout</code> 允许我们将函数推迟到一段时间间隔之后再执行。</li>\n<li><code>setInterval</code> 允许我们重复运行一个函数，从一段时间间隔之后开始运行，之后以该时间间隔连续重复运行该函数。</li>\n</ul>\n<p>这两个方法并不在 JavaScript 的规范中。但是大多数运行环境都有内建的调度程序，并且提供了这些方法。目前来讲，所有浏览器以及 Node.js 都支持这两个方法。</p>\n<h2 id=\"setTimeout\"><a href=\"#setTimeout\" class=\"headerlink\" title=\"setTimeout\"></a>setTimeout</h2><p>语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>func<span class=\"token operator\">|</span>code<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>delay<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>参数说明：</p>\n<ul>\n<li><p><code>func|code</code></p>\n<p>想要执行的函数或代码字符串。 一般传入的都是函数。由于某些历史原因，支持传入代码字符串，但是不建议这样做。</p>\n</li>\n<li><p><code>delay</code></p>\n<p>执行前的延时，以毫秒为单位（1000 毫秒 = 1 秒），默认值是 0；</p>\n</li>\n<li><p><code>arg1</code>，<code>arg2</code>…</p>\n<p>要传入被执行函数（或代码字符串）的参数列表（IE9 以下不支持）</p>\n</li>\n</ul>\n<h2 id=\"嵌套的-setTimeout\"><a href=\"#嵌套的-setTimeout\" class=\"headerlink\" title=\"嵌套的 setTimeout\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#qian-tao-de-settimeout\">嵌套的 setTimeout</a></h2><p>周期性调度有两种方式。</p>\n<p>一种是使用 <code>setInterval</code>，另外一种就是嵌套的 <code>setTimeout</code>，就像这样：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/** instead of:\nlet timerId = setInterval(() => alert('tick'), 2000);\n*/</span>\n\n<span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tick'</span><span class=\"token punctuation\">)</span>\n  timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// (*)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>上面这个 <code>setTimeout</code> 在当前这一次函数执行完时 <code>(*)</code> 立即调度下一次调用。</p>\n<p>嵌套的 <code>setTimeout</code> 要比 <code>setInterval</code> 灵活得多。采用这种方式可以根据当前执行结果来调度下一次调用，因此下一次调用可以与当前这一次不同。</p>\n<p><strong>传入一个函数，但不要执行它</strong></p>\n<p>新手开发者有时候会误将一对括号 <code>()</code> 加在函数后面：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 错的！</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>这样不行，因为 <code>setTimeout</code> 期望得到一个对函数的引用。而这里的 <code>sayHi()</code> 很明显是在执行函数，所以实际上传入 <code>setTimeout</code> 的是 <strong>函数的执行结果</strong>。在这个例子中，<code>sayHi()</code> 的执行结果是 <code>undefined</code>（也就是说函数没有返回任何结果），所以实际上什么也没有调度。</p>\n<h3 id=\"用-clearTimeout-来取消调度\"><a href=\"#用-clearTimeout-来取消调度\" class=\"headerlink\" title=\"用 clearTimeout 来取消调度\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#yong-cleartimeout-lai-qu-xiao-tiao-du\">用 clearTimeout 来取消调度</a></h3><p><code>setTimeout</code> 在调用时会返回一个“定时器标识符（timer identifier）”，在我们的例子中是 <code>timerId</code>，我们可以使用它来取消执行。</p>\n<p>取消调度的语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timerId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h2 id=\"setInterval\"><a href=\"#setInterval\" class=\"headerlink\" title=\"setInterval\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#setinterval\">setInterval</a></h2><p><code>setInterval</code> 方法和 <code>setTimeout</code> 的语法相同：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>func<span class=\"token operator\">|</span>code<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>delay<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>所有参数的意义也是相同的。不过与 <code>setTimeout</code> 只执行一次不同，<code>setInterval</code> 是每间隔给定的时间周期性执行。</p>\n<p>想要阻止后续调用，我们需要调用 <code>clearInterval(timerId)</code>。</p>\n<p><strong>alert 弹窗显示的时候计时器依然在进行计时</strong></p>\n<p>在大多数浏览器中，包括 Chrome 和 Firefox，在显示 <code>alert/confirm/prompt</code> 弹窗时，内部的定时器仍旧会继续“嘀嗒”。</p>\n<p>所以，在运行上面的代码时，如果在一定时间内没有关掉 <code>alert</code> 弹窗，那么在你关闭弹窗后，下一个 <code>alert</code> 会立即显示。两次 <code>alert</code> 之间的时间间隔将小于 2 秒。</p>\n<p><strong>嵌套的 <code>setTimeout</code> 能够精确地设置两次执行之间的延时，而 <code>setInterval</code> 却不能。</strong></p>\n<h2 id=\"零延时的-setTimeout\"><a href=\"#零延时的-setTimeout\" class=\"headerlink\" title=\"零延时的 setTimeout\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#ling-yan-shi-de-settimeout\">零延时的 setTimeout</a></h2><p>这儿有一种特殊的用法：<code>setTimeout(func, 0)</code>，或者仅仅是 <code>setTimeout(func)</code>。</p>\n<p>这样调度可以让 <code>func</code> 尽快执行。但是只有在当前正在执行的脚本执行完成后，调度程序才会调用它。</p>\n<p>也就是说，该函数被调度在当前脚本执行完成“之后”立即执行。</p>\n<p>例如，下面这段代码会先输出 “Hello”，然后立即输出 “World”：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'World'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>第一行代码“将调用安排到日程（calendar）0 毫秒处”。但是调度程序只有在当前脚本执行完毕时才会去“检查日程”，所以先输出 <code>&quot;Hello&quot;</code>，然后才输出 <code>&quot;World&quot;</code>。</p>\n<p><strong>零延时实际上不为零（在浏览器中）</strong></p>\n<h2 id=\"总结-1\"><a href=\"#总结-1\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#zong-jie\">总结</a></h2><ul>\n<li><code>setTimeout(func, delay, ...args)</code> 和 <code>setInterval(func, delay, ...args)</code> 方法允许我们在 <code>delay</code> 毫秒之后运行 <code>func</code> 一次或以 <code>delay</code> 毫秒为时间间隔周期性运行 <code>func</code>。</li>\n<li>要取消函数的执行，我们应该调用 <code>clearInterval/clearTimeout</code>，并将 <code>setInterval/setTimeout</code> 返回的值作为入参传入。</li>\n<li>嵌套的 <code>setTimeout</code> 比 <code>setInterval</code> 用起来更加灵活，允许我们更精确地设置两次执行之间的时间。</li>\n<li>零延时调度 <code>setTimeout(func, 0)</code>（与 <code>setTimeout(func)</code> 相同）用来调度需要尽快执行的调用，但是会在当前脚本执行完成后进行调用。</li>\n<li>浏览器会将 <code>setTimeout</code> 或 <code>setInterval</code> 的五层或更多层嵌套调用（调用五次之后）的最小延时限制在 4ms。这是历史遗留问题。</li>\n</ul>\n<h1 id=\"函数绑定\"><a href=\"#函数绑定\" class=\"headerlink\" title=\"函数绑定\"></a>函数绑定</h1><p>当将对象方法作为回调进行传递，例如传递给 <code>setTimeout</code>，这儿会存在一个常见的问题：“丢失 <code>this</code>”。</p>\n<h2 id=\"丢失-“this”\"><a href=\"#丢失-“this”\" class=\"headerlink\" title=\"丢失 “this”\"></a><a href=\"https://zh.javascript.info/bind#diu-shi-this\">丢失 “this”</a></h2><p>下面是使用 <code>setTimeout</code> 时 <code>this</code> 是如何丢失的：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstName<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>sayHi<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello, undefined!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"解决方案-1：包装器\"><a href=\"#解决方案-1：包装器\" class=\"headerlink\" title=\"解决方案 1：包装器\"></a><a href=\"https://zh.javascript.info/bind#jie-jue-fang-an-1-bao-zhuang-qi\">解决方案 1：包装器</a></h2><p>最简单的解决方案是使用一个包装函数：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstName<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  user<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello, John!</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>现在它可以正常工作了，因为它从外部词法环境中获取到了 <code>user</code>，就可以正常地调用方法了。</p>\n<h2 id=\"解决方案-2：bind\"><a href=\"#解决方案-2：bind\" class=\"headerlink\" title=\"解决方案 2：bind\"></a><a href=\"https://zh.javascript.info/bind#jie-jue-fang-an-2-bind\">解决方案 2：bind</a></h2><p>函数提供了一个内建方法 <a href=\"https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\">bind</a>，它可以绑定 <code>this</code>。</p>\n<p>基本的语法是：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 稍后将会有更复杂的语法</span>\n<span class=\"token keyword\">let</span> boundFunc <span class=\"token operator\">=</span> <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><code>func.bind(context)</code> 的结果是一个特殊的类似于函数的“外来对象（exotic object）”，它可以像函数一样被调用，并且透明地（transparently）将调用传递给 <code>func</code> 并设定 <code>this=context</code>。</p>\n<p><code>boundFunc</code> 调用就像绑定了 <code>this</code> 的 <code>func</code>。</p>\n<h2 id=\"在没有上下文情况下的-partial\"><a href=\"#在没有上下文情况下的-partial\" class=\"headerlink\" title=\"在没有上下文情况下的 partial\"></a><a href=\"https://zh.javascript.info/bind#zai-mei-you-shang-xia-wen-qing-kuang-xia-de-partial\">在没有上下文情况下的 partial</a></h2><p>当我们想绑定一些参数（arguments），但是这里没有上下文 <code>this</code>，应该怎么办？例如，对于一个对象方法。</p>\n<p>原生的 <code>bind</code> 不允许这种情况。我们不可以省略上下文直接跳到参数（arguments）。</p>\n<p><code>partial(func[, arg1, arg2...])</code> 调用的结果是一个包装器 <code>(*)</code>，它调用 <code>func</code> 并具有以下内容：</p>\n<ul>\n<li>与它获得的函数具有相同的 <code>this</code>（对于 <code>user.sayNow</code> 调用来说，它是 <code>user</code>）</li>\n<li>然后给它 <code>...argsBound</code> —— 来自于 <code>partial</code> 调用的参数（<code>&quot;10:00&quot;</code>）</li>\n<li>然后给它 <code>...args</code> —— 给包装器的参数（<code>&quot;Hello&quot;</code>）</li>\n</ul>\n<h2 id=\"总结-2\"><a href=\"#总结-2\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/bind#zong-jie\">总结</a></h2><p>方法 <code>func.bind(context, ...args)</code> 返回函数 <code>func</code> 的“绑定的（bound）变体”，它绑定了上下文 <code>this</code> 和第一个参数（如果给定了）。</p>\n<p>通常我们应用 <code>bind</code> 来绑定对象方法的 <code>this</code>，这样我们就可以把它们传递到其他地方使用。例如，传递给 <code>setTimeout</code>。</p>\n<p>当我们绑定一个现有的函数的某些参数时，绑定后的（不太通用的）函数被称为 <strong>partially applied</strong> 或 <strong>partial</strong>。</p>\n<p>当我们不想一遍又一遍地重复相同的参数时，partial 非常有用。就像我们有一个 <code>send(from, to)</code> 函数，并且对于我们的任务来说，<code>from</code> 应该总是一样的，那么我们就可以搞一个 partial 并使用它。</p>\n<h1 id=\"深入理解箭头函数\"><a href=\"#深入理解箭头函数\" class=\"headerlink\" title=\"深入理解箭头函数\"></a>深入理解箭头函数</h1><p>让我们深入研究一下箭头函数。</p>\n<p>箭头函数不仅仅是编写简洁代码的“捷径”。它还具有非常特殊且有用的特性。</p>\n<p>JavaScript 充满了我们需要编写在其他地方执行的小函数的情况。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token comment\">/* 这个箭头函数是下面这个函数的更短的版本：\n\nlet sum = function(a, b) &#123;\n  return a + b;\n&#125;;\n*/</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ul>\n<li>如果我们只有一个参数，还可以省略掉参数外的圆括号，使代码更短。</li>\n<li>如果没有参数，括号将是空的（但括号应该保留）：</li>\n</ul>\n<h2 id=\"箭头函数没有-“this”\"><a href=\"#箭头函数没有-“this”\" class=\"headerlink\" title=\"箭头函数没有 “this”\"></a><a href=\"https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-this\">箭头函数没有 “this”</a></h2><p>正如我们在 <a href=\"https://zh.javascript.info/object-methods\">对象方法，”this”</a> 一章中所学到的，箭头函数没有 <code>this</code>。如果访问 <code>this</code>，则会从外部获取。</p>\n<p><strong>不能对箭头函数进行 <code>new</code> 操作</strong></p>\n<p>不具有 <code>this</code> 自然也就意味着另一个限制：箭头函数不能用作构造器（constructor）。不能用 <code>new</code> 调用它们。</p>\n<h2 id=\"箭头函数没有-“arguments”\"><a href=\"#箭头函数没有-“arguments”\" class=\"headerlink\" title=\"箭头函数没有 “arguments”\"></a><a href=\"https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-arguments\">箭头函数没有 “arguments”</a></h2><p>箭头函数也没有 <code>arguments</code> 变量。</p>\n<p>当我们需要使用当前的 <code>this</code> 和 <code>arguments</code> 转发一个调用时，这对装饰器（decorators）来说非常有用。</p>\n<h2 id=\"总结-3\"><a href=\"#总结-3\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/arrow-functions#zong-jie\">总结</a></h2><p>箭头函数：</p>\n<ul>\n<li>没有 <code>this</code></li>\n<li>没有 <code>arguments</code></li>\n<li>不能使用 <code>new</code> 进行调用</li>\n<li>它们也没有 <code>super</code></li>\n</ul>\n<h1 id=\"Mixin-模式\"><a href=\"#Mixin-模式\" class=\"headerlink\" title=\"Mixin 模式\"></a>Mixin 模式</h1><p><a href=\"https://en.wikipedia.org/wiki/Mixin\">mixin</a> 是一个包含可被其他类使用而无需继承的方法的类。</p>\n<h2 id=\"EventMixin\"><a href=\"#EventMixin\" class=\"headerlink\" title=\"EventMixin\"></a><a href=\"https://zh.javascript.info/mixins#eventmixin\">EventMixin</a></h2><p>现在让我们为实际运用构造一个 mixin。</p>\n<p>例如，许多浏览器对象的一个重要功能是它们可以生成事件。事件是向任何有需要的人“广播信息”的好方法。因此，让我们构造一个 mixin，使我们能够轻松地将与事件相关的函数添加到任意 class/object 中。</p>\n<ul>\n<li>Mixin 将提供 <code>.trigger(name, [...data])</code> 方法，以在发生重要的事情时“生成一个事件”。<code>name</code> 参数（arguments）是事件的名称，<code>[...data]</code> 是可选的带有事件数据的其他参数（arguments）。</li>\n<li>此外还有 <code>.on(name, handler)</code> 方法，它为具有给定名称的事件添加了 <code>handler</code> 函数作为监听器（listener）。当具有给定 <code>name</code> 的事件触发时将调用该方法，并从 <code>.trigger</code> 调用中获取参数（arguments）。</li>\n<li>……还有 <code>.off(name, handler)</code> 方法，它会删除 <code>handler</code> 监听器（listener）。</li>\n</ul>\n<h2 id=\"总结-4\"><a href=\"#总结-4\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/mixins#zong-jie\">总结</a></h2><p><em>Mixin</em> — 是一个通用的面向对象编程术语：一个包含其他类的方法的类。</p>\n<p>一些其它编程语言允许多重继承。JavaScript 不支持多重继承，但是可以通过将方法拷贝到原型中来实现 mixin。</p>\n<p>我们可以使用 mixin 作为一种通过添加多种行为（例如上文中所提到的事件处理）来扩充类的方法。</p>\n<p><strong>受保护的属性通常以下划线 <code>_</code> 作为前缀。</strong></p>\n<h1 id=\"简介：回调\"><a href=\"#简介：回调\" class=\"headerlink\" title=\"简介：回调\"></a>简介：回调</h1><p>JavaScript 主机（host）环境提供了许多函数，这些函数允许我们计划 <strong>异步</strong> 行为（action）。</p>\n<p>脚本是“异步”调用的，因为它从现在开始加载，但是在这个加载函数执行完成后才运行。</p>\n<h1 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h1><p>Promise 对象的构造器（constructor）语法如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// executor（生产者代码，“歌手”）</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>传递给 <code>new Promise</code> 的函数被称为 <strong>executor</strong>。当 <code>new Promise</code> 被创建，executor 会自动运行。</p>\n<p>当 executor 获得了结果，无论是早还是晚都没关系，它应该调用以下回调之一：</p>\n<ul>\n<li><code>resolve(value)</code> — 如果任务成功完成并带有结果 <code>value</code>。</li>\n<li><code>reject(error)</code> — 如果出现了 error，<code>error</code> 即为 error 对象。</li>\n</ul>\n<p>executor 会自动运行并尝试执行一项工作。尝试结束后，如果成功则调用 <code>resolve</code>，如果出现 error 则调用 <code>reject</code>。</p>\n<p>由 <code>new Promise</code> 构造器返回的 <code>promise</code> 对象具有以下内部属性：</p>\n<ul>\n<li><code>state</code> — 最初是 <code>&quot;pending&quot;</code>，然后在 <code>resolve</code> 被调用时变为 <code>&quot;fulfilled&quot;</code>，或者在 <code>reject</code> 被调用时变为 <code>&quot;rejected&quot;</code>。</li>\n<li><code>result</code> — 最初是 <code>undefined</code>，然后在 <code>resolve(value)</code> 被调用时变为 <code>value</code>，或者在 <code>reject(error)</code> 被调用时变为 <code>error</code>。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Promises</th>\n<th align=\"left\">Callbacks</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Promises 允许我们按照自然顺序进行编码。首先，我们运行 <code>loadScript</code> 和 <code>.then</code> 来处理结果。</td>\n<td align=\"left\">在调用 <code>loadScript(script, callback)</code> 时，在我们处理的地方（disposal）必须有一个 <code>callback</code> 函数。换句话说，在调用 <code>loadScript</code> <strong>之前</strong>，我们必须知道如何处理结果。</td>\n</tr>\n<tr>\n<td align=\"left\">我们可以根据需要，在 promise 上多次调用 <code>.then</code>。每次调用，我们都会在“订阅列表”中添加一个新的“分析”，一个新的订阅函数。在下一章将对此内容进行详细介绍：<a href=\"https://zh.javascript.info/promise-chaining\">Promise 链</a>。</td>\n<td align=\"left\">只能有一个回调。</td>\n</tr>\n</tbody></table>\n<p>因此，promise 为我们提供了更好的代码流和灵活性。</p>\n<p>一个 promise 构造器和一个简单的 executor 函数，该 executor 函数具有包含时间（即 <code>setTimeout</code>）的“生产者代码”：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 当 promise 被构造完成时，自动执行此函数</span>\n\n  <span class=\"token comment\">// 1 秒后发出工作已经被完成的信号，并带有结果 \"done\"</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在 new Promise()的时候，Promise 的执行器就会立马执行，但是<strong>调用 resolve()会触发异步操作，传入的 then()方法的函数会被添加到任务队列并异步执行</strong></p>\n<p><code>promise</code> 对象代表异步执行结果，通过构造函数 <code>new Promise</code> 创建，其参数是 executor function 可能有一些异步代码，对象其后的方法 <code>.then</code>、<code>.catch</code>、<code>.finally</code> 相当于回调函数。</p>\n<p>一开始创建的 <code>promise</code> 对象状态是 <code>pending</code>（表示初始状态）然后在 executor function 中会有条件地执行 <code>resolve</code> 或 <code>reject</code> 之一，这样就会改变 <code>promise</code> 对象的状态为 <code>settled</code>（表示状态确定，可以触发对象后的方法 <code>.finally</code>）</p>\n<p><code>promise</code> 对象确定的状态其实有两种，如果在 executor function 调用的是 <code>resolve</code> 状态就变成 <code>resolved</code> 相应地会调用对象后的方法 <code>.then</code>；而如果在 executor function 调用的是 <code>reject</code> 状态就变成 <code>rejected</code> 相应地会调用对象后的方法 <code>.catch</code>（其实这是 <code>.then(null, rejectFunc)</code> 缩写形式）</p>\n<h1 id=\"Promise-链\"><a href=\"#Promise-链\" class=\"headerlink\" title=\"Promise 链\"></a>Promise 链</h1><p>它的理念是将 result 通过 <code>.then</code> 处理程序（handler）链进行传递。</p>\n<p>运行流程如下：</p>\n<ol>\n<li>初始 promise 在 1 秒后进行 resolve <code>(*)</code>，</li>\n<li>然后 <code>.then</code> 处理程序（handler）被调用 <code>(**)</code>。</li>\n<li>它返回的值被传入下一个 <code>.then</code> 处理程序（handler）<code>(***)</code></li>\n<li>……依此类推。</li>\n</ol>\n<p><strong>新手常犯的一个经典错误：从技术上讲，我们也可以将多个 <code>.then</code> 添加到一个 promise 上。但这并不是 promise 链（chaining）。</strong></p>\n<h2 id=\"总结-5\"><a href=\"#总结-5\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/promise-chaining#zong-jie\">总结</a></h2><p>如果 <code>.then</code>（或 <code>catch/finally</code> 都可以）处理程序（handler）返回一个 promise，那么链的其余部分将会等待，直到它状态变为 settled。当它被 settled 后，其 result（或 error）将被进一步传递下去。</p>\n<p><img src=\"E:\\Markdown图片\\image-20210128140346440.png\" alt=\"image-20210128140346440\"></p>\n<h1 id=\"使用-promise-进行错误处理\"><a href=\"#使用-promise-进行错误处理\" class=\"headerlink\" title=\"使用 promise 进行错误处理\"></a>使用 promise 进行错误处理</h1><p>Promise 链在错误（error）处理中十分强大。当一个 promise 被 reject 时，控制权将移交至最近的 rejection 处理程序（handler）。</p>\n<h2 id=\"隐式-try…catch\"><a href=\"#隐式-try…catch\" class=\"headerlink\" title=\"隐式 try…catch\"></a><a href=\"https://zh.javascript.info/promise-error-handling#yin-shi-trycatch\">隐式 try…catch</a></h2><p>Promise 的执行者（executor）和 promise 的处理程序（handler）周围有一个“隐式的 <code>try..catch</code>”。如果发生异常，它（译注：指异常）就会被捕获，并被视为 rejection 进行处理。</p>\n<p>下面这段代码：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops!'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Whoops!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>……与下面这段代码工作上完全相同：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Whoops!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>在 executor 周围的“隐式 <code>try..catch</code>”自动捕获了 error，并将其变为 rejected promise。</p>\n<p>这不仅仅发生在 executor 函数中，同样也发生在其 handler 中。如果我们在 <code>.then</code> 处理程序（handler）中 <code>throw</code>，这意味着 promise 被 rejected，因此控制权移交至最近的 error 处理程序（handler）。</p>\n<p>一个例子：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ok'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops!'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// reject 这个 promise</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Whoops!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"再次抛出（Rethrowing）\"><a href=\"#再次抛出（Rethrowing）\" class=\"headerlink\" title=\"再次抛出（Rethrowing）\"></a><a href=\"https://zh.javascript.info/promise-error-handling#zai-ci-pao-chu-rethrowing\">再次抛出（Rethrowing）</a></h2><p>链尾端的 <code>.catch</code> 的表现有点像 <code>try..catch</code>。我们可能有许多个 <code>.then</code> 处理程序（handler），然后在尾端使用一个 <code>.catch</code> 处理上面的所有 error。</p>\n<h2 id=\"总结-6\"><a href=\"#总结-6\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/promise-error-handling#zong-jie\">总结</a></h2><ul>\n<li><code>.catch</code> 处理 promise 中的各种 error：在 <code>reject()</code> 调用中的，或者在处理程序（handler）中抛出的（thrown）error。</li>\n<li>我们应该将 <code>.catch</code> 准确地放到我们想要处理 error，并知道如何处理这些 error 的地方。处理程序应该分析 error（可以自定义 error 类来帮助分析）并再次抛出未知的 error（可能它们是编程错误）。</li>\n<li>如果没有办法从 error 中恢复的话，不使用 <code>.catch</code> 也可以。</li>\n<li>在任何情况下我们都应该有 <code>unhandledrejection</code> 事件处理程序（用于浏览器，以及其他环境的模拟），以跟踪未处理的 error 并告知用户（可能还有我们的服务器）有关信息，以使我们的应用程序永远不会“死掉”。</li>\n</ul>\n<h1 id=\"Promise-API\"><a href=\"#Promise-API\" class=\"headerlink\" title=\"Promise API\"></a>Promise API</h1><h2 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all\"></a><a href=\"https://zh.javascript.info/promise-api#promiseall\">Promise.all</a></h2><p>假设我们希望并行执行多个 promise，并等待所有 promise 都准备就绪。语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>promises<span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><code>Promise.all(iterable)</code> <strong>允许在</strong> <code>iterable</code> <strong>中使用 non-promise 的“常规”值</strong></p>\n<p><code>Promise.all</code> 接受一个 promise 数组作为参数（从技术上讲，它可以是任何可迭代的，但通常是一个数组）并返回一个新的 promise。</p>\n<p><strong>如果任意一个 promise 被 reject，由 <code>Promise.all</code> 返回的 promise 就会立即 reject，并且带有的就是这个 error。</strong></p>\n<h2 id=\"Promise-allSettled\"><a href=\"#Promise-allSettled\" class=\"headerlink\" title=\"Promise.allSettled\"></a><a href=\"https://zh.javascript.info/promise-api#promiseallsettled\">Promise.allSettled</a></h2><p><code>Promise.allSettled</code> 等待所有的 promise 都被 settle，无论结果如何。结果数组具有：</p>\n<ul>\n<li><code>&#123;status:&quot;fulfilled&quot;, value:result&#125;</code> 对于成功的响应，</li>\n<li><code>&#123;status:&quot;rejected&quot;, reason:error&#125;</code> 对于 error。</li>\n</ul>\n<h2 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a><a href=\"https://zh.javascript.info/promise-api#promiserace\">Promise.race</a></h2><p>与 <code>Promise.all</code> 类似，但只等待第一个 settled 的 promise 并获取其结果（或 error）。</p>\n<p><code>Promise.all</code> 可能是在实战中使用最多的。</p>\n<h1 id=\"微任务（Microtask）\"><a href=\"#微任务（Microtask）\" class=\"headerlink\" title=\"微任务（Microtask）\"></a>微任务（Microtask）</h1><p>Promise 的处理程序（handlers）<code>.then</code>、<code>.catch</code> 和 <code>.finally</code> 都是异步的。</p>\n<p>即便一个 promise 立即被 resolve，<code>.then</code>、<code>.catch</code> 和 <code>.finally</code> <strong>下面</strong> 的代码也会在这些处理程序（handler）之前被执行。</p>\n<h2 id=\"微任务队列（Microtask-queue）\"><a href=\"#微任务队列（Microtask-queue）\" class=\"headerlink\" title=\"微任务队列（Microtask queue）\"></a><a href=\"https://zh.javascript.info/microtask-queue#wei-ren-wu-dui-lie-microtaskqueue\">微任务队列（Microtask queue）</a></h2><p>异步任务需要适当的管理。为此，ECMA 标准规定了一个内部队列 <code>PromiseJobs</code>，通常被称为“微任务队列（microtask queue）”（ES8 术语）。</p>\n<p>如 <a href=\"https://tc39.github.io/ecma262/#sec-jobs-and-job-queues\">规范</a> 中所述：</p>\n<ul>\n<li>队列（queue）是先进先出的：首先进入队列的任务会首先运行。</li>\n<li>只有在 JavaScript 引擎中没有其它任务在运行时，才开始执行任务队列中的任务。</li>\n</ul>\n<p>当一个 promise 准备就绪时，它的 <code>.then/catch/finally</code> 处理程序（handler）就会被放入队列中：但是它们不会立即被执行。当 JavaScript 引擎执行完当前的代码，它会从队列中获取任务并执行它。</p>\n<p>如果有一个包含多个 <code>.then/catch/finally</code> 的链，那么它们中的每一个都是异步执行的。也就是说，它会首先进入队列，然后在当前代码执行完成并且先前排队的处理程序（handler）都完成时才会被执行。</p>\n<h2 id=\"总结-7\"><a href=\"#总结-7\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/microtask-queue#zong-jie\">总结</a></h2><p>Promise 处理始终是异步的，因为所有 promise 行为都会通过内部的 “promise jobs” 队列，也被称为“微任务队列”（ES8 术语）。</p>\n<p>因此，<code>.then/catch/finally</code> 处理程序（handler）总是在当前代码完成后才会被调用。</p>\n<p>如果我们需要确保一段代码在 <code>.then/catch/finally</code> 之后被执行，我们可以将它添加到链式调用的 <code>.then</code> 中。</p>\n<h1 id=\"Async-await\"><a href=\"#Async-await\" class=\"headerlink\" title=\"Async/await\"></a>Async/await</h1><h2 id=\"Async-function\"><a href=\"#Async-function\" class=\"headerlink\" title=\"Async function\"></a><a href=\"https://zh.javascript.info/async-await#asyncfunction\">Async function</a></h2><p>Async/await 是以更舒适的方式使用 promise 的一种特殊语法，同时它也非常易于理解和使用。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>在函数前面的 “async” 这个单词表达了一个简单的事情：即这个函数总是返回一个 promise。其他值将自动被包装在一个 resolved 的 promise 中。</p>\n<h2 id=\"Await\"><a href=\"#Await\" class=\"headerlink\" title=\"Await\"></a><a href=\"https://zh.javascript.info/async-await#await\">Await</a></h2><p>语法如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 只在 async 函数内工作</span>\n<span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> promise<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>关键字 <code>await</code> 让 JavaScript 引擎等待直到 promise 完成（settle）并返回结果。</p>\n<h1 id=\"Generator\"><a href=\"#Generator\" class=\"headerlink\" title=\"Generator\"></a>Generator</h1><p>常规函数只会返回一个单一值（或者不返回任何值）。</p>\n<p>而 Generator 可以按需一个接一个地返回（“yield”）多个值。它们可与 <a href=\"https://zh.javascript.info/iterable\">iterable</a> 完美配合使用，从而可以轻松地创建数据流。</p>\n<h2 id=\"Generator-函数\"><a href=\"#Generator-函数\" class=\"headerlink\" title=\"Generator 函数\"></a><a href=\"https://zh.javascript.info/generators#generator-han-shu\">Generator 函数</a></h2><p>要创建一个 generator，我们需要一个特殊的语法结构：<code>function*</code>，即所谓的 “generator function”。</p>\n<p>像这样：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">generateSequence</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>一个 generator 的主要方法就是 <code>next()</code>。当被调用时（译注：指 <code>next()</code> 方法），它会恢复上图所示的运行，执行直到最近的 <code>yield &lt;value&gt;</code> 语句（<code>value</code> 可以被省略，默认为 <code>undefined</code>）。然后函数执行暂停，并将产出的（yielded）值返回到外部代码。</p>\n<p><code>next()</code> 的结果始终是一个具有两个属性的对象：</p>\n<ul>\n<li><code>value</code>: 产出的（yielded）的值。</li>\n<li><code>done</code>: 如果 generator 函数已执行完成则为 <code>true</code>，否则为 <code>false</code>。</li>\n</ul>\n<p>代码恢复执行并返回下一个 <code>yield</code> 的值：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> two <span class=\"token operator\">=</span> generator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>two<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// &#123;value: 2, done: false&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong><code>function\\* f(…)</code> 或 <code>function \\*f(…)</code>？</strong></p>\n<p>这两种语法都是对的。</p>\n<p>但是通常更倾向于第一种语法，因为星号 <code>*</code> 表示它是一个 generator 函数，它描述的是函数种类而不是名称，因此 <code>*</code> 应该和 <code>function</code> 关键字紧贴一起。</p>\n<h2 id=\"“yield”-是一条双向路\"><a href=\"#“yield”-是一条双向路\" class=\"headerlink\" title=\"“yield” 是一条双向路\"></a><a href=\"https://zh.javascript.info/generators#yield-shi-yi-tiao-shuang-xiang-lu\">“yield” 是一条双向路</a></h2><p>目前看来，generator 和可迭代对象类似，都具有用来生成值的特殊语法。但实际上，generator 更加强大且灵活。</p>\n<p>这是因为 <code>yield</code> 是一条双向路（two-way street）：它不仅可以向外返回结果，而且还可以将外部的值传递到 generator 内。</p>\n<p>调用 <code>generator.next(arg)</code>，我们就能将参数 <code>arg</code> 传递到 generator 内部。这个 <code>arg</code> 参数会变成 <code>yield</code> 的结果。</p>\n<h2 id=\"generator-throw\"><a href=\"#generator-throw\" class=\"headerlink\" title=\"generator.throw\"></a><a href=\"https://zh.javascript.info/generators#generatorthrow\">generator.throw</a></h2><p>正如我们在上面的例子中观察到的那样，外部代码可能会将一个值传递到 generator，作为 <code>yield</code> 的结果。</p>\n<p>……但是它也可以在那里发起（抛出）一个 error。这很自然，因为 error 本身也是一种结果。</p>\n<p>要向 <code>yield</code> 传递一个 error，我们应该调用 <code>generator.throw(err)</code>。在这种情况下，<code>err</code> 将被抛到对应的 <code>yield</code> 所在的那一行。</p>\n<h2 id=\"总结-8\"><a href=\"#总结-8\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/generators#zong-jie\">总结</a></h2><ul>\n<li>Generator 是通过 generator 函数 <code>function* f(…) &#123;…&#125;</code> 创建的。</li>\n<li>在 generator（仅在）内部，存在 <code>yield</code> 操作。</li>\n<li>外部代码和 generator 可能会通过 <code>next/yield</code> 调用交换结果。</li>\n</ul>\n<h1 id=\"异步迭代和-generator\"><a href=\"#异步迭代和-generator\" class=\"headerlink\" title=\"异步迭代和 generator\"></a>异步迭代和 generator</h1><p>异步迭代允许我们对按需通过异步请求而得到的数据进行迭代。</p>\n<p>当值是以异步的形式出现时，例如在 <code>setTimeout</code> 或者另一种延迟之后，就需要异步迭代。</p>\n<p>最常见的场景是，对象需要发送一个网络请求以传递下一个值，稍后我们将看到一个它的真实示例。</p>\n<p>要使对象异步迭代：</p>\n<ol>\n<li>使用 <code>Symbol.asyncIterator</code> 取代 <code>Symbol.iterator</code>。</li>\n<li><code>next()</code> 方法应该返回一个 <code>promise</code>（带有下一个值，并且状态为 <code>fulfilled</code>）。<ul>\n<li>关键字 <code>async</code> 可以实现这一点，我们可以简单地使用 <code>async next()</code>。</li>\n</ul>\n</li>\n<li>我们应该使用 <code>for await (let item of iterable)</code> 循环来迭代这样的对象。<ul>\n<li>注意关键字 <code>await</code>。</li>\n</ul>\n</li>\n</ol>\n<p>作为开始的示例，让我们创建一个可迭代的 <code>range</code> 对象，与前面的那个类似，不过现在它将异步地每秒返回一个值。</p>\n<p>我们需要做的就是对上面代码中的部分代码进行替换：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> range <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">from</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  to<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>asyncIterator<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// (1)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n      current<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span>\n      last<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">,</span>\n\n      <span class=\"token keyword\">async</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// (2)</span>\n\n        <span class=\"token comment\">// 注意：我们可以在 async next 内部使用 \"await\"</span>\n        <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// (3)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>current <span class=\"token operator\">&lt;=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>last<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>current<span class=\"token operator\">++</span> <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token keyword\">await</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> value <span class=\"token keyword\">of</span> range<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// (4)</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1,2,3,4,5</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>正如我们所看到的，其结构与常规的 iterator 类似:</p>\n<ol>\n<li>为了使一个对象可以异步迭代，它必须具有方法 <code>Symbol.asyncIterator</code> <code>(1)</code>。</li>\n<li>这个方法必须返回一个带有 <code>next()</code> 方法的对象，<code>next()</code> 方法会返回一个 promise <code>(2)</code>。</li>\n<li>这个 <code>next()</code> 方法可以不是 <code>async</code> 的，它可以是一个返回值是一个 <code>promise</code> 的常规的方法，但是使用 <code>async</code> 关键字可以允许我们在方法内部使用 <code>await</code>，所以会更加方便。这里我们只是用于延迟 1 秒的操作 <code>(3)</code>。</li>\n<li>我们使用 <code>for await(let value of range)</code> <code>(4)</code> 来进行迭代，也就是在 <code>for</code> 后面添加 <code>await</code>。它会调用一次 <code>range[Symbol.asyncIterator]()</code> 方法一次，然后调用它的 <code>next()</code> 方法获取值。</li>\n</ol>\n<p>这是一个对比 Iterator 和异步 iterator 之间差异的表格：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">Iterator</th>\n<th align=\"left\">异步 iterator</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">提供 iterator 的对象方法</td>\n<td align=\"left\"><code>Symbol.iterator</code></td>\n<td align=\"left\"><code>Symbol.asyncIterator</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code>next()</code> 返回的值是</td>\n<td align=\"left\">任意值</td>\n<td align=\"left\"><code>Promise</code></td>\n</tr>\n<tr>\n<td align=\"left\">要进行循环，使用</td>\n<td align=\"left\"><code>for..of</code></td>\n<td align=\"left\"><code>for await..of</code></td>\n</tr>\n</tbody></table>\n<h1 id=\"模块-Module-简介\"><a href=\"#模块-Module-简介\" class=\"headerlink\" title=\"模块 (Module) 简介\"></a>模块 (Module) 简介</h1><p>社区发明了许多种方法来将代码组织到模块中，使用特殊的库按需加载模块。</p>\n<p>列举一些（出于历史原因）：</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Asynchronous_module_definition\">AMD</a> —— 最古老的模块系统之一，最初由 <a href=\"http://requirejs.org/\">require.js</a> 库实现。</li>\n<li><a href=\"http://wiki.commonjs.org/wiki/Modules/1.1\">CommonJS</a> —— 为 Node.js 服务器创建的模块系统。</li>\n<li><a href=\"https://github.com/umdjs/umd\">UMD</a> —— 另外一个模块系统，建议作为通用的模块系统，它与 AMD 和 CommonJS 都兼容。</li>\n</ul>\n<h2 id=\"什么是模块？\"><a href=\"#什么是模块？\" class=\"headerlink\" title=\"什么是模块？\"></a><a href=\"https://zh.javascript.info/modules-intro#shi-mo-shi-mo-kuai\">什么是模块？</a></h2><p>一个模块（module）就是一个文件。一个脚本就是一个模块。就这么简单。</p>\n<p>模块可以相互加载，并可以使用特殊的指令 <code>export</code> 和 <code>import</code> 来交换功能，从另一个模块调用一个模块的函数：</p>\n<ul>\n<li><code>export</code> 关键字标记了可以从当前模块外部访问的变量和函数。</li>\n<li><code>import</code> 关键字允许从其他模块导入功能。</li>\n</ul>\n<h2 id=\"模块核心功能\"><a href=\"#模块核心功能\" class=\"headerlink\" title=\"模块核心功能\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-he-xin-gong-neng\">模块核心功能</a></h2><h3 id=\"始终使用-“use-strict”\"><a href=\"#始终使用-“use-strict”\" class=\"headerlink\" title=\"始终使用 “use strict”\"></a><a href=\"https://zh.javascript.info/modules-intro#shi-zhong-shi-yong-usestrict\">始终使用 “use strict”</a></h3><p>模块始终默认使用 <code>use strict</code>，例如，对一个未声明的变量赋值将产生错误（译注：在浏览器控制台可以看到 error 信息）。</p>\n<h3 id=\"模块级作用域\"><a href=\"#模块级作用域\" class=\"headerlink\" title=\"模块级作用域\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-ji-zuo-yong-yu\">模块级作用域</a></h3><p>每个模块都有自己的顶级作用域（top-level scope）。换句话说，一个模块中的顶级作用域变量和函数在其他脚本中是不可见的。</p>\n<h3 id=\"模块代码仅在第一次导入时被解析\"><a href=\"#模块代码仅在第一次导入时被解析\" class=\"headerlink\" title=\"模块代码仅在第一次导入时被解析\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-dai-ma-jin-zai-di-yi-ci-dao-ru-shi-bei-jie-xi\">模块代码仅在第一次导入时被解析</a></h3><p>如果同一个模块被导入到多个其他位置，那么它的代码仅会在第一次导入时执行，然后将导出（export）的内容提供给所有的导入（importer）。</p>\n<h3 id=\"在一个模块中，“this”-是-undefined\"><a href=\"#在一个模块中，“this”-是-undefined\" class=\"headerlink\" title=\"在一个模块中，“this” 是 undefined\"></a><a href=\"https://zh.javascript.info/modules-intro#zai-yi-ge-mo-kuai-zhong-this-shi-undefined\">在一个模块中，“this” 是 undefined</a></h3><p>这是一个小功能，但为了完整性，我们应该提到它。</p>\n<p>在一个模块中，顶级 <code>this</code> 是 undefined。</p>\n<h3 id=\"import-meta\"><a href=\"#import-meta\" class=\"headerlink\" title=\"import.meta\"></a><a href=\"https://zh.javascript.info/modules-intro#importmeta\">import.meta</a></h3><p><code>import.meta</code> 对象包含关于当前模块的信息。</p>\n<p>它的内容取决于其所在的环境。在浏览器环境中，它包含当前脚本的 URL，或者如果它是在 HTML 中的话，则包含当前页面的 URL。</p>\n<h3 id=\"模块脚本是延迟的\"><a href=\"#模块脚本是延迟的\" class=\"headerlink\" title=\"模块脚本是延迟的\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-jiao-ben-shi-yan-chi-de\">模块脚本是延迟的</a></h3><p>模块脚本 <strong>总是</strong> 被延迟的，与 <code>defer</code> 特性（在 <a href=\"https://zh.javascript.info/script-async-defer\">脚本：async，defer</a> 一章中描述的）对外部脚本和内联脚本（inline script）的影响相同。</p>\n<p>也就是说：</p>\n<ul>\n<li>下载外部模块脚本 <code>&lt;script type=&quot;module&quot; src=&quot;...&quot;&gt;</code> 不会阻塞 HTML 的处理，它们会与其他资源并行加载。</li>\n<li>模块脚本会等到 HTML 文档完全准备就绪（即使它们很小并且比 HTML 加载速度更快），然后才会运行。</li>\n<li>保持脚本的相对顺序：在文档中排在前面的脚本先执行。</li>\n</ul>\n<p>它的一个副作用是，模块脚本总是会“看到”已完全加载的 HTML 页面，包括在它们下方的 HTML 元素。</p>\n<h3 id=\"不允许裸模块（“bare”-module）\"><a href=\"#不允许裸模块（“bare”-module）\" class=\"headerlink\" title=\"不允许裸模块（“bare” module）\"></a><a href=\"https://zh.javascript.info/modules-intro#bu-yun-xu-luo-mo-kuai-baremodule\">不允许裸模块（“bare” module）</a></h3><p>在浏览器中，<code>import</code> 必须给出相对或绝对的 URL 路径。没有任何路径的模块被称为“裸（bare）”模块。在 <code>import</code> 中不允许这种模块。</p>\n<h3 id=\"兼容性，“nomodule”\"><a href=\"#兼容性，“nomodule”\" class=\"headerlink\" title=\"兼容性，“nomodule”\"></a><a href=\"https://zh.javascript.info/modules-intro#jian-rong-xing-nomodule\">兼容性，“nomodule”</a></h3><p>旧时的浏览器不理解 <code>type=&quot;module&quot;</code>。未知类型的脚本会被忽略。</p>\n<h2 id=\"构建工具\"><a href=\"#构建工具\" class=\"headerlink\" title=\"构建工具\"></a><a href=\"https://zh.javascript.info/modules-intro#gou-jian-gong-ju\">构建工具</a></h2><p>在实际开发中，浏览器模块很少被以“原始”形式进行使用。通常，我们会使用一些特殊工具，例如 <a href=\"https://webpack.js.org/\">Webpack</a>，将它们打包在一起，然后部署到生产环境的服务器。</p>\n<p>使用打包工具的一个好处是 —— 它们可以更好地控制模块的解析方式，允许我们使用裸模块和更多的功能，例如 CSS/HTML 模块等。</p>\n<p>构建工具做以下这些事儿：</p>\n<ol>\n<li>从一个打算放在 HTML 中的 <code>&lt;script type=&quot;module&quot;&gt;</code> “主”模块开始。</li>\n<li>分析它的依赖：它的导入，以及它的导入的导入等。</li>\n<li>使用所有模块构建一个文件（或者多个文件，这是可调的），并用打包函数（bundler function）替代原生的 <code>import</code> 调用，以使其正常工作。还支持像 HTML/CSS 模块等“特殊”的模块类型。</li>\n<li>在处理过程中，可能会应用其他转换和优化：<ul>\n<li>删除无法访问的代码。</li>\n<li>删除未使用的导出（“tree-shaking”）。</li>\n<li>删除特定于开发的像 <code>console</code> 和 <code>debugger</code> 这样的语句。</li>\n<li>可以使用 <a href=\"https://babeljs.io/\">Babel</a> 将前沿的现代的 JavaScript 语法转换为具有类似功能的旧的 JavaScript 语法。</li>\n<li>压缩生成的文件（删除空格，用短的名字替换变量等）。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"总结-9\"><a href=\"#总结-9\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/modules-intro#zong-jie\">总结</a></h2><p>下面总结一下模块的核心概念：</p>\n<ol>\n<li>一个模块就是一个文件。浏览器需要使用<script type=\"module\">以使 import/export 可以工作。模块（译注：相较于常规脚本）有几点差别：<ul>\n<li>默认是延迟解析的（deferred）。</li>\n<li>Async 可用于内联脚本。</li>\n<li>要从另一个源（域/协议/端口）加载外部脚本，需要 CORS header。</li>\n<li>重复的外部脚本会被忽略</li>\n</ul>\n</li>\n<li>模块具有自己的本地顶级作用域，并可以通过 <code>import/export</code> 交换功能。</li>\n<li>模块始终使用 <code>use strict</code>。</li>\n<li>模块代码只执行一次。导出仅创建一次，然后会在导入之间共享。</li>\n</ol>\n<h1 id=\"Proxy-和-Reflect\"><a href=\"#Proxy-和-Reflect\" class=\"headerlink\" title=\"Proxy 和 Reflect\"></a>Proxy 和 Reflect</h1><p>一个 <code>Proxy</code> 对象包装另一个对象并拦截诸如读取/写入属性和其他操作，可以选择自行处理它们，或者透明地允许该对象处理它们。</p>\n<p>Proxy 被用于了许多库和某些浏览器框架。</p>\n<h2 id=\"Proxy\"><a href=\"#Proxy\" class=\"headerlink\" title=\"Proxy\"></a><a href=\"https://zh.javascript.info/proxy#proxy\">Proxy</a></h2><p>语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li><code>target</code> —— 是要包装的对象，可以是任何东西，包括函数。</li>\n<li><code>handler</code> —— 代理配置：带有“捕捉器”（“traps”，即拦截操作的方法）的对象。比如 <code>get</code> 捕捉器用于读取 <code>target</code> 的属性，<code>set</code> 捕捉器用于写入 <code>target</code> 的属性，等等。</li>\n</ul>\n<p>对 <code>proxy</code> 进行操作，如果在 <code>handler</code> 中存在相应的捕捉器，则它将运行，并且 Proxy 有机会对其进行处理，否则将直接对 target 进行处理。</p>\n<p>由于没有捕捉器，所有对 <code>proxy</code> 的操作都直接转发给了 <code>target</code>。</p>\n<ol>\n<li>写入操作 <code>proxy.test=</code> 会将值写入 <code>target</code>。</li>\n<li>读取操作 <code>proxy.test</code> 会从 <code>target</code> 返回对应的值。</li>\n<li>迭代 <code>proxy</code> 会从 <code>target</code> 返回对应的值。</li>\n</ol>\n<h2 id=\"带有-“get”-捕捉器的默认值\"><a href=\"#带有-“get”-捕捉器的默认值\" class=\"headerlink\" title=\"带有 “get” 捕捉器的默认值\"></a><a href=\"https://zh.javascript.info/proxy#dai-you-get-bu-zhuo-qi-de-mo-ren-zhi\">带有 “get” 捕捉器的默认值</a></h2><p>最常见的捕捉器是用于读取/写入的属性。</p>\n<p>要拦截读取操作，<code>handler</code> 应该有 <code>get(target, property, receiver)</code> 方法。</p>\n<p>读取属性时触发该方法，参数如下：</p>\n<ul>\n<li><code>target</code> —— 是目标对象，该对象被作为第一个参数传递给 <code>new Proxy</code>，</li>\n<li><code>property</code> —— 目标属性名，</li>\n<li><code>receiver</code> —— 如果目标属性是一个 getter 访问器属性，则 <code>receiver</code> 就是本次读取属性所在的 <code>this</code> 对象。通常，这就是 <code>proxy</code> 对象本身（或者，如果我们从 proxy 继承，则是从该 proxy 继承的对象）。现在我们不需要此参数，因此稍后我们将对其进行详细介绍。</li>\n</ul>\n<h2 id=\"使用-“set”-捕捉器进行验证\"><a href=\"#使用-“set”-捕捉器进行验证\" class=\"headerlink\" title=\"使用 “set” 捕捉器进行验证\"></a><a href=\"https://zh.javascript.info/proxy#shi-yong-set-bu-zhuo-qi-jin-hang-yan-zheng\">使用 “set” 捕捉器进行验证</a></h2><p>假设我们想要一个专门用于数字的数组。如果添加了其他类型的值，则应该抛出一个错误。</p>\n<p>当写入属性时 <code>set</code> 捕捉器被触发。</p>\n<p><code>set(target, property, value, receiver)</code>：</p>\n<ul>\n<li><code>target</code> —— 是目标对象，该对象被作为第一个参数传递给 <code>new Proxy</code>，</li>\n<li><code>property</code> —— 目标属性名称，</li>\n<li><code>value</code> —— 目标属性的值，</li>\n<li><code>receiver</code> —— 与 <code>get</code> 捕捉器类似，仅与 setter 访问器属性相关。</li>\n</ul>\n<p>如果写入操作（setting）成功，<code>set</code> 捕捉器应该返回 <code>true</code>，否则返回 <code>false</code>（触发 <code>TypeError</code>）。</p>\n<h2 id=\"使用-“ownKeys”-和-“getOwnPropertyDescriptor”-进行迭代\"><a href=\"#使用-“ownKeys”-和-“getOwnPropertyDescriptor”-进行迭代\" class=\"headerlink\" title=\"使用 “ownKeys” 和 “getOwnPropertyDescriptor” 进行迭代\"></a><a href=\"https://zh.javascript.info/proxy#shi-yong-ownkeys-he-getownpropertydescriptor-jin-hang-die-dai\">使用 “ownKeys” 和 “getOwnPropertyDescriptor” 进行迭代</a></h2><p><code>Object.keys</code>，<code>for..in</code> 循环和大多数其他遍历对象属性的方法都使用内部方法 <code>[[OwnPropertyKeys]]</code>（由 <code>ownKeys</code> 捕捉器拦截) 来获取属性列表。</p>\n<p>这些方法在细节上有所不同：</p>\n<ul>\n<li><code>Object.getOwnPropertyNames(obj)</code> 返回非 Symbol 键。</li>\n<li><code>Object.getOwnPropertySymbols(obj)</code> 返回 Symbol 键。</li>\n<li><code>Object.keys/values()</code> 返回带有 <code>enumerable</code> 标志的非 Symbol 键/值（属性标志在 <a href=\"https://zh.javascript.info/property-descriptors\">属性标志和属性描述符</a> 一章有详细讲解)。</li>\n<li><code>for..in</code> 循环遍历所有带有 <code>enumerable</code> 标志的非 Symbol 键，以及原型对象的键。</li>\n</ul>\n","site":{"data":{}},"excerpt":"<h1 id=\"javascript\"><a href=\"#javascript\" class=\"headerlink\" title=\"javascript\"></a>javascript</h1><h2 id=\"对象引用和复制\"><a href=\"#对象引用和复制\" class=\"headerlink\" title=\"对象引用和复制\"></a>对象引用和复制</h2><p>与原始类型相比，对象的根本区别之一是对象是“通过引用”被存储和复制的，与原始类型值相反：字符串，数字，布尔值等 —— 始终是以“整体值”的形式被复制的。</p>","more":"<h3 id=\"克隆与合并，Object-assign\"><a href=\"#克隆与合并，Object-assign\" class=\"headerlink\" title=\"克隆与合并，Object.assign\"></a>克隆与合并，Object.assign</h3><p>Object.assign(dest, [src1, src2, src3…])</p>\n<ul>\n<li>第一个参数 dest 是指目标对象。</li>\n<li>更后面的参数 src1, …, srcN（可按需传递多个参数）是源对象。</li>\n<li>该方法将所有源对象的属性拷贝到目标对象 dest 中。换句话说，从第二个开始的所有参数的属性都被拷贝到第一个参数的对象中。</li>\n<li>调用结果返回 dest。</li>\n<li>可以用它来合并多个对象</li>\n</ul>\n<p>​ 对象方法,”this”</p>\n<ul>\n<li>对象方法的调用时基于“引用类型”的调用</li>\n</ul>\n<h3 id=\"Symbol-类型\"><a href=\"#Symbol-类型\" class=\"headerlink\" title=\"Symbol 类型\"></a>Symbol 类型</h3><pre><code>  1. 防止自己在对象中写的属性被其他人篡改，隐藏该属性\n  2. 用for..in.., Object.keys(obj)访问不到，但是使用Object.assign是可以复制过来的</code></pre>\n<h2 id=\"对象\"><a href=\"#对象\" class=\"headerlink\" title=\"对象\"></a>对象</h2><pre><code>  1. 对象是具有一些特殊特性的关联数组。\n  2. 它们存储属性（键值对），其中：\n       1. 属性的键必须是字符串或者 symbol（通常是字符串）。\n       2. 值可以是任何类型。\n  3. 下面的方法访问属性\n       1. 点符号: obj.property。\n       2. 方括号 obj[&quot;property&quot;]，方括号允许从变量中获取键，例如 obj[varWithKey]。\n  4. 其他操作：\n       1. 删除属性：delete obj.prop。\n       2. 检查是否存在给定键的属性：&quot;key&quot; in obj。\n       3. 遍历对象：for(let key in obj) 循环。</code></pre>\n<h3 id=\"原始类型的方法\"><a href=\"#原始类型的方法\" class=\"headerlink\" title=\"原始类型的方法\"></a>原始类型的方法</h3><ul>\n<li>基本类型不是对象。</li>\n<li>基本类型不能存储数据。</li>\n<li>所有的属性/方法操作都是在临时对象的帮助下执行的。</li>\n</ul>\n<h3 id=\"数字类型\"><a href=\"#数字类型\" class=\"headerlink\" title=\"数字类型\"></a>数字类型</h3><p>​ parseInt(str, radix)` 的第二个参数</p>\n<ul>\n<li>parseInt() 函数具有可选的第二个参数。它指定了数字系统的基数，因此 parseInt 还可以解析十六进制数字、二进制数字等的字符串：</li>\n<li>alert( parseInt(‘0xff’, 16) ); // 255</li>\n<li>alert( parseInt(‘ff’, 16) ); // 255，没有 0x 仍然有效</li>\n<li>alert( parseInt(‘2n9c’, 36) ); // 123456</li>\n</ul>\n<p>​ prompt</p>\n<ul>\n<li>注意在 prompt 前面的一元加号 +。它将立即把值转换成数字。</li>\n<li>否则，a 和 b 将会是字符串，它们的总和将是它们的连接，即：”1” + “2” = “12”。</li>\n</ul>\n<h2 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a>字符串</h2><h3 id=\"str\"><a href=\"#str\" class=\"headerlink\" title=\"str\"></a>str</h3><h3 id=\"1-str-indexOf-substr-pos-。\"><a href=\"#1-str-indexOf-substr-pos-。\" class=\"headerlink\" title=\"1. str.indexOf(substr, pos)。\"></a>1. str.indexOf(substr, pos)。</h3><p>​ 1. 它从给定位置 pos 开始，在 str 中查找 substr，如果没有找到，则返回 -1，否则返回匹配成功的位置。<br>​ 2. 还有一个类似的方法 str.lastIndexOf(substr, position)，它从字符串的末尾开始搜索到开头。</p>\n<h3 id=\"2-按位（bitwise）NOT-技巧\"><a href=\"#2-按位（bitwise）NOT-技巧\" class=\"headerlink\" title=\"2. 按位（bitwise）NOT 技巧\"></a>2. 按位（bitwise）NOT 技巧</h3><p>​ 1. 它将数字转换为 32-bit 整数（如果存在小数部分，则删除小数部分），然后对其二进制表示形式中的所有位均取反。</p>\n<h3 id=\"3-获取子字符串\"><a href=\"#3-获取子字符串\" class=\"headerlink\" title=\"3. 获取子字符串\"></a>3. 获取子字符串</h3><pre><code> 1.  JavaScript 中有三种获取字符串的方法：substring、substr 和 slice。\n             1.  str.slice(start [, end])，返回字符串从 start 到（但不包括）end 的部分。\n             2.  如果没有第二个参数，slice 会一直运行到字符串末尾：\n                    1.  let str = &quot;stringify&quot;;\n                               alert( str.slice(0, 5) ); // &#39;strin&#39;，从 0 到 5 的子字符串（不包括 5）\n                               alert( str.slice(0, 1) ); // &#39;s&#39;，从 0 到 1，但不包括 1，所以只有在 0 处的字符\n                               let str = &quot;stringify&quot;;\n                               alert( str.slice(2) ); // 从第二个位置直到结束\n                       2.  str.substring(start [, end])返回字符串在 start 和 end 之间 的部分。这与 slice 几乎相同，但它允许 start 大于 end。\n                               et str = &quot;stringify&quot;;\n                                      // 这些对于 substring 是相同的\n                                      alert( str.substring(2, 6) ); // &quot;ring&quot;\n                                      alert( str.substring(6, 2) ); // &quot;ring&quot;\n                                      // ……但对 slice 是不同的：\n                                      alert( str.slice(2, 6) ); // &quot;ring&quot;（一样）\n                                      alert( str.slice(6, 2) ); // &quot;&quot;（空字符串）\n           3.  str.substr(start [, length]) 返回字符串从 start 开始的给定 length 的部分。与以前的方法相比，这个允许我们指定 length 而不是结束位置：\n                   . let str = &quot;stringify&quot;;\n                          alert( str.substr(2, 4) ); // &#39;ring&#39;，从位置 2 开始，获取 4 个字符\n                          2. 第一个参数可能是负数，从结尾算起：\n                                 let str = &quot;stringify&quot;;\n                                 alert( str.substr(-4, 2) ); // &#39;gi&#39;，从第 4 位获取 2 个字符</code></pre>\n<p>​ 方法 选择方式…… 负值参数<br>​ - slice(start, end) 从 start 到 end（不含 end） 允许<br>​ - substring(start, end) start 与 end 之间（包括 start，但不包括 end） 负值代表 0<br>​ - substr(start, length) 从 start 开始获取长为 length 的字符串 允许 start 为负数</p>\n<p>​</p>\n<h2 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a>数组</h2><ul>\n<li>数组, 声明, pop/push, shift/unshift 方法, 内部, 性能, 循环, 关于 “length”, new Array(), 多维数组, toString, 不要使用 == 比较数组</li>\n</ul>\n<p>​ Iterable object（可迭代对象）</p>\n<ul>\n<li>可迭代（Iterable） 对象是数组的泛化。这个概念是说任何对象都可以被定制为可在 for..of 循环中使用的对象。</li>\n</ul>\n<h2 id=\"Map-and-Set（映射和集合）\"><a href=\"#Map-and-Set（映射和集合）\" class=\"headerlink\" title=\"Map and Set（映射和集合）\"></a>Map and Set（映射和集合）</h2><h3 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h3><ul>\n<li>Map 是一个带键的数据项的集合，就像一个 Object 一样。 但是它们最大的差别是 Map 允许任何类型的键（key）。</li>\n</ul>\n<p>它的方法和属性如下：</p>\n<ul>\n<li>new Map() —— 创建 map。</li>\n<li>map.set(key, value) —— 根据键存储值。</li>\n<li>map.get(key) —— 根据键来返回值，如果 map 中不存在对应的 key，则返回 undefined。</li>\n<li>map.has(key) —— 如果 key 存在则返回 true，否则返回 false。</li>\n<li>map.delete(key) —— 删除指定键的值。</li>\n<li>map.clear() —— 清空 map。</li>\n<li>map.size —— 返回当前元素个数。</li>\n</ul>\n<h3 id=\"Map-迭代\"><a href=\"#Map-迭代\" class=\"headerlink\" title=\"Map 迭代\"></a>Map 迭代</h3><p>如果要在 map 里使用循环，可以使用以下三个方法：</p>\n<ul>\n<li>map.keys() —— 遍历并返回所有的键（returns an iterable for keys），</li>\n<li>map.values() —— 遍历并返回所有的值（returns an iterable for values），</li>\n<li>map.entries() —— 遍历并返回所有的实体（returns an iterable for entries）[key, value]，for..of 在默认情况下使用的就是这个。</li>\n</ul>\n<h3 id=\"Object-entries：从对象创建-Map\"><a href=\"#Object-entries：从对象创建-Map\" class=\"headerlink\" title=\"Object.entries：从对象创建 Map\"></a>Object.entries：从对象创建 Map</h3><p>如果我们想从一个已有的普通对象（plain object）来创建一个 Map，那么我们可以使用内建方法 Object.entries(obj)，该返回对象的键/值对数组，该数组格式完全按照 Map 所需的格式。</p>\n<h3 id=\"Object-fromEntries：从-Map-创建对象\"><a href=\"#Object-fromEntries：从-Map-创建对象\" class=\"headerlink\" title=\"Object.fromEntries：从 Map 创建对象\"></a>Object.fromEntries：从 Map 创建对象</h3><p>Object.fromEntries 方法的作用是相反的：给定一个具有 [key, value] 键值对的数组，它会根据给定数组创建一个对象：</p>\n<h2 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h2><p>Set 是一个特殊的类型集合 —— “值的集合”（没有键），它的每一个值只能出现一次。</p>\n<p>它的主要方法如下：</p>\n<ul>\n<li>new Set(iterable) —— 创建一个 set，如果提供了一个 iterable 对象（通常是数组），将会从数组里面复制值到 set 中。</li>\n<li>set.add(value) —— 添加一个值，返回 set 本身</li>\n<li>set.delete(value) —— 删除值，如果 value 在这个方法调用的时候存在则返回 true ，否则返回 false。</li>\n<li>set.has(value) —— 如果 value 在 set 中，返回 true，否则返回 false。</li>\n<li>set.clear() —— 清空 set。</li>\n<li>set.size —— 返回元素个数。</li>\n</ul>\n<p>Map 中用于迭代的方法在 Set 中也同样支持：</p>\n<ul>\n<li>set.keys() —— 遍历并返回所有的值（returns an iterable object for values），</li>\n<li>set.values() —— 与 set.keys() 作用相同，这是为了兼容 Map，</li>\n<li>set.entries() —— 遍历并返回所有的实体（returns an iterable object for entries）[value, value]，它的存在也是为了兼容 Map。</li>\n</ul>\n<h2 id=\"解构赋值\"><a href=\"#解构赋值\" class=\"headerlink\" title=\"解构赋值\"></a>解构赋值</h2><p>解构赋值 是一种特殊的语法，它使我们可以将数组或对象“拆包”为到一系列变量中，因为有时候使用变量更加方便。解构操作对那些具有很多参数和默认值等的函数也很奏效。<br>解构赋值, 数组解构, 对象解构, 嵌套解构, 智能函数参数</p>\n<ul>\n<li>解构赋值可以立即将一个对象或数组映射到多个变量上。</li>\n<li>解构对象的完整语法：<ul>\n<li>let {prop : varName = default, …rest} = object</li>\n<li>这表示属性 prop 会被赋值给变量 varName，如果没有这个属性的话，就会使用默认值 default。</li>\n<li>没有对应映射的对象属性会被复制到 rest 对象。</li>\n</ul>\n</li>\n<li>解构数组的完整语法：<ul>\n<li>let [item1 = default, item2, …rest] = array</li>\n<li>数组的第一个元素被赋值给 item1，第二个元素被赋值给 item2，剩下的所有元素被复制到另一个数组 rest。</li>\n</ul>\n</li>\n<li>从嵌套数组/对象中提取数据也是可以的，此时等号左侧必须和等号右侧有相同的结构。</li>\n</ul>\n<h2 id=\"日期和时间\"><a href=\"#日期和时间\" class=\"headerlink\" title=\"日期和时间\"></a>日期和时间</h2><p>该对象存储日期和时间，并提供了日期/时间的管理方法。<br>例如，我们可以使用它来存储创建/修改时间，或者用来测量时间，再或者仅用来打印当前时间。</p>\n<h3 id=\"创建\"><a href=\"#创建\" class=\"headerlink\" title=\"创建\"></a>创建</h3><p>创建一个新的 Date 对象，只需要调用 new Date()，在调用时可以带有下面这些参数之一：</p>\n<ul>\n<li><p>new Date()</p>\n<ul>\n<li>不带参数 —— 创建一个表示当前日期和时间的 Date 对象：<ul>\n<li>let now = new Date();</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>new Date(milliseconds)</p>\n<ul>\n<li>创建一个 Date 对象，其时间等于 1970-01-01 00:00:00 UTC+0 再过一毫秒（1/1000 秒）。</li>\n<li>传入的整数参数代表的是自 1970-01-01 00:00:00 以来经过的毫秒数，该整数被称为 时间戳。</li>\n<li>这是一种日期的轻量级数字表示形式。我们通常使用 new Date(timestamp) 通过时间戳来创建日期，并可以使用 date.getTime() 将现有的 Date 对象转化为时间戳。</li>\n</ul>\n</li>\n<li><p>new Date(datestring)</p>\n<ul>\n<li>如果只有一个参数，并且是字符串，那么它会被自动解析。该算法与 Date.parse 所使用的算法相同</li>\n</ul>\n</li>\n<li><p>new Date(year, month, date, hours, minutes, seconds, ms)</p>\n<ul>\n<li>使用当前时区中的给定组件创建日期。只有前两个参数是必须的。</li>\n<li>自动校准（Autocorrection）</li>\n</ul>\n</li>\n</ul>\n<p>自动校准 是 Date 对象的一个非常方便的特性。我们可以设置超范围的数值，它会自动校准。<br>超出范围的日期组件将会被自动分配。</p>\n<h2 id=\"JSON-方法，toJSON\"><a href=\"#JSON-方法，toJSON\" class=\"headerlink\" title=\"JSON 方法，toJSON\"></a>JSON 方法，toJSON</h2><p>假设我们有一个复杂的对象，我们希望将其转换为字符串，以通过网络发送，或者只是为了在日志中输出它。</p>\n<p>当然，这样的字符串应该包含所有重要的属性。</p>\n<h3 id=\"JSON-stringify\"><a href=\"#JSON-stringify\" class=\"headerlink\" title=\"JSON.stringify\"></a>JSON.stringify</h3><p>JSON（JavaScript Object Notation）是表示值和对象的通用格式。在 RFC 4627 标准中有对其的描述。最初它是为 JavaScript 而创建的，但许多其他编程语言也有用于处理它的库。因此，当客户端使用 JavaScript 而服务器端是使用 Ruby/PHP/Java 等语言编写的时，使用 JSON 可以很容易地进行数据交换。</p>\n<p>JavaScript 提供了如下方法：</p>\n<ul>\n<li>JSON.stringify 将对象转换为 JSON。</li>\n<li>JSON.parse 将 JSON 转换回对象。</li>\n</ul>\n<p>方法 JSON.stringify(student) 接收对象并将其转换为字符串。<br>得到的 json 字符串是一个被称为 JSON 编码（JSON-encoded） 或 序列化（serialized） 或 字符串化（stringified） 或 编组化（marshalled） 的对象。</p>\n<p>请注意，JSON 编码的对象与对象字面量有几个重要的区别：:</p>\n<ul>\n<li>字符串使用双引号。JSON 中没有单引号或反引号。所以 ‘John’ 被转换为 “John”。</li>\n<li>对象属性名称也是双引号的。这是强制性的。所以 age:30 被转换成 “age”:30。</li>\n</ul>\n<p>JSON.stringify 也可以应用于原始（primitive）数据类型。<br>JSON 支持以下数据类型：</p>\n<ul>\n<li>Objects { … }</li>\n<li>Arrays [ … ]</li>\n<li>Primitives：<ul>\n<li>strings，</li>\n<li>numbers，</li>\n<li>boolean values true/false，</li>\n<li>null。</li>\n</ul>\n</li>\n</ul>\n<p>JSON 是语言无关的纯数据规范，因此一些特定于 JavaScript 的对象属性会被 JSON.stringify 跳过。<br>即：</p>\n<ul>\n<li>函数属性（方法）。</li>\n<li>Symbol 类型的属性。</li>\n<li>存储 undefined 的属性。</li>\n</ul>\n<p>​ 排除和转换：replacer</p>\n<p>JSON.stringify 的完整语法是：<br>let json = JSON.stringify(value, [replacer, space])<br> value<br>要编码的值。<br>replacer<br>要编码的属性数组或映射函数 function(key, value)。<br>space<br>用于格式化的空格数量</p>\n<h2 id=\"Rest-参数与-Spread-语法\"><a href=\"#Rest-参数与-Spread-语法\" class=\"headerlink\" title=\"Rest 参数与 Spread 语法\"></a>Rest 参数与 Spread 语法</h2><p>在 JavaScript 中，很多内建函数都支持传入任意数量的参数。<br>例如：</p>\n<ul>\n<li>Math.max(arg1, arg2, …, argN) —— 返回入参中的最大值。</li>\n<li>Object.assign(dest, src1, …, srcN) —— 依次将属性从 src1..N 复制到 dest。</li>\n</ul>\n<h3 id=\"Rest-参数-…\"><a href=\"#Rest-参数-…\" class=\"headerlink\" title=\"Rest 参数 …\"></a>Rest 参数 …</h3><p>在 JavaScript 中，无论函数是如何定义的，你都可以使用任意数量的参数调用函数。<br>Rest 参数可以通过使用三个点 … 并在后面跟着包含剩余参数的数组名称，来将它们包含在函数定义中。这些点的字面意思是“将剩余参数收集到一个数组中”。<br>Rest 参数必须放到参数列表的末尾<br>Rest 参数会收集剩余的所有参数，因此下面这种用法没有意义，并且会导致错误：<br>function f(arg1, …rest, arg2) { // arg2 在 …rest 后面？！<br>// error<br>}<br>…rest 必须处在最后。</p>\n<p>​ “arguments” 变量</p>\n<p>有一个名为 arguments 的特殊的类数组对象，该对象按参数索引包含所有参数。</p>\n<p>在过去，JavaScript 中没有 rest 参数，而使用 arguments 是获取函数所有参数的唯一方法。现在它仍然有效，我们可以在一些老代码里找到它。</p>\n<p>但缺点是，尽管 arguments 是一个类数组，也是可迭代对象，但它终究不是数组。它不支持数组方法，因此我们不能调用 arguments.map(…) 等方法。</p>\n<p>此外，它始终包含所有参数，我们不能像使用 rest 参数那样只截取入参的一部分。</p>\n<p>因此，当我们需要这些功能时，最好使用 rest 参数。</p>\n<h3 id=\"Spread-语法\"><a href=\"#Spread-语法\" class=\"headerlink\" title=\"Spread 语法\"></a>Spread 语法</h3><p>在脚本执行时，可能参数数组中有很多个元素，也可能一个都没有。并且这样设置的代码也很丑。<br>Spread 语法 来帮助你了！它看起来和 rest 参数很像，也使用 …，但是二者的用途完全相反。<br>当在函数调用中使用 …arr 时，它会把可迭代对象 arr “展开”到参数列表中。</p>\n<p>以 Math.max 为例：</p>\n<pre><code>  1. - let arr = [3, 5, 1];\n  2. - alert( Math.max(...arr) ); // 5（spread 语法把数组转换为参数列表）</code></pre>\n<p>我们还可以通过这种方式传递多个可迭代对象：</p>\n<pre><code>  1. let arr1 = [1, -2, 3, 4];\n  2. let arr2 = [8, 3, -8, 1];\n  3.\n  4. alert( Math.max(...arr1, ...arr2) ); // 8</code></pre>\n<p>我们甚至还可以将 spread 语法与常规值结合使用：</p>\n<pre><code>  1. let arr1 = [1, -2, 3, 4];\n  2. let arr2 = [8, 3, -8, 1];\n  3.\n  4. alert( Math.max(1, ...arr1, 2, ...arr2, 25) ); // 25</code></pre>\n<p>并且，我们还可以使用 spread 语法来合并数组：</p>\n<pre><code>  1. let arr = [3, 5, 1];\n  2. let arr2 = [8, 9, 15];\n  3.\n  4. let merged = [0, ...arr, 2, ...arr2];\n  5.\n  6. alert(merged); // 0,3,5,1,2,8,9,15（0，然后是 arr，然后是 2，然后是 arr2）</code></pre>\n<p>在上面的示例中，我们使用数组展示了 spread 语法，其实任何可迭代对象都可以。</p>\n<p>例如，在这儿我们使用 spread 语法将字符串转换为字符数组：</p>\n<ul>\n<li>let str = “Hello”;</li>\n<li>alert( […str] ); // H,e,l,l,o<br>Spread 语法内部使用了迭代器来收集元素，与 for..of 的方式相同</li>\n</ul>\n<p>不过 Array.from(obj) 和 […obj] 存在一个细微的差别：</p>\n<ul>\n<li>Array.from 适用于类数组对象也适用于可迭代对象。</li>\n<li>Spread 语法只适用于可迭代对象。<br>因此，对于将一些“东西”转换为数组的任务，Array.from 往往更通用。</li>\n</ul>\n<p>​ 总结<br> 当我们在代码中看到 “…” 时，它要么是 rest 参数，要么就是 spread 语法。</p>\n<p>有一个简单的方法可以区分它们：</p>\n<ul>\n<li><p>若 … 出现在函数参数列表的最后，那么它就是 rest 参数，它会把参数列表中剩余的参数收集到一个数组中。</p>\n</li>\n<li><p>若 … 出现在函数调用或类似的表达式中，那它就是 spread 语法，它会把一个数组展开为列表。</p>\n</li>\n<li><p>使用场景：</p>\n</li>\n<li><p>Rest 参数用于创建可接受任意数量参数的函数。</p>\n</li>\n<li><p>Spread 语法用于将数组传递给通常需要含有许多参数的列表的函数。<br>它们俩的出现帮助我们轻松地在列表和参数数组之间来回转换。</p>\n</li>\n</ul>\n<p>“旧式”的 arguments（类数组且可迭代的对象）也依然能够帮助我们获取函数调用中的所有参数。</p>\n<h2 id=\"变量作用域，闭包\"><a href=\"#变量作用域，闭包\" class=\"headerlink\" title=\"变量作用域，闭包\"></a>变量作用域，闭包</h2><h3 id=\"Step-1-变量\"><a href=\"#Step-1-变量\" class=\"headerlink\" title=\"Step 1. 变量\"></a>Step 1. 变量</h3><p>在 JavaScript 中，每个运行的函数，代码块 {…} 以及整个脚本，都有一个被称为 词法环境（Lexical Environment） 的内部（隐藏）的关联对象。</p>\n<p>词法环境对象由两部分组成：</p>\n<pre><code>  1. 环境记录（Environment Record） —— 一个存储所有局部变量作为其属性（包括一些其他信息，例如 this 的值）的对象。\n  2. 对 外部词法环境 的引用，与外部代码相关联。</code></pre>\n<p>一个“变量”只是 环境记录 这个特殊的内部对象的一个属性。“获取或修改变量”意味着“获取或修改词法环境的一个属性”。</p>\n<ul>\n<li>变量是特殊内部对象的属性，与当前正在执行的（代码）块/函数/脚本有关。</li>\n<li>操作变量实际上是操作该对象的属性。</li>\n</ul>\n<h3 id=\"Step-2-函数声明\"><a href=\"#Step-2-函数声明\" class=\"headerlink\" title=\"Step 2. 函数声明\"></a>Step 2. 函数声明</h3><p>一个函数其实也是一个值，就像变量一样。</p>\n<p><strong>* *不同之处在于函数声明的初始化会被立即完成。 **</strong></p>\n<p>当创建了一个词法环境（Lexical Environment）时，函数声明会立即变为即用型函数（不像 let 那样直到声明处才可用）。</p>\n<h3 id=\"Step-3-内部和外部的词法环境\"><a href=\"#Step-3-内部和外部的词法环境\" class=\"headerlink\" title=\"Step 3. 内部和外部的词法环境\"></a>Step 3. 内部和外部的词法环境</h3><p>在一个函数运行时，在调用刚开始时，会自动创建一个新的词法环境以存储这个调用的局部变量和参数。</p>\n<p><strong>* *当代码要访问一个变量时 —— 首先会搜索内部词法环境，然后搜索外部环境，然后搜索更外部的环境，以此类推，直到全局词法环境。 **</strong></p>\n<p>如果在任何地方都找不到这个变量，那么在严格模式下就会报错（在非严格模式下，为了向下兼容，给未定义的变量赋值会创建一个全局变量）。</p>\n<h3 id=\"Step-4-返回函数\"><a href=\"#Step-4-返回函数\" class=\"headerlink\" title=\"Step 4. 返回函数\"></a>Step 4. 返回函数</h3><p>所有的函数在“诞生”时都会记住创建它们的词法环境。从技术上讲，这里没有什么魔法：所有函数都有名为 [[Environment]] 的隐藏属性，该属性保存了对创建该函数的词法环境的引用。</p>\n<h3 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a><strong>闭包</strong></h3><p>开发者通常应该都知道“闭包”这个通用的编程术语。</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Closure_(computer_programming)\">闭包</a> 是指内部函数总是可以访问其所在的外部函数中声明的变量和参数，即使在其外部函数被返回（寿命终结）了之后。</p>\n<p>也就是说：JavaScript 中的函数会自动通过隐藏的 <code>[[Environment]]</code> 属性记住创建它们的位置，所以它们都可以访问外部变量。</p>\n<p>在面试时，前端开发者通常会被问到“什么是闭包？”，正确的回答应该是闭包的定义，并解释清楚为什么 JavaScript 中的所有函数都是闭包的，以及可能的关于 <code>[[Environment]]</code> 属性和词法环境原理的技术细节。</p>\n<h3 id=\"垃圾收集\"><a href=\"#垃圾收集\" class=\"headerlink\" title=\"垃圾收集\"></a><strong>垃圾收集</strong></h3><p>通常，函数调用完成后，会将词法环境和其中的所有变量从内存中删除。因为现在没有任何对它们的引用了。与 JavaScript 中的任何其他对象一样，词法环境仅在可达时才会被保留在内存中。</p>\n<p>但是，如果有一个嵌套的函数在函数结束后仍可达，则它将具有引用词法环境的 <code>[[Environment]]</code> 属性。</p>\n<h3 id=\"实际开发中的优化\"><a href=\"#实际开发中的优化\" class=\"headerlink\" title=\"实际开发中的优化\"></a>实际开发中的优化</h3><p>正如我们所看到的，理论上当函数可达时，它外部的所有变量也都将存在。</p>\n<p>但在实际中，JavaScript 引擎会试图优化它。它们会分析变量的使用情况，如果从代码中可以明显看出有未使用的外部变量，那么就会将其删除。</p>\n<p><strong>在 V8（Chrome，Edge，Opera）中的一个重要的副作用是，此类变量在调试中将不可用。</strong></p>\n<h1 id=\"函数对象-NFE\"><a href=\"#函数对象-NFE\" class=\"headerlink\" title=\"函数对象, NFE\"></a>函数对象, NFE</h1><p>在 JavaScript 中，函数就是对象。</p>\n<h2 id=\"属性-“name”\"><a href=\"#属性-“name”\" class=\"headerlink\" title=\"属性 “name”\"></a>属性 “name”</h2><p>函数对象包含一些便于使用的属性。</p>\n<ol>\n<li><p>一个函数的名字可以通过属性 “name” 来访问。</p>\n</li>\n<li><p>名称赋值的逻辑很智能。即使函数被创建时没有名字，名称赋值的逻辑也能给它赋予一个正确的名字，然后进行赋值。</p>\n</li>\n<li><p>以默认值的方式完成了赋值时，它也有效。</p>\n</li>\n<li><p>如果函数自己没有提供，那么在赋值中，会根据上下文来推测一个。</p>\n<p>对象方法也有名字，</p>\n</li>\n</ol>\n<h2 id=\"属性-“length”\"><a href=\"#属性-“length”\" class=\"headerlink\" title=\"属性 “length”\"></a>属性 “length”</h2><p>内置属性 “length”，它返回函数入参的个数</p>\n<p>属性 <code>length</code> 有时在操作其它函数的函数中用于做 <a href=\"https://zh.wikipedia.org/wiki/%E5%86%85%E7%9C%81_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)\">内省/运行时检查（introspection）</a>。</p>\n<h2 id=\"自定义属性\"><a href=\"#自定义属性\" class=\"headerlink\" title=\"自定义属性\"></a>自定义属性</h2><p><strong>属性不是变量</strong></p>\n<p>被赋值给函数的属性，比如 <code>sayHi.counter = 0</code>，<strong>不会</strong> 在函数内定义一个局部变量 <code>counter</code>。换句话说，属性 <code>counter</code> 和变量 <code>let counter</code> 是毫不相关的两个东西。</p>\n<p>我们可以把函数当作对象，在它里面存储属性，但是这对它的执行没有任何影响。变量不是函数属性，反之亦然。它们之间是平行的。</p>\n<h2 id=\"命名函数表达式\"><a href=\"#命名函数表达式\" class=\"headerlink\" title=\"命名函数表达式\"></a>命名函数表达式</h2><p>命名函数表达式（NFE，Named Function Expression），指带有名字的函数表达式的术语。</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">let sayHi &#x3D; function func(who) &#123;\n  alert(&#96;Hello, $&#123;who&#125;&#96;);\n&#125;;\n\nsayHi(&quot;John&quot;); &#x2F;&#x2F; Hello, John<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>关于名字 <code>func</code> 有两个特殊的地方，这就是添加它的原因：</p>\n<ol>\n<li>它允许函数在内部引用自己。</li>\n<li>它在函数外是不可见的。</li>\n</ol>\n<p>下面的函数 <code>sayHi</code> 会在没有入参 <code>who</code> 时，以 <code>&quot;Guest&quot;</code> 为入参调用自己：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">who</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>who<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>who<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Guest'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 使用 func 再次调用函数自身</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello, Guest</span>\n<span class=\"token comment\">// 但这不工作：</span>\n<span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error, func is not defined（在函数外不可见）</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"问题（待解决）\"><a href=\"#问题（待解决）\" class=\"headerlink\" title=\"问题（待解决）\"></a>问题（待解决）</h2><h3 id=\"任意数量的括号求和\"><a href=\"#任意数量的括号求和\" class=\"headerlink\" title=\"任意数量的括号求和\"></a><a href=\"https://zh.javascript.info/function-object#ren-yi-shu-liang-de-kuo-hao-qiu-he\">任意数量的括号求和</a></h3><p>重要程度: 2</p>\n<p>写一个函数 <code>sum</code>，它有这样的功能：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span> <span class=\"token comment\">// 1 + 2</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">6</span> <span class=\"token comment\">// 1 + 2 + 3</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">6</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">15</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>P.S. 提示：你可能需要创建自定义对象来为你的函数提供基本类型转换。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/function-object#zong-jie\">总结</a></h2><p>函数就是对象。</p>\n<p>它们的一些属性：</p>\n<ul>\n<li><code>name</code> —— 函数的名字。通常取自函数定义，但如果函数定义时没设定函数名，JavaScript 会尝试通过函数的上下文猜一个函数名（例如把赋值的变量名取为函数名）。</li>\n<li><code>length</code> —— 函数定义时的入参的个数。Rest 参数不参与计数。</li>\n</ul>\n<h1 id=\"调度：setTimeout-和-setInterval\"><a href=\"#调度：setTimeout-和-setInterval\" class=\"headerlink\" title=\"调度：setTimeout 和 setInterval\"></a>调度：setTimeout 和 setInterval</h1><p>有时我们并不想立即执行一个函数，而是等待特定一段时间之后再执行。这就是所谓的“计划调用（scheduling a call）”。</p>\n<p>目前有两种方式可以实现：</p>\n<ul>\n<li><code>setTimeout</code> 允许我们将函数推迟到一段时间间隔之后再执行。</li>\n<li><code>setInterval</code> 允许我们重复运行一个函数，从一段时间间隔之后开始运行，之后以该时间间隔连续重复运行该函数。</li>\n</ul>\n<p>这两个方法并不在 JavaScript 的规范中。但是大多数运行环境都有内建的调度程序，并且提供了这些方法。目前来讲，所有浏览器以及 Node.js 都支持这两个方法。</p>\n<h2 id=\"setTimeout\"><a href=\"#setTimeout\" class=\"headerlink\" title=\"setTimeout\"></a>setTimeout</h2><p>语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>func<span class=\"token operator\">|</span>code<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>delay<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>参数说明：</p>\n<ul>\n<li><p><code>func|code</code></p>\n<p>想要执行的函数或代码字符串。 一般传入的都是函数。由于某些历史原因，支持传入代码字符串，但是不建议这样做。</p>\n</li>\n<li><p><code>delay</code></p>\n<p>执行前的延时，以毫秒为单位（1000 毫秒 = 1 秒），默认值是 0；</p>\n</li>\n<li><p><code>arg1</code>，<code>arg2</code>…</p>\n<p>要传入被执行函数（或代码字符串）的参数列表（IE9 以下不支持）</p>\n</li>\n</ul>\n<h2 id=\"嵌套的-setTimeout\"><a href=\"#嵌套的-setTimeout\" class=\"headerlink\" title=\"嵌套的 setTimeout\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#qian-tao-de-settimeout\">嵌套的 setTimeout</a></h2><p>周期性调度有两种方式。</p>\n<p>一种是使用 <code>setInterval</code>，另外一种就是嵌套的 <code>setTimeout</code>，就像这样：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/** instead of:\nlet timerId = setInterval(() => alert('tick'), 2000);\n*/</span>\n\n<span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tick'</span><span class=\"token punctuation\">)</span>\n  timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// (*)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>上面这个 <code>setTimeout</code> 在当前这一次函数执行完时 <code>(*)</code> 立即调度下一次调用。</p>\n<p>嵌套的 <code>setTimeout</code> 要比 <code>setInterval</code> 灵活得多。采用这种方式可以根据当前执行结果来调度下一次调用，因此下一次调用可以与当前这一次不同。</p>\n<p><strong>传入一个函数，但不要执行它</strong></p>\n<p>新手开发者有时候会误将一对括号 <code>()</code> 加在函数后面：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 错的！</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>这样不行，因为 <code>setTimeout</code> 期望得到一个对函数的引用。而这里的 <code>sayHi()</code> 很明显是在执行函数，所以实际上传入 <code>setTimeout</code> 的是 <strong>函数的执行结果</strong>。在这个例子中，<code>sayHi()</code> 的执行结果是 <code>undefined</code>（也就是说函数没有返回任何结果），所以实际上什么也没有调度。</p>\n<h3 id=\"用-clearTimeout-来取消调度\"><a href=\"#用-clearTimeout-来取消调度\" class=\"headerlink\" title=\"用 clearTimeout 来取消调度\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#yong-cleartimeout-lai-qu-xiao-tiao-du\">用 clearTimeout 来取消调度</a></h3><p><code>setTimeout</code> 在调用时会返回一个“定时器标识符（timer identifier）”，在我们的例子中是 <code>timerId</code>，我们可以使用它来取消执行。</p>\n<p>取消调度的语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timerId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h2 id=\"setInterval\"><a href=\"#setInterval\" class=\"headerlink\" title=\"setInterval\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#setinterval\">setInterval</a></h2><p><code>setInterval</code> 方法和 <code>setTimeout</code> 的语法相同：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> timerId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>func<span class=\"token operator\">|</span>code<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>delay<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arg2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>所有参数的意义也是相同的。不过与 <code>setTimeout</code> 只执行一次不同，<code>setInterval</code> 是每间隔给定的时间周期性执行。</p>\n<p>想要阻止后续调用，我们需要调用 <code>clearInterval(timerId)</code>。</p>\n<p><strong>alert 弹窗显示的时候计时器依然在进行计时</strong></p>\n<p>在大多数浏览器中，包括 Chrome 和 Firefox，在显示 <code>alert/confirm/prompt</code> 弹窗时，内部的定时器仍旧会继续“嘀嗒”。</p>\n<p>所以，在运行上面的代码时，如果在一定时间内没有关掉 <code>alert</code> 弹窗，那么在你关闭弹窗后，下一个 <code>alert</code> 会立即显示。两次 <code>alert</code> 之间的时间间隔将小于 2 秒。</p>\n<p><strong>嵌套的 <code>setTimeout</code> 能够精确地设置两次执行之间的延时，而 <code>setInterval</code> 却不能。</strong></p>\n<h2 id=\"零延时的-setTimeout\"><a href=\"#零延时的-setTimeout\" class=\"headerlink\" title=\"零延时的 setTimeout\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#ling-yan-shi-de-settimeout\">零延时的 setTimeout</a></h2><p>这儿有一种特殊的用法：<code>setTimeout(func, 0)</code>，或者仅仅是 <code>setTimeout(func)</code>。</p>\n<p>这样调度可以让 <code>func</code> 尽快执行。但是只有在当前正在执行的脚本执行完成后，调度程序才会调用它。</p>\n<p>也就是说，该函数被调度在当前脚本执行完成“之后”立即执行。</p>\n<p>例如，下面这段代码会先输出 “Hello”，然后立即输出 “World”：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'World'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>第一行代码“将调用安排到日程（calendar）0 毫秒处”。但是调度程序只有在当前脚本执行完毕时才会去“检查日程”，所以先输出 <code>&quot;Hello&quot;</code>，然后才输出 <code>&quot;World&quot;</code>。</p>\n<p><strong>零延时实际上不为零（在浏览器中）</strong></p>\n<h2 id=\"总结-1\"><a href=\"#总结-1\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/settimeout-setinterval#zong-jie\">总结</a></h2><ul>\n<li><code>setTimeout(func, delay, ...args)</code> 和 <code>setInterval(func, delay, ...args)</code> 方法允许我们在 <code>delay</code> 毫秒之后运行 <code>func</code> 一次或以 <code>delay</code> 毫秒为时间间隔周期性运行 <code>func</code>。</li>\n<li>要取消函数的执行，我们应该调用 <code>clearInterval/clearTimeout</code>，并将 <code>setInterval/setTimeout</code> 返回的值作为入参传入。</li>\n<li>嵌套的 <code>setTimeout</code> 比 <code>setInterval</code> 用起来更加灵活，允许我们更精确地设置两次执行之间的时间。</li>\n<li>零延时调度 <code>setTimeout(func, 0)</code>（与 <code>setTimeout(func)</code> 相同）用来调度需要尽快执行的调用，但是会在当前脚本执行完成后进行调用。</li>\n<li>浏览器会将 <code>setTimeout</code> 或 <code>setInterval</code> 的五层或更多层嵌套调用（调用五次之后）的最小延时限制在 4ms。这是历史遗留问题。</li>\n</ul>\n<h1 id=\"函数绑定\"><a href=\"#函数绑定\" class=\"headerlink\" title=\"函数绑定\"></a>函数绑定</h1><p>当将对象方法作为回调进行传递，例如传递给 <code>setTimeout</code>，这儿会存在一个常见的问题：“丢失 <code>this</code>”。</p>\n<h2 id=\"丢失-“this”\"><a href=\"#丢失-“this”\" class=\"headerlink\" title=\"丢失 “this”\"></a><a href=\"https://zh.javascript.info/bind#diu-shi-this\">丢失 “this”</a></h2><p>下面是使用 <code>setTimeout</code> 时 <code>this</code> 是如何丢失的：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstName<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>sayHi<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello, undefined!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"解决方案-1：包装器\"><a href=\"#解决方案-1：包装器\" class=\"headerlink\" title=\"解决方案 1：包装器\"></a><a href=\"https://zh.javascript.info/bind#jie-jue-fang-an-1-bao-zhuang-qi\">解决方案 1：包装器</a></h2><p>最简单的解决方案是使用一个包装函数：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>firstName<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  user<span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Hello, John!</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>现在它可以正常工作了，因为它从外部词法环境中获取到了 <code>user</code>，就可以正常地调用方法了。</p>\n<h2 id=\"解决方案-2：bind\"><a href=\"#解决方案-2：bind\" class=\"headerlink\" title=\"解决方案 2：bind\"></a><a href=\"https://zh.javascript.info/bind#jie-jue-fang-an-2-bind\">解决方案 2：bind</a></h2><p>函数提供了一个内建方法 <a href=\"https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\">bind</a>，它可以绑定 <code>this</code>。</p>\n<p>基本的语法是：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 稍后将会有更复杂的语法</span>\n<span class=\"token keyword\">let</span> boundFunc <span class=\"token operator\">=</span> <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><code>func.bind(context)</code> 的结果是一个特殊的类似于函数的“外来对象（exotic object）”，它可以像函数一样被调用，并且透明地（transparently）将调用传递给 <code>func</code> 并设定 <code>this=context</code>。</p>\n<p><code>boundFunc</code> 调用就像绑定了 <code>this</code> 的 <code>func</code>。</p>\n<h2 id=\"在没有上下文情况下的-partial\"><a href=\"#在没有上下文情况下的-partial\" class=\"headerlink\" title=\"在没有上下文情况下的 partial\"></a><a href=\"https://zh.javascript.info/bind#zai-mei-you-shang-xia-wen-qing-kuang-xia-de-partial\">在没有上下文情况下的 partial</a></h2><p>当我们想绑定一些参数（arguments），但是这里没有上下文 <code>this</code>，应该怎么办？例如，对于一个对象方法。</p>\n<p>原生的 <code>bind</code> 不允许这种情况。我们不可以省略上下文直接跳到参数（arguments）。</p>\n<p><code>partial(func[, arg1, arg2...])</code> 调用的结果是一个包装器 <code>(*)</code>，它调用 <code>func</code> 并具有以下内容：</p>\n<ul>\n<li>与它获得的函数具有相同的 <code>this</code>（对于 <code>user.sayNow</code> 调用来说，它是 <code>user</code>）</li>\n<li>然后给它 <code>...argsBound</code> —— 来自于 <code>partial</code> 调用的参数（<code>&quot;10:00&quot;</code>）</li>\n<li>然后给它 <code>...args</code> —— 给包装器的参数（<code>&quot;Hello&quot;</code>）</li>\n</ul>\n<h2 id=\"总结-2\"><a href=\"#总结-2\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/bind#zong-jie\">总结</a></h2><p>方法 <code>func.bind(context, ...args)</code> 返回函数 <code>func</code> 的“绑定的（bound）变体”，它绑定了上下文 <code>this</code> 和第一个参数（如果给定了）。</p>\n<p>通常我们应用 <code>bind</code> 来绑定对象方法的 <code>this</code>，这样我们就可以把它们传递到其他地方使用。例如，传递给 <code>setTimeout</code>。</p>\n<p>当我们绑定一个现有的函数的某些参数时，绑定后的（不太通用的）函数被称为 <strong>partially applied</strong> 或 <strong>partial</strong>。</p>\n<p>当我们不想一遍又一遍地重复相同的参数时，partial 非常有用。就像我们有一个 <code>send(from, to)</code> 函数，并且对于我们的任务来说，<code>from</code> 应该总是一样的，那么我们就可以搞一个 partial 并使用它。</p>\n<h1 id=\"深入理解箭头函数\"><a href=\"#深入理解箭头函数\" class=\"headerlink\" title=\"深入理解箭头函数\"></a>深入理解箭头函数</h1><p>让我们深入研究一下箭头函数。</p>\n<p>箭头函数不仅仅是编写简洁代码的“捷径”。它还具有非常特殊且有用的特性。</p>\n<p>JavaScript 充满了我们需要编写在其他地方执行的小函数的情况。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token comment\">/* 这个箭头函数是下面这个函数的更短的版本：\n\nlet sum = function(a, b) &#123;\n  return a + b;\n&#125;;\n*/</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ul>\n<li>如果我们只有一个参数，还可以省略掉参数外的圆括号，使代码更短。</li>\n<li>如果没有参数，括号将是空的（但括号应该保留）：</li>\n</ul>\n<h2 id=\"箭头函数没有-“this”\"><a href=\"#箭头函数没有-“this”\" class=\"headerlink\" title=\"箭头函数没有 “this”\"></a><a href=\"https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-this\">箭头函数没有 “this”</a></h2><p>正如我们在 <a href=\"https://zh.javascript.info/object-methods\">对象方法，”this”</a> 一章中所学到的，箭头函数没有 <code>this</code>。如果访问 <code>this</code>，则会从外部获取。</p>\n<p><strong>不能对箭头函数进行 <code>new</code> 操作</strong></p>\n<p>不具有 <code>this</code> 自然也就意味着另一个限制：箭头函数不能用作构造器（constructor）。不能用 <code>new</code> 调用它们。</p>\n<h2 id=\"箭头函数没有-“arguments”\"><a href=\"#箭头函数没有-“arguments”\" class=\"headerlink\" title=\"箭头函数没有 “arguments”\"></a><a href=\"https://zh.javascript.info/arrow-functions#jian-tou-han-shu-mei-you-arguments\">箭头函数没有 “arguments”</a></h2><p>箭头函数也没有 <code>arguments</code> 变量。</p>\n<p>当我们需要使用当前的 <code>this</code> 和 <code>arguments</code> 转发一个调用时，这对装饰器（decorators）来说非常有用。</p>\n<h2 id=\"总结-3\"><a href=\"#总结-3\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/arrow-functions#zong-jie\">总结</a></h2><p>箭头函数：</p>\n<ul>\n<li>没有 <code>this</code></li>\n<li>没有 <code>arguments</code></li>\n<li>不能使用 <code>new</code> 进行调用</li>\n<li>它们也没有 <code>super</code></li>\n</ul>\n<h1 id=\"Mixin-模式\"><a href=\"#Mixin-模式\" class=\"headerlink\" title=\"Mixin 模式\"></a>Mixin 模式</h1><p><a href=\"https://en.wikipedia.org/wiki/Mixin\">mixin</a> 是一个包含可被其他类使用而无需继承的方法的类。</p>\n<h2 id=\"EventMixin\"><a href=\"#EventMixin\" class=\"headerlink\" title=\"EventMixin\"></a><a href=\"https://zh.javascript.info/mixins#eventmixin\">EventMixin</a></h2><p>现在让我们为实际运用构造一个 mixin。</p>\n<p>例如，许多浏览器对象的一个重要功能是它们可以生成事件。事件是向任何有需要的人“广播信息”的好方法。因此，让我们构造一个 mixin，使我们能够轻松地将与事件相关的函数添加到任意 class/object 中。</p>\n<ul>\n<li>Mixin 将提供 <code>.trigger(name, [...data])</code> 方法，以在发生重要的事情时“生成一个事件”。<code>name</code> 参数（arguments）是事件的名称，<code>[...data]</code> 是可选的带有事件数据的其他参数（arguments）。</li>\n<li>此外还有 <code>.on(name, handler)</code> 方法，它为具有给定名称的事件添加了 <code>handler</code> 函数作为监听器（listener）。当具有给定 <code>name</code> 的事件触发时将调用该方法，并从 <code>.trigger</code> 调用中获取参数（arguments）。</li>\n<li>……还有 <code>.off(name, handler)</code> 方法，它会删除 <code>handler</code> 监听器（listener）。</li>\n</ul>\n<h2 id=\"总结-4\"><a href=\"#总结-4\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/mixins#zong-jie\">总结</a></h2><p><em>Mixin</em> — 是一个通用的面向对象编程术语：一个包含其他类的方法的类。</p>\n<p>一些其它编程语言允许多重继承。JavaScript 不支持多重继承，但是可以通过将方法拷贝到原型中来实现 mixin。</p>\n<p>我们可以使用 mixin 作为一种通过添加多种行为（例如上文中所提到的事件处理）来扩充类的方法。</p>\n<p><strong>受保护的属性通常以下划线 <code>_</code> 作为前缀。</strong></p>\n<h1 id=\"简介：回调\"><a href=\"#简介：回调\" class=\"headerlink\" title=\"简介：回调\"></a>简介：回调</h1><p>JavaScript 主机（host）环境提供了许多函数，这些函数允许我们计划 <strong>异步</strong> 行为（action）。</p>\n<p>脚本是“异步”调用的，因为它从现在开始加载，但是在这个加载函数执行完成后才运行。</p>\n<h1 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h1><p>Promise 对象的构造器（constructor）语法如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// executor（生产者代码，“歌手”）</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>传递给 <code>new Promise</code> 的函数被称为 <strong>executor</strong>。当 <code>new Promise</code> 被创建，executor 会自动运行。</p>\n<p>当 executor 获得了结果，无论是早还是晚都没关系，它应该调用以下回调之一：</p>\n<ul>\n<li><code>resolve(value)</code> — 如果任务成功完成并带有结果 <code>value</code>。</li>\n<li><code>reject(error)</code> — 如果出现了 error，<code>error</code> 即为 error 对象。</li>\n</ul>\n<p>executor 会自动运行并尝试执行一项工作。尝试结束后，如果成功则调用 <code>resolve</code>，如果出现 error 则调用 <code>reject</code>。</p>\n<p>由 <code>new Promise</code> 构造器返回的 <code>promise</code> 对象具有以下内部属性：</p>\n<ul>\n<li><code>state</code> — 最初是 <code>&quot;pending&quot;</code>，然后在 <code>resolve</code> 被调用时变为 <code>&quot;fulfilled&quot;</code>，或者在 <code>reject</code> 被调用时变为 <code>&quot;rejected&quot;</code>。</li>\n<li><code>result</code> — 最初是 <code>undefined</code>，然后在 <code>resolve(value)</code> 被调用时变为 <code>value</code>，或者在 <code>reject(error)</code> 被调用时变为 <code>error</code>。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Promises</th>\n<th align=\"left\">Callbacks</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Promises 允许我们按照自然顺序进行编码。首先，我们运行 <code>loadScript</code> 和 <code>.then</code> 来处理结果。</td>\n<td align=\"left\">在调用 <code>loadScript(script, callback)</code> 时，在我们处理的地方（disposal）必须有一个 <code>callback</code> 函数。换句话说，在调用 <code>loadScript</code> <strong>之前</strong>，我们必须知道如何处理结果。</td>\n</tr>\n<tr>\n<td align=\"left\">我们可以根据需要，在 promise 上多次调用 <code>.then</code>。每次调用，我们都会在“订阅列表”中添加一个新的“分析”，一个新的订阅函数。在下一章将对此内容进行详细介绍：<a href=\"https://zh.javascript.info/promise-chaining\">Promise 链</a>。</td>\n<td align=\"left\">只能有一个回调。</td>\n</tr>\n</tbody></table>\n<p>因此，promise 为我们提供了更好的代码流和灵活性。</p>\n<p>一个 promise 构造器和一个简单的 executor 函数，该 executor 函数具有包含时间（即 <code>setTimeout</code>）的“生产者代码”：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 当 promise 被构造完成时，自动执行此函数</span>\n\n  <span class=\"token comment\">// 1 秒后发出工作已经被完成的信号，并带有结果 \"done\"</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在 new Promise()的时候，Promise 的执行器就会立马执行，但是<strong>调用 resolve()会触发异步操作，传入的 then()方法的函数会被添加到任务队列并异步执行</strong></p>\n<p><code>promise</code> 对象代表异步执行结果，通过构造函数 <code>new Promise</code> 创建，其参数是 executor function 可能有一些异步代码，对象其后的方法 <code>.then</code>、<code>.catch</code>、<code>.finally</code> 相当于回调函数。</p>\n<p>一开始创建的 <code>promise</code> 对象状态是 <code>pending</code>（表示初始状态）然后在 executor function 中会有条件地执行 <code>resolve</code> 或 <code>reject</code> 之一，这样就会改变 <code>promise</code> 对象的状态为 <code>settled</code>（表示状态确定，可以触发对象后的方法 <code>.finally</code>）</p>\n<p><code>promise</code> 对象确定的状态其实有两种，如果在 executor function 调用的是 <code>resolve</code> 状态就变成 <code>resolved</code> 相应地会调用对象后的方法 <code>.then</code>；而如果在 executor function 调用的是 <code>reject</code> 状态就变成 <code>rejected</code> 相应地会调用对象后的方法 <code>.catch</code>（其实这是 <code>.then(null, rejectFunc)</code> 缩写形式）</p>\n<h1 id=\"Promise-链\"><a href=\"#Promise-链\" class=\"headerlink\" title=\"Promise 链\"></a>Promise 链</h1><p>它的理念是将 result 通过 <code>.then</code> 处理程序（handler）链进行传递。</p>\n<p>运行流程如下：</p>\n<ol>\n<li>初始 promise 在 1 秒后进行 resolve <code>(*)</code>，</li>\n<li>然后 <code>.then</code> 处理程序（handler）被调用 <code>(**)</code>。</li>\n<li>它返回的值被传入下一个 <code>.then</code> 处理程序（handler）<code>(***)</code></li>\n<li>……依此类推。</li>\n</ol>\n<p><strong>新手常犯的一个经典错误：从技术上讲，我们也可以将多个 <code>.then</code> 添加到一个 promise 上。但这并不是 promise 链（chaining）。</strong></p>\n<h2 id=\"总结-5\"><a href=\"#总结-5\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/promise-chaining#zong-jie\">总结</a></h2><p>如果 <code>.then</code>（或 <code>catch/finally</code> 都可以）处理程序（handler）返回一个 promise，那么链的其余部分将会等待，直到它状态变为 settled。当它被 settled 后，其 result（或 error）将被进一步传递下去。</p>\n<p><img src=\"E:\\Markdown图片\\image-20210128140346440.png\" alt=\"image-20210128140346440\"></p>\n<h1 id=\"使用-promise-进行错误处理\"><a href=\"#使用-promise-进行错误处理\" class=\"headerlink\" title=\"使用 promise 进行错误处理\"></a>使用 promise 进行错误处理</h1><p>Promise 链在错误（error）处理中十分强大。当一个 promise 被 reject 时，控制权将移交至最近的 rejection 处理程序（handler）。</p>\n<h2 id=\"隐式-try…catch\"><a href=\"#隐式-try…catch\" class=\"headerlink\" title=\"隐式 try…catch\"></a><a href=\"https://zh.javascript.info/promise-error-handling#yin-shi-trycatch\">隐式 try…catch</a></h2><p>Promise 的执行者（executor）和 promise 的处理程序（handler）周围有一个“隐式的 <code>try..catch</code>”。如果发生异常，它（译注：指异常）就会被捕获，并被视为 rejection 进行处理。</p>\n<p>下面这段代码：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops!'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Whoops!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>……与下面这段代码工作上完全相同：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Whoops!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>在 executor 周围的“隐式 <code>try..catch</code>”自动捕获了 error，并将其变为 rejected promise。</p>\n<p>这不仅仅发生在 executor 函数中，同样也发生在其 handler 中。如果我们在 <code>.then</code> 处理程序（handler）中 <code>throw</code>，这意味着 promise 被 rejected，因此控制权移交至最近的 error 处理程序（handler）。</p>\n<p>一个例子：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ok'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Whoops!'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// reject 这个 promise</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>alert<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Whoops!</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"再次抛出（Rethrowing）\"><a href=\"#再次抛出（Rethrowing）\" class=\"headerlink\" title=\"再次抛出（Rethrowing）\"></a><a href=\"https://zh.javascript.info/promise-error-handling#zai-ci-pao-chu-rethrowing\">再次抛出（Rethrowing）</a></h2><p>链尾端的 <code>.catch</code> 的表现有点像 <code>try..catch</code>。我们可能有许多个 <code>.then</code> 处理程序（handler），然后在尾端使用一个 <code>.catch</code> 处理上面的所有 error。</p>\n<h2 id=\"总结-6\"><a href=\"#总结-6\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/promise-error-handling#zong-jie\">总结</a></h2><ul>\n<li><code>.catch</code> 处理 promise 中的各种 error：在 <code>reject()</code> 调用中的，或者在处理程序（handler）中抛出的（thrown）error。</li>\n<li>我们应该将 <code>.catch</code> 准确地放到我们想要处理 error，并知道如何处理这些 error 的地方。处理程序应该分析 error（可以自定义 error 类来帮助分析）并再次抛出未知的 error（可能它们是编程错误）。</li>\n<li>如果没有办法从 error 中恢复的话，不使用 <code>.catch</code> 也可以。</li>\n<li>在任何情况下我们都应该有 <code>unhandledrejection</code> 事件处理程序（用于浏览器，以及其他环境的模拟），以跟踪未处理的 error 并告知用户（可能还有我们的服务器）有关信息，以使我们的应用程序永远不会“死掉”。</li>\n</ul>\n<h1 id=\"Promise-API\"><a href=\"#Promise-API\" class=\"headerlink\" title=\"Promise API\"></a>Promise API</h1><h2 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all\"></a><a href=\"https://zh.javascript.info/promise-api#promiseall\">Promise.all</a></h2><p>假设我们希望并行执行多个 promise，并等待所有 promise 都准备就绪。语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> promise <span class=\"token operator\">=</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>promises<span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><code>Promise.all(iterable)</code> <strong>允许在</strong> <code>iterable</code> <strong>中使用 non-promise 的“常规”值</strong></p>\n<p><code>Promise.all</code> 接受一个 promise 数组作为参数（从技术上讲，它可以是任何可迭代的，但通常是一个数组）并返回一个新的 promise。</p>\n<p><strong>如果任意一个 promise 被 reject，由 <code>Promise.all</code> 返回的 promise 就会立即 reject，并且带有的就是这个 error。</strong></p>\n<h2 id=\"Promise-allSettled\"><a href=\"#Promise-allSettled\" class=\"headerlink\" title=\"Promise.allSettled\"></a><a href=\"https://zh.javascript.info/promise-api#promiseallsettled\">Promise.allSettled</a></h2><p><code>Promise.allSettled</code> 等待所有的 promise 都被 settle，无论结果如何。结果数组具有：</p>\n<ul>\n<li><code>&#123;status:&quot;fulfilled&quot;, value:result&#125;</code> 对于成功的响应，</li>\n<li><code>&#123;status:&quot;rejected&quot;, reason:error&#125;</code> 对于 error。</li>\n</ul>\n<h2 id=\"Promise-race\"><a href=\"#Promise-race\" class=\"headerlink\" title=\"Promise.race\"></a><a href=\"https://zh.javascript.info/promise-api#promiserace\">Promise.race</a></h2><p>与 <code>Promise.all</code> 类似，但只等待第一个 settled 的 promise 并获取其结果（或 error）。</p>\n<p><code>Promise.all</code> 可能是在实战中使用最多的。</p>\n<h1 id=\"微任务（Microtask）\"><a href=\"#微任务（Microtask）\" class=\"headerlink\" title=\"微任务（Microtask）\"></a>微任务（Microtask）</h1><p>Promise 的处理程序（handlers）<code>.then</code>、<code>.catch</code> 和 <code>.finally</code> 都是异步的。</p>\n<p>即便一个 promise 立即被 resolve，<code>.then</code>、<code>.catch</code> 和 <code>.finally</code> <strong>下面</strong> 的代码也会在这些处理程序（handler）之前被执行。</p>\n<h2 id=\"微任务队列（Microtask-queue）\"><a href=\"#微任务队列（Microtask-queue）\" class=\"headerlink\" title=\"微任务队列（Microtask queue）\"></a><a href=\"https://zh.javascript.info/microtask-queue#wei-ren-wu-dui-lie-microtaskqueue\">微任务队列（Microtask queue）</a></h2><p>异步任务需要适当的管理。为此，ECMA 标准规定了一个内部队列 <code>PromiseJobs</code>，通常被称为“微任务队列（microtask queue）”（ES8 术语）。</p>\n<p>如 <a href=\"https://tc39.github.io/ecma262/#sec-jobs-and-job-queues\">规范</a> 中所述：</p>\n<ul>\n<li>队列（queue）是先进先出的：首先进入队列的任务会首先运行。</li>\n<li>只有在 JavaScript 引擎中没有其它任务在运行时，才开始执行任务队列中的任务。</li>\n</ul>\n<p>当一个 promise 准备就绪时，它的 <code>.then/catch/finally</code> 处理程序（handler）就会被放入队列中：但是它们不会立即被执行。当 JavaScript 引擎执行完当前的代码，它会从队列中获取任务并执行它。</p>\n<p>如果有一个包含多个 <code>.then/catch/finally</code> 的链，那么它们中的每一个都是异步执行的。也就是说，它会首先进入队列，然后在当前代码执行完成并且先前排队的处理程序（handler）都完成时才会被执行。</p>\n<h2 id=\"总结-7\"><a href=\"#总结-7\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/microtask-queue#zong-jie\">总结</a></h2><p>Promise 处理始终是异步的，因为所有 promise 行为都会通过内部的 “promise jobs” 队列，也被称为“微任务队列”（ES8 术语）。</p>\n<p>因此，<code>.then/catch/finally</code> 处理程序（handler）总是在当前代码完成后才会被调用。</p>\n<p>如果我们需要确保一段代码在 <code>.then/catch/finally</code> 之后被执行，我们可以将它添加到链式调用的 <code>.then</code> 中。</p>\n<h1 id=\"Async-await\"><a href=\"#Async-await\" class=\"headerlink\" title=\"Async/await\"></a>Async/await</h1><h2 id=\"Async-function\"><a href=\"#Async-function\" class=\"headerlink\" title=\"Async function\"></a><a href=\"https://zh.javascript.info/async-await#asyncfunction\">Async function</a></h2><p>Async/await 是以更舒适的方式使用 promise 的一种特殊语法，同时它也非常易于理解和使用。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>在函数前面的 “async” 这个单词表达了一个简单的事情：即这个函数总是返回一个 promise。其他值将自动被包装在一个 resolved 的 promise 中。</p>\n<h2 id=\"Await\"><a href=\"#Await\" class=\"headerlink\" title=\"Await\"></a><a href=\"https://zh.javascript.info/async-await#await\">Await</a></h2><p>语法如下：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 只在 async 函数内工作</span>\n<span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> promise<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>关键字 <code>await</code> 让 JavaScript 引擎等待直到 promise 完成（settle）并返回结果。</p>\n<h1 id=\"Generator\"><a href=\"#Generator\" class=\"headerlink\" title=\"Generator\"></a>Generator</h1><p>常规函数只会返回一个单一值（或者不返回任何值）。</p>\n<p>而 Generator 可以按需一个接一个地返回（“yield”）多个值。它们可与 <a href=\"https://zh.javascript.info/iterable\">iterable</a> 完美配合使用，从而可以轻松地创建数据流。</p>\n<h2 id=\"Generator-函数\"><a href=\"#Generator-函数\" class=\"headerlink\" title=\"Generator 函数\"></a><a href=\"https://zh.javascript.info/generators#generator-han-shu\">Generator 函数</a></h2><p>要创建一个 generator，我们需要一个特殊的语法结构：<code>function*</code>，即所谓的 “generator function”。</p>\n<p>像这样：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span><span class=\"token operator\">*</span> <span class=\"token function\">generateSequence</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>一个 generator 的主要方法就是 <code>next()</code>。当被调用时（译注：指 <code>next()</code> 方法），它会恢复上图所示的运行，执行直到最近的 <code>yield &lt;value&gt;</code> 语句（<code>value</code> 可以被省略，默认为 <code>undefined</code>）。然后函数执行暂停，并将产出的（yielded）值返回到外部代码。</p>\n<p><code>next()</code> 的结果始终是一个具有两个属性的对象：</p>\n<ul>\n<li><code>value</code>: 产出的（yielded）的值。</li>\n<li><code>done</code>: 如果 generator 函数已执行完成则为 <code>true</code>，否则为 <code>false</code>。</li>\n</ul>\n<p>代码恢复执行并返回下一个 <code>yield</code> 的值：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> two <span class=\"token operator\">=</span> generator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>two<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// &#123;value: 2, done: false&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong><code>function\\* f(…)</code> 或 <code>function \\*f(…)</code>？</strong></p>\n<p>这两种语法都是对的。</p>\n<p>但是通常更倾向于第一种语法，因为星号 <code>*</code> 表示它是一个 generator 函数，它描述的是函数种类而不是名称，因此 <code>*</code> 应该和 <code>function</code> 关键字紧贴一起。</p>\n<h2 id=\"“yield”-是一条双向路\"><a href=\"#“yield”-是一条双向路\" class=\"headerlink\" title=\"“yield” 是一条双向路\"></a><a href=\"https://zh.javascript.info/generators#yield-shi-yi-tiao-shuang-xiang-lu\">“yield” 是一条双向路</a></h2><p>目前看来，generator 和可迭代对象类似，都具有用来生成值的特殊语法。但实际上，generator 更加强大且灵活。</p>\n<p>这是因为 <code>yield</code> 是一条双向路（two-way street）：它不仅可以向外返回结果，而且还可以将外部的值传递到 generator 内。</p>\n<p>调用 <code>generator.next(arg)</code>，我们就能将参数 <code>arg</code> 传递到 generator 内部。这个 <code>arg</code> 参数会变成 <code>yield</code> 的结果。</p>\n<h2 id=\"generator-throw\"><a href=\"#generator-throw\" class=\"headerlink\" title=\"generator.throw\"></a><a href=\"https://zh.javascript.info/generators#generatorthrow\">generator.throw</a></h2><p>正如我们在上面的例子中观察到的那样，外部代码可能会将一个值传递到 generator，作为 <code>yield</code> 的结果。</p>\n<p>……但是它也可以在那里发起（抛出）一个 error。这很自然，因为 error 本身也是一种结果。</p>\n<p>要向 <code>yield</code> 传递一个 error，我们应该调用 <code>generator.throw(err)</code>。在这种情况下，<code>err</code> 将被抛到对应的 <code>yield</code> 所在的那一行。</p>\n<h2 id=\"总结-8\"><a href=\"#总结-8\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/generators#zong-jie\">总结</a></h2><ul>\n<li>Generator 是通过 generator 函数 <code>function* f(…) &#123;…&#125;</code> 创建的。</li>\n<li>在 generator（仅在）内部，存在 <code>yield</code> 操作。</li>\n<li>外部代码和 generator 可能会通过 <code>next/yield</code> 调用交换结果。</li>\n</ul>\n<h1 id=\"异步迭代和-generator\"><a href=\"#异步迭代和-generator\" class=\"headerlink\" title=\"异步迭代和 generator\"></a>异步迭代和 generator</h1><p>异步迭代允许我们对按需通过异步请求而得到的数据进行迭代。</p>\n<p>当值是以异步的形式出现时，例如在 <code>setTimeout</code> 或者另一种延迟之后，就需要异步迭代。</p>\n<p>最常见的场景是，对象需要发送一个网络请求以传递下一个值，稍后我们将看到一个它的真实示例。</p>\n<p>要使对象异步迭代：</p>\n<ol>\n<li>使用 <code>Symbol.asyncIterator</code> 取代 <code>Symbol.iterator</code>。</li>\n<li><code>next()</code> 方法应该返回一个 <code>promise</code>（带有下一个值，并且状态为 <code>fulfilled</code>）。<ul>\n<li>关键字 <code>async</code> 可以实现这一点，我们可以简单地使用 <code>async next()</code>。</li>\n</ul>\n</li>\n<li>我们应该使用 <code>for await (let item of iterable)</code> 循环来迭代这样的对象。<ul>\n<li>注意关键字 <code>await</code>。</li>\n</ul>\n</li>\n</ol>\n<p>作为开始的示例，让我们创建一个可迭代的 <code>range</code> 对象，与前面的那个类似，不过现在它将异步地每秒返回一个值。</p>\n<p>我们需要做的就是对上面代码中的部分代码进行替换：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> range <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">from</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  to<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>asyncIterator<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// (1)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n      current<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>from<span class=\"token punctuation\">,</span>\n      last<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>to<span class=\"token punctuation\">,</span>\n\n      <span class=\"token keyword\">async</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// (2)</span>\n\n        <span class=\"token comment\">// 注意：我们可以在 async next 内部使用 \"await\"</span>\n        <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// (3)</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>current <span class=\"token operator\">&lt;=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>last<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>current<span class=\"token operator\">++</span> <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span> done<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token keyword\">await</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> value <span class=\"token keyword\">of</span> range<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// (4)</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1,2,3,4,5</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>正如我们所看到的，其结构与常规的 iterator 类似:</p>\n<ol>\n<li>为了使一个对象可以异步迭代，它必须具有方法 <code>Symbol.asyncIterator</code> <code>(1)</code>。</li>\n<li>这个方法必须返回一个带有 <code>next()</code> 方法的对象，<code>next()</code> 方法会返回一个 promise <code>(2)</code>。</li>\n<li>这个 <code>next()</code> 方法可以不是 <code>async</code> 的，它可以是一个返回值是一个 <code>promise</code> 的常规的方法，但是使用 <code>async</code> 关键字可以允许我们在方法内部使用 <code>await</code>，所以会更加方便。这里我们只是用于延迟 1 秒的操作 <code>(3)</code>。</li>\n<li>我们使用 <code>for await(let value of range)</code> <code>(4)</code> 来进行迭代，也就是在 <code>for</code> 后面添加 <code>await</code>。它会调用一次 <code>range[Symbol.asyncIterator]()</code> 方法一次，然后调用它的 <code>next()</code> 方法获取值。</li>\n</ol>\n<p>这是一个对比 Iterator 和异步 iterator 之间差异的表格：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">Iterator</th>\n<th align=\"left\">异步 iterator</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">提供 iterator 的对象方法</td>\n<td align=\"left\"><code>Symbol.iterator</code></td>\n<td align=\"left\"><code>Symbol.asyncIterator</code></td>\n</tr>\n<tr>\n<td align=\"left\"><code>next()</code> 返回的值是</td>\n<td align=\"left\">任意值</td>\n<td align=\"left\"><code>Promise</code></td>\n</tr>\n<tr>\n<td align=\"left\">要进行循环，使用</td>\n<td align=\"left\"><code>for..of</code></td>\n<td align=\"left\"><code>for await..of</code></td>\n</tr>\n</tbody></table>\n<h1 id=\"模块-Module-简介\"><a href=\"#模块-Module-简介\" class=\"headerlink\" title=\"模块 (Module) 简介\"></a>模块 (Module) 简介</h1><p>社区发明了许多种方法来将代码组织到模块中，使用特殊的库按需加载模块。</p>\n<p>列举一些（出于历史原因）：</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Asynchronous_module_definition\">AMD</a> —— 最古老的模块系统之一，最初由 <a href=\"http://requirejs.org/\">require.js</a> 库实现。</li>\n<li><a href=\"http://wiki.commonjs.org/wiki/Modules/1.1\">CommonJS</a> —— 为 Node.js 服务器创建的模块系统。</li>\n<li><a href=\"https://github.com/umdjs/umd\">UMD</a> —— 另外一个模块系统，建议作为通用的模块系统，它与 AMD 和 CommonJS 都兼容。</li>\n</ul>\n<h2 id=\"什么是模块？\"><a href=\"#什么是模块？\" class=\"headerlink\" title=\"什么是模块？\"></a><a href=\"https://zh.javascript.info/modules-intro#shi-mo-shi-mo-kuai\">什么是模块？</a></h2><p>一个模块（module）就是一个文件。一个脚本就是一个模块。就这么简单。</p>\n<p>模块可以相互加载，并可以使用特殊的指令 <code>export</code> 和 <code>import</code> 来交换功能，从另一个模块调用一个模块的函数：</p>\n<ul>\n<li><code>export</code> 关键字标记了可以从当前模块外部访问的变量和函数。</li>\n<li><code>import</code> 关键字允许从其他模块导入功能。</li>\n</ul>\n<h2 id=\"模块核心功能\"><a href=\"#模块核心功能\" class=\"headerlink\" title=\"模块核心功能\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-he-xin-gong-neng\">模块核心功能</a></h2><h3 id=\"始终使用-“use-strict”\"><a href=\"#始终使用-“use-strict”\" class=\"headerlink\" title=\"始终使用 “use strict”\"></a><a href=\"https://zh.javascript.info/modules-intro#shi-zhong-shi-yong-usestrict\">始终使用 “use strict”</a></h3><p>模块始终默认使用 <code>use strict</code>，例如，对一个未声明的变量赋值将产生错误（译注：在浏览器控制台可以看到 error 信息）。</p>\n<h3 id=\"模块级作用域\"><a href=\"#模块级作用域\" class=\"headerlink\" title=\"模块级作用域\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-ji-zuo-yong-yu\">模块级作用域</a></h3><p>每个模块都有自己的顶级作用域（top-level scope）。换句话说，一个模块中的顶级作用域变量和函数在其他脚本中是不可见的。</p>\n<h3 id=\"模块代码仅在第一次导入时被解析\"><a href=\"#模块代码仅在第一次导入时被解析\" class=\"headerlink\" title=\"模块代码仅在第一次导入时被解析\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-dai-ma-jin-zai-di-yi-ci-dao-ru-shi-bei-jie-xi\">模块代码仅在第一次导入时被解析</a></h3><p>如果同一个模块被导入到多个其他位置，那么它的代码仅会在第一次导入时执行，然后将导出（export）的内容提供给所有的导入（importer）。</p>\n<h3 id=\"在一个模块中，“this”-是-undefined\"><a href=\"#在一个模块中，“this”-是-undefined\" class=\"headerlink\" title=\"在一个模块中，“this” 是 undefined\"></a><a href=\"https://zh.javascript.info/modules-intro#zai-yi-ge-mo-kuai-zhong-this-shi-undefined\">在一个模块中，“this” 是 undefined</a></h3><p>这是一个小功能，但为了完整性，我们应该提到它。</p>\n<p>在一个模块中，顶级 <code>this</code> 是 undefined。</p>\n<h3 id=\"import-meta\"><a href=\"#import-meta\" class=\"headerlink\" title=\"import.meta\"></a><a href=\"https://zh.javascript.info/modules-intro#importmeta\">import.meta</a></h3><p><code>import.meta</code> 对象包含关于当前模块的信息。</p>\n<p>它的内容取决于其所在的环境。在浏览器环境中，它包含当前脚本的 URL，或者如果它是在 HTML 中的话，则包含当前页面的 URL。</p>\n<h3 id=\"模块脚本是延迟的\"><a href=\"#模块脚本是延迟的\" class=\"headerlink\" title=\"模块脚本是延迟的\"></a><a href=\"https://zh.javascript.info/modules-intro#mo-kuai-jiao-ben-shi-yan-chi-de\">模块脚本是延迟的</a></h3><p>模块脚本 <strong>总是</strong> 被延迟的，与 <code>defer</code> 特性（在 <a href=\"https://zh.javascript.info/script-async-defer\">脚本：async，defer</a> 一章中描述的）对外部脚本和内联脚本（inline script）的影响相同。</p>\n<p>也就是说：</p>\n<ul>\n<li>下载外部模块脚本 <code>&lt;script type=&quot;module&quot; src=&quot;...&quot;&gt;</code> 不会阻塞 HTML 的处理，它们会与其他资源并行加载。</li>\n<li>模块脚本会等到 HTML 文档完全准备就绪（即使它们很小并且比 HTML 加载速度更快），然后才会运行。</li>\n<li>保持脚本的相对顺序：在文档中排在前面的脚本先执行。</li>\n</ul>\n<p>它的一个副作用是，模块脚本总是会“看到”已完全加载的 HTML 页面，包括在它们下方的 HTML 元素。</p>\n<h3 id=\"不允许裸模块（“bare”-module）\"><a href=\"#不允许裸模块（“bare”-module）\" class=\"headerlink\" title=\"不允许裸模块（“bare” module）\"></a><a href=\"https://zh.javascript.info/modules-intro#bu-yun-xu-luo-mo-kuai-baremodule\">不允许裸模块（“bare” module）</a></h3><p>在浏览器中，<code>import</code> 必须给出相对或绝对的 URL 路径。没有任何路径的模块被称为“裸（bare）”模块。在 <code>import</code> 中不允许这种模块。</p>\n<h3 id=\"兼容性，“nomodule”\"><a href=\"#兼容性，“nomodule”\" class=\"headerlink\" title=\"兼容性，“nomodule”\"></a><a href=\"https://zh.javascript.info/modules-intro#jian-rong-xing-nomodule\">兼容性，“nomodule”</a></h3><p>旧时的浏览器不理解 <code>type=&quot;module&quot;</code>。未知类型的脚本会被忽略。</p>\n<h2 id=\"构建工具\"><a href=\"#构建工具\" class=\"headerlink\" title=\"构建工具\"></a><a href=\"https://zh.javascript.info/modules-intro#gou-jian-gong-ju\">构建工具</a></h2><p>在实际开发中，浏览器模块很少被以“原始”形式进行使用。通常，我们会使用一些特殊工具，例如 <a href=\"https://webpack.js.org/\">Webpack</a>，将它们打包在一起，然后部署到生产环境的服务器。</p>\n<p>使用打包工具的一个好处是 —— 它们可以更好地控制模块的解析方式，允许我们使用裸模块和更多的功能，例如 CSS/HTML 模块等。</p>\n<p>构建工具做以下这些事儿：</p>\n<ol>\n<li>从一个打算放在 HTML 中的 <code>&lt;script type=&quot;module&quot;&gt;</code> “主”模块开始。</li>\n<li>分析它的依赖：它的导入，以及它的导入的导入等。</li>\n<li>使用所有模块构建一个文件（或者多个文件，这是可调的），并用打包函数（bundler function）替代原生的 <code>import</code> 调用，以使其正常工作。还支持像 HTML/CSS 模块等“特殊”的模块类型。</li>\n<li>在处理过程中，可能会应用其他转换和优化：<ul>\n<li>删除无法访问的代码。</li>\n<li>删除未使用的导出（“tree-shaking”）。</li>\n<li>删除特定于开发的像 <code>console</code> 和 <code>debugger</code> 这样的语句。</li>\n<li>可以使用 <a href=\"https://babeljs.io/\">Babel</a> 将前沿的现代的 JavaScript 语法转换为具有类似功能的旧的 JavaScript 语法。</li>\n<li>压缩生成的文件（删除空格，用短的名字替换变量等）。</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"总结-9\"><a href=\"#总结-9\" class=\"headerlink\" title=\"总结\"></a><a href=\"https://zh.javascript.info/modules-intro#zong-jie\">总结</a></h2><p>下面总结一下模块的核心概念：</p>\n<ol>\n<li>一个模块就是一个文件。浏览器需要使用<script type=\"module\">以使 import/export 可以工作。模块（译注：相较于常规脚本）有几点差别：<ul>\n<li>默认是延迟解析的（deferred）。</li>\n<li>Async 可用于内联脚本。</li>\n<li>要从另一个源（域/协议/端口）加载外部脚本，需要 CORS header。</li>\n<li>重复的外部脚本会被忽略</li>\n</ul>\n</li>\n<li>模块具有自己的本地顶级作用域，并可以通过 <code>import/export</code> 交换功能。</li>\n<li>模块始终使用 <code>use strict</code>。</li>\n<li>模块代码只执行一次。导出仅创建一次，然后会在导入之间共享。</li>\n</ol>\n<h1 id=\"Proxy-和-Reflect\"><a href=\"#Proxy-和-Reflect\" class=\"headerlink\" title=\"Proxy 和 Reflect\"></a>Proxy 和 Reflect</h1><p>一个 <code>Proxy</code> 对象包装另一个对象并拦截诸如读取/写入属性和其他操作，可以选择自行处理它们，或者透明地允许该对象处理它们。</p>\n<p>Proxy 被用于了许多库和某些浏览器框架。</p>\n<h2 id=\"Proxy\"><a href=\"#Proxy\" class=\"headerlink\" title=\"Proxy\"></a><a href=\"https://zh.javascript.info/proxy#proxy\">Proxy</a></h2><p>语法：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li><code>target</code> —— 是要包装的对象，可以是任何东西，包括函数。</li>\n<li><code>handler</code> —— 代理配置：带有“捕捉器”（“traps”，即拦截操作的方法）的对象。比如 <code>get</code> 捕捉器用于读取 <code>target</code> 的属性，<code>set</code> 捕捉器用于写入 <code>target</code> 的属性，等等。</li>\n</ul>\n<p>对 <code>proxy</code> 进行操作，如果在 <code>handler</code> 中存在相应的捕捉器，则它将运行，并且 Proxy 有机会对其进行处理，否则将直接对 target 进行处理。</p>\n<p>由于没有捕捉器，所有对 <code>proxy</code> 的操作都直接转发给了 <code>target</code>。</p>\n<ol>\n<li>写入操作 <code>proxy.test=</code> 会将值写入 <code>target</code>。</li>\n<li>读取操作 <code>proxy.test</code> 会从 <code>target</code> 返回对应的值。</li>\n<li>迭代 <code>proxy</code> 会从 <code>target</code> 返回对应的值。</li>\n</ol>\n<h2 id=\"带有-“get”-捕捉器的默认值\"><a href=\"#带有-“get”-捕捉器的默认值\" class=\"headerlink\" title=\"带有 “get” 捕捉器的默认值\"></a><a href=\"https://zh.javascript.info/proxy#dai-you-get-bu-zhuo-qi-de-mo-ren-zhi\">带有 “get” 捕捉器的默认值</a></h2><p>最常见的捕捉器是用于读取/写入的属性。</p>\n<p>要拦截读取操作，<code>handler</code> 应该有 <code>get(target, property, receiver)</code> 方法。</p>\n<p>读取属性时触发该方法，参数如下：</p>\n<ul>\n<li><code>target</code> —— 是目标对象，该对象被作为第一个参数传递给 <code>new Proxy</code>，</li>\n<li><code>property</code> —— 目标属性名，</li>\n<li><code>receiver</code> —— 如果目标属性是一个 getter 访问器属性，则 <code>receiver</code> 就是本次读取属性所在的 <code>this</code> 对象。通常，这就是 <code>proxy</code> 对象本身（或者，如果我们从 proxy 继承，则是从该 proxy 继承的对象）。现在我们不需要此参数，因此稍后我们将对其进行详细介绍。</li>\n</ul>\n<h2 id=\"使用-“set”-捕捉器进行验证\"><a href=\"#使用-“set”-捕捉器进行验证\" class=\"headerlink\" title=\"使用 “set” 捕捉器进行验证\"></a><a href=\"https://zh.javascript.info/proxy#shi-yong-set-bu-zhuo-qi-jin-hang-yan-zheng\">使用 “set” 捕捉器进行验证</a></h2><p>假设我们想要一个专门用于数字的数组。如果添加了其他类型的值，则应该抛出一个错误。</p>\n<p>当写入属性时 <code>set</code> 捕捉器被触发。</p>\n<p><code>set(target, property, value, receiver)</code>：</p>\n<ul>\n<li><code>target</code> —— 是目标对象，该对象被作为第一个参数传递给 <code>new Proxy</code>，</li>\n<li><code>property</code> —— 目标属性名称，</li>\n<li><code>value</code> —— 目标属性的值，</li>\n<li><code>receiver</code> —— 与 <code>get</code> 捕捉器类似，仅与 setter 访问器属性相关。</li>\n</ul>\n<p>如果写入操作（setting）成功，<code>set</code> 捕捉器应该返回 <code>true</code>，否则返回 <code>false</code>（触发 <code>TypeError</code>）。</p>\n<h2 id=\"使用-“ownKeys”-和-“getOwnPropertyDescriptor”-进行迭代\"><a href=\"#使用-“ownKeys”-和-“getOwnPropertyDescriptor”-进行迭代\" class=\"headerlink\" title=\"使用 “ownKeys” 和 “getOwnPropertyDescriptor” 进行迭代\"></a><a href=\"https://zh.javascript.info/proxy#shi-yong-ownkeys-he-getownpropertydescriptor-jin-hang-die-dai\">使用 “ownKeys” 和 “getOwnPropertyDescriptor” 进行迭代</a></h2><p><code>Object.keys</code>，<code>for..in</code> 循环和大多数其他遍历对象属性的方法都使用内部方法 <code>[[OwnPropertyKeys]]</code>（由 <code>ownKeys</code> 捕捉器拦截) 来获取属性列表。</p>\n<p>这些方法在细节上有所不同：</p>\n<ul>\n<li><code>Object.getOwnPropertyNames(obj)</code> 返回非 Symbol 键。</li>\n<li><code>Object.getOwnPropertySymbols(obj)</code> 返回 Symbol 键。</li>\n<li><code>Object.keys/values()</code> 返回带有 <code>enumerable</code> 标志的非 Symbol 键/值（属性标志在 <a href=\"https://zh.javascript.info/property-descriptors\">属性标志和属性描述符</a> 一章有详细讲解)。</li>\n<li><code>for..in</code> 循环遍历所有带有 <code>enumerable</code> 标志的非 Symbol 键，以及原型对象的键。</li>\n</ul>"},{"title":"mobx的使用","date":"2021-07-23T07:04:09.000Z","_content":"\n# MobX\n\n简单、可扩展的 JavaScript 状态管理库。一般和 React 结合使用。\n\n<!--more-->\n## 安装\n\n- 使用命令行安装\n\n  `npm install mobx --save`。React 绑定库：`npm install mobx-react --save`。\n\n- CDN\n\n  - https://unpkg.com/mobx/lib/mobx.umd.js\n  - https://cdnjs.com/libraries/mobx\n\n## 浏览器支持\n\n- MobX>=5 版本可运行在任何支持 es6 的浏览器中，不支持 IE11 以下和 Node 5 以下。\n- MobX 4 可以运行在任何支持 ES5 的浏览器上，而且也在持续的维护中，但是 MobX4 具有一些局限性，长期维护支持版。\n\n## 入门\n\nMobX 通过透明的函数响应式编程使得状态管理变得简单和可扩展。MboX 的核心思想就是：\n\n​ _任何源自应用状态的东西都应该自动地获得。_\n\n其中包括 UI、数据序列化、服务器通讯等等。\n\n![MobX unidirectional flow](https://cn.mobx.js.org/flow.png)\n\n在 React 中使用 MobX。React 通过提供机制把应用状态转换为可渲染组件树并对其进行渲染。而 MobX 提供机制来存储和更新应用状态供 React 使用（类似于 Vue 中的 Vuex）。\n\nMobX 提供了优化应用状态于 React 组件同步的机制，这种机制就是使用响应式虚拟依赖状态图表，它只有在真正需要的时候才更新并且永远保持是最新的。\n\n## 装饰器\n\n> 装饰器是一个对类进行处理的函数\n\n- 基本语法\n\n  @xxx\n\n- 返回函数为装饰器传参\n\n  @xxx(value)\n\n- 添加实例属性\n\n  mixin\n\n```javascript\n@fn //基本语法\n@fn2(20) //传参\n@fn3 //添加实例属性\nclass Myclass {\n  @readonly message = \"hello\";\n  @noenumerable bar = \"foo\";\n  @noenumerable test() {\n    console.log(\"hello,test\");\n  }\n}\n\nfunction fn(target) {\n  target.foo = \"bar\";\n}\n\nfunction fn2(value) {\n  return function (target) {\n    target.count = value;\n  };\n}\n\nfunction fn3(target) {\n  target.prototype.foo = \"baz\";\n}\n//设置只读\nfunction readonly(target, name, descriptor) {\n  /*   console.log(target); //目标类的.prototype\n  console.log(name); //被修饰的类成员的名称\n  console.log(descriptor); // 被修饰的类成员的描述对象 */\n  descriptor.writable = false;\n}\n//不可被遍历\nfunction noenumerable(target, name, descriptor) {\n  // descriptor.enumerable = false;\n}\n\nconst c1 = new Myclass();\n// console.log(c1.message);\nfor (let key in c1) {\n  console.log(key, c1[key]);\n}\nc1.test();\n/* console.log(Myclass.foo);\nconsole.log(Myclass.count);\nconsole.log(new Myclass().foo); */\n```\n\n## 核心 API\n\n其中 observable`、 `computed`、 `reactions` 和 action`是 MobX 最重要的 API\n\n### **MObX**\n\n改变 observables\n\n### observable\n\nObservable 值可以是 JS 基本数据类型、引用类型、普通对象、类实例、数组和映射。\n\n```javascript\n@observable count = 0;\n@observable foo = 'bar';\n```\n\n### observer\n\n`observer` 函数/装饰器可以用来将 React 组件转变成响应式组件。 它用 `mobx.autorun` 包装了组件的 render 函数以确保任何组件渲染中使用的数据变化时都可以强制刷新组件。 `observer` 是由单独的 `mobx-react` 包提供的。observer 由 mobx-react 导入。\n\n```javascript\n@observer\nclass App extends React.Component {}\n```\n\n### **computed**\n\n根据现有的状态或其它计算值衍生出的值，在多从调用 computed 方法时，计算属性的方法只执行一次，因为它会缓存计算方法，除非方法中的属性改变。用于返回数据。\n\n```javascript\n@computed get totalPrice() {\n    return this.price * this.count;\n}\n```\n\n### **action**\n\n只对修改状态的函数使用动作。配置 mobx 强制使用 action，通过 configure 中的 enforceActions 配置为 observed，不容许在 action 之外修改容器状态。自我认为类似于 React 中的 setState。\n\n```javascript\nconfigure({\n  enforceActions: \"observed\",\n});\n```\n\n### **action.bound**\n\n为方法绑定 this。一般情况下 action 都与 bound 连用。\n\n```javascript\n@action.bound change() {\n    console.log(this);\n    this.count = 10;\n    this.foo = 'hello';\n    this.foo = 'world';\n }\n```\n\n### **action-runInAction**\n\n在不想调用 action 函数时，可以直接使用 runInAction 来改变属性的值。\n\n```javascript\nrunInAction(() => {\n  this.count = 100;\n});\n```\n\n### **异步 action**\n\n在 action 严格模式下无法直接修改容器中属性的状态，可通过\n\n1. 定义 action 函数使用\n2. 直接调用 action 函数\n3. runInAction\n\n```javascript\n@action.bound asyncChange() {\n    setTimeout(() => {\n      // this.count = 100;\n      // 1. 定义 action 函数\n      // this.changeCount()\n      // 2. 直接调用action函数\n      // action('changeFoo',()=>{\n      //   this.foo ='hello'\n      // })()\n      // 3. runInAction\n      runInAction(() => {\n        this.count = 100;\n      });\n    }, 100);\n  }\n```\n\n### when\n\n当依赖的数据条件被满足时触发，只执行一次，之后不再处理。如果第一次条件被满足就会被立刻执行。\n\n```javascript\n// 当 count > 100 的时候，只执行一次自定义逻辑when(  () => {    return store.count > 100;  },  () => {    console.log('when=> ', store.count);  });\n```\n\n### reaction\n\nreaction 只有当被观测的数据发生改变的时候，才会执行，reaction 可频繁触发。\n\n```javascript\nreaction(  () => {    // 执行一些业务逻辑操作，返回数据给下一个函数使用。    return store.count;  },  (data, reaction) => {    console.log('reaction=> ', data);    // 手动停止当前 reaction的监听    reaction.dispose();  });\n```\n\n## 学习排坑\n\n目前直接使用 npm i mobx mobx-react 时，mobx 下载的版本是 6，目前官方文档还没有更新，所以在下载依赖时，建议在 mobx 后加@5.15.5 这种具体版本号。\n\n# mobx-react\n\n```jsx\nimport { observer, Provider, inject } from \"mobx-react\";\n```\n\n## Provider\n\nProvider 是一个 React 组件，使用 React 的上下文（context）机制，可以用来向下传递 stores，即把 state 传递给其子组件。\n\n```jsx\nconst stores = { mainStore, userStore, commonStore };\nReactDOM.render(\n  <Provider {...stores}>\n    {\" \"}\n    <App />{\" \"}\n  </Provider>,\n  document.getElementById(\"container\")\n);\n```\n\n## inject\n\ninject 是一个高阶组件，作用是将组件连接到提供的 stores。具体说是与 Provider 结合使用，从 Provider 提供给应用的 state 数据中选取所需数据，以 props 的形式传递给目标组件。\n\n```jsx\n@inject( 'userStore')@observerexport default class User extends Component{}\n```\n","source":"_posts/2021-07-23-mobx的使用.md","raw":"---\ntitle: mobx的使用\ndate: 2021-07-23 15:04:09\ntags:\n  - 'React'\n---\n\n# MobX\n\n简单、可扩展的 JavaScript 状态管理库。一般和 React 结合使用。\n\n<!--more-->\n## 安装\n\n- 使用命令行安装\n\n  `npm install mobx --save`。React 绑定库：`npm install mobx-react --save`。\n\n- CDN\n\n  - https://unpkg.com/mobx/lib/mobx.umd.js\n  - https://cdnjs.com/libraries/mobx\n\n## 浏览器支持\n\n- MobX>=5 版本可运行在任何支持 es6 的浏览器中，不支持 IE11 以下和 Node 5 以下。\n- MobX 4 可以运行在任何支持 ES5 的浏览器上，而且也在持续的维护中，但是 MobX4 具有一些局限性，长期维护支持版。\n\n## 入门\n\nMobX 通过透明的函数响应式编程使得状态管理变得简单和可扩展。MboX 的核心思想就是：\n\n​ _任何源自应用状态的东西都应该自动地获得。_\n\n其中包括 UI、数据序列化、服务器通讯等等。\n\n![MobX unidirectional flow](https://cn.mobx.js.org/flow.png)\n\n在 React 中使用 MobX。React 通过提供机制把应用状态转换为可渲染组件树并对其进行渲染。而 MobX 提供机制来存储和更新应用状态供 React 使用（类似于 Vue 中的 Vuex）。\n\nMobX 提供了优化应用状态于 React 组件同步的机制，这种机制就是使用响应式虚拟依赖状态图表，它只有在真正需要的时候才更新并且永远保持是最新的。\n\n## 装饰器\n\n> 装饰器是一个对类进行处理的函数\n\n- 基本语法\n\n  @xxx\n\n- 返回函数为装饰器传参\n\n  @xxx(value)\n\n- 添加实例属性\n\n  mixin\n\n```javascript\n@fn //基本语法\n@fn2(20) //传参\n@fn3 //添加实例属性\nclass Myclass {\n  @readonly message = \"hello\";\n  @noenumerable bar = \"foo\";\n  @noenumerable test() {\n    console.log(\"hello,test\");\n  }\n}\n\nfunction fn(target) {\n  target.foo = \"bar\";\n}\n\nfunction fn2(value) {\n  return function (target) {\n    target.count = value;\n  };\n}\n\nfunction fn3(target) {\n  target.prototype.foo = \"baz\";\n}\n//设置只读\nfunction readonly(target, name, descriptor) {\n  /*   console.log(target); //目标类的.prototype\n  console.log(name); //被修饰的类成员的名称\n  console.log(descriptor); // 被修饰的类成员的描述对象 */\n  descriptor.writable = false;\n}\n//不可被遍历\nfunction noenumerable(target, name, descriptor) {\n  // descriptor.enumerable = false;\n}\n\nconst c1 = new Myclass();\n// console.log(c1.message);\nfor (let key in c1) {\n  console.log(key, c1[key]);\n}\nc1.test();\n/* console.log(Myclass.foo);\nconsole.log(Myclass.count);\nconsole.log(new Myclass().foo); */\n```\n\n## 核心 API\n\n其中 observable`、 `computed`、 `reactions` 和 action`是 MobX 最重要的 API\n\n### **MObX**\n\n改变 observables\n\n### observable\n\nObservable 值可以是 JS 基本数据类型、引用类型、普通对象、类实例、数组和映射。\n\n```javascript\n@observable count = 0;\n@observable foo = 'bar';\n```\n\n### observer\n\n`observer` 函数/装饰器可以用来将 React 组件转变成响应式组件。 它用 `mobx.autorun` 包装了组件的 render 函数以确保任何组件渲染中使用的数据变化时都可以强制刷新组件。 `observer` 是由单独的 `mobx-react` 包提供的。observer 由 mobx-react 导入。\n\n```javascript\n@observer\nclass App extends React.Component {}\n```\n\n### **computed**\n\n根据现有的状态或其它计算值衍生出的值，在多从调用 computed 方法时，计算属性的方法只执行一次，因为它会缓存计算方法，除非方法中的属性改变。用于返回数据。\n\n```javascript\n@computed get totalPrice() {\n    return this.price * this.count;\n}\n```\n\n### **action**\n\n只对修改状态的函数使用动作。配置 mobx 强制使用 action，通过 configure 中的 enforceActions 配置为 observed，不容许在 action 之外修改容器状态。自我认为类似于 React 中的 setState。\n\n```javascript\nconfigure({\n  enforceActions: \"observed\",\n});\n```\n\n### **action.bound**\n\n为方法绑定 this。一般情况下 action 都与 bound 连用。\n\n```javascript\n@action.bound change() {\n    console.log(this);\n    this.count = 10;\n    this.foo = 'hello';\n    this.foo = 'world';\n }\n```\n\n### **action-runInAction**\n\n在不想调用 action 函数时，可以直接使用 runInAction 来改变属性的值。\n\n```javascript\nrunInAction(() => {\n  this.count = 100;\n});\n```\n\n### **异步 action**\n\n在 action 严格模式下无法直接修改容器中属性的状态，可通过\n\n1. 定义 action 函数使用\n2. 直接调用 action 函数\n3. runInAction\n\n```javascript\n@action.bound asyncChange() {\n    setTimeout(() => {\n      // this.count = 100;\n      // 1. 定义 action 函数\n      // this.changeCount()\n      // 2. 直接调用action函数\n      // action('changeFoo',()=>{\n      //   this.foo ='hello'\n      // })()\n      // 3. runInAction\n      runInAction(() => {\n        this.count = 100;\n      });\n    }, 100);\n  }\n```\n\n### when\n\n当依赖的数据条件被满足时触发，只执行一次，之后不再处理。如果第一次条件被满足就会被立刻执行。\n\n```javascript\n// 当 count > 100 的时候，只执行一次自定义逻辑when(  () => {    return store.count > 100;  },  () => {    console.log('when=> ', store.count);  });\n```\n\n### reaction\n\nreaction 只有当被观测的数据发生改变的时候，才会执行，reaction 可频繁触发。\n\n```javascript\nreaction(  () => {    // 执行一些业务逻辑操作，返回数据给下一个函数使用。    return store.count;  },  (data, reaction) => {    console.log('reaction=> ', data);    // 手动停止当前 reaction的监听    reaction.dispose();  });\n```\n\n## 学习排坑\n\n目前直接使用 npm i mobx mobx-react 时，mobx 下载的版本是 6，目前官方文档还没有更新，所以在下载依赖时，建议在 mobx 后加@5.15.5 这种具体版本号。\n\n# mobx-react\n\n```jsx\nimport { observer, Provider, inject } from \"mobx-react\";\n```\n\n## Provider\n\nProvider 是一个 React 组件，使用 React 的上下文（context）机制，可以用来向下传递 stores，即把 state 传递给其子组件。\n\n```jsx\nconst stores = { mainStore, userStore, commonStore };\nReactDOM.render(\n  <Provider {...stores}>\n    {\" \"}\n    <App />{\" \"}\n  </Provider>,\n  document.getElementById(\"container\")\n);\n```\n\n## inject\n\ninject 是一个高阶组件，作用是将组件连接到提供的 stores。具体说是与 Provider 结合使用，从 Provider 提供给应用的 state 数据中选取所需数据，以 props 的形式传递给目标组件。\n\n```jsx\n@inject( 'userStore')@observerexport default class User extends Component{}\n```\n","slug":"mobx的使用","published":1,"updated":"2021-08-01T10:45:38.092Z","_id":"ckrg01wa800000orqa1awfs7e","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"MobX\"><a href=\"#MobX\" class=\"headerlink\" title=\"MobX\"></a>MobX</h1><p>简单、可扩展的 JavaScript 状态管理库。一般和 React 结合使用。</p>\n<a id=\"more\"></a>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><ul>\n<li><p>使用命令行安装</p>\n<p><code>npm install mobx --save</code>。React 绑定库：<code>npm install mobx-react --save</code>。</p>\n</li>\n<li><p>CDN</p>\n<ul>\n<li><a href=\"https://unpkg.com/mobx/lib/mobx.umd.js\">https://unpkg.com/mobx/lib/mobx.umd.js</a></li>\n<li><a href=\"https://cdnjs.com/libraries/mobx\">https://cdnjs.com/libraries/mobx</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"浏览器支持\"><a href=\"#浏览器支持\" class=\"headerlink\" title=\"浏览器支持\"></a>浏览器支持</h2><ul>\n<li>MobX&gt;=5 版本可运行在任何支持 es6 的浏览器中，不支持 IE11 以下和 Node 5 以下。</li>\n<li>MobX 4 可以运行在任何支持 ES5 的浏览器上，而且也在持续的维护中，但是 MobX4 具有一些局限性，长期维护支持版。</li>\n</ul>\n<h2 id=\"入门\"><a href=\"#入门\" class=\"headerlink\" title=\"入门\"></a>入门</h2><p>MobX 通过透明的函数响应式编程使得状态管理变得简单和可扩展。MboX 的核心思想就是：</p>\n<p>​ <em>任何源自应用状态的东西都应该自动地获得。</em></p>\n<p>其中包括 UI、数据序列化、服务器通讯等等。</p>\n<p><img src=\"https://cn.mobx.js.org/flow.png\" alt=\"MobX unidirectional flow\"></p>\n<p>在 React 中使用 MobX。React 通过提供机制把应用状态转换为可渲染组件树并对其进行渲染。而 MobX 提供机制来存储和更新应用状态供 React 使用（类似于 Vue 中的 Vuex）。</p>\n<p>MobX 提供了优化应用状态于 React 组件同步的机制，这种机制就是使用响应式虚拟依赖状态图表，它只有在真正需要的时候才更新并且永远保持是最新的。</p>\n<h2 id=\"装饰器\"><a href=\"#装饰器\" class=\"headerlink\" title=\"装饰器\"></a>装饰器</h2><blockquote>\n<p>装饰器是一个对类进行处理的函数</p>\n</blockquote>\n<ul>\n<li><p>基本语法</p>\n<p>@xxx</p>\n</li>\n<li><p>返回函数为装饰器传参</p>\n<p>@xxx(value)</p>\n</li>\n<li><p>添加实例属性</p>\n<p>mixin</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@fn <span class=\"token comment\">//基本语法</span>\n@<span class=\"token function\">fn2</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//传参</span>\n@fn3 <span class=\"token comment\">//添加实例属性</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Myclass</span> <span class=\"token punctuation\">&#123;</span>\n  @readonly message <span class=\"token operator\">=</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">;</span>\n  @noenumerable bar <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>\n  @noenumerable <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello,test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  target<span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    target<span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn3</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  target<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">\"baz\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//设置只读</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">readonly</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> descriptor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">/*   console.log(target); //目标类的.prototype\n  console.log(name); //被修饰的类成员的名称\n  console.log(descriptor); // 被修饰的类成员的描述对象 */</span>\n  descriptor<span class=\"token punctuation\">.</span>writable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//不可被遍历</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">noenumerable</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> descriptor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// descriptor.enumerable = false;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">const</span> c1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Myclass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// console.log(c1.message);</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> c1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> c1<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* console.log(Myclass.foo);\nconsole.log(Myclass.count);\nconsole.log(new Myclass().foo); */</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"核心-API\"><a href=\"#核心-API\" class=\"headerlink\" title=\"核心 API\"></a>核心 API</h2><p>其中 observable<code>、 </code>computed<code>、 </code>reactions<code> 和 action</code>是 MobX 最重要的 API</p>\n<h3 id=\"MObX\"><a href=\"#MObX\" class=\"headerlink\" title=\"MObX\"></a><strong>MObX</strong></h3><p>改变 observables</p>\n<h3 id=\"observable\"><a href=\"#observable\" class=\"headerlink\" title=\"observable\"></a>observable</h3><p>Observable 值可以是 JS 基本数据类型、引用类型、普通对象、类实例、数组和映射。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@observable count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n@observable foo <span class=\"token operator\">=</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"observer\"><a href=\"#observer\" class=\"headerlink\" title=\"observer\"></a>observer</h3><p><code>observer</code> 函数/装饰器可以用来将 React 组件转变成响应式组件。 它用 <code>mobx.autorun</code> 包装了组件的 render 函数以确保任何组件渲染中使用的数据变化时都可以强制刷新组件。 <code>observer</code> 是由单独的 <code>mobx-react</code> 包提供的。observer 由 mobx-react 导入。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@observer\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"computed\"><a href=\"#computed\" class=\"headerlink\" title=\"computed\"></a><strong>computed</strong></h3><p>根据现有的状态或其它计算值衍生出的值，在多从调用 computed 方法时，计算属性的方法只执行一次，因为它会缓存计算方法，除非方法中的属性改变。用于返回数据。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@computed <span class=\"token keyword\">get</span> <span class=\"token function\">totalPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"action\"><a href=\"#action\" class=\"headerlink\" title=\"action\"></a><strong>action</strong></h3><p>只对修改状态的函数使用动作。配置 mobx 强制使用 action，通过 configure 中的 enforceActions 配置为 observed，不容许在 action 之外修改容器状态。自我认为类似于 React 中的 setState。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  enforceActions<span class=\"token operator\">:</span> <span class=\"token string\">\"observed\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"action-bound\"><a href=\"#action-bound\" class=\"headerlink\" title=\"action.bound\"></a><strong>action.bound</strong></h3><p>为方法绑定 this。一般情况下 action 都与 bound 连用。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@action<span class=\"token punctuation\">.</span>bound <span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">'hello'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">'world'</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"action-runInAction\"><a href=\"#action-runInAction\" class=\"headerlink\" title=\"action-runInAction\"></a><strong>action-runInAction</strong></h3><p>在不想调用 action 函数时，可以直接使用 runInAction 来改变属性的值。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">runInAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"异步-action\"><a href=\"#异步-action\" class=\"headerlink\" title=\"异步 action\"></a><strong>异步 action</strong></h3><p>在 action 严格模式下无法直接修改容器中属性的状态，可通过</p>\n<ol>\n<li>定义 action 函数使用</li>\n<li>直接调用 action 函数</li>\n<li>runInAction</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@action<span class=\"token punctuation\">.</span>bound <span class=\"token function\">asyncChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// this.count = 100;</span>\n      <span class=\"token comment\">// 1. 定义 action 函数</span>\n      <span class=\"token comment\">// this.changeCount()</span>\n      <span class=\"token comment\">// 2. 直接调用action函数</span>\n      <span class=\"token comment\">// action('changeFoo',()=>&#123;</span>\n      <span class=\"token comment\">//   this.foo ='hello'</span>\n      <span class=\"token comment\">// &#125;)()</span>\n      <span class=\"token comment\">// 3. runInAction</span>\n      <span class=\"token function\">runInAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"when\"><a href=\"#when\" class=\"headerlink\" title=\"when\"></a>when</h3><p>当依赖的数据条件被满足时触发，只执行一次，之后不再处理。如果第一次条件被满足就会被立刻执行。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 当 count > 100 的时候，只执行一次自定义逻辑when(  () => &#123;    return store.count > 100;  &#125;,  () => &#123;    console.log('when=> ', store.count);  &#125;);</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"reaction\"><a href=\"#reaction\" class=\"headerlink\" title=\"reaction\"></a>reaction</h3><p>reaction 只有当被观测的数据发生改变的时候，才会执行，reaction 可频繁触发。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">reaction</span><span class=\"token punctuation\">(</span>  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>    <span class=\"token comment\">// 执行一些业务逻辑操作，返回数据给下一个函数使用。    return store.count;  &#125;,  (data, reaction) => &#123;    console.log('reaction=> ', data);    // 手动停止当前 reaction的监听    reaction.dispose();  &#125;);</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"学习排坑\"><a href=\"#学习排坑\" class=\"headerlink\" title=\"学习排坑\"></a>学习排坑</h2><p>目前直接使用 npm i mobx mobx-react 时，mobx 下载的版本是 6，目前官方文档还没有更新，所以在下载依赖时，建议在 mobx 后加@5.15.5 这种具体版本号。</p>\n<h1 id=\"mobx-react\"><a href=\"#mobx-react\" class=\"headerlink\" title=\"mobx-react\"></a>mobx-react</h1><pre class=\"line-numbers language-jsx\" data-language=\"jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> observer<span class=\"token punctuation\">,</span> Provider<span class=\"token punctuation\">,</span> inject <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx-react\"</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"Provider\"><a href=\"#Provider\" class=\"headerlink\" title=\"Provider\"></a>Provider</h2><p>Provider 是一个 React 组件，使用 React 的上下文（context）机制，可以用来向下传递 stores，即把 state 传递给其子组件。</p>\n<pre class=\"line-numbers language-jsx\" data-language=\"jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> stores <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> mainStore<span class=\"token punctuation\">,</span> userStore<span class=\"token punctuation\">,</span> commonStore <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token spread\"><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">stores</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"container\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"inject\"><a href=\"#inject\" class=\"headerlink\" title=\"inject\"></a>inject</h2><p>inject 是一个高阶组件，作用是将组件连接到提供的 stores。具体说是与 Provider 结合使用，从 Provider 提供给应用的 state 数据中选取所需数据，以 props 的形式传递给目标组件。</p>\n<pre class=\"line-numbers language-jsx\" data-language=\"jsx\"><code class=\"language-jsx\">@<span class=\"token function\">inject</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'userStore'</span><span class=\"token punctuation\">)</span>@observerexport <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>","site":{"data":{}},"excerpt":"<h1 id=\"MobX\"><a href=\"#MobX\" class=\"headerlink\" title=\"MobX\"></a>MobX</h1><p>简单、可扩展的 JavaScript 状态管理库。一般和 React 结合使用。</p>","more":"<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><ul>\n<li><p>使用命令行安装</p>\n<p><code>npm install mobx --save</code>。React 绑定库：<code>npm install mobx-react --save</code>。</p>\n</li>\n<li><p>CDN</p>\n<ul>\n<li><a href=\"https://unpkg.com/mobx/lib/mobx.umd.js\">https://unpkg.com/mobx/lib/mobx.umd.js</a></li>\n<li><a href=\"https://cdnjs.com/libraries/mobx\">https://cdnjs.com/libraries/mobx</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"浏览器支持\"><a href=\"#浏览器支持\" class=\"headerlink\" title=\"浏览器支持\"></a>浏览器支持</h2><ul>\n<li>MobX&gt;=5 版本可运行在任何支持 es6 的浏览器中，不支持 IE11 以下和 Node 5 以下。</li>\n<li>MobX 4 可以运行在任何支持 ES5 的浏览器上，而且也在持续的维护中，但是 MobX4 具有一些局限性，长期维护支持版。</li>\n</ul>\n<h2 id=\"入门\"><a href=\"#入门\" class=\"headerlink\" title=\"入门\"></a>入门</h2><p>MobX 通过透明的函数响应式编程使得状态管理变得简单和可扩展。MboX 的核心思想就是：</p>\n<p>​ <em>任何源自应用状态的东西都应该自动地获得。</em></p>\n<p>其中包括 UI、数据序列化、服务器通讯等等。</p>\n<p><img src=\"https://cn.mobx.js.org/flow.png\" alt=\"MobX unidirectional flow\"></p>\n<p>在 React 中使用 MobX。React 通过提供机制把应用状态转换为可渲染组件树并对其进行渲染。而 MobX 提供机制来存储和更新应用状态供 React 使用（类似于 Vue 中的 Vuex）。</p>\n<p>MobX 提供了优化应用状态于 React 组件同步的机制，这种机制就是使用响应式虚拟依赖状态图表，它只有在真正需要的时候才更新并且永远保持是最新的。</p>\n<h2 id=\"装饰器\"><a href=\"#装饰器\" class=\"headerlink\" title=\"装饰器\"></a>装饰器</h2><blockquote>\n<p>装饰器是一个对类进行处理的函数</p>\n</blockquote>\n<ul>\n<li><p>基本语法</p>\n<p>@xxx</p>\n</li>\n<li><p>返回函数为装饰器传参</p>\n<p>@xxx(value)</p>\n</li>\n<li><p>添加实例属性</p>\n<p>mixin</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@fn <span class=\"token comment\">//基本语法</span>\n@<span class=\"token function\">fn2</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//传参</span>\n@fn3 <span class=\"token comment\">//添加实例属性</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Myclass</span> <span class=\"token punctuation\">&#123;</span>\n  @readonly message <span class=\"token operator\">=</span> <span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">;</span>\n  @noenumerable bar <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>\n  @noenumerable <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello,test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  target<span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn2</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    target<span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">fn3</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  target<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">\"baz\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//设置只读</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">readonly</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> descriptor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">/*   console.log(target); //目标类的.prototype\n  console.log(name); //被修饰的类成员的名称\n  console.log(descriptor); // 被修饰的类成员的描述对象 */</span>\n  descriptor<span class=\"token punctuation\">.</span>writable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">//不可被遍历</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">noenumerable</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> descriptor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// descriptor.enumerable = false;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">const</span> c1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Myclass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// console.log(c1.message);</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> c1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> c1<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nc1<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* console.log(Myclass.foo);\nconsole.log(Myclass.count);\nconsole.log(new Myclass().foo); */</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"核心-API\"><a href=\"#核心-API\" class=\"headerlink\" title=\"核心 API\"></a>核心 API</h2><p>其中 observable<code>、 </code>computed<code>、 </code>reactions<code> 和 action</code>是 MobX 最重要的 API</p>\n<h3 id=\"MObX\"><a href=\"#MObX\" class=\"headerlink\" title=\"MObX\"></a><strong>MObX</strong></h3><p>改变 observables</p>\n<h3 id=\"observable\"><a href=\"#observable\" class=\"headerlink\" title=\"observable\"></a>observable</h3><p>Observable 值可以是 JS 基本数据类型、引用类型、普通对象、类实例、数组和映射。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@observable count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n@observable foo <span class=\"token operator\">=</span> <span class=\"token string\">'bar'</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"observer\"><a href=\"#observer\" class=\"headerlink\" title=\"observer\"></a>observer</h3><p><code>observer</code> 函数/装饰器可以用来将 React 组件转变成响应式组件。 它用 <code>mobx.autorun</code> 包装了组件的 render 函数以确保任何组件渲染中使用的数据变化时都可以强制刷新组件。 <code>observer</code> 是由单独的 <code>mobx-react</code> 包提供的。observer 由 mobx-react 导入。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@observer\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"computed\"><a href=\"#computed\" class=\"headerlink\" title=\"computed\"></a><strong>computed</strong></h3><p>根据现有的状态或其它计算值衍生出的值，在多从调用 computed 方法时，计算属性的方法只执行一次，因为它会缓存计算方法，除非方法中的属性改变。用于返回数据。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@computed <span class=\"token keyword\">get</span> <span class=\"token function\">totalPrice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>price <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"action\"><a href=\"#action\" class=\"headerlink\" title=\"action\"></a><strong>action</strong></h3><p>只对修改状态的函数使用动作。配置 mobx 强制使用 action，通过 configure 中的 enforceActions 配置为 observed，不容许在 action 之外修改容器状态。自我认为类似于 React 中的 setState。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>\n  enforceActions<span class=\"token operator\">:</span> <span class=\"token string\">\"observed\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"action-bound\"><a href=\"#action-bound\" class=\"headerlink\" title=\"action.bound\"></a><strong>action.bound</strong></h3><p>为方法绑定 this。一般情况下 action 都与 bound 连用。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@action<span class=\"token punctuation\">.</span>bound <span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">'hello'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">'world'</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"action-runInAction\"><a href=\"#action-runInAction\" class=\"headerlink\" title=\"action-runInAction\"></a><strong>action-runInAction</strong></h3><p>在不想调用 action 函数时，可以直接使用 runInAction 来改变属性的值。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">runInAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"异步-action\"><a href=\"#异步-action\" class=\"headerlink\" title=\"异步 action\"></a><strong>异步 action</strong></h3><p>在 action 严格模式下无法直接修改容器中属性的状态，可通过</p>\n<ol>\n<li>定义 action 函数使用</li>\n<li>直接调用 action 函数</li>\n<li>runInAction</li>\n</ol>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">@action<span class=\"token punctuation\">.</span>bound <span class=\"token function\">asyncChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// this.count = 100;</span>\n      <span class=\"token comment\">// 1. 定义 action 函数</span>\n      <span class=\"token comment\">// this.changeCount()</span>\n      <span class=\"token comment\">// 2. 直接调用action函数</span>\n      <span class=\"token comment\">// action('changeFoo',()=>&#123;</span>\n      <span class=\"token comment\">//   this.foo ='hello'</span>\n      <span class=\"token comment\">// &#125;)()</span>\n      <span class=\"token comment\">// 3. runInAction</span>\n      <span class=\"token function\">runInAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"when\"><a href=\"#when\" class=\"headerlink\" title=\"when\"></a>when</h3><p>当依赖的数据条件被满足时触发，只执行一次，之后不再处理。如果第一次条件被满足就会被立刻执行。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 当 count > 100 的时候，只执行一次自定义逻辑when(  () => &#123;    return store.count > 100;  &#125;,  () => &#123;    console.log('when=> ', store.count);  &#125;);</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"reaction\"><a href=\"#reaction\" class=\"headerlink\" title=\"reaction\"></a>reaction</h3><p>reaction 只有当被观测的数据发生改变的时候，才会执行，reaction 可频繁触发。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token function\">reaction</span><span class=\"token punctuation\">(</span>  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>    <span class=\"token comment\">// 执行一些业务逻辑操作，返回数据给下一个函数使用。    return store.count;  &#125;,  (data, reaction) => &#123;    console.log('reaction=> ', data);    // 手动停止当前 reaction的监听    reaction.dispose();  &#125;);</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"学习排坑\"><a href=\"#学习排坑\" class=\"headerlink\" title=\"学习排坑\"></a>学习排坑</h2><p>目前直接使用 npm i mobx mobx-react 时，mobx 下载的版本是 6，目前官方文档还没有更新，所以在下载依赖时，建议在 mobx 后加@5.15.5 这种具体版本号。</p>\n<h1 id=\"mobx-react\"><a href=\"#mobx-react\" class=\"headerlink\" title=\"mobx-react\"></a>mobx-react</h1><pre class=\"line-numbers language-jsx\" data-language=\"jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> observer<span class=\"token punctuation\">,</span> Provider<span class=\"token punctuation\">,</span> inject <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx-react\"</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"Provider\"><a href=\"#Provider\" class=\"headerlink\" title=\"Provider\"></a>Provider</h2><p>Provider 是一个 React 组件，使用 React 的上下文（context）机制，可以用来向下传递 stores，即把 state 传递给其子组件。</p>\n<pre class=\"line-numbers language-jsx\" data-language=\"jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> stores <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> mainStore<span class=\"token punctuation\">,</span> userStore<span class=\"token punctuation\">,</span> commonStore <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token spread\"><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">stores</span><span class=\"token punctuation\">&#125;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">&#125;</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"container\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"inject\"><a href=\"#inject\" class=\"headerlink\" title=\"inject\"></a>inject</h2><p>inject 是一个高阶组件，作用是将组件连接到提供的 stores。具体说是与 Provider 结合使用，从 Provider 提供给应用的 state 数据中选取所需数据，以 props 的形式传递给目标组件。</p>\n<pre class=\"line-numbers language-jsx\" data-language=\"jsx\"><code class=\"language-jsx\">@<span class=\"token function\">inject</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'userStore'</span><span class=\"token punctuation\">)</span>@observerexport <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>"},{"title":"数据排序换行合并","date":"2021-08-14T02:23:55.000Z","_content":"\n此内容是我在工作对数据处理时遇到的问题，对该问题进行总结。\n<!--more-->\n\n原数据如下\n\n```javascript\nconst originData = [\n  { shr: '成-古力·古力', shsj: '2021-08-12 17:29:56', shyj: '', sphj: '任务发起人', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '1', sphj: '发起人部长', spjg: '【同意】' },\n  { shr: '系统管理员', shsj: '2021-08-12 17:42:58', shyj: '所有子流程结束后办理子流程节点任务', sphj: '子流程', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '', sphj: '所有角色确认', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:37:00', shyj: '123', sphj: '业务部门部长组', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:37:00', shyj: '234', sphj: '业务部门部长组', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '', sphj: '所有角色确认', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '', sphj: '所有角色确认', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:41:59', shyj: '567', sphj: '业务部门部长组', spjg: '【同意】' }\n]\n```\n\n因为业务要求，我们需要把数据中的对象进行排序，所以需要对数据进行格式化。\n\n要求顺序是`['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']`\n\n因此需要用`map`和`fiter`进行数组的格式化，下面为格式化的代码。\n\n```javascript\nconst getFormatData = (originData) => {\n  const initOrder = ['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']\n  const result = initOrder\n    .map((initOrderItem) => {\n      const filterItems = originData.filter((originDataItem) => originDataItem.sphj === initOrderItem)\n      const count = filterItems.length\n      return filterItems.map((filterItem, index) => {\n        const rowSpan = index === 0 ? count : 0\n        return {\n          ...filterItem,\n          rowSpan\n        }\n      })\n    })\n    .flat()\n  return result\n}\n```\n\n这个代码的思路是这样的，我们对自己创建的数组进行遍历，然后用`filter`去过滤，当发现原数组对象中有审批环节和数组中的内容对应了，即放在一起，拆解下来是这样的。\n\n```js\nconst getFormatData = (originData) => {\n  const initOrder = ['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']\n  const result = initOrder\n    .map((initOrderItem) => {\n      return originData.filter((originDataItem) => originDataItem.sphj === initOrderItem)\n    })\n    .flat()\n  return result\n}\n```\n\n这段代码即是将数据内容进行排序，因为在进行遍历时，会有两层数组嵌套，所以要使用flat将数组进行扁平化处理。\n\n下面的换行则要对内部的数据进行处理。\n\n```js\nconst getFormatData = (originData) => {\n  const initOrder = ['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']\n  const result = initOrder\n    .map((initOrderItem) => {\n      const filterItems = originData.filter((originDataItem) => originDataItem.sphj === initOrderItem)\n      const count = filterItems.length\n      return filterItems.map((filterItem, index) => {\n        const rowSpan = index === 0 ? count : 0\n        return {\n          ...filterItem,\n          rowSpan\n        }\n      })\n    })\n    .flat()\n  return result\n}\n```\n\n数据中的`filterItems`是相同类型的对象放在一个数组里面，因此我们先得到它的长度，在`antd`中，我们将`rowSpan`置为0，则不渲染下一行，所以这里要对数据长度进行判断，再进行一次数据的遍历，使用map的第二个可选属性，`index`，index指数组的索引，从0开始，在这里我们使用三元运算符判断，如果`index===0`，则说明它是第一个元素，将长度赋给`rowSpan`，多出的元素则将`rowSpan`置为0，不对该行进行渲染，则可以实现行的合并，由此，所有的内容都可实现行合并，该函数可以在其他地方也被调用，只需要更改数组中的数据即可，个人认为可复用性较大。\n\n","source":"_posts/2021-08-14-数据排序换行合并.md","raw":"---\ntitle: 数据排序换行合并\ndate: 2021-08-14 10:23:55\ntags:\n\t\t- 'antd'\t\n---\n\n此内容是我在工作对数据处理时遇到的问题，对该问题进行总结。\n<!--more-->\n\n原数据如下\n\n```javascript\nconst originData = [\n  { shr: '成-古力·古力', shsj: '2021-08-12 17:29:56', shyj: '', sphj: '任务发起人', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '1', sphj: '发起人部长', spjg: '【同意】' },\n  { shr: '系统管理员', shsj: '2021-08-12 17:42:58', shyj: '所有子流程结束后办理子流程节点任务', sphj: '子流程', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '', sphj: '所有角色确认', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:37:00', shyj: '123', sphj: '业务部门部长组', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:37:00', shyj: '234', sphj: '业务部门部长组', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '', sphj: '所有角色确认', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:33:06', shyj: '', sphj: '所有角色确认', spjg: '【同意】' },\n  { shr: '凉皮', shsj: '2021-08-12 17:41:59', shyj: '567', sphj: '业务部门部长组', spjg: '【同意】' }\n]\n```\n\n因为业务要求，我们需要把数据中的对象进行排序，所以需要对数据进行格式化。\n\n要求顺序是`['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']`\n\n因此需要用`map`和`fiter`进行数组的格式化，下面为格式化的代码。\n\n```javascript\nconst getFormatData = (originData) => {\n  const initOrder = ['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']\n  const result = initOrder\n    .map((initOrderItem) => {\n      const filterItems = originData.filter((originDataItem) => originDataItem.sphj === initOrderItem)\n      const count = filterItems.length\n      return filterItems.map((filterItem, index) => {\n        const rowSpan = index === 0 ? count : 0\n        return {\n          ...filterItem,\n          rowSpan\n        }\n      })\n    })\n    .flat()\n  return result\n}\n```\n\n这个代码的思路是这样的，我们对自己创建的数组进行遍历，然后用`filter`去过滤，当发现原数组对象中有审批环节和数组中的内容对应了，即放在一起，拆解下来是这样的。\n\n```js\nconst getFormatData = (originData) => {\n  const initOrder = ['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']\n  const result = initOrder\n    .map((initOrderItem) => {\n      return originData.filter((originDataItem) => originDataItem.sphj === initOrderItem)\n    })\n    .flat()\n  return result\n}\n```\n\n这段代码即是将数据内容进行排序，因为在进行遍历时，会有两层数组嵌套，所以要使用flat将数组进行扁平化处理。\n\n下面的换行则要对内部的数据进行处理。\n\n```js\nconst getFormatData = (originData) => {\n  const initOrder = ['任务发起人', '发起人部长', '子流程', '业务部门部长组', '所有角色确认']\n  const result = initOrder\n    .map((initOrderItem) => {\n      const filterItems = originData.filter((originDataItem) => originDataItem.sphj === initOrderItem)\n      const count = filterItems.length\n      return filterItems.map((filterItem, index) => {\n        const rowSpan = index === 0 ? count : 0\n        return {\n          ...filterItem,\n          rowSpan\n        }\n      })\n    })\n    .flat()\n  return result\n}\n```\n\n数据中的`filterItems`是相同类型的对象放在一个数组里面，因此我们先得到它的长度，在`antd`中，我们将`rowSpan`置为0，则不渲染下一行，所以这里要对数据长度进行判断，再进行一次数据的遍历，使用map的第二个可选属性，`index`，index指数组的索引，从0开始，在这里我们使用三元运算符判断，如果`index===0`，则说明它是第一个元素，将长度赋给`rowSpan`，多出的元素则将`rowSpan`置为0，不对该行进行渲染，则可以实现行的合并，由此，所有的内容都可实现行合并，该函数可以在其他地方也被调用，只需要更改数组中的数据即可，个人认为可复用性较大。\n\n","slug":"数据排序换行合并","published":1,"updated":"2021-08-14T02:40:10.714Z","_id":"cksimhauh0000lsrqeihz0twq","comments":1,"layout":"post","photos":[],"link":"","content":"<p>此内容是我在工作对数据处理时遇到的问题，对该问题进行总结。</p>\n<a id=\"more\"></a>\n\n<p>原数据如下</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> originData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'成-古力·古力'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:29:56'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'系统管理员'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:42:58'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'所有子流程结束后办理子流程节点任务'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:37:00'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:37:00'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'234'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:41:59'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'567'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>因为业务要求，我们需要把数据中的对象进行排序，所以需要对数据进行格式化。</p>\n<p>要求顺序是<code>[&#39;任务发起人&#39;, &#39;发起人部长&#39;, &#39;子流程&#39;, &#39;业务部门部长组&#39;, &#39;所有角色确认&#39;]</code></p>\n<p>因此需要用<code>map</code>和<code>fiter</code>进行数组的格式化，下面为格式化的代码。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFormatData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">originData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> initOrder <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> initOrder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initOrderItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">const</span> filterItems <span class=\"token operator\">=</span> originData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">originDataItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> originDataItem<span class=\"token punctuation\">.</span>sphj <span class=\"token operator\">===</span> initOrderItem<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> filterItems<span class=\"token punctuation\">.</span>length\n      <span class=\"token keyword\">return</span> filterItems<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filterItem<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> rowSpan <span class=\"token operator\">=</span> index <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> count <span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token operator\">...</span>filterItem<span class=\"token punctuation\">,</span>\n          rowSpan\n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>这个代码的思路是这样的，我们对自己创建的数组进行遍历，然后用<code>filter</code>去过滤，当发现原数组对象中有审批环节和数组中的内容对应了，即放在一起，拆解下来是这样的。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFormatData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">originData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> initOrder <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> initOrder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initOrderItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> originData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">originDataItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> originDataItem<span class=\"token punctuation\">.</span>sphj <span class=\"token operator\">===</span> initOrderItem<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>这段代码即是将数据内容进行排序，因为在进行遍历时，会有两层数组嵌套，所以要使用flat将数组进行扁平化处理。</p>\n<p>下面的换行则要对内部的数据进行处理。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFormatData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">originData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> initOrder <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> initOrder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initOrderItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">const</span> filterItems <span class=\"token operator\">=</span> originData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">originDataItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> originDataItem<span class=\"token punctuation\">.</span>sphj <span class=\"token operator\">===</span> initOrderItem<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> filterItems<span class=\"token punctuation\">.</span>length\n      <span class=\"token keyword\">return</span> filterItems<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filterItem<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> rowSpan <span class=\"token operator\">=</span> index <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> count <span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token operator\">...</span>filterItem<span class=\"token punctuation\">,</span>\n          rowSpan\n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>数据中的<code>filterItems</code>是相同类型的对象放在一个数组里面，因此我们先得到它的长度，在<code>antd</code>中，我们将<code>rowSpan</code>置为0，则不渲染下一行，所以这里要对数据长度进行判断，再进行一次数据的遍历，使用map的第二个可选属性，<code>index</code>，index指数组的索引，从0开始，在这里我们使用三元运算符判断，如果<code>index===0</code>，则说明它是第一个元素，将长度赋给<code>rowSpan</code>，多出的元素则将<code>rowSpan</code>置为0，不对该行进行渲染，则可以实现行的合并，由此，所有的内容都可实现行合并，该函数可以在其他地方也被调用，只需要更改数组中的数据即可，个人认为可复用性较大。</p>\n","site":{"data":{}},"excerpt":"<p>此内容是我在工作对数据处理时遇到的问题，对该问题进行总结。</p>","more":"<p>原数据如下</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> originData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'成-古力·古力'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:29:56'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'系统管理员'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:42:58'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'所有子流程结束后办理子流程节点任务'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:37:00'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'123'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:37:00'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'234'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:33:06'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#123;</span> shr<span class=\"token operator\">:</span> <span class=\"token string\">'凉皮'</span><span class=\"token punctuation\">,</span> shsj<span class=\"token operator\">:</span> <span class=\"token string\">'2021-08-12 17:41:59'</span><span class=\"token punctuation\">,</span> shyj<span class=\"token operator\">:</span> <span class=\"token string\">'567'</span><span class=\"token punctuation\">,</span> sphj<span class=\"token operator\">:</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> spjg<span class=\"token operator\">:</span> <span class=\"token string\">'【同意】'</span> <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>因为业务要求，我们需要把数据中的对象进行排序，所以需要对数据进行格式化。</p>\n<p>要求顺序是<code>[&#39;任务发起人&#39;, &#39;发起人部长&#39;, &#39;子流程&#39;, &#39;业务部门部长组&#39;, &#39;所有角色确认&#39;]</code></p>\n<p>因此需要用<code>map</code>和<code>fiter</code>进行数组的格式化，下面为格式化的代码。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFormatData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">originData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> initOrder <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> initOrder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initOrderItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">const</span> filterItems <span class=\"token operator\">=</span> originData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">originDataItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> originDataItem<span class=\"token punctuation\">.</span>sphj <span class=\"token operator\">===</span> initOrderItem<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> filterItems<span class=\"token punctuation\">.</span>length\n      <span class=\"token keyword\">return</span> filterItems<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filterItem<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> rowSpan <span class=\"token operator\">=</span> index <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> count <span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token operator\">...</span>filterItem<span class=\"token punctuation\">,</span>\n          rowSpan\n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>这个代码的思路是这样的，我们对自己创建的数组进行遍历，然后用<code>filter</code>去过滤，当发现原数组对象中有审批环节和数组中的内容对应了，即放在一起，拆解下来是这样的。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFormatData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">originData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> initOrder <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> initOrder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initOrderItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> originData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">originDataItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> originDataItem<span class=\"token punctuation\">.</span>sphj <span class=\"token operator\">===</span> initOrderItem<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>这段代码即是将数据内容进行排序，因为在进行遍历时，会有两层数组嵌套，所以要使用flat将数组进行扁平化处理。</p>\n<p>下面的换行则要对内部的数据进行处理。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFormatData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">originData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">const</span> initOrder <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'任务发起人'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'发起人部长'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'子流程'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'业务部门部长组'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'所有角色确认'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> initOrder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initOrderItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">const</span> filterItems <span class=\"token operator\">=</span> originData<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">originDataItem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> originDataItem<span class=\"token punctuation\">.</span>sphj <span class=\"token operator\">===</span> initOrderItem<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> filterItems<span class=\"token punctuation\">.</span>length\n      <span class=\"token keyword\">return</span> filterItems<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filterItem<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">const</span> rowSpan <span class=\"token operator\">=</span> index <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> count <span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n          <span class=\"token operator\">...</span>filterItem<span class=\"token punctuation\">,</span>\n          rowSpan\n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">flat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> result\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>数据中的<code>filterItems</code>是相同类型的对象放在一个数组里面，因此我们先得到它的长度，在<code>antd</code>中，我们将<code>rowSpan</code>置为0，则不渲染下一行，所以这里要对数据长度进行判断，再进行一次数据的遍历，使用map的第二个可选属性，<code>index</code>，index指数组的索引，从0开始，在这里我们使用三元运算符判断，如果<code>index===0</code>，则说明它是第一个元素，将长度赋给<code>rowSpan</code>，多出的元素则将<code>rowSpan</code>置为0，不对该行进行渲染，则可以实现行的合并，由此，所有的内容都可实现行合并，该函数可以在其他地方也被调用，只需要更改数组中的数据即可，个人认为可复用性较大。</p>"},{"title":"正则表达式","date":"2021-08-18T06:39:11.000Z","_content":"\n正则表达式其实就是在执行搜索时的格式，它由一些字母和数字组合而成。 例如：一个正则表达式 the，它表示一个规则：由字母t开始，接着是h，再接着是e。\n   <!--more-->\n\t 正则表达式提供一些常用的字符集简写。如下:\n\n| 简写 | 描述                                               |\n| ---- | -------------------------------------------------- |\n| .    | 除换行符外的所有字符                               |\n| \\w   | 匹配所有字母数字，等同于 `[a-zA-Z0-9_]`            |\n| \\W   | 匹配所有非字母数字，即符号，等同于： `[^\\w]`       |\n| \\d   | 匹配数字： `[0-9]`                                 |\n| \\D   | 匹配非数字： `[^\\d]`                               |\n| \\s   | 匹配所有空格字符，等同于： `[\\t\\n\\f\\r\\p{Z}]`       |\n| \\S   | 匹配所有非空格字符： `[^\\s]`                       |\n| \\f   | 匹配一个换页符                                     |\n| \\n   | 匹配一个换行符                                     |\n| \\r   | 匹配一个回车符                                     |\n| \\t   | 匹配一个制表符                                     |\n| \\v   | 匹配一个垂直制表符                                 |\n| \\p   | 匹配 CR/LF（等同于 `\\r\\n`），用来匹配 DOS 行终止符 |\n\n您需要检查数据库中的所有用户名。以下是用户在创建用户名时必须遵循的一些简单规则。\n1. 用户名只能使用字母数字字符。\n2. 用户名中唯一的数字必须在末尾。最后可以有零个或多个。用户名不能以数字开头。\n3. 用户名字母可以是小写和大写。\n4. 用户名必须至少有两个字符长。两个字符的用户名只能使用字母作为字符。\n\n```\n 测试用例\n JACK\n J\n Jo\n Oceans11\n RegexGuru\n 007\n 9\n A1\n BadUs3rnam3\n Z97\n c57bT3\n AB1\n J%4\n```\n\n\n\n```js\nlet username = \"JackOfAllTrades\";\nlet userCheck = /^[a-z]([0-9]{2,}|[a-z]+\\d*)$/i; // Change this line\nlet result = userCheck.test(username);\n```\n\n#### 代码说明\n\n1. `^` - 开始输入\n2. `[a-z]` - 第一个字符是一个字母\n3. `[0-9]{2,0}` - 以两个或更多数字结尾\n4. `|` - 要么\n5. `[a-z]+` - 接下来有一个或多个字母\n6. `\\d*` - 并以零个或多个数字结尾\n7. `$` - 输入结束\n8. `i` - 忽略输入的大小写\n\n第二个正则解决方法\n\n我觉得比较复杂，没有第一个好用\n\n```js\nlet username = \"JackOfAllTrades\";\nlet userCheck = /^[a-z][a-z]+\\d*$|^[a-z]\\d\\d+$/i;\nlet result = userCheck.test(username);\nconsole.log(result)\n```\n\n#### 代码说明\n\n1. `^` - 开始输入\n2. `[a-z]` - 第一个字符是一个字母\n3. `[a-z]+` - 以下字符是字母\n4. `\\d*$` - 输入以 0 个或多个数字结尾\n5. `|` - 要么\n6. `^[a-z]` - 第一个字符是一个字母\n7. `\\d\\d+` - 以下字符为 2 位或更多位数字\n8. `$` - 输入结束\n\n### 2.使用前瞻`pwRegex`来匹配长度超过 5 个字符且有两个连续数字的密码。\n\n```js\nlet sampleWord = \"astronaut\";\nlet pwRegex = /(?=\\w{6,})(?=\\w*\\d{2,})/; // Change this line\nlet result = pwRegex.test(sampleWord);\n```\n\n## 提示\n\n### 提示 1\n\n记住使用 2`lookaheads`检查字符串中的模式。第一个`lookahead`与示例中给出的非常相似  `(?=\\w{3,6})` 只有`lower-number`3 对于我们的测试用例来说太低了，而 an`upper-number`是完全不需要的。这第一个`lookahead`仅用于查找由一定数量的字符组成的字符串。`lookahead`必须使用秒来检查字符串末尾的连续数值。\n\n### 提示 2\n\n第二个`lookahead`也与示例中给出的相似`(?=\\D*\\d)`- 但是，这个表达式也必须修改以通过所有测试用例。请记住指定要出现在字符串末尾的确切数字数量。\n\n### 3.字符串匹配\n\nFix the regex so that it checks for the names of `Franklin Roosevelt` or `Eleanor Roosevelt` in a case sensitive manner and it should make concessions for middle names.\n\nThen fix the code so that the regex that you have created is checked against `myString` and either `true` or `false` is returned depending on whether the regex matches.\n\n```js\nlet myString = \"Eleanor Roosevelt\";\nlet myRegex = /(Eleanor|Franklin).*Roosevelt/; // Change this line\nlet result = myRegex.test(myString); // Change this line\n```\n\n4.删除字符串前后的空格\n\n```js\nlet hello = \"   Hello, World!  \";\nlet wsRegex = /^\\s+|\\s+$/g;// Change this line\nlet result = hello.replace(wsRegex,''); // Change this line\n```\n\n","source":"_posts/2021-08-18-正则表达式.md","raw":"---\ntitle: 正则表达式\ndate: 2021-08-18 14:39:11\ntags:\n\t\t- '正则表达式'\n---\n\n正则表达式其实就是在执行搜索时的格式，它由一些字母和数字组合而成。 例如：一个正则表达式 the，它表示一个规则：由字母t开始，接着是h，再接着是e。\n   <!--more-->\n\t 正则表达式提供一些常用的字符集简写。如下:\n\n| 简写 | 描述                                               |\n| ---- | -------------------------------------------------- |\n| .    | 除换行符外的所有字符                               |\n| \\w   | 匹配所有字母数字，等同于 `[a-zA-Z0-9_]`            |\n| \\W   | 匹配所有非字母数字，即符号，等同于： `[^\\w]`       |\n| \\d   | 匹配数字： `[0-9]`                                 |\n| \\D   | 匹配非数字： `[^\\d]`                               |\n| \\s   | 匹配所有空格字符，等同于： `[\\t\\n\\f\\r\\p{Z}]`       |\n| \\S   | 匹配所有非空格字符： `[^\\s]`                       |\n| \\f   | 匹配一个换页符                                     |\n| \\n   | 匹配一个换行符                                     |\n| \\r   | 匹配一个回车符                                     |\n| \\t   | 匹配一个制表符                                     |\n| \\v   | 匹配一个垂直制表符                                 |\n| \\p   | 匹配 CR/LF（等同于 `\\r\\n`），用来匹配 DOS 行终止符 |\n\n您需要检查数据库中的所有用户名。以下是用户在创建用户名时必须遵循的一些简单规则。\n1. 用户名只能使用字母数字字符。\n2. 用户名中唯一的数字必须在末尾。最后可以有零个或多个。用户名不能以数字开头。\n3. 用户名字母可以是小写和大写。\n4. 用户名必须至少有两个字符长。两个字符的用户名只能使用字母作为字符。\n\n```\n 测试用例\n JACK\n J\n Jo\n Oceans11\n RegexGuru\n 007\n 9\n A1\n BadUs3rnam3\n Z97\n c57bT3\n AB1\n J%4\n```\n\n\n\n```js\nlet username = \"JackOfAllTrades\";\nlet userCheck = /^[a-z]([0-9]{2,}|[a-z]+\\d*)$/i; // Change this line\nlet result = userCheck.test(username);\n```\n\n#### 代码说明\n\n1. `^` - 开始输入\n2. `[a-z]` - 第一个字符是一个字母\n3. `[0-9]{2,0}` - 以两个或更多数字结尾\n4. `|` - 要么\n5. `[a-z]+` - 接下来有一个或多个字母\n6. `\\d*` - 并以零个或多个数字结尾\n7. `$` - 输入结束\n8. `i` - 忽略输入的大小写\n\n第二个正则解决方法\n\n我觉得比较复杂，没有第一个好用\n\n```js\nlet username = \"JackOfAllTrades\";\nlet userCheck = /^[a-z][a-z]+\\d*$|^[a-z]\\d\\d+$/i;\nlet result = userCheck.test(username);\nconsole.log(result)\n```\n\n#### 代码说明\n\n1. `^` - 开始输入\n2. `[a-z]` - 第一个字符是一个字母\n3. `[a-z]+` - 以下字符是字母\n4. `\\d*$` - 输入以 0 个或多个数字结尾\n5. `|` - 要么\n6. `^[a-z]` - 第一个字符是一个字母\n7. `\\d\\d+` - 以下字符为 2 位或更多位数字\n8. `$` - 输入结束\n\n### 2.使用前瞻`pwRegex`来匹配长度超过 5 个字符且有两个连续数字的密码。\n\n```js\nlet sampleWord = \"astronaut\";\nlet pwRegex = /(?=\\w{6,})(?=\\w*\\d{2,})/; // Change this line\nlet result = pwRegex.test(sampleWord);\n```\n\n## 提示\n\n### 提示 1\n\n记住使用 2`lookaheads`检查字符串中的模式。第一个`lookahead`与示例中给出的非常相似  `(?=\\w{3,6})` 只有`lower-number`3 对于我们的测试用例来说太低了，而 an`upper-number`是完全不需要的。这第一个`lookahead`仅用于查找由一定数量的字符组成的字符串。`lookahead`必须使用秒来检查字符串末尾的连续数值。\n\n### 提示 2\n\n第二个`lookahead`也与示例中给出的相似`(?=\\D*\\d)`- 但是，这个表达式也必须修改以通过所有测试用例。请记住指定要出现在字符串末尾的确切数字数量。\n\n### 3.字符串匹配\n\nFix the regex so that it checks for the names of `Franklin Roosevelt` or `Eleanor Roosevelt` in a case sensitive manner and it should make concessions for middle names.\n\nThen fix the code so that the regex that you have created is checked against `myString` and either `true` or `false` is returned depending on whether the regex matches.\n\n```js\nlet myString = \"Eleanor Roosevelt\";\nlet myRegex = /(Eleanor|Franklin).*Roosevelt/; // Change this line\nlet result = myRegex.test(myString); // Change this line\n```\n\n4.删除字符串前后的空格\n\n```js\nlet hello = \"   Hello, World!  \";\nlet wsRegex = /^\\s+|\\s+$/g;// Change this line\nlet result = hello.replace(wsRegex,''); // Change this line\n```\n\n","slug":"正则表达式","published":1,"updated":"2021-08-22T13:45:37.132Z","_id":"cksimhauj0001lsrq1a8303u3","comments":1,"layout":"post","photos":[],"link":"","content":"<p>正则表达式其实就是在执行搜索时的格式，它由一些字母和数字组合而成。 例如：一个正则表达式 the，它表示一个规则：由字母t开始，接着是h，再接着是e。<br>   <a id=\"more\"></a><br>     正则表达式提供一些常用的字符集简写。如下:</p>\n<table>\n<thead>\n<tr>\n<th>简写</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>.</td>\n<td>除换行符外的所有字符</td>\n</tr>\n<tr>\n<td>\\w</td>\n<td>匹配所有字母数字，等同于 <code>[a-zA-Z0-9_]</code></td>\n</tr>\n<tr>\n<td>\\W</td>\n<td>匹配所有非字母数字，即符号，等同于： <code>[^\\w]</code></td>\n</tr>\n<tr>\n<td>\\d</td>\n<td>匹配数字： <code>[0-9]</code></td>\n</tr>\n<tr>\n<td>\\D</td>\n<td>匹配非数字： <code>[^\\d]</code></td>\n</tr>\n<tr>\n<td>\\s</td>\n<td>匹配所有空格字符，等同于： <code>[\\t\\n\\f\\r\\p&#123;Z&#125;]</code></td>\n</tr>\n<tr>\n<td>\\S</td>\n<td>匹配所有非空格字符： <code>[^\\s]</code></td>\n</tr>\n<tr>\n<td>\\f</td>\n<td>匹配一个换页符</td>\n</tr>\n<tr>\n<td>\\n</td>\n<td>匹配一个换行符</td>\n</tr>\n<tr>\n<td>\\r</td>\n<td>匹配一个回车符</td>\n</tr>\n<tr>\n<td>\\t</td>\n<td>匹配一个制表符</td>\n</tr>\n<tr>\n<td>\\v</td>\n<td>匹配一个垂直制表符</td>\n</tr>\n<tr>\n<td>\\p</td>\n<td>匹配 CR/LF（等同于 <code>\\r\\n</code>），用来匹配 DOS 行终止符</td>\n</tr>\n</tbody></table>\n<p>您需要检查数据库中的所有用户名。以下是用户在创建用户名时必须遵循的一些简单规则。</p>\n<ol>\n<li>用户名只能使用字母数字字符。</li>\n<li>用户名中唯一的数字必须在末尾。最后可以有零个或多个。用户名不能以数字开头。</li>\n<li>用户名字母可以是小写和大写。</li>\n<li>用户名必须至少有两个字符长。两个字符的用户名只能使用字母作为字符。</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">测试用例\nJACK\nJ\nJo\nOceans11\nRegexGuru\n007\n9\nA1\nBadUs3rnam3\nZ97\nc57bT3\nAB1\nJ%4<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> username <span class=\"token operator\">=</span> <span class=\"token string\">\"JackOfAllTrades\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> userCheck <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z]([0-9]&#123;2,&#125;|[a-z]+\\d*)$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> userCheck<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"代码说明\"><a href=\"#代码说明\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h4><ol>\n<li><code>^</code> - 开始输入</li>\n<li><code>[a-z]</code> - 第一个字符是一个字母</li>\n<li><code>[0-9]&#123;2,0&#125;</code> - 以两个或更多数字结尾</li>\n<li><code>|</code> - 要么</li>\n<li><code>[a-z]+</code> - 接下来有一个或多个字母</li>\n<li><code>\\d*</code> - 并以零个或多个数字结尾</li>\n<li><code>$</code> - 输入结束</li>\n<li><code>i</code> - 忽略输入的大小写</li>\n</ol>\n<p>第二个正则解决方法</p>\n<p>我觉得比较复杂，没有第一个好用</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> username <span class=\"token operator\">=</span> <span class=\"token string\">\"JackOfAllTrades\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> userCheck <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z][a-z]+\\d*$|^[a-z]\\d\\d+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> userCheck<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"代码说明-1\"><a href=\"#代码说明-1\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h4><ol>\n<li><code>^</code> - 开始输入</li>\n<li><code>[a-z]</code> - 第一个字符是一个字母</li>\n<li><code>[a-z]+</code> - 以下字符是字母</li>\n<li><code>\\d*$</code> - 输入以 0 个或多个数字结尾</li>\n<li><code>|</code> - 要么</li>\n<li><code>^[a-z]</code> - 第一个字符是一个字母</li>\n<li><code>\\d\\d+</code> - 以下字符为 2 位或更多位数字</li>\n<li><code>$</code> - 输入结束</li>\n</ol>\n<h3 id=\"2-使用前瞻pwRegex来匹配长度超过-5-个字符且有两个连续数字的密码。\"><a href=\"#2-使用前瞻pwRegex来匹配长度超过-5-个字符且有两个连续数字的密码。\" class=\"headerlink\" title=\"2.使用前瞻pwRegex来匹配长度超过 5 个字符且有两个连续数字的密码。\"></a>2.使用前瞻<code>pwRegex</code>来匹配长度超过 5 个字符且有两个连续数字的密码。</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> sampleWord <span class=\"token operator\">=</span> <span class=\"token string\">\"astronaut\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> pwRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\w&#123;6,&#125;)(?=\\w*\\d&#123;2,&#125;)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> pwRegex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>sampleWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"提示\"><a href=\"#提示\" class=\"headerlink\" title=\"提示\"></a>提示</h2><h3 id=\"提示-1\"><a href=\"#提示-1\" class=\"headerlink\" title=\"提示 1\"></a>提示 1</h3><p>记住使用 2<code>lookaheads</code>检查字符串中的模式。第一个<code>lookahead</code>与示例中给出的非常相似  <code>(?=\\w&#123;3,6&#125;)</code> 只有<code>lower-number</code>3 对于我们的测试用例来说太低了，而 an<code>upper-number</code>是完全不需要的。这第一个<code>lookahead</code>仅用于查找由一定数量的字符组成的字符串。<code>lookahead</code>必须使用秒来检查字符串末尾的连续数值。</p>\n<h3 id=\"提示-2\"><a href=\"#提示-2\" class=\"headerlink\" title=\"提示 2\"></a>提示 2</h3><p>第二个<code>lookahead</code>也与示例中给出的相似<code>(?=\\D*\\d)</code>- 但是，这个表达式也必须修改以通过所有测试用例。请记住指定要出现在字符串末尾的确切数字数量。</p>\n<h3 id=\"3-字符串匹配\"><a href=\"#3-字符串匹配\" class=\"headerlink\" title=\"3.字符串匹配\"></a>3.字符串匹配</h3><p>Fix the regex so that it checks for the names of <code>Franklin Roosevelt</code> or <code>Eleanor Roosevelt</code> in a case sensitive manner and it should make concessions for middle names.</p>\n<p>Then fix the code so that the regex that you have created is checked against <code>myString</code> and either <code>true</code> or <code>false</code> is returned depending on whether the regex matches.</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> myString <span class=\"token operator\">=</span> <span class=\"token string\">\"Eleanor Roosevelt\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> myRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(Eleanor|Franklin).*Roosevelt</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> myRegex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>myString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>4.删除字符串前后的空格</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> hello <span class=\"token operator\">=</span> <span class=\"token string\">\"   Hello, World!  \"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> wsRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\s+|\\s+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span><span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> hello<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>wsRegex<span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n","site":{"data":{}},"excerpt":"<p>正则表达式其实就是在执行搜索时的格式，它由一些字母和数字组合而成。 例如：一个正则表达式 the，它表示一个规则：由字母t开始，接着是h，再接着是e。<br>","more":"<br>     正则表达式提供一些常用的字符集简写。如下:</p>\n<table>\n<thead>\n<tr>\n<th>简写</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>.</td>\n<td>除换行符外的所有字符</td>\n</tr>\n<tr>\n<td>\\w</td>\n<td>匹配所有字母数字，等同于 <code>[a-zA-Z0-9_]</code></td>\n</tr>\n<tr>\n<td>\\W</td>\n<td>匹配所有非字母数字，即符号，等同于： <code>[^\\w]</code></td>\n</tr>\n<tr>\n<td>\\d</td>\n<td>匹配数字： <code>[0-9]</code></td>\n</tr>\n<tr>\n<td>\\D</td>\n<td>匹配非数字： <code>[^\\d]</code></td>\n</tr>\n<tr>\n<td>\\s</td>\n<td>匹配所有空格字符，等同于： <code>[\\t\\n\\f\\r\\p&#123;Z&#125;]</code></td>\n</tr>\n<tr>\n<td>\\S</td>\n<td>匹配所有非空格字符： <code>[^\\s]</code></td>\n</tr>\n<tr>\n<td>\\f</td>\n<td>匹配一个换页符</td>\n</tr>\n<tr>\n<td>\\n</td>\n<td>匹配一个换行符</td>\n</tr>\n<tr>\n<td>\\r</td>\n<td>匹配一个回车符</td>\n</tr>\n<tr>\n<td>\\t</td>\n<td>匹配一个制表符</td>\n</tr>\n<tr>\n<td>\\v</td>\n<td>匹配一个垂直制表符</td>\n</tr>\n<tr>\n<td>\\p</td>\n<td>匹配 CR/LF（等同于 <code>\\r\\n</code>），用来匹配 DOS 行终止符</td>\n</tr>\n</tbody></table>\n<p>您需要检查数据库中的所有用户名。以下是用户在创建用户名时必须遵循的一些简单规则。</p>\n<ol>\n<li>用户名只能使用字母数字字符。</li>\n<li>用户名中唯一的数字必须在末尾。最后可以有零个或多个。用户名不能以数字开头。</li>\n<li>用户名字母可以是小写和大写。</li>\n<li>用户名必须至少有两个字符长。两个字符的用户名只能使用字母作为字符。</li>\n</ol>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">测试用例\nJACK\nJ\nJo\nOceans11\nRegexGuru\n007\n9\nA1\nBadUs3rnam3\nZ97\nc57bT3\nAB1\nJ%4<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> username <span class=\"token operator\">=</span> <span class=\"token string\">\"JackOfAllTrades\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> userCheck <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z]([0-9]&#123;2,&#125;|[a-z]+\\d*)$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> userCheck<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"代码说明\"><a href=\"#代码说明\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h4><ol>\n<li><code>^</code> - 开始输入</li>\n<li><code>[a-z]</code> - 第一个字符是一个字母</li>\n<li><code>[0-9]&#123;2,0&#125;</code> - 以两个或更多数字结尾</li>\n<li><code>|</code> - 要么</li>\n<li><code>[a-z]+</code> - 接下来有一个或多个字母</li>\n<li><code>\\d*</code> - 并以零个或多个数字结尾</li>\n<li><code>$</code> - 输入结束</li>\n<li><code>i</code> - 忽略输入的大小写</li>\n</ol>\n<p>第二个正则解决方法</p>\n<p>我觉得比较复杂，没有第一个好用</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> username <span class=\"token operator\">=</span> <span class=\"token string\">\"JackOfAllTrades\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> userCheck <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^[a-z][a-z]+\\d*$|^[a-z]\\d\\d+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> userCheck<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"代码说明-1\"><a href=\"#代码说明-1\" class=\"headerlink\" title=\"代码说明\"></a>代码说明</h4><ol>\n<li><code>^</code> - 开始输入</li>\n<li><code>[a-z]</code> - 第一个字符是一个字母</li>\n<li><code>[a-z]+</code> - 以下字符是字母</li>\n<li><code>\\d*$</code> - 输入以 0 个或多个数字结尾</li>\n<li><code>|</code> - 要么</li>\n<li><code>^[a-z]</code> - 第一个字符是一个字母</li>\n<li><code>\\d\\d+</code> - 以下字符为 2 位或更多位数字</li>\n<li><code>$</code> - 输入结束</li>\n</ol>\n<h3 id=\"2-使用前瞻pwRegex来匹配长度超过-5-个字符且有两个连续数字的密码。\"><a href=\"#2-使用前瞻pwRegex来匹配长度超过-5-个字符且有两个连续数字的密码。\" class=\"headerlink\" title=\"2.使用前瞻pwRegex来匹配长度超过 5 个字符且有两个连续数字的密码。\"></a>2.使用前瞻<code>pwRegex</code>来匹配长度超过 5 个字符且有两个连续数字的密码。</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> sampleWord <span class=\"token operator\">=</span> <span class=\"token string\">\"astronaut\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> pwRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?=\\w&#123;6,&#125;)(?=\\w*\\d&#123;2,&#125;)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> pwRegex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>sampleWord<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"提示\"><a href=\"#提示\" class=\"headerlink\" title=\"提示\"></a>提示</h2><h3 id=\"提示-1\"><a href=\"#提示-1\" class=\"headerlink\" title=\"提示 1\"></a>提示 1</h3><p>记住使用 2<code>lookaheads</code>检查字符串中的模式。第一个<code>lookahead</code>与示例中给出的非常相似  <code>(?=\\w&#123;3,6&#125;)</code> 只有<code>lower-number</code>3 对于我们的测试用例来说太低了，而 an<code>upper-number</code>是完全不需要的。这第一个<code>lookahead</code>仅用于查找由一定数量的字符组成的字符串。<code>lookahead</code>必须使用秒来检查字符串末尾的连续数值。</p>\n<h3 id=\"提示-2\"><a href=\"#提示-2\" class=\"headerlink\" title=\"提示 2\"></a>提示 2</h3><p>第二个<code>lookahead</code>也与示例中给出的相似<code>(?=\\D*\\d)</code>- 但是，这个表达式也必须修改以通过所有测试用例。请记住指定要出现在字符串末尾的确切数字数量。</p>\n<h3 id=\"3-字符串匹配\"><a href=\"#3-字符串匹配\" class=\"headerlink\" title=\"3.字符串匹配\"></a>3.字符串匹配</h3><p>Fix the regex so that it checks for the names of <code>Franklin Roosevelt</code> or <code>Eleanor Roosevelt</code> in a case sensitive manner and it should make concessions for middle names.</p>\n<p>Then fix the code so that the regex that you have created is checked against <code>myString</code> and either <code>true</code> or <code>false</code> is returned depending on whether the regex matches.</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> myString <span class=\"token operator\">=</span> <span class=\"token string\">\"Eleanor Roosevelt\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> myRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(Eleanor|Franklin).*Roosevelt</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> myRegex<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>myString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>4.删除字符串前后的空格</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> hello <span class=\"token operator\">=</span> <span class=\"token string\">\"   Hello, World!  \"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> wsRegex <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^\\s+|\\s+$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">;</span><span class=\"token comment\">// Change this line</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> hello<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>wsRegex<span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Change this line</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>"},{"title":"Axios","date":"2021-08-01T11:53:10.000Z","_content":"\n# Axios\n\nAxios 是一个基于 *[promise](https://javascript.info/promise-basics)* 网络请求库，作用于[`node.js`](https://nodejs.org/) 和浏览器中。 它是 *[isomorphic](https://www.lullabot.com/articles/what-is-an-isomorphic-application)* 的(即同一套代码可以运行在浏览器和node.js中)。在服务端它使用原生 node.js `http` 模块, 而在客户端 (浏览端) 则使用 XMLHttpRequests。\n\n<!--more-->\n\n## 特性\n\n- 从浏览器创建 [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)\n- 从 node.js 创建 [http](http://nodejs.org/api/http.html) 请求\n- 支持 [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) API\n- 拦截请求和响应\n- 转换请求和响应数据\n- 取消请求\n- 自动转换JSON数据\n- 客户端支持防御[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)\n\n## 用例\n\n发起一个`GET`请求\n\n```javascript\nconst axios = require('axios');\n\n// 向给定ID的用户发起请求\naxios.get('/user?ID=12345')\n  .then(function (response) {\n    // 处理成功情况\n    console.log(response);\n  })\n  .catch(function (error) {\n    // 处理错误情况\n    console.log(error);\n  })\n  .then(function () {\n    // 总是会执行\n  });\n\n// 上述请求也可以按以下方式完成（可选）\naxios.get('/user', {\n    params: {\n      ID: 12345\n    }\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  })\n  .then(function () {\n    // 总是会执行\n  });  \n\n// 支持async/await用法\nasync function getUser() {\n  try {\n    const response = await axios.get('/user?ID=12345');\n    console.log(response);\n  } catch (error) {\n    console.error(error);\n  }\n}\n```\n\n发起一个`POST`请求\n\n```javascript\naxios.post('/user', {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n```\n\n## 请求配置\n\n这些是创建请求时可以用的配置选项。只有 `url` 是必需的。如果没有指定 `method`，请求将默认使用 `GET` 方法。\n\n```javascript\n{\n  // `url` 是用于请求的服务器 URL\n  url: '/user',\n\n  // `method` 是创建请求时使用的方法\n  method: 'get', // 默认值\n\n  // `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。\n  // 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL\n  baseURL: 'https://some-domain.com/api/',\n\n  // `transformRequest` 允许在向服务器发送前，修改请求数据\n  // 它只能用与 'PUT', 'POST' 和 'PATCH' 这几个请求方法\n  // 数组中最后一个函数必须返回一个字符串， 一个Buffer实例，ArrayBuffer，FormData，或 Stream\n  // 你可以修改请求头。\n  transformRequest: [function (data, headers) {\n    // 对发送的 data 进行任意转换处理\n\n    return data;\n  }],\n\n  // `transformResponse` 在传递给 then/catch 前，允许修改响应数据\n  transformResponse: [function (data) {\n    // 对接收的 data 进行任意转换处理\n\n    return data;\n  }],\n\n  // 自定义请求头\n  headers: {'X-Requested-With': 'XMLHttpRequest'},\n\n  // `params` 是与请求一起发送的 URL 参数\n  // 必须是一个简单对象或 URLSearchParams 对象\n  params: {\n    ID: 12345\n  },\n\n  // `paramsSerializer`是可选方法，主要用于序列化`params`\n  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)\n  paramsSerializer: function (params) {\n    return Qs.stringify(params, {arrayFormat: 'brackets'})\n  },\n\n  // `data` 是作为请求体被发送的数据\n  // 仅适用 'PUT', 'POST', 'DELETE 和 'PATCH' 请求方法\n  // 在没有设置 `transformRequest` 时，则必须是以下类型之一:\n  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams\n  // - 浏览器专属: FormData, File, Blob\n  // - Node 专属: Stream, Buffer\n  data: {\n    firstName: 'Fred'\n  },\n  \n  // 发送请求体数据的可选语法\n  // 请求方式 post\n  // 只有 value 会被发送，key 则不会\n  data: 'Country=Brasil&City=Belo Horizonte',\n\n  // `timeout` 指定请求超时的毫秒数。\n  // 如果请求时间超过 `timeout` 的值，则请求会被中断\n  timeout: 1000, // 默认值是 `0` (永不超时)\n\n  // `withCredentials` 表示跨域请求时是否需要使用凭证\n  withCredentials: false, // default\n\n  // `adapter` 允许自定义处理请求，这使测试更加容易。\n  // 返回一个 promise 并提供一个有效的响应 （参见 lib/adapters/README.md）。\n  adapter: function (config) {\n    /* ... */\n  },\n\n  // `auth` HTTP Basic Auth\n  auth: {\n    username: 'janedoe',\n    password: 's00pers3cret'\n  },\n\n  // `responseType` 表示浏览器将要响应的数据类型\n  // 选项包括: 'arraybuffer', 'document', 'json', 'text', 'stream'\n  // 浏览器专属：'blob'\n  responseType: 'json', // 默认值\n\n  // `responseEncoding` 表示用于解码响应的编码 (Node.js 专属)\n  // 注意：忽略 `responseType` 的值为 'stream'，或者是客户端请求\n  // Note: Ignored for `responseType` of 'stream' or client-side requests\n  responseEncoding: 'utf8', // 默认值\n\n  // `xsrfCookieName` 是 xsrf token 的值，被用作 cookie 的名称\n  xsrfCookieName: 'XSRF-TOKEN', // 默认值\n\n  // `xsrfHeaderName` 是带有 xsrf token 值的http 请求头名称\n  xsrfHeaderName: 'X-XSRF-TOKEN', // 默认值\n\n  // `onUploadProgress` 允许为上传处理进度事件\n  // 浏览器专属\n  onUploadProgress: function (progressEvent) {\n    // 处理原生进度事件\n  },\n\n  // `onDownloadProgress` 允许为下载处理进度事件\n  // 浏览器专属\n  onDownloadProgress: function (progressEvent) {\n    // 处理原生进度事件\n  },\n\n  // `maxContentLength` 定义了node.js中允许的HTTP响应内容的最大字节数\n  maxContentLength: 2000,\n\n  // `maxBodyLength`（仅Node）定义允许的http请求内容的最大字节数\n  maxBodyLength: 2000,\n\n  // `validateStatus` 定义了对于给定的 HTTP状态码是 resolve 还是 reject promise。\n  // 如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，\n  // 则promise 将会 resolved，否则是 rejected。\n  validateStatus: function (status) {\n    return status >= 200 && status < 300; // 默认值\n  },\n\n  // `maxRedirects` 定义了在node.js中要遵循的最大重定向数。\n  // 如果设置为0，则不会进行重定向\n  maxRedirects: 5, // 默认值\n\n  // `socketPath` 定义了在node.js中使用的UNIX套接字。\n  // e.g. '/var/run/docker.sock' 发送请求到 docker 守护进程。\n  // 只能指定 `socketPath` 或 `proxy` 。\n  // 若都指定，这使用 `socketPath` 。\n  socketPath: null, // default\n\n  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http\n  // and https requests, respectively, in node.js. This allows options to be added like\n  // `keepAlive` that are not enabled by default.\n  httpAgent: new http.Agent({ keepAlive: true }),\n  httpsAgent: new https.Agent({ keepAlive: true }),\n\n  // `proxy` 定义了代理服务器的主机名，端口和协议。\n  // 您可以使用常规的`http_proxy` 和 `https_proxy` 环境变量。\n  // 使用 `false` 可以禁用代理功能，同时环境变量也会被忽略。\n  // `auth`表示应使用HTTP Basic auth连接到代理，并且提供凭据。\n  // 这将设置一个 `Proxy-Authorization` 请求头，它会覆盖 `headers` 中已存在的自定义 `Proxy-Authorization` 请求头。\n  // 如果代理服务器使用 HTTPS，则必须设置 protocol 为`https`\n  proxy: {\n    protocol: 'https',\n    host: '127.0.0.1',\n    port: 9000,\n    auth: {\n      username: 'mikeymike',\n      password: 'rapunz3l'\n    }\n  },\n\n  // see https://axios-http.com/zh/docs/cancellation\n  cancelToken: new CancelToken(function (cancel) {\n  }),\n\n  // `decompress` indicates whether or not the response body should be decompressed \n  // automatically. If set to `true` will also remove the 'content-encoding' header \n  // from the responses objects of all decompressed responses\n  // - Node only (XHR cannot turn off decompression)\n  decompress: true // 默认值\n\n}\n```\n\n","source":"_posts/2021-08-01-Axios.md","raw":"---\ntitle: Axios\ndate: 2021-08-01 19:53:10\ntags:\n  - 'JavaScript'\n---\n\n# Axios\n\nAxios 是一个基于 *[promise](https://javascript.info/promise-basics)* 网络请求库，作用于[`node.js`](https://nodejs.org/) 和浏览器中。 它是 *[isomorphic](https://www.lullabot.com/articles/what-is-an-isomorphic-application)* 的(即同一套代码可以运行在浏览器和node.js中)。在服务端它使用原生 node.js `http` 模块, 而在客户端 (浏览端) 则使用 XMLHttpRequests。\n\n<!--more-->\n\n## 特性\n\n- 从浏览器创建 [XMLHttpRequests](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)\n- 从 node.js 创建 [http](http://nodejs.org/api/http.html) 请求\n- 支持 [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) API\n- 拦截请求和响应\n- 转换请求和响应数据\n- 取消请求\n- 自动转换JSON数据\n- 客户端支持防御[XSRF](http://en.wikipedia.org/wiki/Cross-site_request_forgery)\n\n## 用例\n\n发起一个`GET`请求\n\n```javascript\nconst axios = require('axios');\n\n// 向给定ID的用户发起请求\naxios.get('/user?ID=12345')\n  .then(function (response) {\n    // 处理成功情况\n    console.log(response);\n  })\n  .catch(function (error) {\n    // 处理错误情况\n    console.log(error);\n  })\n  .then(function () {\n    // 总是会执行\n  });\n\n// 上述请求也可以按以下方式完成（可选）\naxios.get('/user', {\n    params: {\n      ID: 12345\n    }\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  })\n  .then(function () {\n    // 总是会执行\n  });  \n\n// 支持async/await用法\nasync function getUser() {\n  try {\n    const response = await axios.get('/user?ID=12345');\n    console.log(response);\n  } catch (error) {\n    console.error(error);\n  }\n}\n```\n\n发起一个`POST`请求\n\n```javascript\naxios.post('/user', {\n    firstName: 'Fred',\n    lastName: 'Flintstone'\n  })\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(function (error) {\n    console.log(error);\n  });\n```\n\n## 请求配置\n\n这些是创建请求时可以用的配置选项。只有 `url` 是必需的。如果没有指定 `method`，请求将默认使用 `GET` 方法。\n\n```javascript\n{\n  // `url` 是用于请求的服务器 URL\n  url: '/user',\n\n  // `method` 是创建请求时使用的方法\n  method: 'get', // 默认值\n\n  // `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。\n  // 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL\n  baseURL: 'https://some-domain.com/api/',\n\n  // `transformRequest` 允许在向服务器发送前，修改请求数据\n  // 它只能用与 'PUT', 'POST' 和 'PATCH' 这几个请求方法\n  // 数组中最后一个函数必须返回一个字符串， 一个Buffer实例，ArrayBuffer，FormData，或 Stream\n  // 你可以修改请求头。\n  transformRequest: [function (data, headers) {\n    // 对发送的 data 进行任意转换处理\n\n    return data;\n  }],\n\n  // `transformResponse` 在传递给 then/catch 前，允许修改响应数据\n  transformResponse: [function (data) {\n    // 对接收的 data 进行任意转换处理\n\n    return data;\n  }],\n\n  // 自定义请求头\n  headers: {'X-Requested-With': 'XMLHttpRequest'},\n\n  // `params` 是与请求一起发送的 URL 参数\n  // 必须是一个简单对象或 URLSearchParams 对象\n  params: {\n    ID: 12345\n  },\n\n  // `paramsSerializer`是可选方法，主要用于序列化`params`\n  // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)\n  paramsSerializer: function (params) {\n    return Qs.stringify(params, {arrayFormat: 'brackets'})\n  },\n\n  // `data` 是作为请求体被发送的数据\n  // 仅适用 'PUT', 'POST', 'DELETE 和 'PATCH' 请求方法\n  // 在没有设置 `transformRequest` 时，则必须是以下类型之一:\n  // - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams\n  // - 浏览器专属: FormData, File, Blob\n  // - Node 专属: Stream, Buffer\n  data: {\n    firstName: 'Fred'\n  },\n  \n  // 发送请求体数据的可选语法\n  // 请求方式 post\n  // 只有 value 会被发送，key 则不会\n  data: 'Country=Brasil&City=Belo Horizonte',\n\n  // `timeout` 指定请求超时的毫秒数。\n  // 如果请求时间超过 `timeout` 的值，则请求会被中断\n  timeout: 1000, // 默认值是 `0` (永不超时)\n\n  // `withCredentials` 表示跨域请求时是否需要使用凭证\n  withCredentials: false, // default\n\n  // `adapter` 允许自定义处理请求，这使测试更加容易。\n  // 返回一个 promise 并提供一个有效的响应 （参见 lib/adapters/README.md）。\n  adapter: function (config) {\n    /* ... */\n  },\n\n  // `auth` HTTP Basic Auth\n  auth: {\n    username: 'janedoe',\n    password: 's00pers3cret'\n  },\n\n  // `responseType` 表示浏览器将要响应的数据类型\n  // 选项包括: 'arraybuffer', 'document', 'json', 'text', 'stream'\n  // 浏览器专属：'blob'\n  responseType: 'json', // 默认值\n\n  // `responseEncoding` 表示用于解码响应的编码 (Node.js 专属)\n  // 注意：忽略 `responseType` 的值为 'stream'，或者是客户端请求\n  // Note: Ignored for `responseType` of 'stream' or client-side requests\n  responseEncoding: 'utf8', // 默认值\n\n  // `xsrfCookieName` 是 xsrf token 的值，被用作 cookie 的名称\n  xsrfCookieName: 'XSRF-TOKEN', // 默认值\n\n  // `xsrfHeaderName` 是带有 xsrf token 值的http 请求头名称\n  xsrfHeaderName: 'X-XSRF-TOKEN', // 默认值\n\n  // `onUploadProgress` 允许为上传处理进度事件\n  // 浏览器专属\n  onUploadProgress: function (progressEvent) {\n    // 处理原生进度事件\n  },\n\n  // `onDownloadProgress` 允许为下载处理进度事件\n  // 浏览器专属\n  onDownloadProgress: function (progressEvent) {\n    // 处理原生进度事件\n  },\n\n  // `maxContentLength` 定义了node.js中允许的HTTP响应内容的最大字节数\n  maxContentLength: 2000,\n\n  // `maxBodyLength`（仅Node）定义允许的http请求内容的最大字节数\n  maxBodyLength: 2000,\n\n  // `validateStatus` 定义了对于给定的 HTTP状态码是 resolve 还是 reject promise。\n  // 如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，\n  // 则promise 将会 resolved，否则是 rejected。\n  validateStatus: function (status) {\n    return status >= 200 && status < 300; // 默认值\n  },\n\n  // `maxRedirects` 定义了在node.js中要遵循的最大重定向数。\n  // 如果设置为0，则不会进行重定向\n  maxRedirects: 5, // 默认值\n\n  // `socketPath` 定义了在node.js中使用的UNIX套接字。\n  // e.g. '/var/run/docker.sock' 发送请求到 docker 守护进程。\n  // 只能指定 `socketPath` 或 `proxy` 。\n  // 若都指定，这使用 `socketPath` 。\n  socketPath: null, // default\n\n  // `httpAgent` and `httpsAgent` define a custom agent to be used when performing http\n  // and https requests, respectively, in node.js. This allows options to be added like\n  // `keepAlive` that are not enabled by default.\n  httpAgent: new http.Agent({ keepAlive: true }),\n  httpsAgent: new https.Agent({ keepAlive: true }),\n\n  // `proxy` 定义了代理服务器的主机名，端口和协议。\n  // 您可以使用常规的`http_proxy` 和 `https_proxy` 环境变量。\n  // 使用 `false` 可以禁用代理功能，同时环境变量也会被忽略。\n  // `auth`表示应使用HTTP Basic auth连接到代理，并且提供凭据。\n  // 这将设置一个 `Proxy-Authorization` 请求头，它会覆盖 `headers` 中已存在的自定义 `Proxy-Authorization` 请求头。\n  // 如果代理服务器使用 HTTPS，则必须设置 protocol 为`https`\n  proxy: {\n    protocol: 'https',\n    host: '127.0.0.1',\n    port: 9000,\n    auth: {\n      username: 'mikeymike',\n      password: 'rapunz3l'\n    }\n  },\n\n  // see https://axios-http.com/zh/docs/cancellation\n  cancelToken: new CancelToken(function (cancel) {\n  }),\n\n  // `decompress` indicates whether or not the response body should be decompressed \n  // automatically. If set to `true` will also remove the 'content-encoding' header \n  // from the responses objects of all decompressed responses\n  // - Node only (XHR cannot turn off decompression)\n  decompress: true // 默认值\n\n}\n```\n\n","slug":"Axios","published":1,"updated":"2021-08-01T11:54:10.962Z","_id":"cksimhav30006lsrqh5dibrxz","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Axios\"><a href=\"#Axios\" class=\"headerlink\" title=\"Axios\"></a>Axios</h1><p>Axios 是一个基于 <em><a href=\"https://javascript.info/promise-basics\">promise</a></em> 网络请求库，作用于<a href=\"https://nodejs.org/\"><code>node.js</code></a> 和浏览器中。 它是 <em><a href=\"https://www.lullabot.com/articles/what-is-an-isomorphic-application\">isomorphic</a></em> 的(即同一套代码可以运行在浏览器和node.js中)。在服务端它使用原生 node.js <code>http</code> 模块, 而在客户端 (浏览端) 则使用 XMLHttpRequests。</p>\n<a id=\"more\"></a>\n\n<h2 id=\"特性\"><a href=\"#特性\" class=\"headerlink\" title=\"特性\"></a>特性</h2><ul>\n<li>从浏览器创建 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequests</a></li>\n<li>从 node.js 创建 <a href=\"http://nodejs.org/api/http.html\">http</a> 请求</li>\n<li>支持 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\">Promise</a> API</li>\n<li>拦截请求和响应</li>\n<li>转换请求和响应数据</li>\n<li>取消请求</li>\n<li>自动转换JSON数据</li>\n<li>客户端支持防御<a href=\"http://en.wikipedia.org/wiki/Cross-site_request_forgery\">XSRF</a></li>\n</ul>\n<h2 id=\"用例\"><a href=\"#用例\" class=\"headerlink\" title=\"用例\"></a>用例</h2><p>发起一个<code>GET</code>请求</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 向给定ID的用户发起请求</span>\naxios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user?ID=12345'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理成功情况</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理错误情况</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 总是会执行</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 上述请求也可以按以下方式完成（可选）</span>\naxios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token constant\">ID</span><span class=\"token operator\">:</span> <span class=\"token number\">12345</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 总是会执行</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\n<span class=\"token comment\">// 支持async/await用法</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user?ID=12345'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>发起一个<code>POST</code>请求</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Fred'</span><span class=\"token punctuation\">,</span>\n    lastName<span class=\"token operator\">:</span> <span class=\"token string\">'Flintstone'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"请求配置\"><a href=\"#请求配置\" class=\"headerlink\" title=\"请求配置\"></a>请求配置</h2><p>这些是创建请求时可以用的配置选项。只有 <code>url</code> 是必需的。如果没有指定 <code>method</code>，请求将默认使用 <code>GET</code> 方法。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// `url` 是用于请求的服务器 URL</span>\n  url<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `method` 是创建请求时使用的方法</span>\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。</span>\n  <span class=\"token comment\">// 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL</span>\n  baseURL<span class=\"token operator\">:</span> <span class=\"token string\">'https://some-domain.com/api/'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `transformRequest` 允许在向服务器发送前，修改请求数据</span>\n  <span class=\"token comment\">// 它只能用与 'PUT', 'POST' 和 'PATCH' 这几个请求方法</span>\n  <span class=\"token comment\">// 数组中最后一个函数必须返回一个字符串， 一个Buffer实例，ArrayBuffer，FormData，或 Stream</span>\n  <span class=\"token comment\">// 你可以修改请求头。</span>\n  transformRequest<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> headers</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 对发送的 data 进行任意转换处理</span>\n\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `transformResponse` 在传递给 then/catch 前，允许修改响应数据</span>\n  transformResponse<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 对接收的 data 进行任意转换处理</span>\n\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 自定义请求头</span>\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'X-Requested-With'</span><span class=\"token operator\">:</span> <span class=\"token string\">'XMLHttpRequest'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `params` 是与请求一起发送的 URL 参数</span>\n  <span class=\"token comment\">// 必须是一个简单对象或 URLSearchParams 对象</span>\n  params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token constant\">ID</span><span class=\"token operator\">:</span> <span class=\"token number\">12345</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `paramsSerializer`是可选方法，主要用于序列化`params`</span>\n  <span class=\"token comment\">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span>\n  <span class=\"token function-variable function\">paramsSerializer</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> Qs<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>arrayFormat<span class=\"token operator\">:</span> <span class=\"token string\">'brackets'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `data` 是作为请求体被发送的数据</span>\n  <span class=\"token comment\">// 仅适用 'PUT', 'POST', 'DELETE 和 'PATCH' 请求方法</span>\n  <span class=\"token comment\">// 在没有设置 `transformRequest` 时，则必须是以下类型之一:</span>\n  <span class=\"token comment\">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span>\n  <span class=\"token comment\">// - 浏览器专属: FormData, File, Blob</span>\n  <span class=\"token comment\">// - Node 专属: Stream, Buffer</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Fred'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  \n  <span class=\"token comment\">// 发送请求体数据的可选语法</span>\n  <span class=\"token comment\">// 请求方式 post</span>\n  <span class=\"token comment\">// 只有 value 会被发送，key 则不会</span>\n  data<span class=\"token operator\">:</span> <span class=\"token string\">'Country=Brasil&amp;City=Belo Horizonte'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `timeout` 指定请求超时的毫秒数。</span>\n  <span class=\"token comment\">// 如果请求时间超过 `timeout` 的值，则请求会被中断</span>\n  timeout<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值是 `0` (永不超时)</span>\n\n  <span class=\"token comment\">// `withCredentials` 表示跨域请求时是否需要使用凭证</span>\n  withCredentials<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// default</span>\n\n  <span class=\"token comment\">// `adapter` 允许自定义处理请求，这使测试更加容易。</span>\n  <span class=\"token comment\">// 返回一个 promise 并提供一个有效的响应 （参见 lib/adapters/README.md）。</span>\n  <span class=\"token function-variable function\">adapter</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">/* ... */</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `auth` HTTP Basic Auth</span>\n  auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    username<span class=\"token operator\">:</span> <span class=\"token string\">'janedoe'</span><span class=\"token punctuation\">,</span>\n    password<span class=\"token operator\">:</span> <span class=\"token string\">'s00pers3cret'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `responseType` 表示浏览器将要响应的数据类型</span>\n  <span class=\"token comment\">// 选项包括: 'arraybuffer', 'document', 'json', 'text', 'stream'</span>\n  <span class=\"token comment\">// 浏览器专属：'blob'</span>\n  responseType<span class=\"token operator\">:</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `responseEncoding` 表示用于解码响应的编码 (Node.js 专属)</span>\n  <span class=\"token comment\">// 注意：忽略 `responseType` 的值为 'stream'，或者是客户端请求</span>\n  <span class=\"token comment\">// Note: Ignored for `responseType` of 'stream' or client-side requests</span>\n  responseEncoding<span class=\"token operator\">:</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `xsrfCookieName` 是 xsrf token 的值，被用作 cookie 的名称</span>\n  xsrfCookieName<span class=\"token operator\">:</span> <span class=\"token string\">'XSRF-TOKEN'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `xsrfHeaderName` 是带有 xsrf token 值的http 请求头名称</span>\n  xsrfHeaderName<span class=\"token operator\">:</span> <span class=\"token string\">'X-XSRF-TOKEN'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `onUploadProgress` 允许为上传处理进度事件</span>\n  <span class=\"token comment\">// 浏览器专属</span>\n  <span class=\"token function-variable function\">onUploadProgress</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progressEvent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理原生进度事件</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `onDownloadProgress` 允许为下载处理进度事件</span>\n  <span class=\"token comment\">// 浏览器专属</span>\n  <span class=\"token function-variable function\">onDownloadProgress</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progressEvent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理原生进度事件</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `maxContentLength` 定义了node.js中允许的HTTP响应内容的最大字节数</span>\n  maxContentLength<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `maxBodyLength`（仅Node）定义允许的http请求内容的最大字节数</span>\n  maxBodyLength<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `validateStatus` 定义了对于给定的 HTTP状态码是 resolve 还是 reject promise。</span>\n  <span class=\"token comment\">// 如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，</span>\n  <span class=\"token comment\">// 则promise 将会 resolved，否则是 rejected。</span>\n  <span class=\"token function-variable function\">validateStatus</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 默认值</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `maxRedirects` 定义了在node.js中要遵循的最大重定向数。</span>\n  <span class=\"token comment\">// 如果设置为0，则不会进行重定向</span>\n  maxRedirects<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `socketPath` 定义了在node.js中使用的UNIX套接字。</span>\n  <span class=\"token comment\">// e.g. '/var/run/docker.sock' 发送请求到 docker 守护进程。</span>\n  <span class=\"token comment\">// 只能指定 `socketPath` 或 `proxy` 。</span>\n  <span class=\"token comment\">// 若都指定，这使用 `socketPath` 。</span>\n  socketPath<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// default</span>\n\n  <span class=\"token comment\">// `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span>\n  <span class=\"token comment\">// and https requests, respectively, in node.js. This allows options to be added like</span>\n  <span class=\"token comment\">// `keepAlive` that are not enabled by default.</span>\n  httpAgent<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">http<span class=\"token punctuation\">.</span>Agent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> keepAlive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  httpsAgent<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">https<span class=\"token punctuation\">.</span>Agent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> keepAlive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `proxy` 定义了代理服务器的主机名，端口和协议。</span>\n  <span class=\"token comment\">// 您可以使用常规的`http_proxy` 和 `https_proxy` 环境变量。</span>\n  <span class=\"token comment\">// 使用 `false` 可以禁用代理功能，同时环境变量也会被忽略。</span>\n  <span class=\"token comment\">// `auth`表示应使用HTTP Basic auth连接到代理，并且提供凭据。</span>\n  <span class=\"token comment\">// 这将设置一个 `Proxy-Authorization` 请求头，它会覆盖 `headers` 中已存在的自定义 `Proxy-Authorization` 请求头。</span>\n  <span class=\"token comment\">// 如果代理服务器使用 HTTPS，则必须设置 protocol 为`https`</span>\n  proxy<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    protocol<span class=\"token operator\">:</span> <span class=\"token string\">'https'</span><span class=\"token punctuation\">,</span>\n    host<span class=\"token operator\">:</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">:</span> <span class=\"token number\">9000</span><span class=\"token punctuation\">,</span>\n    auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      username<span class=\"token operator\">:</span> <span class=\"token string\">'mikeymike'</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token operator\">:</span> <span class=\"token string\">'rapunz3l'</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// see https://axios-http.com/zh/docs/cancellation</span>\n  cancelToken<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CancelToken</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">cancel</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `decompress` indicates whether or not the response body should be decompressed </span>\n  <span class=\"token comment\">// automatically. If set to `true` will also remove the 'content-encoding' header </span>\n  <span class=\"token comment\">// from the responses objects of all decompressed responses</span>\n  <span class=\"token comment\">// - Node only (XHR cannot turn off decompression)</span>\n  decompress<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// 默认值</span>\n\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","site":{"data":{}},"excerpt":"<h1 id=\"Axios\"><a href=\"#Axios\" class=\"headerlink\" title=\"Axios\"></a>Axios</h1><p>Axios 是一个基于 <em><a href=\"https://javascript.info/promise-basics\">promise</a></em> 网络请求库，作用于<a href=\"https://nodejs.org/\"><code>node.js</code></a> 和浏览器中。 它是 <em><a href=\"https://www.lullabot.com/articles/what-is-an-isomorphic-application\">isomorphic</a></em> 的(即同一套代码可以运行在浏览器和node.js中)。在服务端它使用原生 node.js <code>http</code> 模块, 而在客户端 (浏览端) 则使用 XMLHttpRequests。</p>","more":"<h2 id=\"特性\"><a href=\"#特性\" class=\"headerlink\" title=\"特性\"></a>特性</h2><ul>\n<li>从浏览器创建 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequests</a></li>\n<li>从 node.js 创建 <a href=\"http://nodejs.org/api/http.html\">http</a> 请求</li>\n<li>支持 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\">Promise</a> API</li>\n<li>拦截请求和响应</li>\n<li>转换请求和响应数据</li>\n<li>取消请求</li>\n<li>自动转换JSON数据</li>\n<li>客户端支持防御<a href=\"http://en.wikipedia.org/wiki/Cross-site_request_forgery\">XSRF</a></li>\n</ul>\n<h2 id=\"用例\"><a href=\"#用例\" class=\"headerlink\" title=\"用例\"></a>用例</h2><p>发起一个<code>GET</code>请求</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> axios <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'axios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 向给定ID的用户发起请求</span>\naxios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user?ID=12345'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理成功情况</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理错误情况</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 总是会执行</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 上述请求也可以按以下方式完成（可选）</span>\naxios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token constant\">ID</span><span class=\"token operator\">:</span> <span class=\"token number\">12345</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 总是会执行</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\n<span class=\"token comment\">// 支持async/await用法</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user?ID=12345'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>发起一个<code>POST</code>请求</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n    firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Fred'</span><span class=\"token punctuation\">,</span>\n    lastName<span class=\"token operator\">:</span> <span class=\"token string\">'Flintstone'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"请求配置\"><a href=\"#请求配置\" class=\"headerlink\" title=\"请求配置\"></a>请求配置</h2><p>这些是创建请求时可以用的配置选项。只有 <code>url</code> 是必需的。如果没有指定 <code>method</code>，请求将默认使用 <code>GET</code> 方法。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// `url` 是用于请求的服务器 URL</span>\n  url<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `method` 是创建请求时使用的方法</span>\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `baseURL` 将自动加在 `url` 前面，除非 `url` 是一个绝对 URL。</span>\n  <span class=\"token comment\">// 它可以通过设置一个 `baseURL` 便于为 axios 实例的方法传递相对 URL</span>\n  baseURL<span class=\"token operator\">:</span> <span class=\"token string\">'https://some-domain.com/api/'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `transformRequest` 允许在向服务器发送前，修改请求数据</span>\n  <span class=\"token comment\">// 它只能用与 'PUT', 'POST' 和 'PATCH' 这几个请求方法</span>\n  <span class=\"token comment\">// 数组中最后一个函数必须返回一个字符串， 一个Buffer实例，ArrayBuffer，FormData，或 Stream</span>\n  <span class=\"token comment\">// 你可以修改请求头。</span>\n  transformRequest<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> headers</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 对发送的 data 进行任意转换处理</span>\n\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `transformResponse` 在传递给 then/catch 前，允许修改响应数据</span>\n  transformResponse<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 对接收的 data 进行任意转换处理</span>\n\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 自定义请求头</span>\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'X-Requested-With'</span><span class=\"token operator\">:</span> <span class=\"token string\">'XMLHttpRequest'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `params` 是与请求一起发送的 URL 参数</span>\n  <span class=\"token comment\">// 必须是一个简单对象或 URLSearchParams 对象</span>\n  params<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token constant\">ID</span><span class=\"token operator\">:</span> <span class=\"token number\">12345</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `paramsSerializer`是可选方法，主要用于序列化`params`</span>\n  <span class=\"token comment\">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span>\n  <span class=\"token function-variable function\">paramsSerializer</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> Qs<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>arrayFormat<span class=\"token operator\">:</span> <span class=\"token string\">'brackets'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `data` 是作为请求体被发送的数据</span>\n  <span class=\"token comment\">// 仅适用 'PUT', 'POST', 'DELETE 和 'PATCH' 请求方法</span>\n  <span class=\"token comment\">// 在没有设置 `transformRequest` 时，则必须是以下类型之一:</span>\n  <span class=\"token comment\">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span>\n  <span class=\"token comment\">// - 浏览器专属: FormData, File, Blob</span>\n  <span class=\"token comment\">// - Node 专属: Stream, Buffer</span>\n  data<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    firstName<span class=\"token operator\">:</span> <span class=\"token string\">'Fred'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  \n  <span class=\"token comment\">// 发送请求体数据的可选语法</span>\n  <span class=\"token comment\">// 请求方式 post</span>\n  <span class=\"token comment\">// 只有 value 会被发送，key 则不会</span>\n  data<span class=\"token operator\">:</span> <span class=\"token string\">'Country=Brasil&amp;City=Belo Horizonte'</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `timeout` 指定请求超时的毫秒数。</span>\n  <span class=\"token comment\">// 如果请求时间超过 `timeout` 的值，则请求会被中断</span>\n  timeout<span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值是 `0` (永不超时)</span>\n\n  <span class=\"token comment\">// `withCredentials` 表示跨域请求时是否需要使用凭证</span>\n  withCredentials<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// default</span>\n\n  <span class=\"token comment\">// `adapter` 允许自定义处理请求，这使测试更加容易。</span>\n  <span class=\"token comment\">// 返回一个 promise 并提供一个有效的响应 （参见 lib/adapters/README.md）。</span>\n  <span class=\"token function-variable function\">adapter</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">/* ... */</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `auth` HTTP Basic Auth</span>\n  auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    username<span class=\"token operator\">:</span> <span class=\"token string\">'janedoe'</span><span class=\"token punctuation\">,</span>\n    password<span class=\"token operator\">:</span> <span class=\"token string\">'s00pers3cret'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `responseType` 表示浏览器将要响应的数据类型</span>\n  <span class=\"token comment\">// 选项包括: 'arraybuffer', 'document', 'json', 'text', 'stream'</span>\n  <span class=\"token comment\">// 浏览器专属：'blob'</span>\n  responseType<span class=\"token operator\">:</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `responseEncoding` 表示用于解码响应的编码 (Node.js 专属)</span>\n  <span class=\"token comment\">// 注意：忽略 `responseType` 的值为 'stream'，或者是客户端请求</span>\n  <span class=\"token comment\">// Note: Ignored for `responseType` of 'stream' or client-side requests</span>\n  responseEncoding<span class=\"token operator\">:</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `xsrfCookieName` 是 xsrf token 的值，被用作 cookie 的名称</span>\n  xsrfCookieName<span class=\"token operator\">:</span> <span class=\"token string\">'XSRF-TOKEN'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `xsrfHeaderName` 是带有 xsrf token 值的http 请求头名称</span>\n  xsrfHeaderName<span class=\"token operator\">:</span> <span class=\"token string\">'X-XSRF-TOKEN'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `onUploadProgress` 允许为上传处理进度事件</span>\n  <span class=\"token comment\">// 浏览器专属</span>\n  <span class=\"token function-variable function\">onUploadProgress</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progressEvent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理原生进度事件</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `onDownloadProgress` 允许为下载处理进度事件</span>\n  <span class=\"token comment\">// 浏览器专属</span>\n  <span class=\"token function-variable function\">onDownloadProgress</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">progressEvent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 处理原生进度事件</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `maxContentLength` 定义了node.js中允许的HTTP响应内容的最大字节数</span>\n  maxContentLength<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `maxBodyLength`（仅Node）定义允许的http请求内容的最大字节数</span>\n  maxBodyLength<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `validateStatus` 定义了对于给定的 HTTP状态码是 resolve 还是 reject promise。</span>\n  <span class=\"token comment\">// 如果 `validateStatus` 返回 `true` (或者设置为 `null` 或 `undefined`)，</span>\n  <span class=\"token comment\">// 则promise 将会 resolved，否则是 rejected。</span>\n  <span class=\"token function-variable function\">validateStatus</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 默认值</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `maxRedirects` 定义了在node.js中要遵循的最大重定向数。</span>\n  <span class=\"token comment\">// 如果设置为0，则不会进行重定向</span>\n  maxRedirects<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认值</span>\n\n  <span class=\"token comment\">// `socketPath` 定义了在node.js中使用的UNIX套接字。</span>\n  <span class=\"token comment\">// e.g. '/var/run/docker.sock' 发送请求到 docker 守护进程。</span>\n  <span class=\"token comment\">// 只能指定 `socketPath` 或 `proxy` 。</span>\n  <span class=\"token comment\">// 若都指定，这使用 `socketPath` 。</span>\n  socketPath<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// default</span>\n\n  <span class=\"token comment\">// `httpAgent` and `httpsAgent` define a custom agent to be used when performing http</span>\n  <span class=\"token comment\">// and https requests, respectively, in node.js. This allows options to be added like</span>\n  <span class=\"token comment\">// `keepAlive` that are not enabled by default.</span>\n  httpAgent<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">http<span class=\"token punctuation\">.</span>Agent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> keepAlive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  httpsAgent<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">https<span class=\"token punctuation\">.</span>Agent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> keepAlive<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `proxy` 定义了代理服务器的主机名，端口和协议。</span>\n  <span class=\"token comment\">// 您可以使用常规的`http_proxy` 和 `https_proxy` 环境变量。</span>\n  <span class=\"token comment\">// 使用 `false` 可以禁用代理功能，同时环境变量也会被忽略。</span>\n  <span class=\"token comment\">// `auth`表示应使用HTTP Basic auth连接到代理，并且提供凭据。</span>\n  <span class=\"token comment\">// 这将设置一个 `Proxy-Authorization` 请求头，它会覆盖 `headers` 中已存在的自定义 `Proxy-Authorization` 请求头。</span>\n  <span class=\"token comment\">// 如果代理服务器使用 HTTPS，则必须设置 protocol 为`https`</span>\n  proxy<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    protocol<span class=\"token operator\">:</span> <span class=\"token string\">'https'</span><span class=\"token punctuation\">,</span>\n    host<span class=\"token operator\">:</span> <span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span>\n    port<span class=\"token operator\">:</span> <span class=\"token number\">9000</span><span class=\"token punctuation\">,</span>\n    auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n      username<span class=\"token operator\">:</span> <span class=\"token string\">'mikeymike'</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token operator\">:</span> <span class=\"token string\">'rapunz3l'</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// see https://axios-http.com/zh/docs/cancellation</span>\n  cancelToken<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CancelToken</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">cancel</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// `decompress` indicates whether or not the response body should be decompressed </span>\n  <span class=\"token comment\">// automatically. If set to `true` will also remove the 'content-encoding' header </span>\n  <span class=\"token comment\">// from the responses objects of all decompressed responses</span>\n  <span class=\"token comment\">// - Node only (XHR cannot turn off decompression)</span>\n  decompress<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// 默认值</span>\n\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"Promise","date":"2021-08-01T10:45:06.000Z","_content":"\n# Promise\n\nPromise 必须为以下三种状态：等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）。一旦 Promise 被 resolve 或 reject，不能再迁移至其他任何状态（即状态 immutable）。\n\n   <!--more-->\n\n基本过程：\n\n1. 初始化 Promise 状态(pending)\n2. 立即执行 Promise 中传入的 fn 函数，将 Promise 的内部 resolve，reject 函数作为参数传递给 fn，按事件机制时机处理\n3. 执行 then(.then)注册回调处理数组（then 方法可被同一个 Promise 调用多次）\n4. Promise 里的关键是要保证.then 方法传入的参数 onFulfilled 和 onRejected，必须在 then 方法被调用的那一轮事件循环之后的新执行栈中执行。\n\n**真正的链式 Promise 是指在当前 promise 达到 fulfilled 状态后，即开始进行下一个 promise**\n\n## 链式调用\n\n```javascript\nnew Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve({ test: 1 });\n    resolve({ test: 2 });\n    reject({ test: 2 });\n  }, 1000);\n})\n  .then(\n    (response) => {\n      console.log('result1', data);\n    },\n    (error) => {\n      console.log('result2', data1);\n    }\n  )\n  .then((response) => {\n    console.log('result3', data);\n  });\n//result1 { test: 1 }\n//result3 undefined\n```\n\n显然这里输出了不同的 data。由此可以看出几点：\n\n1. 可进行链式调用，且每次 then 返回了新的 Promise(2 次打印结果不一致，如果是同一个实例，打印结果应该一致。\n2. 只输出第一次 resolve 的内容，reject 的内容没有输出，即 Promise 是有状态且状态只可以由 pending -> fulfilled 或 pending-> rejected,是不可逆的。\n3. then 中返回了新的 Promise,但是 then 中注册的回调仍然是属于上一个 Promise 的。\n\n## Promise 的立即执行性\n\n```javascript\nvar p = new Promise(function (resolve, reject) {\n  console.log('create a promise');\n  resolve('success');\n});\n\nconsole.log('after new Promise');\n\np.then(function (value) {\n  console.log(value);\n});\n//控制台输出\n('create a promise');\n('after new Promise');\n('success');\n```\n\nPromise 对象表示未来某个将要发生的事件，但在创建（new）Promise 时，作为 Promise 参数传入的函数是会被立即执行的，只是其中执行的代码可以是异步代码。因此，代码中\"create a promise\"先于\"after new Promise\"输出。\n","source":"_posts/2021-08-01-Promise.md","raw":"---\ntitle: Promise\ndate: 2021-08-01 18:45:06\ntags:\n  - 'JavaScript'\n---\n\n# Promise\n\nPromise 必须为以下三种状态：等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）。一旦 Promise 被 resolve 或 reject，不能再迁移至其他任何状态（即状态 immutable）。\n\n   <!--more-->\n\n基本过程：\n\n1. 初始化 Promise 状态(pending)\n2. 立即执行 Promise 中传入的 fn 函数，将 Promise 的内部 resolve，reject 函数作为参数传递给 fn，按事件机制时机处理\n3. 执行 then(.then)注册回调处理数组（then 方法可被同一个 Promise 调用多次）\n4. Promise 里的关键是要保证.then 方法传入的参数 onFulfilled 和 onRejected，必须在 then 方法被调用的那一轮事件循环之后的新执行栈中执行。\n\n**真正的链式 Promise 是指在当前 promise 达到 fulfilled 状态后，即开始进行下一个 promise**\n\n## 链式调用\n\n```javascript\nnew Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve({ test: 1 });\n    resolve({ test: 2 });\n    reject({ test: 2 });\n  }, 1000);\n})\n  .then(\n    (response) => {\n      console.log('result1', data);\n    },\n    (error) => {\n      console.log('result2', data1);\n    }\n  )\n  .then((response) => {\n    console.log('result3', data);\n  });\n//result1 { test: 1 }\n//result3 undefined\n```\n\n显然这里输出了不同的 data。由此可以看出几点：\n\n1. 可进行链式调用，且每次 then 返回了新的 Promise(2 次打印结果不一致，如果是同一个实例，打印结果应该一致。\n2. 只输出第一次 resolve 的内容，reject 的内容没有输出，即 Promise 是有状态且状态只可以由 pending -> fulfilled 或 pending-> rejected,是不可逆的。\n3. then 中返回了新的 Promise,但是 then 中注册的回调仍然是属于上一个 Promise 的。\n\n## Promise 的立即执行性\n\n```javascript\nvar p = new Promise(function (resolve, reject) {\n  console.log('create a promise');\n  resolve('success');\n});\n\nconsole.log('after new Promise');\n\np.then(function (value) {\n  console.log(value);\n});\n//控制台输出\n('create a promise');\n('after new Promise');\n('success');\n```\n\nPromise 对象表示未来某个将要发生的事件，但在创建（new）Promise 时，作为 Promise 参数传入的函数是会被立即执行的，只是其中执行的代码可以是异步代码。因此，代码中\"create a promise\"先于\"after new Promise\"输出。\n","slug":"Promise","published":1,"updated":"2021-08-01T10:49:19.077Z","_id":"cksimhav50008lsrq3bpnbtnc","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h1><p>Promise 必须为以下三种状态：等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）。一旦 Promise 被 resolve 或 reject，不能再迁移至其他任何状态（即状态 immutable）。</p>\n   <a id=\"more\"></a>\n\n<p>基本过程：</p>\n<ol>\n<li>初始化 Promise 状态(pending)</li>\n<li>立即执行 Promise 中传入的 fn 函数，将 Promise 的内部 resolve，reject 函数作为参数传递给 fn，按事件机制时机处理</li>\n<li>执行 then(.then)注册回调处理数组（then 方法可被同一个 Promise 调用多次）</li>\n<li>Promise 里的关键是要保证.then 方法传入的参数 onFulfilled 和 onRejected，必须在 then 方法被调用的那一轮事件循环之后的新执行栈中执行。</li>\n</ol>\n<p><strong>真正的链式 Promise 是指在当前 promise 达到 fulfilled 状态后，即开始进行下一个 promise</strong></p>\n<h2 id=\"链式调用\"><a href=\"#链式调用\" class=\"headerlink\" title=\"链式调用\"></a>链式调用</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> test<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> test<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> test<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result1'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result2'</span><span class=\"token punctuation\">,</span> data1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result3'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//result1 &#123; test: 1 &#125;</span>\n<span class=\"token comment\">//result3 undefined</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>显然这里输出了不同的 data。由此可以看出几点：</p>\n<ol>\n<li>可进行链式调用，且每次 then 返回了新的 Promise(2 次打印结果不一致，如果是同一个实例，打印结果应该一致。</li>\n<li>只输出第一次 resolve 的内容，reject 的内容没有输出，即 Promise 是有状态且状态只可以由 pending -&gt; fulfilled 或 pending-&gt; rejected,是不可逆的。</li>\n<li>then 中返回了新的 Promise,但是 then 中注册的回调仍然是属于上一个 Promise 的。</li>\n</ol>\n<h2 id=\"Promise-的立即执行性\"><a href=\"#Promise-的立即执行性\" class=\"headerlink\" title=\"Promise 的立即执行性\"></a>Promise 的立即执行性</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'create a promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'after new Promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\np<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//控制台输出</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'create a promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'after new Promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>Promise 对象表示未来某个将要发生的事件，但在创建（new）Promise 时，作为 Promise 参数传入的函数是会被立即执行的，只是其中执行的代码可以是异步代码。因此，代码中”create a promise”先于”after new Promise”输出。</p>\n","site":{"data":{}},"excerpt":"<h1 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h1><p>Promise 必须为以下三种状态：等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）。一旦 Promise 被 resolve 或 reject，不能再迁移至其他任何状态（即状态 immutable）。</p>","more":"<p>基本过程：</p>\n<ol>\n<li>初始化 Promise 状态(pending)</li>\n<li>立即执行 Promise 中传入的 fn 函数，将 Promise 的内部 resolve，reject 函数作为参数传递给 fn，按事件机制时机处理</li>\n<li>执行 then(.then)注册回调处理数组（then 方法可被同一个 Promise 调用多次）</li>\n<li>Promise 里的关键是要保证.then 方法传入的参数 onFulfilled 和 onRejected，必须在 then 方法被调用的那一轮事件循环之后的新执行栈中执行。</li>\n</ol>\n<p><strong>真正的链式 Promise 是指在当前 promise 达到 fulfilled 状态后，即开始进行下一个 promise</strong></p>\n<h2 id=\"链式调用\"><a href=\"#链式调用\" class=\"headerlink\" title=\"链式调用\"></a>链式调用</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> test<span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> test<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span> test<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result1'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result2'</span><span class=\"token punctuation\">,</span> data1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'result3'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//result1 &#123; test: 1 &#125;</span>\n<span class=\"token comment\">//result3 undefined</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>显然这里输出了不同的 data。由此可以看出几点：</p>\n<ol>\n<li>可进行链式调用，且每次 then 返回了新的 Promise(2 次打印结果不一致，如果是同一个实例，打印结果应该一致。</li>\n<li>只输出第一次 resolve 的内容，reject 的内容没有输出，即 Promise 是有状态且状态只可以由 pending -&gt; fulfilled 或 pending-&gt; rejected,是不可逆的。</li>\n<li>then 中返回了新的 Promise,但是 then 中注册的回调仍然是属于上一个 Promise 的。</li>\n</ol>\n<h2 id=\"Promise-的立即执行性\"><a href=\"#Promise-的立即执行性\" class=\"headerlink\" title=\"Promise 的立即执行性\"></a>Promise 的立即执行性</h2><pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'create a promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'after new Promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\np<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//控制台输出</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'create a promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'after new Promise'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'success'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>Promise 对象表示未来某个将要发生的事件，但在创建（new）Promise 时，作为 Promise 参数传入的函数是会被立即执行的，只是其中执行的代码可以是异步代码。因此，代码中”create a promise”先于”after new Promise”输出。</p>"},{"title":"学习网站汇总","date":"2021-09-12T02:00:44.000Z","_content":"\n\n## CSS学习网站\n\n[Flex Box 冒险游戏](https://codingfantasy.com/games/flexboxadventure)\n<!--more-->\n[Flexbox 格子骑士](https://knightsoftheflexboxtable.com/)\n\n[Flex Box 青蛙](https://flexboxfroggy.com/)\n\n[Flex Box 打僵尸](https://geddski.teachable.com/p/flexbox-zombies)\n\n[Flex Box 保卫战](http://www.flexboxdefense.com/)\n\n[Flex语法操纵台](https://the-echoplex.net/flexyboxes/)\n\n[Grid花园](https://cssgridgarden.com/)\n\n[CSS Grid 备忘清单](https://alialaa.github.io/css-grid-cheat-sheet/)\n\n[Grid 攻击](https://codingfantasy.com/games/css-grid-attack)\n\n[CSS 选择器备忘清单](https://frontend30.com/css-selectors-cheatsheet/)\n\n[CSS 动画](https://css-animations.io/)\n\n[混合滤镜](https://ilyashubin.github.io/FilterBlend/)\n\n[CSS晚餐](https://flukeout.github.io/)\n\n## JavaScript学习网站\n\n[TypeScript 练习](https://typescript-exercises.github.io/)\n\n[设计模式游戏](https://designpatternsgame.com/)\n\n[React 教程](https://react-tutorial.app/)\n\n[JavaScript 冒险游戏](https://alexnisnevich.github.io/untrusted/)\n\n[Promises](https://bevacqua.github.io/promisees/)\n\n[JSchallenger](https://www.jschallenger.com/)\n\n[学习开发渐进式 Web 应用程序](https://serviceworkies.com/)\n\n## 其他\n\n[Git分支学习](https://learngitbranching.js.org/)\n\n[Select Star SQL](https://selectstarsql.com/)\n\n[SQL警察局](https://sqlpd.com/)\n\n[CodingGame](https://www.codingame.com/)\n\n[正则填字游戏](https://regexcrossword.com/)\n\n[RegexOne](https://regexone.com/)\n\n","source":"_posts/2021-09-12-学习网站汇总.md","raw":"---\ntitle: 学习网站汇总\ndate: 2021-09-12 10:00:44\ntags:\n---\n\n\n## CSS学习网站\n\n[Flex Box 冒险游戏](https://codingfantasy.com/games/flexboxadventure)\n<!--more-->\n[Flexbox 格子骑士](https://knightsoftheflexboxtable.com/)\n\n[Flex Box 青蛙](https://flexboxfroggy.com/)\n\n[Flex Box 打僵尸](https://geddski.teachable.com/p/flexbox-zombies)\n\n[Flex Box 保卫战](http://www.flexboxdefense.com/)\n\n[Flex语法操纵台](https://the-echoplex.net/flexyboxes/)\n\n[Grid花园](https://cssgridgarden.com/)\n\n[CSS Grid 备忘清单](https://alialaa.github.io/css-grid-cheat-sheet/)\n\n[Grid 攻击](https://codingfantasy.com/games/css-grid-attack)\n\n[CSS 选择器备忘清单](https://frontend30.com/css-selectors-cheatsheet/)\n\n[CSS 动画](https://css-animations.io/)\n\n[混合滤镜](https://ilyashubin.github.io/FilterBlend/)\n\n[CSS晚餐](https://flukeout.github.io/)\n\n## JavaScript学习网站\n\n[TypeScript 练习](https://typescript-exercises.github.io/)\n\n[设计模式游戏](https://designpatternsgame.com/)\n\n[React 教程](https://react-tutorial.app/)\n\n[JavaScript 冒险游戏](https://alexnisnevich.github.io/untrusted/)\n\n[Promises](https://bevacqua.github.io/promisees/)\n\n[JSchallenger](https://www.jschallenger.com/)\n\n[学习开发渐进式 Web 应用程序](https://serviceworkies.com/)\n\n## 其他\n\n[Git分支学习](https://learngitbranching.js.org/)\n\n[Select Star SQL](https://selectstarsql.com/)\n\n[SQL警察局](https://sqlpd.com/)\n\n[CodingGame](https://www.codingame.com/)\n\n[正则填字游戏](https://regexcrossword.com/)\n\n[RegexOne](https://regexone.com/)\n\n","slug":"学习网站汇总","published":1,"updated":"2021-09-12T03:15:53.431Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs0k00001krqaxs2fxpb","content":"<h2 id=\"CSS学习网站\"><a href=\"#CSS学习网站\" class=\"headerlink\" title=\"CSS学习网站\"></a>CSS学习网站</h2><p><a href=\"https://codingfantasy.com/games/flexboxadventure\">Flex Box 冒险游戏</a></p>\n<a id=\"more\"></a>\n<p><a href=\"https://knightsoftheflexboxtable.com/\">Flexbox 格子骑士</a></p>\n<p><a href=\"https://flexboxfroggy.com/\">Flex Box 青蛙</a></p>\n<p><a href=\"https://geddski.teachable.com/p/flexbox-zombies\">Flex Box 打僵尸</a></p>\n<p><a href=\"http://www.flexboxdefense.com/\">Flex Box 保卫战</a></p>\n<p><a href=\"https://the-echoplex.net/flexyboxes/\">Flex语法操纵台</a></p>\n<p><a href=\"https://cssgridgarden.com/\">Grid花园</a></p>\n<p><a href=\"https://alialaa.github.io/css-grid-cheat-sheet/\">CSS Grid 备忘清单</a></p>\n<p><a href=\"https://codingfantasy.com/games/css-grid-attack\">Grid 攻击</a></p>\n<p><a href=\"https://frontend30.com/css-selectors-cheatsheet/\">CSS 选择器备忘清单</a></p>\n<p><a href=\"https://css-animations.io/\">CSS 动画</a></p>\n<p><a href=\"https://ilyashubin.github.io/FilterBlend/\">混合滤镜</a></p>\n<p><a href=\"https://flukeout.github.io/\">CSS晚餐</a></p>\n<h2 id=\"JavaScript学习网站\"><a href=\"#JavaScript学习网站\" class=\"headerlink\" title=\"JavaScript学习网站\"></a>JavaScript学习网站</h2><p><a href=\"https://typescript-exercises.github.io/\">TypeScript 练习</a></p>\n<p><a href=\"https://designpatternsgame.com/\">设计模式游戏</a></p>\n<p><a href=\"https://react-tutorial.app/\">React 教程</a></p>\n<p><a href=\"https://alexnisnevich.github.io/untrusted/\">JavaScript 冒险游戏</a></p>\n<p><a href=\"https://bevacqua.github.io/promisees/\">Promises</a></p>\n<p><a href=\"https://www.jschallenger.com/\">JSchallenger</a></p>\n<p><a href=\"https://serviceworkies.com/\">学习开发渐进式 Web 应用程序</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p><a href=\"https://learngitbranching.js.org/\">Git分支学习</a></p>\n<p><a href=\"https://selectstarsql.com/\">Select Star SQL</a></p>\n<p><a href=\"https://sqlpd.com/\">SQL警察局</a></p>\n<p><a href=\"https://www.codingame.com/\">CodingGame</a></p>\n<p><a href=\"https://regexcrossword.com/\">正则填字游戏</a></p>\n<p><a href=\"https://regexone.com/\">RegexOne</a></p>\n","site":{"data":{}},"excerpt":"<h2 id=\"CSS学习网站\"><a href=\"#CSS学习网站\" class=\"headerlink\" title=\"CSS学习网站\"></a>CSS学习网站</h2><p><a href=\"https://codingfantasy.com/games/flexboxadventure\">Flex Box 冒险游戏</a></p>","more":"<p><a href=\"https://knightsoftheflexboxtable.com/\">Flexbox 格子骑士</a></p>\n<p><a href=\"https://flexboxfroggy.com/\">Flex Box 青蛙</a></p>\n<p><a href=\"https://geddski.teachable.com/p/flexbox-zombies\">Flex Box 打僵尸</a></p>\n<p><a href=\"http://www.flexboxdefense.com/\">Flex Box 保卫战</a></p>\n<p><a href=\"https://the-echoplex.net/flexyboxes/\">Flex语法操纵台</a></p>\n<p><a href=\"https://cssgridgarden.com/\">Grid花园</a></p>\n<p><a href=\"https://alialaa.github.io/css-grid-cheat-sheet/\">CSS Grid 备忘清单</a></p>\n<p><a href=\"https://codingfantasy.com/games/css-grid-attack\">Grid 攻击</a></p>\n<p><a href=\"https://frontend30.com/css-selectors-cheatsheet/\">CSS 选择器备忘清单</a></p>\n<p><a href=\"https://css-animations.io/\">CSS 动画</a></p>\n<p><a href=\"https://ilyashubin.github.io/FilterBlend/\">混合滤镜</a></p>\n<p><a href=\"https://flukeout.github.io/\">CSS晚餐</a></p>\n<h2 id=\"JavaScript学习网站\"><a href=\"#JavaScript学习网站\" class=\"headerlink\" title=\"JavaScript学习网站\"></a>JavaScript学习网站</h2><p><a href=\"https://typescript-exercises.github.io/\">TypeScript 练习</a></p>\n<p><a href=\"https://designpatternsgame.com/\">设计模式游戏</a></p>\n<p><a href=\"https://react-tutorial.app/\">React 教程</a></p>\n<p><a href=\"https://alexnisnevich.github.io/untrusted/\">JavaScript 冒险游戏</a></p>\n<p><a href=\"https://bevacqua.github.io/promisees/\">Promises</a></p>\n<p><a href=\"https://www.jschallenger.com/\">JSchallenger</a></p>\n<p><a href=\"https://serviceworkies.com/\">学习开发渐进式 Web 应用程序</a></p>\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><p><a href=\"https://learngitbranching.js.org/\">Git分支学习</a></p>\n<p><a href=\"https://selectstarsql.com/\">Select Star SQL</a></p>\n<p><a href=\"https://sqlpd.com/\">SQL警察局</a></p>\n<p><a href=\"https://www.codingame.com/\">CodingGame</a></p>\n<p><a href=\"https://regexcrossword.com/\">正则填字游戏</a></p>\n<p><a href=\"https://regexone.com/\">RegexOne</a></p>"},{"title":"万恶的this","date":"2022-02-10T03:09:08.000Z","_content":"\n在2021年的11月和12月份，我基本上没有对自己学习的东西进行总结，因为感觉自己会的东西还是太少了，所以在恶补了一波js基础以后，我开始进行一个总结，其中我认为最令我头疼，也是让我感觉很有意思的东西，就是this的指向问题。\n<!--more-->\nthis指向，在我目前理解，无非几种指向：\n\n1. 隐式调用：例如谁调用该函数，函数指向谁\n2. 显式调用：使用call,apply,bind进行显式调用\n3. 使用new进行调用。\n4. 箭头函数中的this\n\n其中调用具有优先级：new>显示调用>隐式调用\n\n下面贴几个我之前觉得特别有意思的关于this的指向问题。\n\n来自CoderWhy公众号\n\n```js\nvar name = \"window\";\n\nvar person = {\n  name: \"person\",\n  sayName: function () {\n    console.log(this.name);\n  }\n};\n\nfunction sayName() {\n  var sss = person.sayName;\n  sss(); // window: 独立函数调用\n  person.sayName(); // person: 隐式调用\n  (person.sayName)(); // person: 隐式调用\n}\n\nsayName();\n```\n\n```js\nvar name = 'window'\n\nvar person1 = {\n  name: 'person1',\n  foo1: function () {\n    console.log(this.name)\n  },\n  foo2: () => console.log(this.name),\n  foo3: function () {\n    return function () {\n      console.log(this.name)\n    }\n  },\n  foo4: function () {\n    return () => {\n      console.log(this.name)\n    }\n  }\n}\n\nvar person2 = { name: 'person2' }\n\nperson1.foo1(); // person1(隐式绑定)\nperson1.foo1.call(person2); // person2(显示绑定优先级大于隐式绑定)\n\nperson1.foo2(); // window(不绑定作用域,上层作用域是全局)\nperson1.foo2.call(person2); // window\n\nperson1.foo3()(); // window(独立函数调用)\nperson1.foo3.call(person2)(); // window(独立函数调用)\nperson1.foo3().call(person2); // person2(最终调用返回函数式, 使用的是显示绑定)\n\nperson1.foo4()(); // person1(箭头函数不绑定this, 上层作用域this是person1)\nperson1.foo4.call(person2)(); // person2(上层作用域被显示的绑定了一个person2)\nperson1.foo4().call(person2); // person1(上层找到person1)\n```\n\n```js\nvar name = 'window'\n\nfunction Person (name) {\n  this.name = name\n  this.foo1 = function () {\n    console.log(this.name)\n  },\n  this.foo2 = () => console.log(this.name),\n  this.foo3 = function () {\n    return function () {\n      console.log(this.name)\n    }\n  },\n  this.foo4 = function () {\n    return () => {\n      console.log(this.name)\n    }\n  }\n}\n\nvar person1 = new Person('person1')\nvar person2 = new Person('person2')\n\nperson1.foo1() // person1\nperson1.foo1.call(person2) // person2(显示高于隐式绑定)\n\nperson1.foo2() // person1 (上层作用域中的this是person1)\nperson1.foo2.call(person2) // person1 (上层作用域中的this是person1)\n\nperson1.foo3()() // window(独立函数调用)\nperson1.foo3.call(person2)() // window\nperson1.foo3().call(person2) // person2\n\nperson1.foo4()() // person1\nperson1.foo4.call(person2)() // person2\nperson1.foo4().call(person2) // person1\n```\n\n","source":"_posts/2022-02-10-万恶的this.md","raw":"---\ntitle: 万恶的this\ndate: 2022-02-10 11:09:08\ntags:\n\t\t\t- 'JavaScript'\n---\n\n在2021年的11月和12月份，我基本上没有对自己学习的东西进行总结，因为感觉自己会的东西还是太少了，所以在恶补了一波js基础以后，我开始进行一个总结，其中我认为最令我头疼，也是让我感觉很有意思的东西，就是this的指向问题。\n<!--more-->\nthis指向，在我目前理解，无非几种指向：\n\n1. 隐式调用：例如谁调用该函数，函数指向谁\n2. 显式调用：使用call,apply,bind进行显式调用\n3. 使用new进行调用。\n4. 箭头函数中的this\n\n其中调用具有优先级：new>显示调用>隐式调用\n\n下面贴几个我之前觉得特别有意思的关于this的指向问题。\n\n来自CoderWhy公众号\n\n```js\nvar name = \"window\";\n\nvar person = {\n  name: \"person\",\n  sayName: function () {\n    console.log(this.name);\n  }\n};\n\nfunction sayName() {\n  var sss = person.sayName;\n  sss(); // window: 独立函数调用\n  person.sayName(); // person: 隐式调用\n  (person.sayName)(); // person: 隐式调用\n}\n\nsayName();\n```\n\n```js\nvar name = 'window'\n\nvar person1 = {\n  name: 'person1',\n  foo1: function () {\n    console.log(this.name)\n  },\n  foo2: () => console.log(this.name),\n  foo3: function () {\n    return function () {\n      console.log(this.name)\n    }\n  },\n  foo4: function () {\n    return () => {\n      console.log(this.name)\n    }\n  }\n}\n\nvar person2 = { name: 'person2' }\n\nperson1.foo1(); // person1(隐式绑定)\nperson1.foo1.call(person2); // person2(显示绑定优先级大于隐式绑定)\n\nperson1.foo2(); // window(不绑定作用域,上层作用域是全局)\nperson1.foo2.call(person2); // window\n\nperson1.foo3()(); // window(独立函数调用)\nperson1.foo3.call(person2)(); // window(独立函数调用)\nperson1.foo3().call(person2); // person2(最终调用返回函数式, 使用的是显示绑定)\n\nperson1.foo4()(); // person1(箭头函数不绑定this, 上层作用域this是person1)\nperson1.foo4.call(person2)(); // person2(上层作用域被显示的绑定了一个person2)\nperson1.foo4().call(person2); // person1(上层找到person1)\n```\n\n```js\nvar name = 'window'\n\nfunction Person (name) {\n  this.name = name\n  this.foo1 = function () {\n    console.log(this.name)\n  },\n  this.foo2 = () => console.log(this.name),\n  this.foo3 = function () {\n    return function () {\n      console.log(this.name)\n    }\n  },\n  this.foo4 = function () {\n    return () => {\n      console.log(this.name)\n    }\n  }\n}\n\nvar person1 = new Person('person1')\nvar person2 = new Person('person2')\n\nperson1.foo1() // person1\nperson1.foo1.call(person2) // person2(显示高于隐式绑定)\n\nperson1.foo2() // person1 (上层作用域中的this是person1)\nperson1.foo2.call(person2) // person1 (上层作用域中的this是person1)\n\nperson1.foo3()() // window(独立函数调用)\nperson1.foo3.call(person2)() // window\nperson1.foo3().call(person2) // person2\n\nperson1.foo4()() // person1\nperson1.foo4.call(person2)() // person2\nperson1.foo4().call(person2) // person1\n```\n\n","slug":"万恶的this","published":1,"updated":"2022-02-12T11:46:53.289Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs0p00011krq3t6yba44","content":"<p>在2021年的11月和12月份，我基本上没有对自己学习的东西进行总结，因为感觉自己会的东西还是太少了，所以在恶补了一波js基础以后，我开始进行一个总结，其中我认为最令我头疼，也是让我感觉很有意思的东西，就是this的指向问题。</p>\n<a id=\"more\"></a>\n<p>this指向，在我目前理解，无非几种指向：</p>\n<ol>\n<li>隐式调用：例如谁调用该函数，函数指向谁</li>\n<li>显式调用：使用call,apply,bind进行显式调用</li>\n<li>使用new进行调用。</li>\n<li>箭头函数中的this</li>\n</ol>\n<p>其中调用具有优先级：new&gt;显示调用&gt;隐式调用</p>\n<p>下面贴几个我之前觉得特别有意思的关于this的指向问题。</p>\n<p>来自CoderWhy公众号</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"window\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">\"person\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">sayName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">sayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> sss <span class=\"token operator\">=</span> person<span class=\"token punctuation\">.</span>sayName<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">sss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window: 独立函数调用</span>\n  person<span class=\"token punctuation\">.</span><span class=\"token function\">sayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person: 隐式调用</span>\n  <span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>sayName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person: 隐式调用</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'window'</span>\n\n<span class=\"token keyword\">var</span> person1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'person1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo1</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo3</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo4</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">var</span> person2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'person2'</span> <span class=\"token punctuation\">&#125;</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person1(隐式绑定)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person2(显示绑定优先级大于隐式绑定)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window(不绑定作用域,上层作用域是全局)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window(独立函数调用)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window(独立函数调用)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person2(最终调用返回函数式, 使用的是显示绑定)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person1(箭头函数不绑定this, 上层作用域this是person1)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person2(上层作用域被显示的绑定了一个person2)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person1(上层找到person1)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'window'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo3</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo4</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">var</span> person1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'person1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> person2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'person2'</span><span class=\"token punctuation\">)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person2(显示高于隐式绑定)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1 (上层作用域中的this是person1)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1 (上层作用域中的this是person1)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window(独立函数调用)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person2</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person2</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","site":{"data":{}},"excerpt":"<p>在2021年的11月和12月份，我基本上没有对自己学习的东西进行总结，因为感觉自己会的东西还是太少了，所以在恶补了一波js基础以后，我开始进行一个总结，其中我认为最令我头疼，也是让我感觉很有意思的东西，就是this的指向问题。</p>","more":"<p>this指向，在我目前理解，无非几种指向：</p>\n<ol>\n<li>隐式调用：例如谁调用该函数，函数指向谁</li>\n<li>显式调用：使用call,apply,bind进行显式调用</li>\n<li>使用new进行调用。</li>\n<li>箭头函数中的this</li>\n</ol>\n<p>其中调用具有优先级：new&gt;显示调用&gt;隐式调用</p>\n<p>下面贴几个我之前觉得特别有意思的关于this的指向问题。</p>\n<p>来自CoderWhy公众号</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"window\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">\"person\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">sayName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">sayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> sss <span class=\"token operator\">=</span> person<span class=\"token punctuation\">.</span>sayName<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">sss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window: 独立函数调用</span>\n  person<span class=\"token punctuation\">.</span><span class=\"token function\">sayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person: 隐式调用</span>\n  <span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>sayName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person: 隐式调用</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sayName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'window'</span>\n\n<span class=\"token keyword\">var</span> person1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'person1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo1</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo3</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">foo4</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">var</span> person2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'person2'</span> <span class=\"token punctuation\">&#125;</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person1(隐式绑定)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person2(显示绑定优先级大于隐式绑定)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window(不绑定作用域,上层作用域是全局)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window(独立函数调用)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// window(独立函数调用)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person2(最终调用返回函数式, 使用的是显示绑定)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person1(箭头函数不绑定this, 上层作用域this是person1)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person2(上层作用域被显示的绑定了一个person2)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// person1(上层找到person1)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'window'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo1</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo2</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo3</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">foo4</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">var</span> person1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'person1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> person2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'person2'</span><span class=\"token punctuation\">)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo1</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person2(显示高于隐式绑定)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1 (上层作用域中的this是person1)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo2</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1 (上层作用域中的this是person1)</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window(独立函数调用)</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person2</span>\n\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// person2</span>\nperson1<span class=\"token punctuation\">.</span><span class=\"token function\">foo4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person2<span class=\"token punctuation\">)</span> <span class=\"token comment\">// person1</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"闭包终了解","date":"2022-02-10T02:42:50.000Z","_content":"\n闭包这个话题，在前端的学习中始终摆脱不掉，我看书，视频学习闭包多次的情况下，终于把闭包弄明白了。\n\n<!--more-->\n\n闭包，在我的理解下，就是函数内部访问外部的变量，这样就形成了闭包，js 整个开发环境其实也算一个大闭包，防抖节流中也使用到了闭包这个概念。\n\n在这里贴一个很有意思的闭包题，当时困扰了我很长时间。\n\n来自《JavaScript 重难点实例精讲》\n\n```js\n// 第一个foo()函数\nfunction foo(a, b) {\n  console.log(b);\n  return {\n    // 第二个foo()函数\n    foo: function (c) {\n      // 第三个foo()函数\n      return foo(c, a);\n    }\n  };\n}\nlet x = foo(0);\nx.foo(1); // 0\nx.foo(2); // 0\nx.foo(3); // 0\nlet y = foo(0).foo(1).foo(2).foo(3);\nvar z = foo(0).foo(1);\nz.foo(2);\nz.foo(3);\n```\n\n在第一个 x=foo(0)里，0 已经被存储到 a 中，返回一个对象，在 x.foo(1)中，虽然传入了新值，但是传递给的是 c 中，上一次的 a 值已经被默认定义为 0，所以打印 0，下面 x.foo(2)，x.foo(3)同理，也打印 0。\n\n第二个值中的 y 是进行链式调用，所以第二个值一直在被重新赋值，所以打印结果为 0 1 2\n\n第三个值中的 z 相当于 x y 的混合，在进行赋值之后又进行了一次链式调用，因此该值结果为 0 1 1\n","source":"_posts/2022-02-10-闭包终了解.md","raw":"---\ntitle: 闭包终了解\ndate: 2022-02-10 10:42:50\ntags:\n\t\t\t- 'JavaScript'\n---\n\n闭包这个话题，在前端的学习中始终摆脱不掉，我看书，视频学习闭包多次的情况下，终于把闭包弄明白了。\n\n<!--more-->\n\n闭包，在我的理解下，就是函数内部访问外部的变量，这样就形成了闭包，js 整个开发环境其实也算一个大闭包，防抖节流中也使用到了闭包这个概念。\n\n在这里贴一个很有意思的闭包题，当时困扰了我很长时间。\n\n来自《JavaScript 重难点实例精讲》\n\n```js\n// 第一个foo()函数\nfunction foo(a, b) {\n  console.log(b);\n  return {\n    // 第二个foo()函数\n    foo: function (c) {\n      // 第三个foo()函数\n      return foo(c, a);\n    }\n  };\n}\nlet x = foo(0);\nx.foo(1); // 0\nx.foo(2); // 0\nx.foo(3); // 0\nlet y = foo(0).foo(1).foo(2).foo(3);\nvar z = foo(0).foo(1);\nz.foo(2);\nz.foo(3);\n```\n\n在第一个 x=foo(0)里，0 已经被存储到 a 中，返回一个对象，在 x.foo(1)中，虽然传入了新值，但是传递给的是 c 中，上一次的 a 值已经被默认定义为 0，所以打印 0，下面 x.foo(2)，x.foo(3)同理，也打印 0。\n\n第二个值中的 y 是进行链式调用，所以第二个值一直在被重新赋值，所以打印结果为 0 1 2\n\n第三个值中的 z 相当于 x y 的混合，在进行赋值之后又进行了一次链式调用，因此该值结果为 0 1 1\n","slug":"闭包终了解","published":1,"updated":"2022-02-10T03:23:31.305Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs0r00021krq2e7k1iwy","content":"<p>闭包这个话题，在前端的学习中始终摆脱不掉，我看书，视频学习闭包多次的情况下，终于把闭包弄明白了。</p>\n<a id=\"more\"></a>\n\n<p>闭包，在我的理解下，就是函数内部访问外部的变量，这样就形成了闭包，js 整个开发环境其实也算一个大闭包，防抖节流中也使用到了闭包这个概念。</p>\n<p>在这里贴一个很有意思的闭包题，当时困扰了我很长时间。</p>\n<p>来自《JavaScript 重难点实例精讲》</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 第一个foo()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 第二个foo()函数</span>\n    <span class=\"token function-variable function\">foo</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 第三个foo()函数</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\n<span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> z <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nz<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nz<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在第一个 x=foo(0)里，0 已经被存储到 a 中，返回一个对象，在 x.foo(1)中，虽然传入了新值，但是传递给的是 c 中，上一次的 a 值已经被默认定义为 0，所以打印 0，下面 x.foo(2)，x.foo(3)同理，也打印 0。</p>\n<p>第二个值中的 y 是进行链式调用，所以第二个值一直在被重新赋值，所以打印结果为 0 1 2</p>\n<p>第三个值中的 z 相当于 x y 的混合，在进行赋值之后又进行了一次链式调用，因此该值结果为 0 1 1</p>\n","site":{"data":{}},"excerpt":"<p>闭包这个话题，在前端的学习中始终摆脱不掉，我看书，视频学习闭包多次的情况下，终于把闭包弄明白了。</p>","more":"<p>闭包，在我的理解下，就是函数内部访问外部的变量，这样就形成了闭包，js 整个开发环境其实也算一个大闭包，防抖节流中也使用到了闭包这个概念。</p>\n<p>在这里贴一个很有意思的闭包题，当时困扰了我很长时间。</p>\n<p>来自《JavaScript 重难点实例精讲》</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 第一个foo()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 第二个foo()函数</span>\n    <span class=\"token function-variable function\">foo</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 第三个foo()函数</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\nx<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0</span>\n<span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> z <span class=\"token operator\">=</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nz<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nz<span class=\"token punctuation\">.</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在第一个 x=foo(0)里，0 已经被存储到 a 中，返回一个对象，在 x.foo(1)中，虽然传入了新值，但是传递给的是 c 中，上一次的 a 值已经被默认定义为 0，所以打印 0，下面 x.foo(2)，x.foo(3)同理，也打印 0。</p>\n<p>第二个值中的 y 是进行链式调用，所以第二个值一直在被重新赋值，所以打印结果为 0 1 2</p>\n<p>第三个值中的 z 相当于 x y 的混合，在进行赋值之后又进行了一次链式调用，因此该值结果为 0 1 1</p>"},{"title":"配置vue单元测试","date":"2022-04-17T05:36:54.000Z","_content":"\n# 配置`vue/test-utils`\n\n<!--more-->\n\n配置test-utils有两种方式\n\n1. 第一种是在已创建好的vue项目里使用\n\n   ```shell\n   vue add test-utils\n   ```\n\n   使用该命令之后，vue会自动下载依赖，并且给出一个组件测试的例子。\n\n2. 手动配置\n\n   首先需要下载依赖，注意一点，在vue2中，需要下载@vue/test-utils@1 版本，在vue3中在下载默认版本即可，本文默认下载vue2中的依赖包。\n\n   ```shell\n   npm i -D @babel/preset-env @vue/cli-plugin-unit-jest @vue/vue2-jest babel-core@7.0.0-bridge.0 babel-jest jest jest-serializer-vue vue-jest\n   ```\n\n   下载完依赖以后，需要在babel.config.js中加入设置\n\n   ```js\n   {\n     \"presets\": [\"@babel/preset-env\"]\n   }\n   ```\n\n   然后在jest.config.js中增加如下设置\n\n   ```js\n   module.exports = {\n     //use jsdom environment since jest v27\n     testEnvironment: 'jsdom',\n     // 表示是否应该在运行期间报告每个单独的测试。所有的错误在执行后仍然会显示在底部。注意，如果只有一个测试文件在运行，它将默认为 \"true\"。   \n     verbose: true,\n     // 这个选项设置了jsdom环境的URL。它反映在诸如location.href等属性中。\n     testURL: 'http://localhost/',\n     // 告诉jest需要解析的文件\n     moduleFileExtensions: ['js', 'ts', 'json', 'vue'],\n     // 告诉jest去哪里找模块资源，同webpack中的modules\n     moduleDirectories: ['src', 'node_modules'],\n     // 告诉jest针对不同类型的文件如何转义\n     transform: {\n       '.*\\\\.(vue)$': 'vue-jest',\n       '.*\\\\.(js)$': 'babel-jest'\n     },\n     // 告诉jest在编辑的过程中可以忽略哪些文件，默认为node_modules下的所有文件\n     transformIgnorePatterns: ['<rootDir>/node_modules/'],\n     // 别名，同webpack中的alias\n     moduleNameMapper: {\n       '^@/(.*)$': '<rootDir>/src/$1'\n     },\n     // 快照的序列化工具\n     snapshotSerializers: ['jest-serializer-vue'],\n     // 告诉jest去哪里找我们编写的测试文件\n     testMatch: [\n       '**/tests/unit/**/*.spec.(js|jsx|ts|tsx)',\n       '**/__tests__/unit/*.(spec|test).(js|jsx|ts|tsx)'\n     ]\n     // 在执行测试用例之前需要先执行的文件\n     // setupFiles: ['jest-canvas-mock']\n   }\n   ```\n\n   在配置完如上的这些配置以后，就可以在test/unit文件或者__tests/unit下编写单元测试。","source":"_posts/2022-04-17-配置vue单元测试.md","raw":"---\ntitle: 配置vue单元测试\ndate: 2022-04-17 13:36:54\ntags:\n\t\t- 'vue'\n---\n\n# 配置`vue/test-utils`\n\n<!--more-->\n\n配置test-utils有两种方式\n\n1. 第一种是在已创建好的vue项目里使用\n\n   ```shell\n   vue add test-utils\n   ```\n\n   使用该命令之后，vue会自动下载依赖，并且给出一个组件测试的例子。\n\n2. 手动配置\n\n   首先需要下载依赖，注意一点，在vue2中，需要下载@vue/test-utils@1 版本，在vue3中在下载默认版本即可，本文默认下载vue2中的依赖包。\n\n   ```shell\n   npm i -D @babel/preset-env @vue/cli-plugin-unit-jest @vue/vue2-jest babel-core@7.0.0-bridge.0 babel-jest jest jest-serializer-vue vue-jest\n   ```\n\n   下载完依赖以后，需要在babel.config.js中加入设置\n\n   ```js\n   {\n     \"presets\": [\"@babel/preset-env\"]\n   }\n   ```\n\n   然后在jest.config.js中增加如下设置\n\n   ```js\n   module.exports = {\n     //use jsdom environment since jest v27\n     testEnvironment: 'jsdom',\n     // 表示是否应该在运行期间报告每个单独的测试。所有的错误在执行后仍然会显示在底部。注意，如果只有一个测试文件在运行，它将默认为 \"true\"。   \n     verbose: true,\n     // 这个选项设置了jsdom环境的URL。它反映在诸如location.href等属性中。\n     testURL: 'http://localhost/',\n     // 告诉jest需要解析的文件\n     moduleFileExtensions: ['js', 'ts', 'json', 'vue'],\n     // 告诉jest去哪里找模块资源，同webpack中的modules\n     moduleDirectories: ['src', 'node_modules'],\n     // 告诉jest针对不同类型的文件如何转义\n     transform: {\n       '.*\\\\.(vue)$': 'vue-jest',\n       '.*\\\\.(js)$': 'babel-jest'\n     },\n     // 告诉jest在编辑的过程中可以忽略哪些文件，默认为node_modules下的所有文件\n     transformIgnorePatterns: ['<rootDir>/node_modules/'],\n     // 别名，同webpack中的alias\n     moduleNameMapper: {\n       '^@/(.*)$': '<rootDir>/src/$1'\n     },\n     // 快照的序列化工具\n     snapshotSerializers: ['jest-serializer-vue'],\n     // 告诉jest去哪里找我们编写的测试文件\n     testMatch: [\n       '**/tests/unit/**/*.spec.(js|jsx|ts|tsx)',\n       '**/__tests__/unit/*.(spec|test).(js|jsx|ts|tsx)'\n     ]\n     // 在执行测试用例之前需要先执行的文件\n     // setupFiles: ['jest-canvas-mock']\n   }\n   ```\n\n   在配置完如上的这些配置以后，就可以在test/unit文件或者__tests/unit下编写单元测试。","slug":"配置vue单元测试","published":1,"updated":"2022-04-17T05:37:47.146Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs0t00041krq6kezgy7o","content":"<h1 id=\"配置vue-test-utils\"><a href=\"#配置vue-test-utils\" class=\"headerlink\" title=\"配置vue/test-utils\"></a>配置<code>vue/test-utils</code></h1><a id=\"more\"></a>\n\n<p>配置test-utils有两种方式</p>\n<ol>\n<li><p>第一种是在已创建好的vue项目里使用</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">vue add test-utils<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>使用该命令之后，vue会自动下载依赖，并且给出一个组件测试的例子。</p>\n</li>\n<li><p>手动配置</p>\n<p>首先需要下载依赖，注意一点，在vue2中，需要下载@vue/test-utils@1 版本，在vue3中在下载默认版本即可，本文默认下载vue2中的依赖包。</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">npm i -D @babel&#x2F;preset-env @vue&#x2F;cli-plugin-unit-jest @vue&#x2F;vue2-jest babel-core@7.0.0-bridge.0 babel-jest jest jest-serializer-vue vue-jest<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>下载完依赖以后，需要在babel.config.js中加入设置</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>然后在jest.config.js中增加如下设置</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//use jsdom environment since jest v27</span>\n  testEnvironment<span class=\"token operator\">:</span> <span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 表示是否应该在运行期间报告每个单独的测试。所有的错误在执行后仍然会显示在底部。注意，如果只有一个测试文件在运行，它将默认为 \"true\"。   </span>\n  verbose<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 这个选项设置了jsdom环境的URL。它反映在诸如location.href等属性中。</span>\n  testURL<span class=\"token operator\">:</span> <span class=\"token string\">'http://localhost/'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest需要解析的文件</span>\n  moduleFileExtensions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest去哪里找模块资源，同webpack中的modules</span>\n  moduleDirectories<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest针对不同类型的文件如何转义</span>\n  transform<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string\">'.*\\\\.(vue)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'vue-jest'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'.*\\\\.(js)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-jest'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest在编辑的过程中可以忽略哪些文件，默认为node_modules下的所有文件</span>\n  transformIgnorePatterns<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'&lt;rootDir>/node_modules/'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 别名，同webpack中的alias</span>\n  moduleNameMapper<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string\">'^@/(.*)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;rootDir>/src/$1'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 快照的序列化工具</span>\n  snapshotSerializers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'jest-serializer-vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest去哪里找我们编写的测试文件</span>\n  testMatch<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'**/tests/unit/**/*.spec.(js|jsx|ts|tsx)'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'**/__tests__/unit/*.(spec|test).(js|jsx|ts|tsx)'</span>\n  <span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">// 在执行测试用例之前需要先执行的文件</span>\n  <span class=\"token comment\">// setupFiles: ['jest-canvas-mock']</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在配置完如上的这些配置以后，就可以在test/unit文件或者__tests/unit下编写单元测试。</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<h1 id=\"配置vue-test-utils\"><a href=\"#配置vue-test-utils\" class=\"headerlink\" title=\"配置vue/test-utils\"></a>配置<code>vue/test-utils</code></h1>","more":"<p>配置test-utils有两种方式</p>\n<ol>\n<li><p>第一种是在已创建好的vue项目里使用</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">vue add test-utils<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>使用该命令之后，vue会自动下载依赖，并且给出一个组件测试的例子。</p>\n</li>\n<li><p>手动配置</p>\n<p>首先需要下载依赖，注意一点，在vue2中，需要下载@vue/test-utils@1 版本，在vue3中在下载默认版本即可，本文默认下载vue2中的依赖包。</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">npm i -D @babel&#x2F;preset-env @vue&#x2F;cli-plugin-unit-jest @vue&#x2F;vue2-jest babel-core@7.0.0-bridge.0 babel-jest jest jest-serializer-vue vue-jest<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>下载完依赖以后，需要在babel.config.js中加入设置</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>然后在jest.config.js中增加如下设置</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//use jsdom environment since jest v27</span>\n  testEnvironment<span class=\"token operator\">:</span> <span class=\"token string\">'jsdom'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 表示是否应该在运行期间报告每个单独的测试。所有的错误在执行后仍然会显示在底部。注意，如果只有一个测试文件在运行，它将默认为 \"true\"。   </span>\n  verbose<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 这个选项设置了jsdom环境的URL。它反映在诸如location.href等属性中。</span>\n  testURL<span class=\"token operator\">:</span> <span class=\"token string\">'http://localhost/'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest需要解析的文件</span>\n  moduleFileExtensions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ts'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest去哪里找模块资源，同webpack中的modules</span>\n  moduleDirectories<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest针对不同类型的文件如何转义</span>\n  transform<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string\">'.*\\\\.(vue)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'vue-jest'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'.*\\\\.(js)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-jest'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest在编辑的过程中可以忽略哪些文件，默认为node_modules下的所有文件</span>\n  transformIgnorePatterns<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'&lt;rootDir>/node_modules/'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 别名，同webpack中的alias</span>\n  moduleNameMapper<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token string\">'^@/(.*)$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;rootDir>/src/$1'</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 快照的序列化工具</span>\n  snapshotSerializers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'jest-serializer-vue'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 告诉jest去哪里找我们编写的测试文件</span>\n  testMatch<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'**/tests/unit/**/*.spec.(js|jsx|ts|tsx)'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'**/__tests__/unit/*.(spec|test).(js|jsx|ts|tsx)'</span>\n  <span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">// 在执行测试用例之前需要先执行的文件</span>\n  <span class=\"token comment\">// setupFiles: ['jest-canvas-mock']</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在配置完如上的这些配置以后，就可以在test/unit文件或者__tests/unit下编写单元测试。</p>\n</li>\n</ol>"},{"title":"nginx小记","date":"2022-04-12T07:46:05.000Z","_content":"\n## `nginx`代理配置小记\n\n<!--more-->\n\n在进行月度考核作业的时候，由于需要使用天气`api`进行数据查询，因此在网上找到了[气象大数据平台](http://www.weatherdt.com/)这个网站，但是在使用该网站的 api 的时候，出现了跨域问题，一般情况下在使用 Jquery 封装的 ajax 请求时，如果要兼容 IE 低版本，那么需要加上`jQuery.support.cors = true;`，该网站在服务端设置了跨域限制问题，因此解决办法就改为了使用`nginx`反向代理实现 http 请求。\n\nnginx 配置时，需要在[nginx 官网](https://www.nginx.com/)下载 nginx，然后解压到本地硬盘中，在 nginx 的文件夹中，找到 conf 文件夹，使用记事本打开 nginx.conf 对里面的内容进行编辑，这次 nginx 的代理配置如下。\n\n### 重中之重，nginx 每个指令后必须有分号结束，否则 nginx 服务无法成功启动。\n\n```nginx\n#user  nobody; # 配置用户或者组，默认为nobody\nworker_processes  1;  # 允许生成的进程数，默认为1\n#全局块，配置影响nginx全局的指令。一般有运行nginx服务器的用户组，nginx进程pid存放路径，日志存放路径，配置文件引入，允许生成worker process数等。\n# 指定日志路径，日志级别\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n# 指定nginx进程文件存放地址\n#pid        logs/nginx.pid;\n\n# 配置影响nginx服务器或与用户的网络连接\nevents {\n    worker_connections  1024; # 最大连接数，默认为512\n}\n\n\nhttp {\n    include       mime.types;  #文件扩展名与文件类型映射表\n    default_type  application/octet-stream; # 默认文件类型，默认为text/plain\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on; # 允许sendfile方式传输文件，默认为off，可以在http块，server块，location块\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65; #连接超时时间，默认为75s,可以在http块，server块，location块\n\n    #gzip  on;\n\t# 一般情况下 http下可以用多个server进行配置\n    server {\n        listen       5500; # 监听端口\n        server_name  localhost; # 监听地址\n        root E:\\demo\\weather-plugin\\weatherPlugin; # 静态资源根目录\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\t    #查找在静态资源根目录中的对应文件\n        #$uri 查找该文件夹一级目录中是否有该文件\n        #$uri/ 查找该文件夹二级目录中是否有该文件\n        #@router 可以解释为@router默认会去读取前端的首页\n        location / {\n\t\t   try_files $uri $uri/ @router;\n            index  index.html index.htm;\n        }\n        # 使用正则表达式匹配路径+重写uri路径\n        location ^~ /common/ {\n             proxy_pass 'http://api.weatherdt.com/common/'; # 反向代理的地址\n             # 一些反向代理的配置(可选择性配置)\n             # 用于设置发送到后端服务器的requset的请求头\n\t\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #后端的Web服务器可以通过X-Forwarded-For获取用户真实IP\n\t\t\tproxy_set_header X-Forwarded-Proto $scheme; # 用来确定客户端与代理服务器或者负载均衡服务器之间的连接所采用的传输协议（HTTP 或HTTPS）后端可以通过读取header X-Forwarded-Proto来获得对应的scheme。\n\t\t\tproxy_set_header X-Forwarded-Port $server_port;  #表示浏览器在访问时的实际端口时，如nginx提供http服务，则为80，如果是https，则为 443。如果为标准服务，此项可以不用设置,仅用于非标准端口时才使用\n             # nginx使用Proxy模块时，默认的读取超时时间是60s\n\t\t\tproxy_connect_timeout 300s; #后端服务器连接的超时时间_发起握手等候响应超时时间\n\t\t\tproxy_send_timeout 300s; # 后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据\n\t\t\tproxy_read_timeout 300s; # 连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）\n        }\n\t\t# 配置@router的路径进行重定向\n\t\tlocation @router {\n\t\t\trewrite ^.*$ /index.html last;\n\t\t}\n\t    # 在部署多套系统时，使用nginx反向代理服务。如果这时候服务突然宕机了，或者由于服务重新部署导致nginx代理的地址访问失败，会直接在用户的浏览器上显示nginx自带错误页面，如：50x.html,因服务问题导致错误，重定向到静态页面。\n        location = /50x.html {\n            root   html;\n        }\n\n    }\n\n}\n```\n","source":"_posts/2022-04-12-nginx小记.md","raw":"---\ntitle: nginx小记\ndate: 2022-04-12 15:46:05\ntags:\n\t- 'nginx'\n---\n\n## `nginx`代理配置小记\n\n<!--more-->\n\n在进行月度考核作业的时候，由于需要使用天气`api`进行数据查询，因此在网上找到了[气象大数据平台](http://www.weatherdt.com/)这个网站，但是在使用该网站的 api 的时候，出现了跨域问题，一般情况下在使用 Jquery 封装的 ajax 请求时，如果要兼容 IE 低版本，那么需要加上`jQuery.support.cors = true;`，该网站在服务端设置了跨域限制问题，因此解决办法就改为了使用`nginx`反向代理实现 http 请求。\n\nnginx 配置时，需要在[nginx 官网](https://www.nginx.com/)下载 nginx，然后解压到本地硬盘中，在 nginx 的文件夹中，找到 conf 文件夹，使用记事本打开 nginx.conf 对里面的内容进行编辑，这次 nginx 的代理配置如下。\n\n### 重中之重，nginx 每个指令后必须有分号结束，否则 nginx 服务无法成功启动。\n\n```nginx\n#user  nobody; # 配置用户或者组，默认为nobody\nworker_processes  1;  # 允许生成的进程数，默认为1\n#全局块，配置影响nginx全局的指令。一般有运行nginx服务器的用户组，nginx进程pid存放路径，日志存放路径，配置文件引入，允许生成worker process数等。\n# 指定日志路径，日志级别\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n# 指定nginx进程文件存放地址\n#pid        logs/nginx.pid;\n\n# 配置影响nginx服务器或与用户的网络连接\nevents {\n    worker_connections  1024; # 最大连接数，默认为512\n}\n\n\nhttp {\n    include       mime.types;  #文件扩展名与文件类型映射表\n    default_type  application/octet-stream; # 默认文件类型，默认为text/plain\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on; # 允许sendfile方式传输文件，默认为off，可以在http块，server块，location块\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65; #连接超时时间，默认为75s,可以在http块，server块，location块\n\n    #gzip  on;\n\t# 一般情况下 http下可以用多个server进行配置\n    server {\n        listen       5500; # 监听端口\n        server_name  localhost; # 监听地址\n        root E:\\demo\\weather-plugin\\weatherPlugin; # 静态资源根目录\n\n        #charset koi8-r;\n\n        #access_log  logs/host.access.log  main;\n\t    #查找在静态资源根目录中的对应文件\n        #$uri 查找该文件夹一级目录中是否有该文件\n        #$uri/ 查找该文件夹二级目录中是否有该文件\n        #@router 可以解释为@router默认会去读取前端的首页\n        location / {\n\t\t   try_files $uri $uri/ @router;\n            index  index.html index.htm;\n        }\n        # 使用正则表达式匹配路径+重写uri路径\n        location ^~ /common/ {\n             proxy_pass 'http://api.weatherdt.com/common/'; # 反向代理的地址\n             # 一些反向代理的配置(可选择性配置)\n             # 用于设置发送到后端服务器的requset的请求头\n\t\t\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; #后端的Web服务器可以通过X-Forwarded-For获取用户真实IP\n\t\t\tproxy_set_header X-Forwarded-Proto $scheme; # 用来确定客户端与代理服务器或者负载均衡服务器之间的连接所采用的传输协议（HTTP 或HTTPS）后端可以通过读取header X-Forwarded-Proto来获得对应的scheme。\n\t\t\tproxy_set_header X-Forwarded-Port $server_port;  #表示浏览器在访问时的实际端口时，如nginx提供http服务，则为80，如果是https，则为 443。如果为标准服务，此项可以不用设置,仅用于非标准端口时才使用\n             # nginx使用Proxy模块时，默认的读取超时时间是60s\n\t\t\tproxy_connect_timeout 300s; #后端服务器连接的超时时间_发起握手等候响应超时时间\n\t\t\tproxy_send_timeout 300s; # 后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据\n\t\t\tproxy_read_timeout 300s; # 连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）\n        }\n\t\t# 配置@router的路径进行重定向\n\t\tlocation @router {\n\t\t\trewrite ^.*$ /index.html last;\n\t\t}\n\t    # 在部署多套系统时，使用nginx反向代理服务。如果这时候服务突然宕机了，或者由于服务重新部署导致nginx代理的地址访问失败，会直接在用户的浏览器上显示nginx自带错误页面，如：50x.html,因服务问题导致错误，重定向到静态页面。\n        location = /50x.html {\n            root   html;\n        }\n\n    }\n\n}\n```\n","slug":"nginx小记","published":1,"updated":"2022-04-17T05:36:29.325Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs0v00061krqh2681i0s","content":"<h2 id=\"nginx代理配置小记\"><a href=\"#nginx代理配置小记\" class=\"headerlink\" title=\"nginx代理配置小记\"></a><code>nginx</code>代理配置小记</h2><a id=\"more\"></a>\n\n<p>在进行月度考核作业的时候，由于需要使用天气<code>api</code>进行数据查询，因此在网上找到了<a href=\"http://www.weatherdt.com/\">气象大数据平台</a>这个网站，但是在使用该网站的 api 的时候，出现了跨域问题，一般情况下在使用 Jquery 封装的 ajax 请求时，如果要兼容 IE 低版本，那么需要加上<code>jQuery.support.cors = true;</code>，该网站在服务端设置了跨域限制问题，因此解决办法就改为了使用<code>nginx</code>反向代理实现 http 请求。</p>\n<p>nginx 配置时，需要在<a href=\"https://www.nginx.com/\">nginx 官网</a>下载 nginx，然后解压到本地硬盘中，在 nginx 的文件夹中，找到 conf 文件夹，使用记事本打开 nginx.conf 对里面的内容进行编辑，这次 nginx 的代理配置如下。</p>\n<h3 id=\"重中之重，nginx-每个指令后必须有分号结束，否则-nginx-服务无法成功启动。\"><a href=\"#重中之重，nginx-每个指令后必须有分号结束，否则-nginx-服务无法成功启动。\" class=\"headerlink\" title=\"重中之重，nginx 每个指令后必须有分号结束，否则 nginx 服务无法成功启动。\"></a>重中之重，nginx 每个指令后必须有分号结束，否则 nginx 服务无法成功启动。</h3><pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\"><span class=\"token comment\">#user  nobody; # 配置用户或者组，默认为nobody</span>\n<span class=\"token keyword\">worker_processes</span>  <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\"># 允许生成的进程数，默认为1</span>\n<span class=\"token comment\">#全局块，配置影响nginx全局的指令。一般有运行nginx服务器的用户组，nginx进程pid存放路径，日志存放路径，配置文件引入，允许生成worker process数等。</span>\n<span class=\"token comment\"># 指定日志路径，日志级别</span>\n<span class=\"token comment\">#error_log  logs/error.log;</span>\n<span class=\"token comment\">#error_log  logs/error.log  notice;</span>\n<span class=\"token comment\">#error_log  logs/error.log  info;</span>\n<span class=\"token comment\"># 指定nginx进程文件存放地址</span>\n<span class=\"token comment\">#pid        logs/nginx.pid;</span>\n\n<span class=\"token comment\"># 配置影响nginx服务器或与用户的网络连接</span>\n<span class=\"token keyword\">events</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">worker_connections</span>  <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 最大连接数，默认为512</span>\n<span class=\"token punctuation\">&#125;</span>\n\n\n<span class=\"token keyword\">http</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">include</span>       mime<span class=\"token punctuation\">.</span><span class=\"token keyword\">types</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">#文件扩展名与文件类型映射表</span>\n    <span class=\"token keyword\">default_type</span>  application<span class=\"token operator\">/</span>octet<span class=\"token operator\">-</span>stream<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 默认文件类型，默认为text/plain</span>\n\n    <span class=\"token comment\">#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '</span>\n    <span class=\"token comment\">#                  '$status $body_bytes_sent \"$http_referer\" '</span>\n    <span class=\"token comment\">#                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';</span>\n\n    <span class=\"token comment\">#access_log  logs/access.log  main;</span>\n\n    <span class=\"token keyword\">sendfile</span>        on<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 允许sendfile方式传输文件，默认为off，可以在http块，server块，location块</span>\n    <span class=\"token comment\">#tcp_nopush     on;</span>\n\n    <span class=\"token comment\">#keepalive_timeout  0;</span>\n    <span class=\"token keyword\">keepalive_timeout</span>  <span class=\"token number\">65</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#连接超时时间，默认为75s,可以在http块，server块，location块</span>\n\n    <span class=\"token comment\">#gzip  on;</span>\n\t<span class=\"token comment\"># 一般情况下 http下可以用多个server进行配置</span>\n    <span class=\"token keyword\">server</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">listen</span>       <span class=\"token number\">5500</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 监听端口</span>\n        <span class=\"token keyword\">server_name</span>  localhost<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 监听地址</span>\n        <span class=\"token keyword\">root</span> E<span class=\"token punctuation\">:</span>\\demo\\weather<span class=\"token operator\">-</span>plugin\\weatherPlugin<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 静态资源根目录</span>\n\n        <span class=\"token comment\">#charset koi8-r;</span>\n\n        <span class=\"token comment\">#access_log  logs/host.access.log  main;</span>\n\t    <span class=\"token comment\">#查找在静态资源根目录中的对应文件</span>\n        <span class=\"token comment\">#$uri 查找该文件夹一级目录中是否有该文件</span>\n        <span class=\"token comment\">#$uri/ 查找该文件夹二级目录中是否有该文件</span>\n        <span class=\"token comment\">#@router 可以解释为@router默认会去读取前端的首页</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">&#123;</span>\n\t\t   <span class=\"token keyword\">try_files</span> <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span><span class=\"token operator\">/</span> @router<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">index</span>  <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>htm<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token comment\"># 使用正则表达式匹配路径+重写uri路径</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">^</span><span class=\"token operator\">~</span> <span class=\"token operator\">/</span>common<span class=\"token operator\">/</span> <span class=\"token punctuation\">&#123;</span>\n             <span class=\"token keyword\">proxy_pass</span> <span class=\"token string\">'http://api.weatherdt.com/common/'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 反向代理的地址</span>\n             <span class=\"token comment\"># 一些反向代理的配置(可选择性配置)</span>\n             <span class=\"token comment\"># 用于设置发送到后端服务器的requset的请求头</span>\n\t\t\t<span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#后端的Web服务器可以通过X-Forwarded-For获取用户真实IP</span>\n\t\t\t<span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>Proto <span class=\"token variable\">$scheme</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 用来确定客户端与代理服务器或者负载均衡服务器之间的连接所采用的传输协议（HTTP 或HTTPS）后端可以通过读取header X-Forwarded-Proto来获得对应的scheme。</span>\n\t\t\t<span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>Port <span class=\"token variable\">$server_port</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">#表示浏览器在访问时的实际端口时，如nginx提供http服务，则为80，如果是https，则为 443。如果为标准服务，此项可以不用设置,仅用于非标准端口时才使用</span>\n             <span class=\"token comment\"># nginx使用Proxy模块时，默认的读取超时时间是60s</span>\n\t\t\t<span class=\"token keyword\">proxy_connect_timeout</span> <span class=\"token number\">300</span>s<span class=\"token punctuation\">;</span> <span class=\"token comment\">#后端服务器连接的超时时间_发起握手等候响应超时时间</span>\n\t\t\t<span class=\"token keyword\">proxy_send_timeout</span> <span class=\"token number\">300</span>s<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据</span>\n\t\t\t<span class=\"token keyword\">proxy_read_timeout</span> <span class=\"token number\">300</span>s<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）</span>\n        <span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token comment\"># 配置@router的路径进行重定向</span>\n\t\t<span class=\"token keyword\">location</span> @router <span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">rewrite</span> <span class=\"token operator\">^</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>$ <span class=\"token operator\">/</span><span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html last<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t    <span class=\"token comment\"># 在部署多套系统时，使用nginx反向代理服务。如果这时候服务突然宕机了，或者由于服务重新部署导致nginx代理的地址访问失败，会直接在用户的浏览器上显示nginx自带错误页面，如：50x.html,因服务问题导致错误，重定向到静态页面。</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">=</span> <span class=\"token operator\">/</span><span class=\"token number\">50</span>x<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">root</span>   html<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","site":{"data":{}},"excerpt":"<h2 id=\"nginx代理配置小记\"><a href=\"#nginx代理配置小记\" class=\"headerlink\" title=\"nginx代理配置小记\"></a><code>nginx</code>代理配置小记</h2>","more":"<p>在进行月度考核作业的时候，由于需要使用天气<code>api</code>进行数据查询，因此在网上找到了<a href=\"http://www.weatherdt.com/\">气象大数据平台</a>这个网站，但是在使用该网站的 api 的时候，出现了跨域问题，一般情况下在使用 Jquery 封装的 ajax 请求时，如果要兼容 IE 低版本，那么需要加上<code>jQuery.support.cors = true;</code>，该网站在服务端设置了跨域限制问题，因此解决办法就改为了使用<code>nginx</code>反向代理实现 http 请求。</p>\n<p>nginx 配置时，需要在<a href=\"https://www.nginx.com/\">nginx 官网</a>下载 nginx，然后解压到本地硬盘中，在 nginx 的文件夹中，找到 conf 文件夹，使用记事本打开 nginx.conf 对里面的内容进行编辑，这次 nginx 的代理配置如下。</p>\n<h3 id=\"重中之重，nginx-每个指令后必须有分号结束，否则-nginx-服务无法成功启动。\"><a href=\"#重中之重，nginx-每个指令后必须有分号结束，否则-nginx-服务无法成功启动。\" class=\"headerlink\" title=\"重中之重，nginx 每个指令后必须有分号结束，否则 nginx 服务无法成功启动。\"></a>重中之重，nginx 每个指令后必须有分号结束，否则 nginx 服务无法成功启动。</h3><pre class=\"line-numbers language-nginx\" data-language=\"nginx\"><code class=\"language-nginx\"><span class=\"token comment\">#user  nobody; # 配置用户或者组，默认为nobody</span>\n<span class=\"token keyword\">worker_processes</span>  <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\"># 允许生成的进程数，默认为1</span>\n<span class=\"token comment\">#全局块，配置影响nginx全局的指令。一般有运行nginx服务器的用户组，nginx进程pid存放路径，日志存放路径，配置文件引入，允许生成worker process数等。</span>\n<span class=\"token comment\"># 指定日志路径，日志级别</span>\n<span class=\"token comment\">#error_log  logs/error.log;</span>\n<span class=\"token comment\">#error_log  logs/error.log  notice;</span>\n<span class=\"token comment\">#error_log  logs/error.log  info;</span>\n<span class=\"token comment\"># 指定nginx进程文件存放地址</span>\n<span class=\"token comment\">#pid        logs/nginx.pid;</span>\n\n<span class=\"token comment\"># 配置影响nginx服务器或与用户的网络连接</span>\n<span class=\"token keyword\">events</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">worker_connections</span>  <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 最大连接数，默认为512</span>\n<span class=\"token punctuation\">&#125;</span>\n\n\n<span class=\"token keyword\">http</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">include</span>       mime<span class=\"token punctuation\">.</span><span class=\"token keyword\">types</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">#文件扩展名与文件类型映射表</span>\n    <span class=\"token keyword\">default_type</span>  application<span class=\"token operator\">/</span>octet<span class=\"token operator\">-</span>stream<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 默认文件类型，默认为text/plain</span>\n\n    <span class=\"token comment\">#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '</span>\n    <span class=\"token comment\">#                  '$status $body_bytes_sent \"$http_referer\" '</span>\n    <span class=\"token comment\">#                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';</span>\n\n    <span class=\"token comment\">#access_log  logs/access.log  main;</span>\n\n    <span class=\"token keyword\">sendfile</span>        on<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 允许sendfile方式传输文件，默认为off，可以在http块，server块，location块</span>\n    <span class=\"token comment\">#tcp_nopush     on;</span>\n\n    <span class=\"token comment\">#keepalive_timeout  0;</span>\n    <span class=\"token keyword\">keepalive_timeout</span>  <span class=\"token number\">65</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#连接超时时间，默认为75s,可以在http块，server块，location块</span>\n\n    <span class=\"token comment\">#gzip  on;</span>\n\t<span class=\"token comment\"># 一般情况下 http下可以用多个server进行配置</span>\n    <span class=\"token keyword\">server</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">listen</span>       <span class=\"token number\">5500</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 监听端口</span>\n        <span class=\"token keyword\">server_name</span>  localhost<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 监听地址</span>\n        <span class=\"token keyword\">root</span> E<span class=\"token punctuation\">:</span>\\demo\\weather<span class=\"token operator\">-</span>plugin\\weatherPlugin<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 静态资源根目录</span>\n\n        <span class=\"token comment\">#charset koi8-r;</span>\n\n        <span class=\"token comment\">#access_log  logs/host.access.log  main;</span>\n\t    <span class=\"token comment\">#查找在静态资源根目录中的对应文件</span>\n        <span class=\"token comment\">#$uri 查找该文件夹一级目录中是否有该文件</span>\n        <span class=\"token comment\">#$uri/ 查找该文件夹二级目录中是否有该文件</span>\n        <span class=\"token comment\">#@router 可以解释为@router默认会去读取前端的首页</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">&#123;</span>\n\t\t   <span class=\"token keyword\">try_files</span> <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span><span class=\"token operator\">/</span> @router<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">index</span>  <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html <span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>htm<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token comment\"># 使用正则表达式匹配路径+重写uri路径</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">^</span><span class=\"token operator\">~</span> <span class=\"token operator\">/</span>common<span class=\"token operator\">/</span> <span class=\"token punctuation\">&#123;</span>\n             <span class=\"token keyword\">proxy_pass</span> <span class=\"token string\">'http://api.weatherdt.com/common/'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 反向代理的地址</span>\n             <span class=\"token comment\"># 一些反向代理的配置(可选择性配置)</span>\n             <span class=\"token comment\"># 用于设置发送到后端服务器的requset的请求头</span>\n\t\t\t<span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">#后端的Web服务器可以通过X-Forwarded-For获取用户真实IP</span>\n\t\t\t<span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>Proto <span class=\"token variable\">$scheme</span><span class=\"token punctuation\">;</span> <span class=\"token comment\"># 用来确定客户端与代理服务器或者负载均衡服务器之间的连接所采用的传输协议（HTTP 或HTTPS）后端可以通过读取header X-Forwarded-Proto来获得对应的scheme。</span>\n\t\t\t<span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>Port <span class=\"token variable\">$server_port</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">#表示浏览器在访问时的实际端口时，如nginx提供http服务，则为80，如果是https，则为 443。如果为标准服务，此项可以不用设置,仅用于非标准端口时才使用</span>\n             <span class=\"token comment\"># nginx使用Proxy模块时，默认的读取超时时间是60s</span>\n\t\t\t<span class=\"token keyword\">proxy_connect_timeout</span> <span class=\"token number\">300</span>s<span class=\"token punctuation\">;</span> <span class=\"token comment\">#后端服务器连接的超时时间_发起握手等候响应超时时间</span>\n\t\t\t<span class=\"token keyword\">proxy_send_timeout</span> <span class=\"token number\">300</span>s<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据</span>\n\t\t\t<span class=\"token keyword\">proxy_read_timeout</span> <span class=\"token number\">300</span>s<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）</span>\n        <span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token comment\"># 配置@router的路径进行重定向</span>\n\t\t<span class=\"token keyword\">location</span> @router <span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">rewrite</span> <span class=\"token operator\">^</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>$ <span class=\"token operator\">/</span><span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html last<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t    <span class=\"token comment\"># 在部署多套系统时，使用nginx反向代理服务。如果这时候服务突然宕机了，或者由于服务重新部署导致nginx代理的地址访问失败，会直接在用户的浏览器上显示nginx自带错误页面，如：50x.html,因服务问题导致错误，重定向到静态页面。</span>\n        <span class=\"token keyword\">location</span> <span class=\"token operator\">=</span> <span class=\"token operator\">/</span><span class=\"token number\">50</span>x<span class=\"token punctuation\">.</span>html <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">root</span>   html<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"事件循环","date":"2022-02-14T01:10:21.000Z","_content":"\n## JavaScript是单线程\n\n学习及参考网址\n\n[阮一峰 JavaScript 运行机制详解：再谈Event Loop](https://www.ruanyifeng.com/blog/2014/10/event-loop.html)\n\n[MDN 并发模型与事件循环](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop)\n\nJavaScript语言的一大特点就是单线程，同一时间只能做一件事情。\n<!--more-->\n## 任务队列\n\n单线程就意味着，代码是从上向下执行的，所有任务需要进行排队，前一个任务结束的时候，下一个任务才会进行执行。\n\n因此这些任务被分为了两种：\n\n- 同步任务\n- 异步任务\n\n同步指：在主线程上进行排队的任务，只有前一个任务执行完毕，才会执行后一个任务\n\n异步指：不进入主线程，而进入任务队列的任务，只有“任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。\n\n一般情况下，任务执行可以分为三个队列\n\n| 主线程        | 微任务       | 宏任务     |\n| ------------- | ------------ | ---------- |\n| console.log() | Promise.then | setTimeout |\n|               | 接口调用     |            |\n|               |              |            |\n\n一般情况下执行顺序为：主线程 > 微任务 > 宏任务\n\n可以用几个题来将事件循环弄明白，上题！\n\n```js\nsetTimeout(function () {\n  console.log('setTimeout1')\n  new Promise(function (resolve) {\n    resolve()\n  }).then(function () {\n    new Promise(function (resolve) {\n      resolve()\n    }).then(function () {\n      console.log('then4')\n    })\n    console.log('then2')\n  })\n})\n\nnew Promise(function (resolve) {\n  console.log('promise1')\n  resolve()\n}).then(function () {\n  console.log('then1')\n})\n\nsetTimeout(function () {\n  console.log('setTimeout2')\n})\n\nconsole.log(2)\n\nqueueMicrotask(() => {\n  console.log('queueMicrotask1')\n})\n\nnew Promise(function (resolve) {\n  resolve()\n}).then(function () {\n  console.log('then3')\n})\n\n// promise1\n// 2\n// then1\n// queueMicrotask1\n// then3\n// setTimeout1\n// then2\n// then4\n// setTimeout2\n```\n\n代码执行时，由上向下依次执行，setTimeout进入宏任务队列，接着向下执行到Promise，之前我一度以为只要进入到Promise的调用时就进入了异步队列中，其实这个想法是错误的，Promise只有进入.then的时候才是进入了微任务队列，因此promise1直接输出，遇到Promise.then，进入微任务队列中进行等待，后面setTimeout再次进入宏任务队列，输出2，queueMicrotask也是微任务队列，因此进入微任务队列中，再次遇到Promise.then，进入微任务队列。因此执行顺序为目前表格所示。\n\n| 主线程  | 微任务          | 宏任务                |\n| ------- | --------------- | --------------------- |\n| promise1 | then1           | setTimeout1及之后代码 |\n| 2       | queueMicrotask1 | setTimeout2           |\n|         | then3           |                       |\n\n事件循环是JavaScript中必须学习的一部分，通过代码题将自己的基础再进行巩固。","source":"_posts/2022-02-14-事件循环.md","raw":"---\ntitle: 事件循环\ndate: 2022-02-14 09:10:21\ntags:\n\t \t - 'JavaScript'\n---\n\n## JavaScript是单线程\n\n学习及参考网址\n\n[阮一峰 JavaScript 运行机制详解：再谈Event Loop](https://www.ruanyifeng.com/blog/2014/10/event-loop.html)\n\n[MDN 并发模型与事件循环](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop)\n\nJavaScript语言的一大特点就是单线程，同一时间只能做一件事情。\n<!--more-->\n## 任务队列\n\n单线程就意味着，代码是从上向下执行的，所有任务需要进行排队，前一个任务结束的时候，下一个任务才会进行执行。\n\n因此这些任务被分为了两种：\n\n- 同步任务\n- 异步任务\n\n同步指：在主线程上进行排队的任务，只有前一个任务执行完毕，才会执行后一个任务\n\n异步指：不进入主线程，而进入任务队列的任务，只有“任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。\n\n一般情况下，任务执行可以分为三个队列\n\n| 主线程        | 微任务       | 宏任务     |\n| ------------- | ------------ | ---------- |\n| console.log() | Promise.then | setTimeout |\n|               | 接口调用     |            |\n|               |              |            |\n\n一般情况下执行顺序为：主线程 > 微任务 > 宏任务\n\n可以用几个题来将事件循环弄明白，上题！\n\n```js\nsetTimeout(function () {\n  console.log('setTimeout1')\n  new Promise(function (resolve) {\n    resolve()\n  }).then(function () {\n    new Promise(function (resolve) {\n      resolve()\n    }).then(function () {\n      console.log('then4')\n    })\n    console.log('then2')\n  })\n})\n\nnew Promise(function (resolve) {\n  console.log('promise1')\n  resolve()\n}).then(function () {\n  console.log('then1')\n})\n\nsetTimeout(function () {\n  console.log('setTimeout2')\n})\n\nconsole.log(2)\n\nqueueMicrotask(() => {\n  console.log('queueMicrotask1')\n})\n\nnew Promise(function (resolve) {\n  resolve()\n}).then(function () {\n  console.log('then3')\n})\n\n// promise1\n// 2\n// then1\n// queueMicrotask1\n// then3\n// setTimeout1\n// then2\n// then4\n// setTimeout2\n```\n\n代码执行时，由上向下依次执行，setTimeout进入宏任务队列，接着向下执行到Promise，之前我一度以为只要进入到Promise的调用时就进入了异步队列中，其实这个想法是错误的，Promise只有进入.then的时候才是进入了微任务队列，因此promise1直接输出，遇到Promise.then，进入微任务队列中进行等待，后面setTimeout再次进入宏任务队列，输出2，queueMicrotask也是微任务队列，因此进入微任务队列中，再次遇到Promise.then，进入微任务队列。因此执行顺序为目前表格所示。\n\n| 主线程  | 微任务          | 宏任务                |\n| ------- | --------------- | --------------------- |\n| promise1 | then1           | setTimeout1及之后代码 |\n| 2       | queueMicrotask1 | setTimeout2           |\n|         | then3           |                       |\n\n事件循环是JavaScript中必须学习的一部分，通过代码题将自己的基础再进行巩固。","slug":"事件循环","published":1,"updated":"2022-03-01T11:23:01.133Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs0z00081krq8bjthkfq","content":"<h2 id=\"JavaScript是单线程\"><a href=\"#JavaScript是单线程\" class=\"headerlink\" title=\"JavaScript是单线程\"></a>JavaScript是单线程</h2><p>学习及参考网址</p>\n<p><a href=\"https://www.ruanyifeng.com/blog/2014/10/event-loop.html\">阮一峰 JavaScript 运行机制详解：再谈Event Loop</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\">MDN 并发模型与事件循环</a></p>\n<p>JavaScript语言的一大特点就是单线程，同一时间只能做一件事情。</p>\n<a id=\"more\"></a>\n<h2 id=\"任务队列\"><a href=\"#任务队列\" class=\"headerlink\" title=\"任务队列\"></a>任务队列</h2><p>单线程就意味着，代码是从上向下执行的，所有任务需要进行排队，前一个任务结束的时候，下一个任务才会进行执行。</p>\n<p>因此这些任务被分为了两种：</p>\n<ul>\n<li>同步任务</li>\n<li>异步任务</li>\n</ul>\n<p>同步指：在主线程上进行排队的任务，只有前一个任务执行完毕，才会执行后一个任务</p>\n<p>异步指：不进入主线程，而进入任务队列的任务，只有“任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p>\n<p>一般情况下，任务执行可以分为三个队列</p>\n<table>\n<thead>\n<tr>\n<th>主线程</th>\n<th>微任务</th>\n<th>宏任务</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>console.log()</td>\n<td>Promise.then</td>\n<td>setTimeout</td>\n</tr>\n<tr>\n<td></td>\n<td>接口调用</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>一般情况下执行顺序为：主线程 &gt; 微任务 &gt; 宏任务</p>\n<p>可以用几个题来将事件循环弄明白，上题！</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setTimeout1'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then4'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then2'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'promise1'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setTimeout2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">queueMicrotask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'queueMicrotask1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// promise1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// then1</span>\n<span class=\"token comment\">// queueMicrotask1</span>\n<span class=\"token comment\">// then3</span>\n<span class=\"token comment\">// setTimeout1</span>\n<span class=\"token comment\">// then2</span>\n<span class=\"token comment\">// then4</span>\n<span class=\"token comment\">// setTimeout2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>代码执行时，由上向下依次执行，setTimeout进入宏任务队列，接着向下执行到Promise，之前我一度以为只要进入到Promise的调用时就进入了异步队列中，其实这个想法是错误的，Promise只有进入.then的时候才是进入了微任务队列，因此promise1直接输出，遇到Promise.then，进入微任务队列中进行等待，后面setTimeout再次进入宏任务队列，输出2，queueMicrotask也是微任务队列，因此进入微任务队列中，再次遇到Promise.then，进入微任务队列。因此执行顺序为目前表格所示。</p>\n<table>\n<thead>\n<tr>\n<th>主线程</th>\n<th>微任务</th>\n<th>宏任务</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>promise1</td>\n<td>then1</td>\n<td>setTimeout1及之后代码</td>\n</tr>\n<tr>\n<td>2</td>\n<td>queueMicrotask1</td>\n<td>setTimeout2</td>\n</tr>\n<tr>\n<td></td>\n<td>then3</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>事件循环是JavaScript中必须学习的一部分，通过代码题将自己的基础再进行巩固。</p>\n","site":{"data":{}},"excerpt":"<h2 id=\"JavaScript是单线程\"><a href=\"#JavaScript是单线程\" class=\"headerlink\" title=\"JavaScript是单线程\"></a>JavaScript是单线程</h2><p>学习及参考网址</p>\n<p><a href=\"https://www.ruanyifeng.com/blog/2014/10/event-loop.html\">阮一峰 JavaScript 运行机制详解：再谈Event Loop</a></p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop\">MDN 并发模型与事件循环</a></p>\n<p>JavaScript语言的一大特点就是单线程，同一时间只能做一件事情。</p>","more":"<h2 id=\"任务队列\"><a href=\"#任务队列\" class=\"headerlink\" title=\"任务队列\"></a>任务队列</h2><p>单线程就意味着，代码是从上向下执行的，所有任务需要进行排队，前一个任务结束的时候，下一个任务才会进行执行。</p>\n<p>因此这些任务被分为了两种：</p>\n<ul>\n<li>同步任务</li>\n<li>异步任务</li>\n</ul>\n<p>同步指：在主线程上进行排队的任务，只有前一个任务执行完毕，才会执行后一个任务</p>\n<p>异步指：不进入主线程，而进入任务队列的任务，只有“任务队列”通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p>\n<p>一般情况下，任务执行可以分为三个队列</p>\n<table>\n<thead>\n<tr>\n<th>主线程</th>\n<th>微任务</th>\n<th>宏任务</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>console.log()</td>\n<td>Promise.then</td>\n<td>setTimeout</td>\n</tr>\n<tr>\n<td></td>\n<td>接口调用</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>一般情况下执行顺序为：主线程 &gt; 微任务 &gt; 宏任务</p>\n<p>可以用几个题来将事件循环弄明白，上题！</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setTimeout1'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then4'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then2'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'promise1'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setTimeout2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">queueMicrotask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'queueMicrotask1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'then3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// promise1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// then1</span>\n<span class=\"token comment\">// queueMicrotask1</span>\n<span class=\"token comment\">// then3</span>\n<span class=\"token comment\">// setTimeout1</span>\n<span class=\"token comment\">// then2</span>\n<span class=\"token comment\">// then4</span>\n<span class=\"token comment\">// setTimeout2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>代码执行时，由上向下依次执行，setTimeout进入宏任务队列，接着向下执行到Promise，之前我一度以为只要进入到Promise的调用时就进入了异步队列中，其实这个想法是错误的，Promise只有进入.then的时候才是进入了微任务队列，因此promise1直接输出，遇到Promise.then，进入微任务队列中进行等待，后面setTimeout再次进入宏任务队列，输出2，queueMicrotask也是微任务队列，因此进入微任务队列中，再次遇到Promise.then，进入微任务队列。因此执行顺序为目前表格所示。</p>\n<table>\n<thead>\n<tr>\n<th>主线程</th>\n<th>微任务</th>\n<th>宏任务</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>promise1</td>\n<td>then1</td>\n<td>setTimeout1及之后代码</td>\n</tr>\n<tr>\n<td>2</td>\n<td>queueMicrotask1</td>\n<td>setTimeout2</td>\n</tr>\n<tr>\n<td></td>\n<td>then3</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>事件循环是JavaScript中必须学习的一部分，通过代码题将自己的基础再进行巩固。</p>"},{"title":"单元测试","date":"2022-05-10T13:28:18.000Z","_content":"\n# 单元测试\n\n---\n\n1.  ## 什么是单元测试\n\n    > **单元测试**（英语：Unit Testing）又称为**模块测试**，是针对[程序模块](<https://zh.wikipedia.org/wiki/模組_(程式設計)>)（[软件设计](https://zh.wikipedia.org/wiki/软件设计)的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在[过程化编程](https://zh.wikipedia.org/wiki/過程化編程)中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。 ——维基百科\n\n    单元测试就是开发过程中模块、功能、函数等最小单位的测试。\n    <!--more-->\n\n2.  ## 单元测试在 CI/CD 中的作用？\n\n    **CI/CD**通常指的是[持续集成](https://zh.wikipedia.org/wiki/持续集成)和[持续交付](https://zh.wikipedia.org/wiki/持續交付)或[持续部署](https://zh.wikipedia.org/wiki/持續部署)的组合实践。\n\n    #### CI 持续集成（Continuous Integration）\n\n    成功的 CI 意味着应用代码的新更改会定期构建、测试并合并到共享存储库中。该解决方案可以解决在一次开发中有太多应用分支，从而导致相互冲突的问题。\n\n    #### CD 持续交付和/或持续部署（Continuous Delivery）/（Continuous Deployment）\n\n    ##### 持续交付\n\n    完成 CI 中构建及单元测试和集成测试的自动化流程后，持续交付可自动将已验证的代码发布到存储库。\n\n    ##### 持续部署\n\n    作为持续交付——自动将生产就绪型构建版本发布到代码存储库——的延伸，持续部署可以自动将应用发布到生产环境。\n\n    ![CI-CD](/images/CI-CD.png)\n\n    一般情况下，在进行代码的持续集成时，一旦开发人员对应用所做的更改被合并，系统就会通过自动构建应用并运行不同级别的自动化测试（通常是单元测试和集成测试）来验证这些更改，确保这些更改没有对应用造成破坏。\n\n3.  ## 为什么需要单元测试\n\n    1. 必要性：JavaScript 缺少类型检查，编译期间无法定位到错误，单元测试可以帮助你测试多种异常情况。\n    2. 正确性：测试可以验证代码的正确性，在上线前做到心里有底。\n    3. 自动化：通过 console 虽然可以打印出内部信息，但是这是一次性的事情，下次测试还需要从头来过，效率不能得到保证。通过编写测试用例，可以做到一次编写，多次运行。\n    4. 保证重构：保证代码重构的安全性，在重构代码之后，测试用例能保证重构后的代码功能正常。\n    5. 测试驱动开发，指导设计：代码被测试的前提是代码本身的可测试性，那么要保证代码的可测试性，就需要在开发中注意 API 的设计，TDD 将测试前移就是起到这么一个作用。同时测试用例也相当于一个开发文档。\n\n4.  ## 测试框架\n\n    | 框架  | 断言                         | 异步 | 代码覆盖率               |\n    | :---- | :--------------------------- | :--- | :----------------------- |\n    | Mocha | 不支持（需要其他库支持）chai | 友好 | 不支持（需要其他库支持） |\n    | Jest  | 默认支持                     | 友好 | 支持                     |\n\n    - Jest 开箱即用。\n    - Mocha 生态较好，但是需要配合其他库一起使用。\n\n5.  ## 什么是断言？\n\n    ”断言“，个人理解即为”用彼代码断定测试此代码的正确性，检验并暴露此代码的错误。就是判断源码的实际执行结果与预期结果是否一致，如果不一致就抛出一个错误。\n\n6.  ## 怎么做单元测试\n\n    单元测试的关注点在单个\"unit of code\"-通常是一个对象或模块中的函数。\n    通过为单个函数创建测试用例，测试起来很方便。这也就意味着你可以有更多单元测试，单元测试越多，bug 越容易捕获。这对于你修改代码很有用：当你有一组单元测试保证你的代码正常工作后，你可以安全地改变代码并且相信这次改变不会导致程序的其他部分崩溃。\n\n    1. 安装依赖\n\n       ```shell\n       npm i jest @types/jest babel-jest @babel/core @babel/preset-env -D\n       ```\n\n       babel.config.js\n\n       ```js\n       module.exports = {\n         presets: [[\"@babel/preset-env\", { targets: { node: \"current\" } }]]\n       };\n       ```\n\n    2. 一个简单的例子尝试\n\n       ./sum.js\n\n       ```js\n       function sum(a, b) {\n         return a + b;\n       }\n\n       module.exports = sum;\n       ```\n\n       创建一个 math.test.js 文件\n\n       ```\n       const sum = require('../sum');\n\n       test('adds 1 + 2 to equal 3', () => {\n         expect(sum(1, 2)).toBe(3);\n       });\n       ```\n\n       在 package.json 文件里面加上测试命令\n\n       ```json\n       {\n         \"scripts\": {\n           \"test\": \"jest\"\n         }\n       }\n       ```\n\n       ![image-20220411142925995](/images/测试通过.png)\n\n    3. 进行测试并统计覆盖率命令\n\n       <img src=\"/images/代码覆盖率.png\" alt=\"image-20220426090936416\"  />\n\n       #### 覆盖率统计项\n\n       从覆盖率的图片可以看到一共有 4 个统计项：\n\n       - Stmts(statements)：语句覆盖率，程序中的每个语句是否都已执行。\n       - Branch：分支覆盖率，是否执行了每个分支。\n       - Funcs：函数覆盖率，是否执行了每个函数。\n       - Lines：行覆盖率，是否执行了每一行代码。\n\n7.  ## 前端自动化测试\n\n    - TDD—测试驱动开发，侧重点偏向开发，通过测试用例来规范约束开发者编写出质量更高、bug 更少的代码。先写测试用例，再写功能模块。\n\n      > **测试驱动开发**（英语：Test-driven development，缩写为 TDD）是一种[软件开发过程](https://zh.wikipedia.org/wiki/软件开发过程)中的应用方法，由[极限编程](https://zh.wikipedia.org/wiki/极限编程)中倡导，以其倡导先写测试程序，然后编码实现其功能得名。测试驱动开发始于 20 世纪 90 年代。测试驱动开发的目的是取得快速反馈并使用“illustrate the main line”方法来构建程序。 ——维基百科\n\n      ### TDD 基本流程\n\n      <img src=\"/images/TDD.png\" alt=\"image-20220411115056651\" style=\"zoom: 33%;\" />\n\n      ### TDD 的优点\n\n      - 保证代码质量，因为先编写测试，所以可能出现的问题都被提前发现了;\n      - 促进开发人员思考，有利于程序的模块设计;\n      - 测试覆盖率高，因为后编写代码，因此测试用例基本都能照顾到;\n\n      ### TDD 的缺点\n\n      - 代码量增多，大多数情况下测试代码是功能代码的两倍甚至更多;\n      - 业务耦合度高，测试用例中使用了业务中一些模拟的数据，当业务代码变更的时候，要去重新组织测试用例;\n      - 关注点过于独立，由于单元测试只关注这一个单元的健康状况，无法保证多个单元组成的整体是否正常;\n\n      BDD — 行为驱动开发，由外到内的开发方式，从外部定义业务成果，再深入到能实现这些成果，每个成果会转化成为相应的包含验收标准。先写主功能模块，再写测试用例。\n\n\t\t\t> **行为驱动开发**（英语：Behavior-driven development，缩写**BDD**）是一种[敏捷软件开发](https://zh.wikipedia.org/wiki/敏捷软件开发)的技术，它鼓励软件项目中的开发者、[QA](https://zh.wikipedia.org/wiki/品質保證)和非技术人员或商业参与者之间的协作。BDD最初是由Dan North在2003年命名[[1\\]](https://zh.wikipedia.org/wiki/行为驱动开发#cite_note-origin-1)，它包括验收测试和客户测试驱动等的[极限编程](https://zh.wikipedia.org/wiki/极限编程)的实践，作为对[测试驱动开发](https://zh.wikipedia.org/wiki/测试驱动开发)的回应。 ——维基百科\n\n      ### BDD 的开发流程\n\n      1、开发人员和非开发人员一起讨论确认需求\n\n      2、以一种自动化的方式将需求建立起来，并确认是否一致\n\n      3、最后，实现每个文档示例描述的行为，并从自动化测试开始以指导代码的开发\n\n      **BDD 的优点：**\n\n      - 由于侧重于需求功能的完整度，所以能给开发人员增加更多对程序的信心\n      - 由于仅关注功能，不关注实现细节，有利于测试代码和实际代码解耦\n      - 由于大多数为编写集成测试，相比 TDD 有更好的开发效率\n\n      **BDD 的缺点：**\n\n      - 因为以功能性的集成测试为主，因此不是那么关注每个函数功能，测试覆盖率比较低\n      - 没有 TDD 那么严格的保证代码质量\n\n      BDD 倡导使用简单明了的自然语言描述系统行为，保证系统功能和设计是相符的。\n\n      ### TDD VS BDD\n\n      | 功能       | TDD(Test-driven development)                                         | BDD(Behavior-driven development)                                     |\n      | ---------- | -------------------------------------------------------------------- | -------------------------------------------------------------------- |\n      | 定义       | 测试驱动开发                                                         | 行为驱动开发                                                         |\n      | 思想       | 白盒测试，从代码角度出发，完成高质量代码为目的。                     | 黑盒测试，从用户角度出发，完成需求为目的。                           |\n      | 开发流程   | 编写单元测试<br />编写代码<br />通过测试<br />代码重构<br />重复步骤 | 编写代码<br />编写测试用例<br />通过测试<br />代码重构<br />重复步骤 |\n      | 代码覆盖率 | 高                                                                   | 低                                                                   |\n      | 测试类型   | 单元测试                                                             | 集成测试                                                             |\n      | 代码质量   | 高                                                                   | 一般                                                                 |\n      | 测试代码量 | 高                                                                   | 低                                                                   |\n\n      因此个人建议：\n\n      - 在开发组价库，工具函数库时使用 TDD\n      - 在开发业务系统时使用 BDD\n\n## 问题与反思\n\n1. 单元测试具有学习成本，在哪些地方适合编写单元测试？\n2. 单元测试是否可以实现不同浏览器下的差异性测试？\n3. 在公司项目中进行测试代码的编写可行性有多大？\n\n## 参考文章\n\n[jest 官方文档](https://jestjs.io/zh-Hans/)\n\n[浅谈 CI/CD 和软件测试](https://gitbook.cn/gitchat/column/5aa795539c3cf94d49162f03/topic/5aaa1abe0bb9e857450e7a9e)\n\n[如何做前端单元测试](https://juejin.cn/post/7039108357554176037#heading-16)\n\n[浅谈前端单元测试](https://juejin.cn/post/6844903624301084680#heading-0)\n\n[如何做好前端单元测试](https://zhuanlan.zhihu.com/p/340615580)\n\n[CI/CD 是什么？如何理解持续集成、持续交付和持续部署](https://www.redhat.com/zh/topics/devops/what-is-ci-cd)\n","source":"_posts/2022-05-10-单元测试.md","raw":"---\ntitle: 单元测试\ndate: 2022-05-10 21:28:18\ntags:\n  - \"test\"\n---\n\n# 单元测试\n\n---\n\n1.  ## 什么是单元测试\n\n    > **单元测试**（英语：Unit Testing）又称为**模块测试**，是针对[程序模块](<https://zh.wikipedia.org/wiki/模組_(程式設計)>)（[软件设计](https://zh.wikipedia.org/wiki/软件设计)的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在[过程化编程](https://zh.wikipedia.org/wiki/過程化編程)中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。 ——维基百科\n\n    单元测试就是开发过程中模块、功能、函数等最小单位的测试。\n    <!--more-->\n\n2.  ## 单元测试在 CI/CD 中的作用？\n\n    **CI/CD**通常指的是[持续集成](https://zh.wikipedia.org/wiki/持续集成)和[持续交付](https://zh.wikipedia.org/wiki/持續交付)或[持续部署](https://zh.wikipedia.org/wiki/持續部署)的组合实践。\n\n    #### CI 持续集成（Continuous Integration）\n\n    成功的 CI 意味着应用代码的新更改会定期构建、测试并合并到共享存储库中。该解决方案可以解决在一次开发中有太多应用分支，从而导致相互冲突的问题。\n\n    #### CD 持续交付和/或持续部署（Continuous Delivery）/（Continuous Deployment）\n\n    ##### 持续交付\n\n    完成 CI 中构建及单元测试和集成测试的自动化流程后，持续交付可自动将已验证的代码发布到存储库。\n\n    ##### 持续部署\n\n    作为持续交付——自动将生产就绪型构建版本发布到代码存储库——的延伸，持续部署可以自动将应用发布到生产环境。\n\n    ![CI-CD](/images/CI-CD.png)\n\n    一般情况下，在进行代码的持续集成时，一旦开发人员对应用所做的更改被合并，系统就会通过自动构建应用并运行不同级别的自动化测试（通常是单元测试和集成测试）来验证这些更改，确保这些更改没有对应用造成破坏。\n\n3.  ## 为什么需要单元测试\n\n    1. 必要性：JavaScript 缺少类型检查，编译期间无法定位到错误，单元测试可以帮助你测试多种异常情况。\n    2. 正确性：测试可以验证代码的正确性，在上线前做到心里有底。\n    3. 自动化：通过 console 虽然可以打印出内部信息，但是这是一次性的事情，下次测试还需要从头来过，效率不能得到保证。通过编写测试用例，可以做到一次编写，多次运行。\n    4. 保证重构：保证代码重构的安全性，在重构代码之后，测试用例能保证重构后的代码功能正常。\n    5. 测试驱动开发，指导设计：代码被测试的前提是代码本身的可测试性，那么要保证代码的可测试性，就需要在开发中注意 API 的设计，TDD 将测试前移就是起到这么一个作用。同时测试用例也相当于一个开发文档。\n\n4.  ## 测试框架\n\n    | 框架  | 断言                         | 异步 | 代码覆盖率               |\n    | :---- | :--------------------------- | :--- | :----------------------- |\n    | Mocha | 不支持（需要其他库支持）chai | 友好 | 不支持（需要其他库支持） |\n    | Jest  | 默认支持                     | 友好 | 支持                     |\n\n    - Jest 开箱即用。\n    - Mocha 生态较好，但是需要配合其他库一起使用。\n\n5.  ## 什么是断言？\n\n    ”断言“，个人理解即为”用彼代码断定测试此代码的正确性，检验并暴露此代码的错误。就是判断源码的实际执行结果与预期结果是否一致，如果不一致就抛出一个错误。\n\n6.  ## 怎么做单元测试\n\n    单元测试的关注点在单个\"unit of code\"-通常是一个对象或模块中的函数。\n    通过为单个函数创建测试用例，测试起来很方便。这也就意味着你可以有更多单元测试，单元测试越多，bug 越容易捕获。这对于你修改代码很有用：当你有一组单元测试保证你的代码正常工作后，你可以安全地改变代码并且相信这次改变不会导致程序的其他部分崩溃。\n\n    1. 安装依赖\n\n       ```shell\n       npm i jest @types/jest babel-jest @babel/core @babel/preset-env -D\n       ```\n\n       babel.config.js\n\n       ```js\n       module.exports = {\n         presets: [[\"@babel/preset-env\", { targets: { node: \"current\" } }]]\n       };\n       ```\n\n    2. 一个简单的例子尝试\n\n       ./sum.js\n\n       ```js\n       function sum(a, b) {\n         return a + b;\n       }\n\n       module.exports = sum;\n       ```\n\n       创建一个 math.test.js 文件\n\n       ```\n       const sum = require('../sum');\n\n       test('adds 1 + 2 to equal 3', () => {\n         expect(sum(1, 2)).toBe(3);\n       });\n       ```\n\n       在 package.json 文件里面加上测试命令\n\n       ```json\n       {\n         \"scripts\": {\n           \"test\": \"jest\"\n         }\n       }\n       ```\n\n       ![image-20220411142925995](/images/测试通过.png)\n\n    3. 进行测试并统计覆盖率命令\n\n       <img src=\"/images/代码覆盖率.png\" alt=\"image-20220426090936416\"  />\n\n       #### 覆盖率统计项\n\n       从覆盖率的图片可以看到一共有 4 个统计项：\n\n       - Stmts(statements)：语句覆盖率，程序中的每个语句是否都已执行。\n       - Branch：分支覆盖率，是否执行了每个分支。\n       - Funcs：函数覆盖率，是否执行了每个函数。\n       - Lines：行覆盖率，是否执行了每一行代码。\n\n7.  ## 前端自动化测试\n\n    - TDD—测试驱动开发，侧重点偏向开发，通过测试用例来规范约束开发者编写出质量更高、bug 更少的代码。先写测试用例，再写功能模块。\n\n      > **测试驱动开发**（英语：Test-driven development，缩写为 TDD）是一种[软件开发过程](https://zh.wikipedia.org/wiki/软件开发过程)中的应用方法，由[极限编程](https://zh.wikipedia.org/wiki/极限编程)中倡导，以其倡导先写测试程序，然后编码实现其功能得名。测试驱动开发始于 20 世纪 90 年代。测试驱动开发的目的是取得快速反馈并使用“illustrate the main line”方法来构建程序。 ——维基百科\n\n      ### TDD 基本流程\n\n      <img src=\"/images/TDD.png\" alt=\"image-20220411115056651\" style=\"zoom: 33%;\" />\n\n      ### TDD 的优点\n\n      - 保证代码质量，因为先编写测试，所以可能出现的问题都被提前发现了;\n      - 促进开发人员思考，有利于程序的模块设计;\n      - 测试覆盖率高，因为后编写代码，因此测试用例基本都能照顾到;\n\n      ### TDD 的缺点\n\n      - 代码量增多，大多数情况下测试代码是功能代码的两倍甚至更多;\n      - 业务耦合度高，测试用例中使用了业务中一些模拟的数据，当业务代码变更的时候，要去重新组织测试用例;\n      - 关注点过于独立，由于单元测试只关注这一个单元的健康状况，无法保证多个单元组成的整体是否正常;\n\n      BDD — 行为驱动开发，由外到内的开发方式，从外部定义业务成果，再深入到能实现这些成果，每个成果会转化成为相应的包含验收标准。先写主功能模块，再写测试用例。\n\n\t\t\t> **行为驱动开发**（英语：Behavior-driven development，缩写**BDD**）是一种[敏捷软件开发](https://zh.wikipedia.org/wiki/敏捷软件开发)的技术，它鼓励软件项目中的开发者、[QA](https://zh.wikipedia.org/wiki/品質保證)和非技术人员或商业参与者之间的协作。BDD最初是由Dan North在2003年命名[[1\\]](https://zh.wikipedia.org/wiki/行为驱动开发#cite_note-origin-1)，它包括验收测试和客户测试驱动等的[极限编程](https://zh.wikipedia.org/wiki/极限编程)的实践，作为对[测试驱动开发](https://zh.wikipedia.org/wiki/测试驱动开发)的回应。 ——维基百科\n\n      ### BDD 的开发流程\n\n      1、开发人员和非开发人员一起讨论确认需求\n\n      2、以一种自动化的方式将需求建立起来，并确认是否一致\n\n      3、最后，实现每个文档示例描述的行为，并从自动化测试开始以指导代码的开发\n\n      **BDD 的优点：**\n\n      - 由于侧重于需求功能的完整度，所以能给开发人员增加更多对程序的信心\n      - 由于仅关注功能，不关注实现细节，有利于测试代码和实际代码解耦\n      - 由于大多数为编写集成测试，相比 TDD 有更好的开发效率\n\n      **BDD 的缺点：**\n\n      - 因为以功能性的集成测试为主，因此不是那么关注每个函数功能，测试覆盖率比较低\n      - 没有 TDD 那么严格的保证代码质量\n\n      BDD 倡导使用简单明了的自然语言描述系统行为，保证系统功能和设计是相符的。\n\n      ### TDD VS BDD\n\n      | 功能       | TDD(Test-driven development)                                         | BDD(Behavior-driven development)                                     |\n      | ---------- | -------------------------------------------------------------------- | -------------------------------------------------------------------- |\n      | 定义       | 测试驱动开发                                                         | 行为驱动开发                                                         |\n      | 思想       | 白盒测试，从代码角度出发，完成高质量代码为目的。                     | 黑盒测试，从用户角度出发，完成需求为目的。                           |\n      | 开发流程   | 编写单元测试<br />编写代码<br />通过测试<br />代码重构<br />重复步骤 | 编写代码<br />编写测试用例<br />通过测试<br />代码重构<br />重复步骤 |\n      | 代码覆盖率 | 高                                                                   | 低                                                                   |\n      | 测试类型   | 单元测试                                                             | 集成测试                                                             |\n      | 代码质量   | 高                                                                   | 一般                                                                 |\n      | 测试代码量 | 高                                                                   | 低                                                                   |\n\n      因此个人建议：\n\n      - 在开发组价库，工具函数库时使用 TDD\n      - 在开发业务系统时使用 BDD\n\n## 问题与反思\n\n1. 单元测试具有学习成本，在哪些地方适合编写单元测试？\n2. 单元测试是否可以实现不同浏览器下的差异性测试？\n3. 在公司项目中进行测试代码的编写可行性有多大？\n\n## 参考文章\n\n[jest 官方文档](https://jestjs.io/zh-Hans/)\n\n[浅谈 CI/CD 和软件测试](https://gitbook.cn/gitchat/column/5aa795539c3cf94d49162f03/topic/5aaa1abe0bb9e857450e7a9e)\n\n[如何做前端单元测试](https://juejin.cn/post/7039108357554176037#heading-16)\n\n[浅谈前端单元测试](https://juejin.cn/post/6844903624301084680#heading-0)\n\n[如何做好前端单元测试](https://zhuanlan.zhihu.com/p/340615580)\n\n[CI/CD 是什么？如何理解持续集成、持续交付和持续部署](https://www.redhat.com/zh/topics/devops/what-is-ci-cd)\n","slug":"单元测试","published":1,"updated":"2022-05-10T13:33:58.063Z","_id":"cl306xs1100091krq6ppw7zx4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"单元测试\"><a href=\"#单元测试\" class=\"headerlink\" title=\"单元测试\"></a>单元测试</h1><hr>\n<ol>\n<li><h2 id=\"什么是单元测试\"><a href=\"#什么是单元测试\" class=\"headerlink\" title=\"什么是单元测试\"></a>什么是单元测试</h2><blockquote>\n<p><strong>单元测试</strong>（英语：Unit Testing）又称为<strong>模块测试</strong>，是针对<a href=\"https://zh.wikipedia.org/wiki/%E6%A8%A1%E7%B5%84_(%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88)\">程序模块</a>（<a href=\"https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1\">软件设计</a>的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在<a href=\"https://zh.wikipedia.org/wiki/%E9%81%8E%E7%A8%8B%E5%8C%96%E7%B7%A8%E7%A8%8B\">过程化编程</a>中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。 ——维基百科</p>\n</blockquote>\n<p> 单元测试就是开发过程中模块、功能、函数等最小单位的测试。</p>\n <a id=\"more\"></a>\n</li>\n<li><h2 id=\"单元测试在-CI-CD-中的作用？\"><a href=\"#单元测试在-CI-CD-中的作用？\" class=\"headerlink\" title=\"单元测试在 CI/CD 中的作用？\"></a>单元测试在 CI/CD 中的作用？</h2><p> <strong>CI/CD</strong>通常指的是<a href=\"https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90\">持续集成</a>和<a href=\"https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BA%8C%E4%BA%A4%E4%BB%98\">持续交付</a>或<a href=\"https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BA%8C%E9%83%A8%E7%BD%B2\">持续部署</a>的组合实践。</p>\n<h4 id=\"CI-持续集成（Continuous-Integration）\"><a href=\"#CI-持续集成（Continuous-Integration）\" class=\"headerlink\" title=\"CI 持续集成（Continuous Integration）\"></a>CI 持续集成（Continuous Integration）</h4><p> 成功的 CI 意味着应用代码的新更改会定期构建、测试并合并到共享存储库中。该解决方案可以解决在一次开发中有太多应用分支，从而导致相互冲突的问题。</p>\n<h4 id=\"CD-持续交付和-或持续部署（Continuous-Delivery）-（Continuous-Deployment）\"><a href=\"#CD-持续交付和-或持续部署（Continuous-Delivery）-（Continuous-Deployment）\" class=\"headerlink\" title=\"CD 持续交付和/或持续部署（Continuous Delivery）/（Continuous Deployment）\"></a>CD 持续交付和/或持续部署（Continuous Delivery）/（Continuous Deployment）</h4><h5 id=\"持续交付\"><a href=\"#持续交付\" class=\"headerlink\" title=\"持续交付\"></a>持续交付</h5><p> 完成 CI 中构建及单元测试和集成测试的自动化流程后，持续交付可自动将已验证的代码发布到存储库。</p>\n<h5 id=\"持续部署\"><a href=\"#持续部署\" class=\"headerlink\" title=\"持续部署\"></a>持续部署</h5><p> 作为持续交付——自动将生产就绪型构建版本发布到代码存储库——的延伸，持续部署可以自动将应用发布到生产环境。</p>\n<p> <img src=\"/images/CI-CD.png\" alt=\"CI-CD\"></p>\n<p> 一般情况下，在进行代码的持续集成时，一旦开发人员对应用所做的更改被合并，系统就会通过自动构建应用并运行不同级别的自动化测试（通常是单元测试和集成测试）来验证这些更改，确保这些更改没有对应用造成破坏。</p>\n</li>\n<li><h2 id=\"为什么需要单元测试\"><a href=\"#为什么需要单元测试\" class=\"headerlink\" title=\"为什么需要单元测试\"></a>为什么需要单元测试</h2><ol>\n<li>必要性：JavaScript 缺少类型检查，编译期间无法定位到错误，单元测试可以帮助你测试多种异常情况。</li>\n<li>正确性：测试可以验证代码的正确性，在上线前做到心里有底。</li>\n<li>自动化：通过 console 虽然可以打印出内部信息，但是这是一次性的事情，下次测试还需要从头来过，效率不能得到保证。通过编写测试用例，可以做到一次编写，多次运行。</li>\n<li>保证重构：保证代码重构的安全性，在重构代码之后，测试用例能保证重构后的代码功能正常。</li>\n<li>测试驱动开发，指导设计：代码被测试的前提是代码本身的可测试性，那么要保证代码的可测试性，就需要在开发中注意 API 的设计，TDD 将测试前移就是起到这么一个作用。同时测试用例也相当于一个开发文档。</li>\n</ol>\n</li>\n<li><h2 id=\"测试框架\"><a href=\"#测试框架\" class=\"headerlink\" title=\"测试框架\"></a>测试框架</h2><table>\n<thead>\n<tr>\n<th align=\"left\">框架</th>\n<th align=\"left\">断言</th>\n<th align=\"left\">异步</th>\n<th align=\"left\">代码覆盖率</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Mocha</td>\n<td align=\"left\">不支持（需要其他库支持）chai</td>\n<td align=\"left\">友好</td>\n<td align=\"left\">不支持（需要其他库支持）</td>\n</tr>\n<tr>\n<td align=\"left\">Jest</td>\n<td align=\"left\">默认支持</td>\n<td align=\"left\">友好</td>\n<td align=\"left\">支持</td>\n</tr>\n</tbody></table>\n<ul>\n<li>Jest 开箱即用。</li>\n<li>Mocha 生态较好，但是需要配合其他库一起使用。</li>\n</ul>\n</li>\n<li><h2 id=\"什么是断言？\"><a href=\"#什么是断言？\" class=\"headerlink\" title=\"什么是断言？\"></a>什么是断言？</h2><p> ”断言“，个人理解即为”用彼代码断定测试此代码的正确性，检验并暴露此代码的错误。就是判断源码的实际执行结果与预期结果是否一致，如果不一致就抛出一个错误。</p>\n</li>\n<li><h2 id=\"怎么做单元测试\"><a href=\"#怎么做单元测试\" class=\"headerlink\" title=\"怎么做单元测试\"></a>怎么做单元测试</h2><p> 单元测试的关注点在单个”unit of code”-通常是一个对象或模块中的函数。<br> 通过为单个函数创建测试用例，测试起来很方便。这也就意味着你可以有更多单元测试，单元测试越多，bug 越容易捕获。这对于你修改代码很有用：当你有一组单元测试保证你的代码正常工作后，你可以安全地改变代码并且相信这次改变不会导致程序的其他部分崩溃。</p>\n<ol>\n<li><p>安装依赖</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">npm i jest @types&#x2F;jest babel-jest @babel&#x2F;core @babel&#x2F;preset-env -D<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>babel.config.js</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  presets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> targets<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> node<span class=\"token operator\">:</span> <span class=\"token string\">\"current\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></li>\n<li><p>一个简单的例子尝试</p>\n<p>./sum.js</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> sum<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>创建一个 math.test.js 文件</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">const sum &#x3D; require(&#39;..&#x2F;sum&#39;);\n\ntest(&#39;adds 1 + 2 to equal 3&#39;, () &#x3D;&gt; &#123;\n  expect(sum(1, 2)).toBe(3);\n&#125;);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在 package.json 文件里面加上测试命令</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"/images/%E6%B5%8B%E8%AF%95%E9%80%9A%E8%BF%87.png\" alt=\"image-20220411142925995\"></p>\n</li>\n<li><p>进行测试并统计覆盖率命令</p>\n<img src=\"/images/代码覆盖率.png\" alt=\"image-20220426090936416\"  />\n\n<h4 id=\"覆盖率统计项\"><a href=\"#覆盖率统计项\" class=\"headerlink\" title=\"覆盖率统计项\"></a>覆盖率统计项</h4><p>从覆盖率的图片可以看到一共有 4 个统计项：</p>\n<ul>\n<li>Stmts(statements)：语句覆盖率，程序中的每个语句是否都已执行。</li>\n<li>Branch：分支覆盖率，是否执行了每个分支。</li>\n<li>Funcs：函数覆盖率，是否执行了每个函数。</li>\n<li>Lines：行覆盖率，是否执行了每一行代码。</li>\n</ul>\n</li>\n</ol>\n</li>\n<li><h2 id=\"前端自动化测试\"><a href=\"#前端自动化测试\" class=\"headerlink\" title=\"前端自动化测试\"></a>前端自动化测试</h2><ul>\n<li><p>TDD—测试驱动开发，侧重点偏向开发，通过测试用例来规范约束开发者编写出质量更高、bug 更少的代码。先写测试用例，再写功能模块。</p>\n<blockquote>\n<p><strong>测试驱动开发</strong>（英语：Test-driven development，缩写为 TDD）是一种<a href=\"https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B\">软件开发过程</a>中的应用方法，由<a href=\"https://zh.wikipedia.org/wiki/%E6%9E%81%E9%99%90%E7%BC%96%E7%A8%8B\">极限编程</a>中倡导，以其倡导先写测试程序，然后编码实现其功能得名。测试驱动开发始于 20 世纪 90 年代。测试驱动开发的目的是取得快速反馈并使用“illustrate the main line”方法来构建程序。 ——维基百科</p>\n</blockquote>\n<h3 id=\"TDD-基本流程\"><a href=\"#TDD-基本流程\" class=\"headerlink\" title=\"TDD 基本流程\"></a>TDD 基本流程</h3><img src=\"/images/TDD.png\" alt=\"image-20220411115056651\" style=\"zoom: 33%;\" />\n\n<h3 id=\"TDD-的优点\"><a href=\"#TDD-的优点\" class=\"headerlink\" title=\"TDD 的优点\"></a>TDD 的优点</h3><ul>\n<li>保证代码质量，因为先编写测试，所以可能出现的问题都被提前发现了;</li>\n<li>促进开发人员思考，有利于程序的模块设计;</li>\n<li>测试覆盖率高，因为后编写代码，因此测试用例基本都能照顾到;</li>\n</ul>\n<h3 id=\"TDD-的缺点\"><a href=\"#TDD-的缺点\" class=\"headerlink\" title=\"TDD 的缺点\"></a>TDD 的缺点</h3><ul>\n<li>代码量增多，大多数情况下测试代码是功能代码的两倍甚至更多;</li>\n<li>业务耦合度高，测试用例中使用了业务中一些模拟的数据，当业务代码变更的时候，要去重新组织测试用例;</li>\n<li>关注点过于独立，由于单元测试只关注这一个单元的健康状况，无法保证多个单元组成的整体是否正常;</li>\n</ul>\n<p>BDD — 行为驱动开发，由外到内的开发方式，从外部定义业务成果，再深入到能实现这些成果，每个成果会转化成为相应的包含验收标准。先写主功能模块，再写测试用例。</p>\n<pre><code>  &gt; **行为驱动开发**（英语：Behavior-driven development，缩写**BDD**）是一种[敏捷软件开发](https://zh.wikipedia.org/wiki/敏捷软件开发)的技术，它鼓励软件项目中的开发者、[QA](https://zh.wikipedia.org/wiki/品質保證)和非技术人员或商业参与者之间的协作。BDD最初是由Dan North在2003年命名[[1\\]](https://zh.wikipedia.org/wiki/行为驱动开发#cite_note-origin-1)，它包括验收测试和客户测试驱动等的[极限编程](https://zh.wikipedia.org/wiki/极限编程)的实践，作为对[测试驱动开发](https://zh.wikipedia.org/wiki/测试驱动开发)的回应。 ——维基百科</code></pre>\n<h3 id=\"BDD-的开发流程\"><a href=\"#BDD-的开发流程\" class=\"headerlink\" title=\"BDD 的开发流程\"></a>BDD 的开发流程</h3><p>1、开发人员和非开发人员一起讨论确认需求</p>\n<p>2、以一种自动化的方式将需求建立起来，并确认是否一致</p>\n<p>3、最后，实现每个文档示例描述的行为，并从自动化测试开始以指导代码的开发</p>\n<p><strong>BDD 的优点：</strong></p>\n<ul>\n<li>由于侧重于需求功能的完整度，所以能给开发人员增加更多对程序的信心</li>\n<li>由于仅关注功能，不关注实现细节，有利于测试代码和实际代码解耦</li>\n<li>由于大多数为编写集成测试，相比 TDD 有更好的开发效率</li>\n</ul>\n<p><strong>BDD 的缺点：</strong></p>\n<ul>\n<li>因为以功能性的集成测试为主，因此不是那么关注每个函数功能，测试覆盖率比较低</li>\n<li>没有 TDD 那么严格的保证代码质量</li>\n</ul>\n<p>BDD 倡导使用简单明了的自然语言描述系统行为，保证系统功能和设计是相符的。</p>\n<h3 id=\"TDD-VS-BDD\"><a href=\"#TDD-VS-BDD\" class=\"headerlink\" title=\"TDD VS BDD\"></a>TDD VS BDD</h3><table>\n<thead>\n<tr>\n<th>功能</th>\n<th>TDD(Test-driven development)</th>\n<th>BDD(Behavior-driven development)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>定义</td>\n<td>测试驱动开发</td>\n<td>行为驱动开发</td>\n</tr>\n<tr>\n<td>思想</td>\n<td>白盒测试，从代码角度出发，完成高质量代码为目的。</td>\n<td>黑盒测试，从用户角度出发，完成需求为目的。</td>\n</tr>\n<tr>\n<td>开发流程</td>\n<td>编写单元测试<br />编写代码<br />通过测试<br />代码重构<br />重复步骤</td>\n<td>编写代码<br />编写测试用例<br />通过测试<br />代码重构<br />重复步骤</td>\n</tr>\n<tr>\n<td>代码覆盖率</td>\n<td>高</td>\n<td>低</td>\n</tr>\n<tr>\n<td>测试类型</td>\n<td>单元测试</td>\n<td>集成测试</td>\n</tr>\n<tr>\n<td>代码质量</td>\n<td>高</td>\n<td>一般</td>\n</tr>\n<tr>\n<td>测试代码量</td>\n<td>高</td>\n<td>低</td>\n</tr>\n</tbody></table>\n<p>因此个人建议：</p>\n<ul>\n<li>在开发组价库，工具函数库时使用 TDD</li>\n<li>在开发业务系统时使用 BDD</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"问题与反思\"><a href=\"#问题与反思\" class=\"headerlink\" title=\"问题与反思\"></a>问题与反思</h2><ol>\n<li>单元测试具有学习成本，在哪些地方适合编写单元测试？</li>\n<li>单元测试是否可以实现不同浏览器下的差异性测试？</li>\n<li>在公司项目中进行测试代码的编写可行性有多大？</li>\n</ol>\n<h2 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h2><p><a href=\"https://jestjs.io/zh-Hans/\">jest 官方文档</a></p>\n<p><a href=\"https://gitbook.cn/gitchat/column/5aa795539c3cf94d49162f03/topic/5aaa1abe0bb9e857450e7a9e\">浅谈 CI/CD 和软件测试</a></p>\n<p><a href=\"https://juejin.cn/post/7039108357554176037#heading-16\">如何做前端单元测试</a></p>\n<p><a href=\"https://juejin.cn/post/6844903624301084680#heading-0\">浅谈前端单元测试</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/340615580\">如何做好前端单元测试</a></p>\n<p><a href=\"https://www.redhat.com/zh/topics/devops/what-is-ci-cd\">CI/CD 是什么？如何理解持续集成、持续交付和持续部署</a></p>\n","site":{"data":{}},"excerpt":"<h1 id=\"单元测试\"><a href=\"#单元测试\" class=\"headerlink\" title=\"单元测试\"></a>单元测试</h1><hr>\n<ol>\n<li><h2 id=\"什么是单元测试\"><a href=\"#什么是单元测试\" class=\"headerlink\" title=\"什么是单元测试\"></a>什么是单元测试</h2><blockquote>\n<p><strong>单元测试</strong>（英语：Unit Testing）又称为<strong>模块测试</strong>，是针对<a href=\"https://zh.wikipedia.org/wiki/%E6%A8%A1%E7%B5%84_(%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88)\">程序模块</a>（<a href=\"https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1\">软件设计</a>的最小单位）来进行正确性检验的测试工作。程序单元是应用的最小可测试部件。在<a href=\"https://zh.wikipedia.org/wiki/%E9%81%8E%E7%A8%8B%E5%8C%96%E7%B7%A8%E7%A8%8B\">过程化编程</a>中，一个单元就是单个程序、函数、过程等；对于面向对象编程，最小单元就是方法，包括基类（超类）、抽象类、或者派生类（子类）中的方法。 ——维基百科</p>\n</blockquote>\n<p> 单元测试就是开发过程中模块、功能、函数等最小单位的测试。</p>","more":"</li>\n<li><h2 id=\"单元测试在-CI-CD-中的作用？\"><a href=\"#单元测试在-CI-CD-中的作用？\" class=\"headerlink\" title=\"单元测试在 CI/CD 中的作用？\"></a>单元测试在 CI/CD 中的作用？</h2><p> <strong>CI/CD</strong>通常指的是<a href=\"https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90\">持续集成</a>和<a href=\"https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BA%8C%E4%BA%A4%E4%BB%98\">持续交付</a>或<a href=\"https://zh.wikipedia.org/wiki/%E6%8C%81%E7%BA%8C%E9%83%A8%E7%BD%B2\">持续部署</a>的组合实践。</p>\n<h4 id=\"CI-持续集成（Continuous-Integration）\"><a href=\"#CI-持续集成（Continuous-Integration）\" class=\"headerlink\" title=\"CI 持续集成（Continuous Integration）\"></a>CI 持续集成（Continuous Integration）</h4><p> 成功的 CI 意味着应用代码的新更改会定期构建、测试并合并到共享存储库中。该解决方案可以解决在一次开发中有太多应用分支，从而导致相互冲突的问题。</p>\n<h4 id=\"CD-持续交付和-或持续部署（Continuous-Delivery）-（Continuous-Deployment）\"><a href=\"#CD-持续交付和-或持续部署（Continuous-Delivery）-（Continuous-Deployment）\" class=\"headerlink\" title=\"CD 持续交付和/或持续部署（Continuous Delivery）/（Continuous Deployment）\"></a>CD 持续交付和/或持续部署（Continuous Delivery）/（Continuous Deployment）</h4><h5 id=\"持续交付\"><a href=\"#持续交付\" class=\"headerlink\" title=\"持续交付\"></a>持续交付</h5><p> 完成 CI 中构建及单元测试和集成测试的自动化流程后，持续交付可自动将已验证的代码发布到存储库。</p>\n<h5 id=\"持续部署\"><a href=\"#持续部署\" class=\"headerlink\" title=\"持续部署\"></a>持续部署</h5><p> 作为持续交付——自动将生产就绪型构建版本发布到代码存储库——的延伸，持续部署可以自动将应用发布到生产环境。</p>\n<p> <img src=\"/images/CI-CD.png\" alt=\"CI-CD\"></p>\n<p> 一般情况下，在进行代码的持续集成时，一旦开发人员对应用所做的更改被合并，系统就会通过自动构建应用并运行不同级别的自动化测试（通常是单元测试和集成测试）来验证这些更改，确保这些更改没有对应用造成破坏。</p>\n</li>\n<li><h2 id=\"为什么需要单元测试\"><a href=\"#为什么需要单元测试\" class=\"headerlink\" title=\"为什么需要单元测试\"></a>为什么需要单元测试</h2><ol>\n<li>必要性：JavaScript 缺少类型检查，编译期间无法定位到错误，单元测试可以帮助你测试多种异常情况。</li>\n<li>正确性：测试可以验证代码的正确性，在上线前做到心里有底。</li>\n<li>自动化：通过 console 虽然可以打印出内部信息，但是这是一次性的事情，下次测试还需要从头来过，效率不能得到保证。通过编写测试用例，可以做到一次编写，多次运行。</li>\n<li>保证重构：保证代码重构的安全性，在重构代码之后，测试用例能保证重构后的代码功能正常。</li>\n<li>测试驱动开发，指导设计：代码被测试的前提是代码本身的可测试性，那么要保证代码的可测试性，就需要在开发中注意 API 的设计，TDD 将测试前移就是起到这么一个作用。同时测试用例也相当于一个开发文档。</li>\n</ol>\n</li>\n<li><h2 id=\"测试框架\"><a href=\"#测试框架\" class=\"headerlink\" title=\"测试框架\"></a>测试框架</h2><table>\n<thead>\n<tr>\n<th align=\"left\">框架</th>\n<th align=\"left\">断言</th>\n<th align=\"left\">异步</th>\n<th align=\"left\">代码覆盖率</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">Mocha</td>\n<td align=\"left\">不支持（需要其他库支持）chai</td>\n<td align=\"left\">友好</td>\n<td align=\"left\">不支持（需要其他库支持）</td>\n</tr>\n<tr>\n<td align=\"left\">Jest</td>\n<td align=\"left\">默认支持</td>\n<td align=\"left\">友好</td>\n<td align=\"left\">支持</td>\n</tr>\n</tbody></table>\n<ul>\n<li>Jest 开箱即用。</li>\n<li>Mocha 生态较好，但是需要配合其他库一起使用。</li>\n</ul>\n</li>\n<li><h2 id=\"什么是断言？\"><a href=\"#什么是断言？\" class=\"headerlink\" title=\"什么是断言？\"></a>什么是断言？</h2><p> ”断言“，个人理解即为”用彼代码断定测试此代码的正确性，检验并暴露此代码的错误。就是判断源码的实际执行结果与预期结果是否一致，如果不一致就抛出一个错误。</p>\n</li>\n<li><h2 id=\"怎么做单元测试\"><a href=\"#怎么做单元测试\" class=\"headerlink\" title=\"怎么做单元测试\"></a>怎么做单元测试</h2><p> 单元测试的关注点在单个”unit of code”-通常是一个对象或模块中的函数。<br> 通过为单个函数创建测试用例，测试起来很方便。这也就意味着你可以有更多单元测试，单元测试越多，bug 越容易捕获。这对于你修改代码很有用：当你有一组单元测试保证你的代码正常工作后，你可以安全地改变代码并且相信这次改变不会导致程序的其他部分崩溃。</p>\n<ol>\n<li><p>安装依赖</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">npm i jest @types&#x2F;jest babel-jest @babel&#x2F;core @babel&#x2F;preset-env -D<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>babel.config.js</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  presets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span> targets<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> node<span class=\"token operator\">:</span> <span class=\"token string\">\"current\"</span> <span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></li>\n<li><p>一个简单的例子尝试</p>\n<p>./sum.js</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> sum<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>创建一个 math.test.js 文件</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">const sum &#x3D; require(&#39;..&#x2F;sum&#39;);\n\ntest(&#39;adds 1 + 2 to equal 3&#39;, () &#x3D;&gt; &#123;\n  expect(sum(1, 2)).toBe(3);\n&#125;);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在 package.json 文件里面加上测试命令</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"/images/%E6%B5%8B%E8%AF%95%E9%80%9A%E8%BF%87.png\" alt=\"image-20220411142925995\"></p>\n</li>\n<li><p>进行测试并统计覆盖率命令</p>\n<img src=\"/images/代码覆盖率.png\" alt=\"image-20220426090936416\"  />\n\n<h4 id=\"覆盖率统计项\"><a href=\"#覆盖率统计项\" class=\"headerlink\" title=\"覆盖率统计项\"></a>覆盖率统计项</h4><p>从覆盖率的图片可以看到一共有 4 个统计项：</p>\n<ul>\n<li>Stmts(statements)：语句覆盖率，程序中的每个语句是否都已执行。</li>\n<li>Branch：分支覆盖率，是否执行了每个分支。</li>\n<li>Funcs：函数覆盖率，是否执行了每个函数。</li>\n<li>Lines：行覆盖率，是否执行了每一行代码。</li>\n</ul>\n</li>\n</ol>\n</li>\n<li><h2 id=\"前端自动化测试\"><a href=\"#前端自动化测试\" class=\"headerlink\" title=\"前端自动化测试\"></a>前端自动化测试</h2><ul>\n<li><p>TDD—测试驱动开发，侧重点偏向开发，通过测试用例来规范约束开发者编写出质量更高、bug 更少的代码。先写测试用例，再写功能模块。</p>\n<blockquote>\n<p><strong>测试驱动开发</strong>（英语：Test-driven development，缩写为 TDD）是一种<a href=\"https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B\">软件开发过程</a>中的应用方法，由<a href=\"https://zh.wikipedia.org/wiki/%E6%9E%81%E9%99%90%E7%BC%96%E7%A8%8B\">极限编程</a>中倡导，以其倡导先写测试程序，然后编码实现其功能得名。测试驱动开发始于 20 世纪 90 年代。测试驱动开发的目的是取得快速反馈并使用“illustrate the main line”方法来构建程序。 ——维基百科</p>\n</blockquote>\n<h3 id=\"TDD-基本流程\"><a href=\"#TDD-基本流程\" class=\"headerlink\" title=\"TDD 基本流程\"></a>TDD 基本流程</h3><img src=\"/images/TDD.png\" alt=\"image-20220411115056651\" style=\"zoom: 33%;\" />\n\n<h3 id=\"TDD-的优点\"><a href=\"#TDD-的优点\" class=\"headerlink\" title=\"TDD 的优点\"></a>TDD 的优点</h3><ul>\n<li>保证代码质量，因为先编写测试，所以可能出现的问题都被提前发现了;</li>\n<li>促进开发人员思考，有利于程序的模块设计;</li>\n<li>测试覆盖率高，因为后编写代码，因此测试用例基本都能照顾到;</li>\n</ul>\n<h3 id=\"TDD-的缺点\"><a href=\"#TDD-的缺点\" class=\"headerlink\" title=\"TDD 的缺点\"></a>TDD 的缺点</h3><ul>\n<li>代码量增多，大多数情况下测试代码是功能代码的两倍甚至更多;</li>\n<li>业务耦合度高，测试用例中使用了业务中一些模拟的数据，当业务代码变更的时候，要去重新组织测试用例;</li>\n<li>关注点过于独立，由于单元测试只关注这一个单元的健康状况，无法保证多个单元组成的整体是否正常;</li>\n</ul>\n<p>BDD — 行为驱动开发，由外到内的开发方式，从外部定义业务成果，再深入到能实现这些成果，每个成果会转化成为相应的包含验收标准。先写主功能模块，再写测试用例。</p>\n<pre><code>  &gt; **行为驱动开发**（英语：Behavior-driven development，缩写**BDD**）是一种[敏捷软件开发](https://zh.wikipedia.org/wiki/敏捷软件开发)的技术，它鼓励软件项目中的开发者、[QA](https://zh.wikipedia.org/wiki/品質保證)和非技术人员或商业参与者之间的协作。BDD最初是由Dan North在2003年命名[[1\\]](https://zh.wikipedia.org/wiki/行为驱动开发#cite_note-origin-1)，它包括验收测试和客户测试驱动等的[极限编程](https://zh.wikipedia.org/wiki/极限编程)的实践，作为对[测试驱动开发](https://zh.wikipedia.org/wiki/测试驱动开发)的回应。 ——维基百科</code></pre>\n<h3 id=\"BDD-的开发流程\"><a href=\"#BDD-的开发流程\" class=\"headerlink\" title=\"BDD 的开发流程\"></a>BDD 的开发流程</h3><p>1、开发人员和非开发人员一起讨论确认需求</p>\n<p>2、以一种自动化的方式将需求建立起来，并确认是否一致</p>\n<p>3、最后，实现每个文档示例描述的行为，并从自动化测试开始以指导代码的开发</p>\n<p><strong>BDD 的优点：</strong></p>\n<ul>\n<li>由于侧重于需求功能的完整度，所以能给开发人员增加更多对程序的信心</li>\n<li>由于仅关注功能，不关注实现细节，有利于测试代码和实际代码解耦</li>\n<li>由于大多数为编写集成测试，相比 TDD 有更好的开发效率</li>\n</ul>\n<p><strong>BDD 的缺点：</strong></p>\n<ul>\n<li>因为以功能性的集成测试为主，因此不是那么关注每个函数功能，测试覆盖率比较低</li>\n<li>没有 TDD 那么严格的保证代码质量</li>\n</ul>\n<p>BDD 倡导使用简单明了的自然语言描述系统行为，保证系统功能和设计是相符的。</p>\n<h3 id=\"TDD-VS-BDD\"><a href=\"#TDD-VS-BDD\" class=\"headerlink\" title=\"TDD VS BDD\"></a>TDD VS BDD</h3><table>\n<thead>\n<tr>\n<th>功能</th>\n<th>TDD(Test-driven development)</th>\n<th>BDD(Behavior-driven development)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>定义</td>\n<td>测试驱动开发</td>\n<td>行为驱动开发</td>\n</tr>\n<tr>\n<td>思想</td>\n<td>白盒测试，从代码角度出发，完成高质量代码为目的。</td>\n<td>黑盒测试，从用户角度出发，完成需求为目的。</td>\n</tr>\n<tr>\n<td>开发流程</td>\n<td>编写单元测试<br />编写代码<br />通过测试<br />代码重构<br />重复步骤</td>\n<td>编写代码<br />编写测试用例<br />通过测试<br />代码重构<br />重复步骤</td>\n</tr>\n<tr>\n<td>代码覆盖率</td>\n<td>高</td>\n<td>低</td>\n</tr>\n<tr>\n<td>测试类型</td>\n<td>单元测试</td>\n<td>集成测试</td>\n</tr>\n<tr>\n<td>代码质量</td>\n<td>高</td>\n<td>一般</td>\n</tr>\n<tr>\n<td>测试代码量</td>\n<td>高</td>\n<td>低</td>\n</tr>\n</tbody></table>\n<p>因此个人建议：</p>\n<ul>\n<li>在开发组价库，工具函数库时使用 TDD</li>\n<li>在开发业务系统时使用 BDD</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"问题与反思\"><a href=\"#问题与反思\" class=\"headerlink\" title=\"问题与反思\"></a>问题与反思</h2><ol>\n<li>单元测试具有学习成本，在哪些地方适合编写单元测试？</li>\n<li>单元测试是否可以实现不同浏览器下的差异性测试？</li>\n<li>在公司项目中进行测试代码的编写可行性有多大？</li>\n</ol>\n<h2 id=\"参考文章\"><a href=\"#参考文章\" class=\"headerlink\" title=\"参考文章\"></a>参考文章</h2><p><a href=\"https://jestjs.io/zh-Hans/\">jest 官方文档</a></p>\n<p><a href=\"https://gitbook.cn/gitchat/column/5aa795539c3cf94d49162f03/topic/5aaa1abe0bb9e857450e7a9e\">浅谈 CI/CD 和软件测试</a></p>\n<p><a href=\"https://juejin.cn/post/7039108357554176037#heading-16\">如何做前端单元测试</a></p>\n<p><a href=\"https://juejin.cn/post/6844903624301084680#heading-0\">浅谈前端单元测试</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/340615580\">如何做好前端单元测试</a></p>\n<p><a href=\"https://www.redhat.com/zh/topics/devops/what-is-ci-cd\">CI/CD 是什么？如何理解持续集成、持续交付和持续部署</a></p>"},{"title":"prettier配置","date":"2022-03-01T11:16:23.000Z","_content":"\n个人 Prettier 配置\n\n<!--more-->\n\n.prettierrc\n\n```js\nmodule.exports = {\n  printWidth: 100, //单行长度\n  tabWidth: 2, //缩进长度\n  useTabs: false, //使用空格代替tab缩进\n  semi: false, //句末使用分号\n  singleQuote: true, //使用单引号\n  quoteProps: 'as-needed', //仅在必需时为对象的key添加引号\n  jsxSingleQuote: true, // jsx中使用单引号\n  trailingComma: 'none', //多行时尽可能打印尾随逗号\n  bracketSpacing: true, //在对象前后添加空格-eg: { foo: bar }\n  jsxBracketSameLine: false, //多属性html标签的‘>’折行放置\n  arrowParens: 'avoid', //单参数箭头函数参数周围使用圆括号-eg: (x) => x\n  requirePragma: false, //无需顶部注释即可格式化\n  insertPragma: false, //在已被preitter格式化的文件顶部加上标注\n  proseWrap: 'preserve',\n  htmlWhitespaceSensitivity: 'ignore', //对HTML全局空白不敏感\n  vueIndentScriptAndStyle: false, //不对vue中的script及style标签缩进\n  endOfLine: 'lf', //结束行形式\n  embeddedLanguageFormatting: 'auto' //对引用代码进行格式化\n};\n```\n","source":"_posts/2022-03-01-prettier配置.md","raw":"---\ntitle: prettier配置\ndate: 2022-03-01 19:16:23\ntags:\n  - 'JavaScript'\n---\n\n个人 Prettier 配置\n\n<!--more-->\n\n.prettierrc\n\n```js\nmodule.exports = {\n  printWidth: 100, //单行长度\n  tabWidth: 2, //缩进长度\n  useTabs: false, //使用空格代替tab缩进\n  semi: false, //句末使用分号\n  singleQuote: true, //使用单引号\n  quoteProps: 'as-needed', //仅在必需时为对象的key添加引号\n  jsxSingleQuote: true, // jsx中使用单引号\n  trailingComma: 'none', //多行时尽可能打印尾随逗号\n  bracketSpacing: true, //在对象前后添加空格-eg: { foo: bar }\n  jsxBracketSameLine: false, //多属性html标签的‘>’折行放置\n  arrowParens: 'avoid', //单参数箭头函数参数周围使用圆括号-eg: (x) => x\n  requirePragma: false, //无需顶部注释即可格式化\n  insertPragma: false, //在已被preitter格式化的文件顶部加上标注\n  proseWrap: 'preserve',\n  htmlWhitespaceSensitivity: 'ignore', //对HTML全局空白不敏感\n  vueIndentScriptAndStyle: false, //不对vue中的script及style标签缩进\n  endOfLine: 'lf', //结束行形式\n  embeddedLanguageFormatting: 'auto' //对引用代码进行格式化\n};\n```\n","slug":"prettier配置","published":1,"updated":"2022-03-01T15:55:14.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs13000b1krq8ab1duf3","content":"<p>个人 Prettier 配置</p>\n<a id=\"more\"></a>\n\n<p>.prettierrc</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  printWidth<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//单行长度</span>\n  tabWidth<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//缩进长度</span>\n  useTabs<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//使用空格代替tab缩进</span>\n  semi<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//句末使用分号</span>\n  singleQuote<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//使用单引号</span>\n  quoteProps<span class=\"token operator\">:</span> <span class=\"token string\">'as-needed'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//仅在必需时为对象的key添加引号</span>\n  jsxSingleQuote<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// jsx中使用单引号</span>\n  trailingComma<span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//多行时尽可能打印尾随逗号</span>\n  bracketSpacing<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//在对象前后添加空格-eg: &#123; foo: bar &#125;</span>\n  jsxBracketSameLine<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//多属性html标签的‘>’折行放置</span>\n  arrowParens<span class=\"token operator\">:</span> <span class=\"token string\">'avoid'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//单参数箭头函数参数周围使用圆括号-eg: (x) => x</span>\n  requirePragma<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//无需顶部注释即可格式化</span>\n  insertPragma<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//在已被preitter格式化的文件顶部加上标注</span>\n  proseWrap<span class=\"token operator\">:</span> <span class=\"token string\">'preserve'</span><span class=\"token punctuation\">,</span>\n  htmlWhitespaceSensitivity<span class=\"token operator\">:</span> <span class=\"token string\">'ignore'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//对HTML全局空白不敏感</span>\n  vueIndentScriptAndStyle<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//不对vue中的script及style标签缩进</span>\n  endOfLine<span class=\"token operator\">:</span> <span class=\"token string\">'lf'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//结束行形式</span>\n  embeddedLanguageFormatting<span class=\"token operator\">:</span> <span class=\"token string\">'auto'</span> <span class=\"token comment\">//对引用代码进行格式化</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","site":{"data":{}},"excerpt":"<p>个人 Prettier 配置</p>","more":"<p>.prettierrc</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  printWidth<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//单行长度</span>\n  tabWidth<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//缩进长度</span>\n  useTabs<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//使用空格代替tab缩进</span>\n  semi<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//句末使用分号</span>\n  singleQuote<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//使用单引号</span>\n  quoteProps<span class=\"token operator\">:</span> <span class=\"token string\">'as-needed'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//仅在必需时为对象的key添加引号</span>\n  jsxSingleQuote<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// jsx中使用单引号</span>\n  trailingComma<span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//多行时尽可能打印尾随逗号</span>\n  bracketSpacing<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//在对象前后添加空格-eg: &#123; foo: bar &#125;</span>\n  jsxBracketSameLine<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//多属性html标签的‘>’折行放置</span>\n  arrowParens<span class=\"token operator\">:</span> <span class=\"token string\">'avoid'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//单参数箭头函数参数周围使用圆括号-eg: (x) => x</span>\n  requirePragma<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//无需顶部注释即可格式化</span>\n  insertPragma<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//在已被preitter格式化的文件顶部加上标注</span>\n  proseWrap<span class=\"token operator\">:</span> <span class=\"token string\">'preserve'</span><span class=\"token punctuation\">,</span>\n  htmlWhitespaceSensitivity<span class=\"token operator\">:</span> <span class=\"token string\">'ignore'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//对HTML全局空白不敏感</span>\n  vueIndentScriptAndStyle<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//不对vue中的script及style标签缩进</span>\n  endOfLine<span class=\"token operator\">:</span> <span class=\"token string\">'lf'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//结束行形式</span>\n  embeddedLanguageFormatting<span class=\"token operator\">:</span> <span class=\"token string\">'auto'</span> <span class=\"token comment\">//对引用代码进行格式化</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>"},{"title":"成员属性、静态属性、私有属性、原型属性","date":"2022-04-12T07:47:15.000Z","_content":"\n## 成员属性、静态属性、私有属性、原型属性\n\n---\n<!--more-->\n\n1. ### 成员属性和成员方法\n\n   在构造函数中，通过 this.属性声明，或者实例化出对象后，通过`对象.属性`追加的，都属于成员属性或成员方法，也叫实例属性和实例方法。\n\n   ```js\n   function Person(name) {\n     this.name = name; // 声明成员属性\n     this.say = function () {\n       // 声明成员方法\n       console.log(\"haha\");\n     };\n   }\n\n   const p = new Preson(\"p\");\n   p.age = 18; // 追加成员属性\n   console.log(p.say());\n   ```\n\n2. ### 静态属性和静态方法\n\n   通过`类名.属性名`，`类名.方法名`声明的变量，称为静态属性、静态方法，也叫类属性、类方法，类属性、类方法是属于类的(构造函数的)，这类属性或方法必须通过`类名.属性`调用，而不能通过对象名调用。\n\n   ```js\n   function Person() {}\n   Person.age = 21;\n   Person.say = function () {\n     alert(\"haha\");\n   };\n   console.log(Person.age, 111); // 21 111\n   Person.say(); // haha\n   var chaiting = new Person();\n   console.log(chaiting.age, 222); // undefined 222\n   chaiting.say(); // chaiting.say is not a function\n   ```\n\n3. ### 私有属性和私有方法\n\n   在构造函数中，通过`var,let,const`声明的属性，称为私有属性，私有属性的作用域仅在当前函数有效，对外不公开，通过对象/类都无法调用到。\n\n   ```js\n   function Person() {\n     var sex = \"male\";\n     console.log(sex); // male 私有属性只能在类内使用\n   }\n   console.log(Person.sex); // undefined 无法调用，私有属性只能在类内使用，且js变量具有函数作用域\n   const chaiting = new Person();\n   console.log(chaiting.sex); // undefined 无法调用，私有属性只能在类内使用\n   ```\n\n4. ### 原型属性和原型方法\n\n   写在构造函数的 prototype 上，当使用构造函数实例化对象时，该属性方法会进入新对象的 proto 上。\n\n   ```js\n   function Person() {}\n   Person.prototype.name = \"chaiting\"; // 声明原型属性\n   Person.prototype.say = function () {\n     // 声明原型方法\n     console.log(\"haha\");\n   };\n   const person = new Person();\n   console.log(person.name); // chaiting 使用对象调用原型属性\n   person.say(); // haha 使用对象调用原型方法\n   ```\n\n​\n","source":"_posts/2022-04-12-成员属性、静态属性、私有属性、原型属性.md","raw":"---\ntitle: 成员属性、静态属性、私有属性、原型属性\ndate: 2022-04-12 15:47:15\ntags:\n\t- 'javascript'\n---\n\n## 成员属性、静态属性、私有属性、原型属性\n\n---\n<!--more-->\n\n1. ### 成员属性和成员方法\n\n   在构造函数中，通过 this.属性声明，或者实例化出对象后，通过`对象.属性`追加的，都属于成员属性或成员方法，也叫实例属性和实例方法。\n\n   ```js\n   function Person(name) {\n     this.name = name; // 声明成员属性\n     this.say = function () {\n       // 声明成员方法\n       console.log(\"haha\");\n     };\n   }\n\n   const p = new Preson(\"p\");\n   p.age = 18; // 追加成员属性\n   console.log(p.say());\n   ```\n\n2. ### 静态属性和静态方法\n\n   通过`类名.属性名`，`类名.方法名`声明的变量，称为静态属性、静态方法，也叫类属性、类方法，类属性、类方法是属于类的(构造函数的)，这类属性或方法必须通过`类名.属性`调用，而不能通过对象名调用。\n\n   ```js\n   function Person() {}\n   Person.age = 21;\n   Person.say = function () {\n     alert(\"haha\");\n   };\n   console.log(Person.age, 111); // 21 111\n   Person.say(); // haha\n   var chaiting = new Person();\n   console.log(chaiting.age, 222); // undefined 222\n   chaiting.say(); // chaiting.say is not a function\n   ```\n\n3. ### 私有属性和私有方法\n\n   在构造函数中，通过`var,let,const`声明的属性，称为私有属性，私有属性的作用域仅在当前函数有效，对外不公开，通过对象/类都无法调用到。\n\n   ```js\n   function Person() {\n     var sex = \"male\";\n     console.log(sex); // male 私有属性只能在类内使用\n   }\n   console.log(Person.sex); // undefined 无法调用，私有属性只能在类内使用，且js变量具有函数作用域\n   const chaiting = new Person();\n   console.log(chaiting.sex); // undefined 无法调用，私有属性只能在类内使用\n   ```\n\n4. ### 原型属性和原型方法\n\n   写在构造函数的 prototype 上，当使用构造函数实例化对象时，该属性方法会进入新对象的 proto 上。\n\n   ```js\n   function Person() {}\n   Person.prototype.name = \"chaiting\"; // 声明原型属性\n   Person.prototype.say = function () {\n     // 声明原型方法\n     console.log(\"haha\");\n   };\n   const person = new Person();\n   console.log(person.name); // chaiting 使用对象调用原型属性\n   person.say(); // haha 使用对象调用原型方法\n   ```\n\n​\n","slug":"成员属性、静态属性、私有属性、原型属性","published":1,"updated":"2022-04-17T05:36:29.326Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs1i000i1krqbnutaaj7","content":"<h2 id=\"成员属性、静态属性、私有属性、原型属性\"><a href=\"#成员属性、静态属性、私有属性、原型属性\" class=\"headerlink\" title=\"成员属性、静态属性、私有属性、原型属性\"></a>成员属性、静态属性、私有属性、原型属性</h2><hr>\n<a id=\"more\"></a>\n\n<ol>\n<li><h3 id=\"成员属性和成员方法\"><a href=\"#成员属性和成员方法\" class=\"headerlink\" title=\"成员属性和成员方法\"></a>成员属性和成员方法</h3><p>在构造函数中，通过 this.属性声明，或者实例化出对象后，通过<code>对象.属性</code>追加的，都属于成员属性或成员方法，也叫实例属性和实例方法。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 声明成员属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 声明成员方法</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Preson</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\np<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 追加成员属性</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"静态属性和静态方法\"><a href=\"#静态属性和静态方法\" class=\"headerlink\" title=\"静态属性和静态方法\"></a>静态属性和静态方法</h3><p>通过<code>类名.属性名</code>，<code>类名.方法名</code>声明的变量，称为静态属性、静态方法，也叫类属性、类方法，类属性、类方法是属于类的(构造函数的)，这类属性或方法必须通过<code>类名.属性</code>调用，而不能通过对象名调用。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\nPerson<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">21</span><span class=\"token punctuation\">;</span>\nPerson<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span> <span class=\"token number\">111</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 21 111</span>\nPerson<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// haha</span>\n<span class=\"token keyword\">var</span> chaiting <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chaiting<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span> <span class=\"token number\">222</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined 222</span>\nchaiting<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// chaiting.say is not a function</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"私有属性和私有方法\"><a href=\"#私有属性和私有方法\" class=\"headerlink\" title=\"私有属性和私有方法\"></a>私有属性和私有方法</h3><p>在构造函数中，通过<code>var,let,const</code>声明的属性，称为私有属性，私有属性的作用域仅在当前函数有效，对外不公开，通过对象/类都无法调用到。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> sex <span class=\"token operator\">=</span> <span class=\"token string\">\"male\"</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// male 私有属性只能在类内使用</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">.</span>sex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined 无法调用，私有属性只能在类内使用，且js变量具有函数作用域</span>\n<span class=\"token keyword\">const</span> chaiting <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chaiting<span class=\"token punctuation\">.</span>sex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined 无法调用，私有属性只能在类内使用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"原型属性和原型方法\"><a href=\"#原型属性和原型方法\" class=\"headerlink\" title=\"原型属性和原型方法\"></a>原型属性和原型方法</h3><p>写在构造函数的 prototype 上，当使用构造函数实例化对象时，该属性方法会进入新对象的 proto 上。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"chaiting\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 声明原型属性</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 声明原型方法</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// chaiting 使用对象调用原型属性</span>\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// haha 使用对象调用原型方法</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>​</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<h2 id=\"成员属性、静态属性、私有属性、原型属性\"><a href=\"#成员属性、静态属性、私有属性、原型属性\" class=\"headerlink\" title=\"成员属性、静态属性、私有属性、原型属性\"></a>成员属性、静态属性、私有属性、原型属性</h2><hr>","more":"<ol>\n<li><h3 id=\"成员属性和成员方法\"><a href=\"#成员属性和成员方法\" class=\"headerlink\" title=\"成员属性和成员方法\"></a>成员属性和成员方法</h3><p>在构造函数中，通过 this.属性声明，或者实例化出对象后，通过<code>对象.属性</code>追加的，都属于成员属性或成员方法，也叫实例属性和实例方法。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 声明成员属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 声明成员方法</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">const</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Preson</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\np<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 追加成员属性</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"静态属性和静态方法\"><a href=\"#静态属性和静态方法\" class=\"headerlink\" title=\"静态属性和静态方法\"></a>静态属性和静态方法</h3><p>通过<code>类名.属性名</code>，<code>类名.方法名</code>声明的变量，称为静态属性、静态方法，也叫类属性、类方法，类属性、类方法是属于类的(构造函数的)，这类属性或方法必须通过<code>类名.属性</code>调用，而不能通过对象名调用。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\nPerson<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">21</span><span class=\"token punctuation\">;</span>\nPerson<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span> <span class=\"token number\">111</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 21 111</span>\nPerson<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// haha</span>\n<span class=\"token keyword\">var</span> chaiting <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chaiting<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">,</span> <span class=\"token number\">222</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined 222</span>\nchaiting<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// chaiting.say is not a function</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"私有属性和私有方法\"><a href=\"#私有属性和私有方法\" class=\"headerlink\" title=\"私有属性和私有方法\"></a>私有属性和私有方法</h3><p>在构造函数中，通过<code>var,let,const</code>声明的属性，称为私有属性，私有属性的作用域仅在当前函数有效，对外不公开，通过对象/类都无法调用到。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> sex <span class=\"token operator\">=</span> <span class=\"token string\">\"male\"</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// male 私有属性只能在类内使用</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Person<span class=\"token punctuation\">.</span>sex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined 无法调用，私有属性只能在类内使用，且js变量具有函数作用域</span>\n<span class=\"token keyword\">const</span> chaiting <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>chaiting<span class=\"token punctuation\">.</span>sex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined 无法调用，私有属性只能在类内使用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"原型属性和原型方法\"><a href=\"#原型属性和原型方法\" class=\"headerlink\" title=\"原型属性和原型方法\"></a>原型属性和原型方法</h3><p>写在构造函数的 prototype 上，当使用构造函数实例化对象时，该属性方法会进入新对象的 proto 上。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"chaiting\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 声明原型属性</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">say</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 声明原型方法</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"haha\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// chaiting 使用对象调用原型属性</span>\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// haha 使用对象调用原型方法</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>​</p>\n</li>\n</ol>"},{"title":"JavaScript重难点实例精讲笔记","date":"2021-09-22T09:38:09.000Z","_content":"\n在 JavaScript 中，每种数据类型都会使用 3bit 表示。\n\n- 000 表示 Object 类型的数据。\n- 001 表示 Int 类型的数据。\n- 010 表示 Double 类型的数据。\n- 100 表示 String 类型的数据。\n- 110 表示 Boolean 类型的数据。\n<!--more-->\n\n由于 null 代表的是空指针，大多数平台中值为 0x00，因此 null 的类型标签就成了 0，所以使用 typeof 运算符时会判断为 object 类型，返回‘object’\n\n## 逗号运算符\n\n1. ### 在 for 循环中批量执行表达式\n\n2. ### 用于交换变量，无须额外变量\n\n   一般情况下\n\n   ```js\n   let a = 'a';\n   let b = 'b';\n   let c;\n   c = a;\n   a = b;\n   b = c;\n   ```\n\n   使用逗号运算符\n\n   ```js\n   let a = 'a';\n   let b = 'b';\n   // 方案1\n   a = [b, (b = a)][0];\n   // 方案2\n   a = [b][((b = a), 0)];\n   ```\n\n   在方案 1 中，前一部分[b, b = a]是一个一维数组，数组第二项值是 b = a，实际会将 a 值赋给 b，然后返回“'a'”，因此数组最终的值为['b', 'a']，然后取索引 0 的值为'b'，赋给变量 a，最终实现 a = 'b', b = 'a'。\n   在方案 2 中，前一部分[b]是一个一维数组，后一部分[b = a, 0]，实际会先执行 b = a，将 a 值赋给 b，然后返回“0”，因此后一部分实际是修改了 b 的值并返回索引“0”，最终是 a = [b][0]，即 a = b，实现了 a 与 b 的交换。\n\n3. ### 用于简化代码\n\n   因为逗号运算符可以使多个表达式先后执行，并且返回最后一个表达式的值\n\n   ```js\n   if (x) {\n     foo();\n     return bar();\n   } else {\n     return 1;\n   }\n   // 使用逗号运算符简写后\n   x ? (foo(), bar()) : 1;\n   ```\n\n4. ### 用小括号保证逗号运算符的优先级\n\n   在所有的运算符中，逗号运算符的优先级是最低的，因此对于某些涉及优先级的问题，我们需要使用到小括号，将含有逗号运算符的表达式括起来。\n\n## toString()函数与 valueOf()函数\n\n1. ### toString()函数\n\n   toString()函数的作用是把一个逻辑值转换为字符串，并返回结果。\n\n2. ### valueOf()函数\n\n   valueOf()函数的作用是返回最适合引用类型的原始值，如果没有原始值，则会返回引用类型自身。\n\n## JavaScript 常用的判空方法\n\n对变量进行取反，然后判断是否为 true\n\n```js\nif (!x) {\n  return true;\n}\n```\n\n### 判断变量为空对象\n\n1. #### 判断变量为 null 或者 undefined\n\n   判断一个变量是否为空时，可以直接将变量与 null 或者 undefined 相比较\n\n   ```js\n   if (obj == null) {\n   } // 可以判断null或者undeﬁned\n\n   if (obj === undeﬁned) {\n   } // 只能判断undeﬁned\n   ```\n\n2. #### 判断变量是否为空对象{}\n\n   判断一个变量是否为空对象时，可以通过 for...in 语句遍历变量的属性，然后调用 hasOwnProperty()函数，判断是否有自身存在的属性，如果存在则不为空对象，如果不存在自身的属性（不包括继承的属性），那么变量为空对象。\n\n   ```js\n   function isEmpty(obj) {\n     for (let key in obj) {\n       if (obj.hasOwnProperty(key)) {\n         return false;\n       }\n     }\n     return true;\n   }\n   // 定义空的对象字面量\n   var o = {};\n\n   function Person() {}\n   Person.prototype.name = 'kingx';\n   // 通过new操作符获取对象\n   var p = new Person();\n\n   console.log(isEmpty(o)); // true\n   console.log(isEmpty(p)); // true\n   ```\n\n3. #### 判断变量为空数组\n\n   ```js\n   arr instanceof Array && arr.length === 0;\n   ```\n\n4. #### 判断变量为空字符串\n\n   判断变量是否为空字符串时，可以直接将其与空字符串相比较，或者调用 trim()函数去掉前后的空格，然后判断字符串的长度。\n\n   ```js\n   str === '' || str.trim().length === 0;\n   ```\n\n5. #### 判断变量为 0 或者 NaN\n\n   ```js\n   !(Number(num) && num) == true;\n   ```\n\n## 引用数据类型\n\n在 JavaScript 中，如果函数没有 return 值，则默认 return this。\n\n创建一个对象实例，new 操作符做了 3 件事情。\n\n```js\nfunction Cat(name, age) {\n  var Cat = {};\n  Cat.name = name;\n  Cat.age = age;\n  return Cat;\n}\n\nlet cat = new Cat();\n```\n\n```js\n// 相当于\nlet cat = {};\ncat.__proto__ = Cat.prototype;\nCat.call(cat);\n```\n\n第一行：创建一个空对象。\n\n第二行：将空对象的**proto**属性指向 Cat 对象的 prototype 属性。\n\n第三行：将 Cat()函数中的 this 指向 cat 变量。\n\n自定义一个类似 new 功能的函数\n\n```js\nfunction Cat(name, age) {\n  this.name = name;\n  this.age = age;\n}\n\nCat.prototype.sayHi = function () {\n  console.log('hi');\n};\n\nfunction New() {\n  let obj = {};\n  obj.__proto__ = Cat.prototype; // 核心代码，用于继承\n  let res = Cat.apply(obj, arguments);\n  return typeof res === 'object' ? res : obj;\n}\nconsole.log(New('mimi', 18).sayHi()); //hi\n```\n\n## Object 类型的静态函数\n\n### object.create()函数\n\n属性描述符的格式如下所示\n\n```js\npropertyName: {\n   value: '', // 设置此属性的值\n   writable: true, // 设置此属性是否可写入；默认为false：只读\n   enumerable: true, // 设置此属性是否可枚举；默认为false：不可枚举\n   conﬁgurable: true // 设置此属性是否可配置，如是否可以修改属性的特性及是否可以删除属性；默认为false\n}\n```\n\n```js\n// 建立一个自定义对象，设置name和age属性\nvar obj = Object.create(null, {\n  name: {\n    value: 'tom',\n    writable: true,\n    enumerable: true,\n    conﬁgurable: true,\n  },\n  age: {\n    value: 22,\n  },\n});\nconsole.log(obj.name); // tom\nconsole.log(obj.age); // 22\nobj.age = 28;\nconsole.log(obj.age); // 22 ：age属性的writable默认为false，此属性为只读\nfor (var p in obj) {\n  console.log(p); // name ：只输出name属性；age属性的enumerable默认为false，不能通过for...in 枚举\n}\n```\n\n### Array 类型\n\n#### 判断一个变量是数组还是对象\n\n1. ##### instanceof 运算符\n\n   instanceof 运算符用于通过查找原型链来检测某个变量是否为某个类型数据的实例，使用 instanceof 运算符可以判断一个变量是数组还是对象。\n\n   ```js\n   let a = [1, 2, 3];\n   console.log(a instanceof Array); // true\n   console.log(a instanceof Object); // true\n   let b = { name: 'kingx' };\n   console.log(b instanceof Array); // false\n   console.log(b instanceof Object); // true\n   ```\n\n   封装函数判断变量是数组还是对象\n\n   ```js\n   // 判断变量是数组还是对象\n   function getDataType(o){\n       if(o instance of Array){\n           return 'Array'\n       }else if(o instanceof Object){\n           return 'Object'\n       }else{\n           return 'param is not object type'\n       }\n   }\n   ```\n\n2. #### 判断构造函数\n\n   判断一个变量是否是数组或者对象，从另一个层面讲，就是判断变量的构造函数是 Array 类型还是 Object 类型。因为一个对象的实例都是通过构造函数生成的，所以，我们可以直接判断一个变量的 constructor 属性。\n\n```js\nlet a = [1, 2, 3];\nconsole.log(a.constructor === Array); // true\nconsole.log(a.constructor === Object); // false\n\nlet b = { name: 'kingx' };\nconsole.log(a.constructor === Array); // false\nconsole.log(a.constructor === Object); // true\n```\n\n每个变量都会有一个**proto**属性，表示的是隐式原型。一个对象的隐式原型指向的是构造该对象的构造函数的原型，用数组举例。\n\n```js\n[].__proto__ === [].constructor.prototype // true\n[].__proto__ === Array.prototype; // true\n```\n\n上面直接通过 constructor 属性判断的语句也可以改写成下面的形式\n\n```js\nlet a = [1, 2, 3];\nconsole.log(a.__proto__.constructor === Array); // true\nconsole.log(a.__proto__.constructor === Object); // false\n```\n\n同时，也可以将代码进行封装，得到一个判断变量是数组还是对象的通用函数。\n\n```js\n// 判断变量是数组还是对象\nfunction getDataType(o) {\n   // 获取构造函数\n   var constructor = o._ _proto_ _.constructor || o.constructor;\n   if (constructor === Array) {\n       return 'Array';\n   } else if (constructor === Object) {\n       return 'Object';\n   } else {\n       return 'param is not object type';\n   }\n}\n```\n\n4. ##### Array.isArray()函数\n\n   Array.isArray()函数只能判断变量是否为数组。\n\n### reduce()函数累加器处理数组元素\n\nreduce()函数的语法如下所示\n\n```js\narr.reduce(callback[, initialValue]);\n```\n\ninitialValue 用作 callback 的第一个参数值，如果没有设置，则会使用数组的第一个元素值。\n\n1. #### 求数组每个元素相加的和\n\n   ```js\n   let arr = [1, 2, 3, 4, 5];\n   let sum = arr.reduce((accumulator, currentValue) => {\n     return accumulator + currentValue;\n   }, 0);\n   console.log(sum);\n   ```\n\n2. #### 统计数组中每个元素出现的次数\n\n   ```js\n   let countOccurrences = (arr) => {\n     return arr.reduce((accumulator, currentValue) => {\n       accumulator[currentValue]\n         ? accumulator[currentValue]++\n         : (accumulator[currentValue] = 1);\n       return accumulator;\n     }, {});\n   };\n   // 测试代码\n   countOccurrences([1, 2, 2, 3, 4, 4]);\n   ```\n\n## 函数的定义与调用\n\n函数的定义大体可以分为3种，分别是函数声明，函数表达式和Function构造函数。\n\n### 函数声明\n\n函数声明式直接使用function关键字接一个函数名，函数名后是接收函数的形参。\n\n```js\n// 函数声明式\nfunction sum(num1,num2){\n\treturn num1 + num2\n}\n```\n\n### 函数表达式\n\n函数表达式的形式类似普通变量的初始化，只不过这个变量初始化的值是一个函数。\n\nfoo是函数名称，它实际是函数内部的一个局部变量，在函数外部是无法直接调用的。\n\n```js\n// 函数表达式 属于匿名函数表达式\nlet sum = function (num1,num2){\n\treturn num1 + num2\n}\nconsole.log(sum(1, 3)) // 4\n// 具有函数名的函数表达式\nlet sum = function foo(num, num2){\n    return num1 + num2\n}\n```\n\n### Function()构造函数\n\n使用new操作符，调用Function()构造函数，传入对应的参数，也可以定义一个函数。\n\n```js\nlet add = new Function('a', 'b', 'return a + b')\n```\n\n但是这种使用比较少，主要有以下两个原因。\n\n第一个原因是Function()构造函数每次执行时，都会解析函数主体，并创建一个新的函数对象，所以当在一个循环或者频繁执行的函数中调用Function()构造函数时，效率是非常低的。\n\n第二个原因是使用Function()构造函数创建的函数，并不遵循典型的作用域，它将一直作为顶级函数执行。所以在一个函数A内部调用Function()构造函数时，其中的函数体并不能访问到函数A中的局部变量，而只能访问到全局变量。\n\n### 函数表达式的应用场景\n\n主要针对函数递归与代码模块化这两个应用场景进行讲解\n\n#### 函数递归\n\n通过函数表达式可以定义具有名称的函数，它作为函数内部的一个局部变量，指向函数自声。\n\n```js\n// 斐波那契数列问题\nfunction fibonacci(num){\n\tif(num === 1 || num === 2){\n\treturn 1\n    }\n    return fibonacci(num-2) + fibonacci(num-1)\n}\n```\n\n通过函数表达式实现代码\n\n```js\n// 斐波那契数列问题\nlet fibonacci= function(num) {\n\tif(num === 1 || num === 2){\n\treturn 1\n    }\n    return fibonacci(num-2) + fibonacci(num-1)\n}\n```\n\n#### 代码模块化\n\n在ES6以前，JavaScript中是没有块级作用域的，但是我们可以通过函数表达式来间接地实现模块化，将特定的模块化代码封装在一个函数中，只对外暴露接口。\n\n```js\nlet person = (function name() {\n  let _name = '';\n  return {\n    getName: function () {\n      return _name;\n    },\n    setName: function (newName) {\n      _name = newName;\n    },\n  };\n})();\n\nperson.setName('king');\nconsole.log(person.getName());\n```\n\n#### 函数提升\n\n对于函数声明，存在函数提升，所以即使函数的调用在函数的声明之前，仍然可以正常执行。\n\n```js\nconsole.log(add(1,2)) // 3\nconsole.log(sub(5,3)) // Uncaught ReferenceError: sub is not defined\n// 函数声明\nfunction add(a1,a2){\n\treturn a1 + a2\n}\n// 函数表达式\nlet sub = function(a1, a2){\n\treturn a1 -a2\n}\n```\n\n### 函数调用\n\n函数调用存在5种模式，函数调用模式，方法调用模式，构造器调用模式，call()函数、apply()函数调用模式，匿名函数调用模式。\n\n#### 函数调用模式\n\n函数调用模式是通过函数声明或者函数表达式的方法定义函数，然后直接通过函数名调用的模式\n\n```js\n// 函数声明\nfunction add(a1, a2){\n\treturn a1 + a2\n}\n// 函数表达式\nlet sub = function (a1, a2){\n\treturn a1 - a2\n}\nadd(1 ,3)\nsub(4 ,1)\n```\n\n#### 方法调用模式\n\n方法调用模式会优先定义一个对象obj，然后在对象内部定义值为函数的属性property，通过对象obj.property()来进行函数的调用。\n\n```js\n// 定义对象\nlet obj ={\n\tname: 'kingx',\n\t// 定义getName属性，值为一个函数\n\tgetName: function(){\n\t\treturn this.name\n\t}\n}\nobj.getName() // 通过对象进行调用\n```\n\n函数还可以通过中括号来调用，即对象名['函数名']，那么上面的实例代码可以改写为\n\n```js\nlet obj ={\n\tname:'kingx',\n\tgetName: function(){\n        console.log(this.name)\n\t},\n\tsetName:function(name){\n        this.name=name;\n        return this //在函数内部返回函数对象本身\n\t}\n}\nobj.setName('kingx2').getName() //链式函数调用\n```\n\n#### 构造器调用模式\n\n构造器调用模式会定义一个函数，在函数中定义实例属性，在原型上定义函数，然后通过new操作符生成函数的实例，再通过实例调用原型上定义的函数。\n\n```js\n// 定义函数对象\nfunction Person(name){\n\tthis.name = name\n}\n// 原型上定义函数\nPerson.prototype.getName = function (){\n\treturn this.name;\n}\n// 通过new操作符生成实例\nlet p = new Person('kingx')\n// 通过实例进行函数的调用\np.getName()\n```\n\n#### call()函数，apply()函数调用模式\n\n通过call函数或者apply函数可以改变函数执行的主体，使得某些不具有特定函数的对象可以直接调用该特定函数。\n\n```js\n// 定义一个函数\nfunction sum(num1, num2){\n    return num1 + num2;\n}\n// 定义一个对象\nlet person = {}\n// 通过call()函数与apply()函数调用sum()函数\nsum.call(person,1, 2)\nsum.apply(person,[1, 2])\n```\n\n通过call()函数与apply()函数，使得没有sum()函数的person对象也可以直接调用sum()函数。\n\n#### 匿名函数调用模式\n\n匿名函数，就是没用函数名称的函数。匿名函数的调用有两种方式，一种是通过函数表达式定义函数，并赋给变量，通过变量进行调用。另一种是使用小括号()将匿名函数括起来，然后在后面使用小括号，传递对应的参数，进行调用。\n\n```js\n// 通过函数表达式定义匿名函数，并赋给变量sum\nlet sum = function(num1, num2) {\n    return num1 + num2\n}\n// 通过sum()函数进行匿名函数调用\nsum(1, 2)\n// 小括号括起来\n(function(num1, num2){\n    return num1 + num2\n})(1, 2) //3\n```\n\n### 函数参数\n\n#### 形参实参\n\n函数的参数分为两种，分别是形参和实参。\n\n形参全称为形式参数。是在定义函数名称与函数体使用的参数，目的是用来接收调用该函数时传入的参数。\n\n实参全称为实际参数，是在调用时传递给函数的参数，实参可以使常量、变量、表达式、函数等类型。\n\n##### 形参和实参的区别\n\n1. 形参出现在函数的定义中，只能在函数体内使用，一旦离开该函数则不能使用；实参出现在主调函数中，进入被调函数后，实参也将不能被访问。\n2. 在强类型语言中，定义的形参和实参在数量、数据类型和顺序上要保持严格一致，否则会抛出“类型不匹配”的异常\n3. 在函数调用过程中，数据传输是单向的，即只能把实参的值传递给形参，而不能把形参的值反向传递给实参。\n4. 当实参是基本数据类型的值时，实际是将实参的值复制一份传递给形参，在函数运行结束时形参被释放，而是实参中的值不会变化。\n\n### arguments对象的性质\n\narguments是所有函数都具有的一个内置局部变量，表示的是函数实际接收的参数，是一个类数组结构。它除了具有length属性外，不具有数组的一些常有方法。\n\n#### 函数内部无法访问\n\narguments对象只能在函数内部使用，无法在函数外部访问到arguments对象。\n\n```js\nfunction foo(){\n\tconsole.log(arguments.length) // 3 \n    function foo2(){\n        console.log(arguments.length) // 0\n    }\n    foo2()\n}\n\nfoo(1,2,3)\n```\n\n#### 可通过索引访问\n\narguments对象是一个类数组结构，可以通过索引访问，每一项表示对应传递的实参值，如果该项索引值不存在，则会返回'undefined'\n\n```js\nfunction sum(num1, num2){\n    console.log(arguments[0]) // 3\n    console.log(arguments[1]) // 4\n    console.log(arguments[2]) // undefined\n}\n\nsum(3, 4)\n```\n\n#### 由实参决定\n\narguments对象的值由实参决定，而不是由定义的形参决定，形参与arguments对象占有独立的内存空间。\n\n1.  arguments对象的length属性在函数调用的时候就已经确定，不会随着函数的处理而改变。\n2.  指定的形参在传递实参的情况下，arguments对象与形参值相同，并且可以相互改变。\n3.  指定的形参在未传递实参的情况下，arguments对象对应索引值返回“undefined”。\n4. 指定的形参在未传递实参的情况下，arguments对象与形参值不能相互改变。\n\n```js\nfunction foo(a,b,c){\n    console.log('arguments的长度',arguments.length); //2\n    arguments[0] = 11;\n    console.log('a的值', a); // 11\n    b = 12;\n    console.log('arguments索引为1的值',arguments[1]); //12\n    arguments[2] = 3;\n    console.log('c的值', c); // undefined\n    c = 13;\n    console.log('arguments索引为2的值', arguments[2]); // 3\n  \n    console.log('arguments的长度', arguments.length); // 2\n}\nfoo(1, 2)\n```\n\n#### 特殊的arguments.callee属性\n\narguments对象有一个很特殊的属性callee，表示的是当前正在执行的函数，在比较时是严格相等的,但是使用arguments.callee属性会改变函数内部的this值。\n\n```js\nfunction foo(){\n\tconsole.log(arguments.callee === foo); //true\n}\nfoo()\n```\n\n用法：\n\n```js\nfunction create(){\n\treturn function(n) {\n\t\tif(n <= 1) return 1;\n        return n * arguments.callee(n - 1)\n\t}\n}\nlet result = create()(5)\n```\n\n### arguments对象的应用\n\n#### 实参的个数判断\n\n```js\nfunction f(x, y, z){\n    // 检查传递的参数个数是否正确\n    if(arguments.length !== 3){\n        throw new Error('期望传递的参数个数为3，实际传递的个数为：'+ arguments.length)\n    }\n    // ...do something\n}\nf(1, 2) //期望传递的参数个数为3，实际传递的个数为：2\n```\n\n#### 任意个数的参数处理\n\n定义一个函数，该函数只会特定处理传递的前几个参数，对于后面的参数不论传递多少个都会统一处理，这种场景下我们可以使用arguments对象。\n\n```js\nfunction joinStr(sepreator){\n    // arguments对象是一个类数组结构，可以通过call()函数间接调用slice()函数，得到一个数组\n    let strArr = Array.prototype.slice.call(arguments, 1)\n    // strArr数组直接调用join()函数\n    return strArr.join(sepreator)\n}\njoinStr('-','orange','apple','banana')\njoinStr(',','orange','apple','banana')\n```\n\n#### 模拟函数重载\n\n函数重载表示的是在函数名相同的情况下，通过函数形参的不同参数类型或者不同参数个数来定义不同的函数。JavaScript是一门弱类型语言，没有函数重载。\n\n```js\n// 通用求和函数\nfunction sum(){\n    // 通过call()函数间接调用数组的slice()函数得到函数参数的数组\n    let arr = Array.prototype.slice.call(arguments)\n    // 调用数组的reduce函数进行多个值的求和\n    return arr.reduce((pre,cur)=>{\n        return pre + cur\n    }, 0)\n}\nsum(1,2,3,4)\n```\n\n### 变量提升和函数提升\n\n```js\nvar a = true;\nfoo();\n\nfunction foo(){\n    if(a){\n        var a =10\n    }\n    console.log(a); // undefined\n}\n```\n\n首先在全局作用域中定义一个变量a，值为true，然后调用foo()函数。foo()函数时通过函数声明定义的，会进行函数提升，因此foo()函数会正常调用。在foo()函数内部，首先判断变量a的值，由于变量a在函数内部重新通过var关键字声明了一次，因此a会出现变量提升，a会提升至foo()函数的顶部，此时a的值为undefined。那么通过if语句进行判断时，返回'false'，并未执行a=10 的赋值语句，因此最后输出'undefined'。\n过程可以改为一下代码段。\n\n```js\nvar a;\na = true;\nfunction foo(){\n    var a;\n    if(a){\n        a = 10;\n    }\n    console.log(a)\n}\n```\n\n### 变量提升和函数提升优先级\n\n```js\nfunction fn() {\n   console.log(typeof foo); // function\n   // 变量提升\n   var foo = 'variable';\n   // 函数提升\n   function foo() {\n      return 'function';\n   }\n   console.log(typeof foo); // string\n}\nfn();  \n```\n\n变量提升的优先级要比函数提升的优先级高，因此执行过程可以改写为：\n\n```js\nfunciton fn(){\n    // 变量提升至函数顶部\n    var foo;\n    // 函数提升，但是优先级低，出现在变量声明后面，则foo是一个函数\n    funciton foo(){\n        return 'function'\n    }\n    console.log(typeof foo)\n    \n    foo = 'variable' // 变量赋值\n    console.log(typeof foo) // string\n}\nfn()\n```\n\n### 变量提升和函数提升整体应用\n\n```js\nfunction foo(){\n\tvar a = 1;\n\tfunction b(){\n\t\ta = 10;\n\t\treturn;\n\t\tfunction a(){}\n\t}\n\tb();\n\tconsole.log(a) // 1\n}\nfoo()\n```\n\n代码中首先定义一个变量a并赋值为1，然后声明一个b()函数，并在后面直接进行调用，最后输出变量a的值。\n\n在b()函数中，赋值的变量a并未使用var关键字，因此变量a是一个全局环境的变量，而在return语句之后出现了一个变量a的函数声明，则会进行提升，执行return语句后，变量a的值仍然为1，可改写代码为：\n\n```js\nfunction foo(){\n    // 变量a的提升\n    var a;\n    // 函数声明b的提升\n    function b(){\n        // 内部的函数声明a的提升\n        function a() {}\n        a = 10\n        return\n    }\n    a = 1;\n    b();\n    console.log(a) // 1\n}\nfoo()\n```\n\n### 闭包\n\n一个拥有许多变量和绑定了这些变量执行上下文环境的表达，通常是一个函数。\n\n闭包有两个特点\n\n- 函数拥有的外部变量的引用，在函数返回时，该变量仍然处于活跃状态。\n- 闭包作为一个函数返回时，其执行上下文环境不会被销毁，仍处于执行上下文环境中。\n\n在JavaScript中存在一种内部函数，即函数声明和函数表达式可以位于另一个函数的函数体内，在内部函数中可以访问外部函数声明的变量，当这个内部函数在包含它们的外部函数之外被调用时，就会形成闭包。\n\n```js\nfunction fn() {\n  var max = 10\n  return function bar(x) {\n    if (x > max) {\n      console.log(x)\n    }\n  }\n}\n\nvar f1 = fn()\nf1(11) // 11\n```\n\n#### 闭包的优点\n\n- 保护函数内变量的安全，实现封装，防止变量流失其他环境发生命名冲突，造成环境污染。\n- 在适当的时候，可以在内存中维护变量并缓存，提高执行效率。\n\n#### 闭包的缺点\n\n- 消耗内存：通常来说，函数的活动对象会随着执行上下文环境一起被销毁，但是，由于闭包引用的是外部函数的活动对象，因此这个活动对象无法被销毁，这意味着，闭包比一般的函数需要消耗更多的内存。\n- 泄露内存：在IE9之前，如果闭包的作用于链中存在DOM对象，则意味着该DOM对象无法被销毁，造成内存泄露。\n\n## this使用\n\n### this指向全局对象\n\n当函数没有所属对象而直接调用时，this指向的是全局对象。\n\n#### this指向所属对象\n\n谁调用它，它就指向谁。\n\n#### this指向对象实例\n\n当通过new操作符调用构造函数生成对象的实例时，this指向该实例。\n\n```js\n//全局变量\nlet number = 10\nfunction Person(){\n    // 复写全局变量\n    number = 20;\n    // 实例变量\n    this.number =30\n}\n// 原型函数\nPerson.prototype.getNumber = function () {\n    return this.number\n}\n// 通过new操作符获取对象的实例\nlet p = new Person()\nconsole.log(p.getNumber()) // 30\n```\n\n#### this指向call()函数、apply()函数、bind()函数调用后重新绑定的对象\n\n```js\n// 全局变量\nlet value = 10;\nlet obj = {\n    value: 20\n}\n// 全局函数\nlet method = function() {\n    console.log(this.value)\n}\nmethod(); // 10\nmethod.call(obj); // 20\nmethod.apply(obj); // 20\nlet newMethod = method.bind(obj)\nnewMethod(); // 20\n```\n\n#### 闭包中的this\n\n函数的this变量只能被自身访问，其内部函数无法访问。因此在遇到闭包时，闭包内部的this关键字无法访问到外部函数的this变量。\n\n## call()函数、apply()函数、bind()函数的使用与区别\n\n### call()函数的基本使用\n\ncall()函数调用一个函数时，会将该函数的执行对象上下文改变为另一个对象。其语法为：\n\n```js\nfunction.call(thisAra, arg1, arg2)\n```\n\n- function为需要调用的函数。\n- thisArg表示的是新的对象上下文，函数中的this将指向thisArg，如果thisArg为null或者undefined，则this会指向全局对象。\n- arg1,arg2，...表示的是函数所接收的参数列表。\n\ncall函数用法实例\n\n```js\n// 定义一个add()函数\nfunction add(x, y){\n    return x + y\n}\n// 通过call()函数进行add()函数的调用\nfunction myAddCall(x, y){\n    // 调用add()函数的call()函数\n    return add.call(this, x, y)\n}\nconsole.log(myAddCall(10, 20)) // 输出'30'\n```\n\n### apply()函数的基本使用\n\napply()函数的作用域与call()函数时一致的，只是在传递参数的形式上存在差别。\n\n```js\nfunciton.apply(thisArg, [argsArray])\n```\n\n- function与thisArg参数与call()函数中的解释一样\n- [argsArray]表示的是参数会通过数组的形式进行传递，如果argsArray不是一个有效的数组或者arguments对象，则会抛出一个TypeError异常\n\n```js\n// 定义一个add()函数\nfunction add(x, y){\n    return x + y\n}\n// 通过apply()函数进行add()函数的调用\nfunction myAddApply(x, y){\n    // 调用add()函数的call()函数\n    return add.apply(this, [x, y])\n}\nconsole.log(myAddApply(10, 20)) // 输出'30'\n```\n\n### bind()函数的基本使用\n\nbind()函数创建一个新的函数，在调用时设置this关键字为提供的值，在执行新函数时，将给定的参数列表作为原函数的参数序列，从前往后匹配。\n\n```js\nfunction.bind(this.Arg, arg1, arg2)\n```\n\nbind()函数与call()函数接收的参数是一样的，其返回值是原函数的副本，并拥有指定的this值和初始参数。\n\n```js\n// 定义一个add()函数\nfunction add(x, y){\n    return x + y\n}\n// 通过bind()函数进行add()函数的调用\nfunction myAddBind(x, y){\n    // 调用bind()函数得到一个新的函数\n    let bindAddFn = add.bind(this, x, y)\n    return bindAddFn()\n}\nconsole.log(myAddBind(10, 20)) // 输出'30'\n```\n\n###  call()函数、apply()函数、bind()函数的比较\n\n三者的相同之处都是：都会改变函数调用的执行主体，修改this的指向。\n\n不同之处在以下两点\n\n1. call()函数与apply()函数在执行后会理解立即调用前面的函数，而bind()函数不会立即调用，它会返回一个新的函数，可以在任何时候进行调用。\n2. call()接收从第二个到最后一个参数，apply()接收一个数组。\n\n## 对象的属性\n\n### 访问器属性\n\n访问器属性同样包含4个特性，分别是[[Configurable]]、[[Enumerable]]、[[Get]]和[[Set]]。\n\n- [[Configurable]]：表示属性能否删除而重新定义，或者是否可以修改为访问器属性，默认值为true\n- [[Enumerable]]：表示属性是否可枚举，可枚举的属性能够通过for...in循环返回，默认值为true。 \n- [[Get]]：在读取属性值时调用的函数（一般称为getter()函数），负责返回有效的值，默认值为undefined。\n- [[Set]]：在写入属性值时调用的函数（一般称为setter()函数），负责处理数据，默认值为undefined。\n\n如果需要修改访问器属性默认的特性，则必须使用Object.defineProperty()函数\n\ngetter()函数和setter()函数的存在在一定程度上可以实现对象的私有属性，私有属性不对外暴露。如果想要读取和写入私有属性的值，则需要通过设置额外属性的getter()函数和setter()函数来实现。\n\n```js\nlet person ={\n\t_age: 10\n}\nObject.defineProperty(person, 'age', {\n  get: function () {\n    return this._age;\n  },\n  set: function (newValue) {\n    if (newValue > 10) {\n      this._age = newValue;\n      console.log('设置成功');\n    }\n  },\n});\n```\n\n### 对象深拷贝\n\nJSON.parse(JSON.stringify(Obj))\n\n```js\n/* 使用JSON.stringify()函数将原始对象序列化为字符串，再使用JSON.parse()函数将字符串反序列化为一个对象。 */\nlet origin = {\n  a: 1,\n  b: 2,\n  C: {\n    d: 'name',\n  },\n};\nlet result = JSON.parse(JSON.stringify(origin));\nconsole.log(result);\n```\n\n该方法有以下几个问题：\n\n1. 无法实现对函数、RegExp等特殊对象的克隆。\n2. 对象的constructor会被抛弃，所有的构造函数会指向Object，原型链关系断裂。\n3. 对象中如果存在循环引用，会抛出异常。\n\n```js\nfunction Animal(name) {\n  this.name = name;\n}\nlet animal = new Animal('tom');\nlet origin = {\n  // 属性为函数\n  a: function () {\n    return 'a';\n  },\n  // 属性为正则表达式对象\n  b: new RegExp('d', 'g'),\n  // 属性为某个对象的实例\n  c: animal,\n};\nlet result = JSON.parse(JSON.stringify(origin));\n\nconsole.log(origin, '打印origin');\nconsole.log(result, '打印result');\nconsole.log(origin.c.constructor);\nconsole.log(result.c.constructor);\n```\n\n### 原型对象、构造函数、实例之间的关系\n\n每一个函数在创建时都会被赋予一个prototype属性。在默认情况下，所有的原型对象都会增加一个constructor属性，指向prototype属性所在的函数，即构造函数。\n\n当我们通过new操作符调用构造函数创建一个实例时，实例具有一个__proto__属性，指向构造函数的原型对象，因此__proto__属性可以看做是一个连续实例与构造函数的原型对象的桥梁。\n\n```js\nfunction Person(){}\nPerson.prototype.name = 'Tom'\nPerson.prototype.age = 29\nPerson.prototype.job = 'Software Enginner'\nPerson.prototype.sayName = function(){\n    console.log(name)\n}\nlet person1 = new Person()\nlet person2 = new Person()\n```\n\n构造函数的Person有个prototype属性，指向的是Person的原型对象。在原型对象中有constructor属性和另外4个原型对象上的属性，其中constructor属性指向构造函数本身。\n\n通过new操作符创建的两个实例person1和person2，都具有一个__proto__属性，指向的是Person的原型对象。\n\n### 实例的属性读取顺序\n\n当我们通过对象的实例读取某个属性时，它会先在实例本身去找指定的属性，如果找到了，则直接返回该属性的值；如果没找到则会继续沿着原型对象寻找，如果在原型对象中找到了该属性，则返回该属性的值。\n\n改造上方代码\n\n```js\nfunction Person(){\n    this.name = 'kingx'\n}\nPerson.prototype.name = 'Tom'\nPerson.prototype.age = 29\nPerson.prototype.job = 'Software Enginner'\nPerson.prototype.sayName = function(){\n    console.log(name)\n}\nlet person1 = new Person() \nconsole.log(person1.name) // kingx\n```\n\n### 重写原型对象\n\n```js\nfunction Person(){}\nPerson.prototype = {\n    constructor: Person, // 重要\n    name: 'Nicholas',\n    age: 29,\n    job: 'Software Engineer',\n    sayName: function(){\n        console.log(name)\n    }\n}\n```\n\n将一个对象字面量赋给prototype属性的方式实际是重写了原型对象，等同于切断了构造函数和最初原型之间的关系，因此有一点需要的是，如果仍然想使用constructor属性做后续处理，则应该在对象字面量增加一个constructor属性，指向构造函数本身，否则原型的constructor属性会指向Object类型的构造函数，从而导致constructor属性与构造函数的脱离，而且必须要按照顺序执行，在最后进行新的对象的创建。\n\n### 原型链\n\n在JS中几乎所有的对象都具有__proto__属性，由__proto__属性连接而成的链路构成了JS的原型链，原型链的顶端是Object.prototype，它的__proto__属性为null。\n\n```js\nfunction Person(){}\nlet person = new Person \n// person实例沿着原型链第一次追溯，__proto__属性指向Person()构造函数的原型对象\nperson.__proto__ === Person.prototype\n// person实例沿着原型链第二次追溯，Person原型对象的__protos__属性指向Object类型的原型对象。\nperson.__proto__.__proto__ === Person.prototype.__proto__ === Object.prototype\n// person实例沿着原型链第三次追溯，Object类型的原型对象的__proto__属性为null\nperson.__proto__.__proto__.__proto__ === Object.prototype.__proto__ === null\n```\n\n#### 原型链的特点\n\n1. 由于原型链的存在，属性查找的过程不再是只查找自身的原型对象，而是会沿着整个原型链一直向上，直到追溯到Object.prototype。如果Object.prototype上，直到追溯到Object.prototype。如果Object.prootype上也找不到该属性，则返回'undefined'。如果期间在实例本身或者某个原型对象上找到了该属性，则会直接返回结果，因此会存在属性覆盖的问题。\n\n   在生成自定义对象的实例时，也可以调用到某些未在自定义构造函数上的函数，例如toString()函数\n\n   ```js\n   function Person(){}\n   let p = new Person()\n   p.toString() // [object Object] 实际调用的是Object.prototype.toString()函数\n   ```\n\n2. 由于属性查找会经历整个原型链，因此查找的链路越长，对性能的影响越大。\n\n#### 属性区分\n\n对象属性的寻找往往会设计整个原型链，Object()构造函数的原型对象中提供了一个hasOwnProperty()函数，用于判断属性是否为自身拥有的。\n\n```js\nfunction Person(name){\n    // 实例属性name\n    this.name = name\n}\n// 原型对象上的属性age\nPerson.prototype.age = 12\nlet person = new Person('kingx')\nconsole.log(person.hasOwnProperty('name')) // true\nconsole.log(person.hasOwnProperty('age')) // false\n```\n\n在使用for...in运算符遍历对象的属性时，一般可以配合hasOwnProperty()函数一起使用，检测是否是对象自身的属性，然后做后续处理。\n\n```js\nfor (let prop in person){\n    if(person.hasOwnproperty(prop)){\n \t\t...       \n    }\n}\n```\n\n#### 内置构造函数\n\nJavaScript中有一些特定的内置构造函数，如String()构造函数、Number()构造函数，Array()构造函数、Object()构造函数等。\n\n它们本身的__proto__属性都统一指向Function.prototype。\n\n```js\nString.__proto__ === Function.prototype // true\nNumber.__proto__ === Function.prototype // true\nArray.__proto__ === Function.prototype // true\nDate.__proto__ === Function.prototype // true\nObject.__proto__ === Function.prototype // true\nFunction.__proto__ === Function.prototype // true\n```\n\n#### __proto__属性\n\n```js\nFunction.prototype.a = 'a'\nObject.prototype.b = 'b'\n\nfunction Person(){}\n\nlet p = new Person();\n\nconsole.log('p.a', p.a)\nconsole.log('p.b', p.b)\n```\n\n实例p的原型链\n\n```js\n// 实例p直接原型\np.__proto__ = Person.prototype\n// Person原型对象的原型\nPerson.prototype.__proto__ = Object.prototype\n```\n\n#### 继承\n\n##### 原型链继承\n\n原型链继承的主要思想是：重写子类的prototype属性，将其指向父类的实例\n\n```js\n// 子类Cat\nfunction Cat(name) {\n    this.name = name\n}\n// 原型继承\nCat.prototype = new Animal();\n// 很关键的一句，将Cat的构造函数指向自身\nCat.prototype.constructor = Cat;\n\nlet cat = new Cat('coffee')\n```\n\n###### 原型链继承的优点\n\n1. 简单、易于实现\n\n2. 继承关系纯粹\n\n   生成的实例既是子类的实例，也是父类的实例。\n\n3. 可通过子类直接访问父类原型链属性和函数\n\n   通过原型链继承的子类，可以直接访问到父类原型链上新增的函数和属性。\n\n###### 原型链继承的缺点\n\n1. 子类的所有实例将共享父类的属性\n2. 在创建子类实例时，无法向父类的构造函数传递参数\n3. 无法实现多继承\n4. 为子类增加原型对象上的属性和函数时，必须放在new Animal()函数之后\n\n##### 构造继承\n\n构造继承的主要思想是在子类的构造函数中通过call()函数改变this指向，调用父类的构造函数，从而能将父类的实例的属性和函数绑定到子类的this中\n\n```js\n// 父类\nfunction Animal(age) {\n  // 属性\n  this.name = \"Animal\";\n  this.age = age;\n  // 实例函数\n  this.sleep = function () {\n    return this.name + \"正在睡觉！\";\n  };\n}\n// 父类原型函数\nAnimal.prototype.eat = function (food) {\n  return this.name + \"正在吃：\" + food;\n};\n// 子类\nfunction Cat(name) {\n  // 核心，通过call()函数实现Animal的实例的属性和函数的继承\n  Animal.call(this);\n  this.name = name || \"tom\";\n}\n// 生成子类的实例\nlet cat = new Cat(\"tony\");\n// 可以正常调用父类实例函数\nconsole.log(cat.sleep());\n// 不能调用父类原型函数\nconsole.log(cat.eat());\n```\n\n###### 构造继承的优点\n\n1. 可解决子类实例共享父类属性的问题\n\n2. 创建子类的实例时，可以向父类传递参数\n\n   在call()函数中，可以传递参数，将参数传递给父类。\n\n3. 可以实现多继承\n\n   在子类的构造函数中，可以通过多次调用call()函数来继承多个父对象，每调用一次call()函数就会将父类的实例的属性和函数\n\n###### 构造继承的缺点\n\n1. 实例只是子类的实例，并不是父类的实例\n2. 只能继承父类实例的属性和函数，并不能继承原型对象上的属性和函数\n3. 无法复用父类的实例函数\n\n复制继承\n\n复制继承的主要思想是首先生成父类的实例，然后通过for...in遍历父类实例的属性和函数，并将其依次设置为子类实例的属性和函数或者原型对象上的属性和函数。\n\n```js\n// 父类\nfunction Animal(parentAge) {\n  // 实例属性\n  this.name = \"Animal\";\n  this.age = parentAge;\n  // 实例函数\n  this.sleep = function () {\n    return this.name + \"正在睡觉\";\n  };\n}\n// 原型函数\nAnimal.prototype.eat = function (food) {\n  return this.name + \"正在吃：\" + food;\n};\n// 子类\nfunction Cat(name, age) {\n  let animal = new Animal(age);\n  // 父类的属性和函数，全部添加至子类中\n  for (const key in animal) {\n    if (Object.hasOwnProperty.call(key)) {\n      this[key] = animal[key];\n    } else {\n      // 原型对象上的属性和函数\n      Cat.prototype[key] = animal[key];\n    }\n  }\n  // 子类自身的属性\n  this.name = name;\n}\n// 子类自身原型函数\nCat.prototype.eat = function (food) {\n  return this.name + \"正在吃\" + food;\n};\n\nlet cat = new Cat(\"tony\", 12);\nconsole.log(cat.age);\nconsole.log(cat.sleep());\nconsole.log(cat.eat(\"猫粮\"));\n```\n\n###### 复制继承的优点\n\n1. 支持多继承\n2. 能同时继承实例的属性和函数与原型对象上的属性和函数\n3. 可以向父类构造函数中传递值\n\n###### 复制继承的缺点\n\n1. 父类的所有属性都需要复制，消耗内存\n2. 实例只是子类的实例，并不是父类的实例\n\n##### 组合继承\n\n组合继承的主要思想是组合了构造函数和原型函数两种方法，一方面在子类的构造函数中通过call()函数调用父类的构造函数，将父类的实例的属性和函数绑定到子类的this中，另一方面，通过改变子类的prototype属性，继承父类的原型对象上的属性和函数\n\n```js\n// 父类\nfunction Animal(parentAge) {\n  // 实例属性\n  this.name = \"Animal\";\n  this.age = parentAge;\n  // 实例函数\n  this.sleep = function () {\n    return this.name + \"正在睡觉\";\n  };\n  this.feature = [\"fat\", \"thin\", \"tall\"];\n}\n// 原型函数\nAnimal.prototype.eat = function (food) {\n  return this.name + \"正在吃：\" + food;\n};\n// 子类\nfunction Cat(name) {\n  // 通过构造函数继承实例的属性和函数\n  Animal.call(this);\n  this.name = name;\n}\n// 通过原型继承原型对象上的属性和函数\nCat.prototype = new Animal();\nCat.prototype.constructor = Cat;\n\nlet cat = new Cat(\"tony\");\nconsole.log(cat.name);\nconsole.log(cat.sleep());\nconsole.log(cat.eat(\"猫粮\"));\n```\n\n###### 组合继承的优点\n\n1. 既能继承父类实例的属性和函数，又能继承原型对象上的属性和函数\n2. 既是子类的实例，又是父类的实例\n```js\nconsole.log(cat instanceof Cat);   // true\nconsole.log(cat instanceof Animal);// true\n```\n3. 不存在引用属性共享的问题\n4. 可以向父类的构造函数中传递参数\n###### 组合继承的缺点\n\n组合继承的缺点为父类的实例属性会绑定两次\n\n##### 寄生组合继承\n\n```js\n/* 寄生组合继承 */\n// 在进行子类的prototype属性的设置时，可以去掉父类实例的属性和函数\n// 子类\nfunction Cat(name) {\n  // 继承父类的实例属性和函数\n  Animal.call(this);\n  this.name = name;\n}\n// 立即执行函数\n(function () {\n  // 设置任意函数Super()\n  let Super = function () {};\n  // 关键语句,Super()函数的原型指向父类Animal的原型，去掉父类的实例属性\n  Super.prototype = Animal.prototype;\n  Cat.prototype = new Super();\n  Cat.prototype.constructor = Cat;\n})();\n```\n\n## instanceof运算符\n\ninstanceof运算符的语法如下。\n\n```js\ntarget instanceof constructor\n```\n\n上面的代码标识的是构造函数constructor()的prototype属性是否出现在target对象的原型链中，即target对象是不是构造函数constructor()的实例。\n\n### instanceof运算符的常规用法\n\n```js\nlet stringObject = new String('hello world')\nstringObject instanceOf String; // true\n```\n\n判断变量stringObject是否是String类型的实例，因为变量stringObject是通过new操作符，由String的构造函数生成的，所以变量是stringObject是String类型的实例，最终返回'true'。\n\n### instanceof运算符用于继承判断\n\ninstanceof运算符可以在继承关系中，判断一个实例对象是否属于它的父类，\n\n```js\n// 定义构造函数\nfunction C(){}\nfunction D(){}\n// 生成C()构造函数的一个实例\nlet o = new C()\n// 判断对象o是否为C()的一个实例，结果为true\no instanceof C // true\n// 判断对象o是否为D()构造函数的一个实例，结果返回false\no instanceof D // false，因为D.prototype属性不存在o的原型链上\n// 判断对象o是否为Object()函数的一个实例，结果返回ture\no instanceof Object // true\n// 通过将D()构造函数的prototype属性指向C()构造函数的一个实例可以产生继承关系\nD.prototype = new C() // 继承\n// 生成D()构造函数的一个实例o2\nlet o2 = new D()\n// 判断实例o2是否为D()构造函数的一个实例，结果返回true\no2 instanceof D // true\n// 判断实例o2是否为C()构造函数的一个实例，结果返回true\no2 instanceof C // true，因为通过继承关系，C.prototype出现在o2的原型链上\n// 修改D.prototype属性，将其指向一个空对象\nD.prototype = {}\n// 再次生成一个D()构造函数的实例\nlet o3 = new D()\n// 判断实例o3是否为C()构造函数和D()构造函数的实例\no3 instanceof D; // tue\no3 instanceof C; // false\n// 因为D.protoype属性指向了一个空对象，那么C()构造函数的prototype属性将不再处于实例o3的原型链上，因此返回false\n```\n\n## 事件流\n\n事件流描述的是从页面中接收事件的顺序。事件发生后在目标节点和根节点之间按照特定的顺序传播，路径经过的节点都会接收到事件。\n\n一个完整的事件流实际包含3个阶段：事件捕获阶段>事件目标阶段>事件冒泡阶段。上述两种类型的事件流实际对应其中的事件捕获阶段与事件冒泡阶段。\n\n### 事件捕获阶段\n\n事件捕获阶段的主要表现是不具体的节点先接收事件，然后逐级向下传播，最具体的节点最后接收到事件。例如Window>Document>html>body>table>tbody>tr>td\n\n### 事件目标阶段\n\n时间目标阶段表示事件刚好传播到用户产生行为的元素上，可能是事件捕获的最后一个阶段，也可能是事件冒泡的第一个阶段。\n\n### 事件冒泡阶段\n\n事件冒泡阶段的主要表现是最具体的元素先接收事件，然后逐级向上传播，不具体的节点最后接收事件。例如td>tr>tbody>table>body>html>Document>Window\n\n## 事件处理程序\n\n事件处理程序，就是响应某个事件的函数。例如onclick()函数、onload()函数就是响应单击、加载事件的函数。事件处理程序分为DOM0、DOM2、DOM3这3种级别的事件处理程序。由于在DOM1中并没有定义事件的相关内容，因此没有所谓的DOM1级事件处理程序。\n\n### DOM0级事件处理程序\n\nDOM0级事件处理程序是将一个函数赋值给一个事件处理属性，有两种表现形式。第一种是先通过JavaScript代码获取DOM元素，再将函数赋值给对应的事件属性。\n\n```js\nvar btn = document.getElementById(\"btn\"); \nbtn.onclick = function(){}\n```\n\n第二种是直接在html中设置对应事件属性的值，值有两种表现形式，一种是执行的函数体，另一种是函数名，然后在script标签中定义该函数。\n\n```html\n<button onclick=\"alert('面试厅');\">单击</button>\n<button onclick=\"clickFn()\">单击</button>\n<script>\n    function clickFn() {\n        alert('面试厅');\n    }\n</script>\n```\n\n以上两种DOM0级事件处理程序同时存在时，第一种在JavaScript中定义的事件处理程序会覆盖掉后面在html标签中定义的事件处理程序。\n\n- 优点：简单且可以跨浏览器\n- 缺点：一个事件处理程序只能绑定一个函数\n\n### DOM2级事件处理程序\n\n在DOM2级事件处理程序中，当事件发生在节点时，目标元素的事件处理函数就会被触发，而且目标元素的每个祖先节点也会按照事件流顺序触发对应的事件处理程序。DOM2级事件处理方式规定了添加事件处理程序和删除事件处理程序的方法。\n\n### DOM3级事件处理程序\n\nDOM3级事件处理程序是在DOM2级事件的基础上重新定义了事件，也添加了一些新的事件。DOM3级事件处理程序允许自定义事件，自定义事件有createEvent函数创建，返回的对象有一个initCustomEvent()函数，通过传递对应的参数可以自定义事件。\n\n函数可以接收以下4个参数。\n· type：字符串、触发的事件类型、自定义，例如“keyDown”“selectedChange”。\n· bubble（布尔值）：表示事件是否可以冒泡。\n· cancelable(布尔值）：表示事件是否可以取消。\n· detail（对象）：任意值，保存在event对象的detail属性中。\n\n## 浏览器的重排和重绘\n\n浏览器渲染HTML的过程\n\n1. HTML文件被HTML解析器解析成对应的DOM树，CSS样式文件被CSS解析器解析生成对应的样式规则集。\n2. DOM树与CSS样式集解析完成后，附加在一起形成一个渲染树。\n3. 节点信息的计算，即根据渲染树计算每个节点的几何信息。\n4. 渲染绘制，即根据计算完成的节点信息绘制整个页面。\n\n重排和重绘发生在第3步和第4步中。\n\n### 重排\n\n重要知识点：浏览器渲染页面默认采用的是流式布局模型。\n\n重排的过程就发生在DOM节点信息修改的时候。重排实际是根据渲染树中每个渲染对象的信息，计算出各自渲染对象的几何信息。\n\n重排是一种明显的改变页面布局的操作。\n\n常见的引起重排的操作：\n\n- 页面首次渲染\n- 浏览器窗口大小发生改变\n- 元素尺寸或位置发生改变\n- 元素内容发生变化\n- 元素字体发生变化\n- 添加或删除可见的DOM元素\n- 获取某些特定的属性\n\n### 重绘\n\n重绘只是改变元素在页面中的展现样式，而不会引起元素在文档流中位置的改变。\n\n引发重绘的操作：\n\n- color：颜色\n- border-style：边框样式\n- visibility：元素是否可见\n- background：元素背景样式，包括背景色、背景图、背景图尺寸、背景图位置。\n- text-decoration：文本装饰\n- outline：元素的外轮廓的样式，在边框外的位置。\n\n重排一定会引起重绘的操作，而重绘却不一定会引起重排的操作。\n\n## 性能优化\n\n1. 将多次改变样式的属性操作合并为一次\n\n2. 将需要多次重排的元素设置为绝对定位\n\n   需要进行重排的元素都是处于正常的文档流中，常见的操作就是设置其position为absolute或者fixed。\n\n3. 在内存中多次操作节点，完成后在添加至文档树中\n\n4. 将要进行复杂处理的元素处理为display属性为none，处理完成后再进行显示\n\n5. 将频繁获取会引起重排的属性缓存至变量。\n\n6. 尽量减少使用table布局\n\n7. 使用事件委托绑定事件处理程序\n\n8. 利用DocumentFragment操作DOM节点","source":"_posts/2021-09-22-JavaScript重难点实例精讲笔记.md","raw":"---\ntitle: JavaScript重难点实例精讲笔记\ndate: 2021-09-22 17:38:09\ntags:\n\t \t\t- 'JavaScript'\n---\n\n在 JavaScript 中，每种数据类型都会使用 3bit 表示。\n\n- 000 表示 Object 类型的数据。\n- 001 表示 Int 类型的数据。\n- 010 表示 Double 类型的数据。\n- 100 表示 String 类型的数据。\n- 110 表示 Boolean 类型的数据。\n<!--more-->\n\n由于 null 代表的是空指针，大多数平台中值为 0x00，因此 null 的类型标签就成了 0，所以使用 typeof 运算符时会判断为 object 类型，返回‘object’\n\n## 逗号运算符\n\n1. ### 在 for 循环中批量执行表达式\n\n2. ### 用于交换变量，无须额外变量\n\n   一般情况下\n\n   ```js\n   let a = 'a';\n   let b = 'b';\n   let c;\n   c = a;\n   a = b;\n   b = c;\n   ```\n\n   使用逗号运算符\n\n   ```js\n   let a = 'a';\n   let b = 'b';\n   // 方案1\n   a = [b, (b = a)][0];\n   // 方案2\n   a = [b][((b = a), 0)];\n   ```\n\n   在方案 1 中，前一部分[b, b = a]是一个一维数组，数组第二项值是 b = a，实际会将 a 值赋给 b，然后返回“'a'”，因此数组最终的值为['b', 'a']，然后取索引 0 的值为'b'，赋给变量 a，最终实现 a = 'b', b = 'a'。\n   在方案 2 中，前一部分[b]是一个一维数组，后一部分[b = a, 0]，实际会先执行 b = a，将 a 值赋给 b，然后返回“0”，因此后一部分实际是修改了 b 的值并返回索引“0”，最终是 a = [b][0]，即 a = b，实现了 a 与 b 的交换。\n\n3. ### 用于简化代码\n\n   因为逗号运算符可以使多个表达式先后执行，并且返回最后一个表达式的值\n\n   ```js\n   if (x) {\n     foo();\n     return bar();\n   } else {\n     return 1;\n   }\n   // 使用逗号运算符简写后\n   x ? (foo(), bar()) : 1;\n   ```\n\n4. ### 用小括号保证逗号运算符的优先级\n\n   在所有的运算符中，逗号运算符的优先级是最低的，因此对于某些涉及优先级的问题，我们需要使用到小括号，将含有逗号运算符的表达式括起来。\n\n## toString()函数与 valueOf()函数\n\n1. ### toString()函数\n\n   toString()函数的作用是把一个逻辑值转换为字符串，并返回结果。\n\n2. ### valueOf()函数\n\n   valueOf()函数的作用是返回最适合引用类型的原始值，如果没有原始值，则会返回引用类型自身。\n\n## JavaScript 常用的判空方法\n\n对变量进行取反，然后判断是否为 true\n\n```js\nif (!x) {\n  return true;\n}\n```\n\n### 判断变量为空对象\n\n1. #### 判断变量为 null 或者 undefined\n\n   判断一个变量是否为空时，可以直接将变量与 null 或者 undefined 相比较\n\n   ```js\n   if (obj == null) {\n   } // 可以判断null或者undeﬁned\n\n   if (obj === undeﬁned) {\n   } // 只能判断undeﬁned\n   ```\n\n2. #### 判断变量是否为空对象{}\n\n   判断一个变量是否为空对象时，可以通过 for...in 语句遍历变量的属性，然后调用 hasOwnProperty()函数，判断是否有自身存在的属性，如果存在则不为空对象，如果不存在自身的属性（不包括继承的属性），那么变量为空对象。\n\n   ```js\n   function isEmpty(obj) {\n     for (let key in obj) {\n       if (obj.hasOwnProperty(key)) {\n         return false;\n       }\n     }\n     return true;\n   }\n   // 定义空的对象字面量\n   var o = {};\n\n   function Person() {}\n   Person.prototype.name = 'kingx';\n   // 通过new操作符获取对象\n   var p = new Person();\n\n   console.log(isEmpty(o)); // true\n   console.log(isEmpty(p)); // true\n   ```\n\n3. #### 判断变量为空数组\n\n   ```js\n   arr instanceof Array && arr.length === 0;\n   ```\n\n4. #### 判断变量为空字符串\n\n   判断变量是否为空字符串时，可以直接将其与空字符串相比较，或者调用 trim()函数去掉前后的空格，然后判断字符串的长度。\n\n   ```js\n   str === '' || str.trim().length === 0;\n   ```\n\n5. #### 判断变量为 0 或者 NaN\n\n   ```js\n   !(Number(num) && num) == true;\n   ```\n\n## 引用数据类型\n\n在 JavaScript 中，如果函数没有 return 值，则默认 return this。\n\n创建一个对象实例，new 操作符做了 3 件事情。\n\n```js\nfunction Cat(name, age) {\n  var Cat = {};\n  Cat.name = name;\n  Cat.age = age;\n  return Cat;\n}\n\nlet cat = new Cat();\n```\n\n```js\n// 相当于\nlet cat = {};\ncat.__proto__ = Cat.prototype;\nCat.call(cat);\n```\n\n第一行：创建一个空对象。\n\n第二行：将空对象的**proto**属性指向 Cat 对象的 prototype 属性。\n\n第三行：将 Cat()函数中的 this 指向 cat 变量。\n\n自定义一个类似 new 功能的函数\n\n```js\nfunction Cat(name, age) {\n  this.name = name;\n  this.age = age;\n}\n\nCat.prototype.sayHi = function () {\n  console.log('hi');\n};\n\nfunction New() {\n  let obj = {};\n  obj.__proto__ = Cat.prototype; // 核心代码，用于继承\n  let res = Cat.apply(obj, arguments);\n  return typeof res === 'object' ? res : obj;\n}\nconsole.log(New('mimi', 18).sayHi()); //hi\n```\n\n## Object 类型的静态函数\n\n### object.create()函数\n\n属性描述符的格式如下所示\n\n```js\npropertyName: {\n   value: '', // 设置此属性的值\n   writable: true, // 设置此属性是否可写入；默认为false：只读\n   enumerable: true, // 设置此属性是否可枚举；默认为false：不可枚举\n   conﬁgurable: true // 设置此属性是否可配置，如是否可以修改属性的特性及是否可以删除属性；默认为false\n}\n```\n\n```js\n// 建立一个自定义对象，设置name和age属性\nvar obj = Object.create(null, {\n  name: {\n    value: 'tom',\n    writable: true,\n    enumerable: true,\n    conﬁgurable: true,\n  },\n  age: {\n    value: 22,\n  },\n});\nconsole.log(obj.name); // tom\nconsole.log(obj.age); // 22\nobj.age = 28;\nconsole.log(obj.age); // 22 ：age属性的writable默认为false，此属性为只读\nfor (var p in obj) {\n  console.log(p); // name ：只输出name属性；age属性的enumerable默认为false，不能通过for...in 枚举\n}\n```\n\n### Array 类型\n\n#### 判断一个变量是数组还是对象\n\n1. ##### instanceof 运算符\n\n   instanceof 运算符用于通过查找原型链来检测某个变量是否为某个类型数据的实例，使用 instanceof 运算符可以判断一个变量是数组还是对象。\n\n   ```js\n   let a = [1, 2, 3];\n   console.log(a instanceof Array); // true\n   console.log(a instanceof Object); // true\n   let b = { name: 'kingx' };\n   console.log(b instanceof Array); // false\n   console.log(b instanceof Object); // true\n   ```\n\n   封装函数判断变量是数组还是对象\n\n   ```js\n   // 判断变量是数组还是对象\n   function getDataType(o){\n       if(o instance of Array){\n           return 'Array'\n       }else if(o instanceof Object){\n           return 'Object'\n       }else{\n           return 'param is not object type'\n       }\n   }\n   ```\n\n2. #### 判断构造函数\n\n   判断一个变量是否是数组或者对象，从另一个层面讲，就是判断变量的构造函数是 Array 类型还是 Object 类型。因为一个对象的实例都是通过构造函数生成的，所以，我们可以直接判断一个变量的 constructor 属性。\n\n```js\nlet a = [1, 2, 3];\nconsole.log(a.constructor === Array); // true\nconsole.log(a.constructor === Object); // false\n\nlet b = { name: 'kingx' };\nconsole.log(a.constructor === Array); // false\nconsole.log(a.constructor === Object); // true\n```\n\n每个变量都会有一个**proto**属性，表示的是隐式原型。一个对象的隐式原型指向的是构造该对象的构造函数的原型，用数组举例。\n\n```js\n[].__proto__ === [].constructor.prototype // true\n[].__proto__ === Array.prototype; // true\n```\n\n上面直接通过 constructor 属性判断的语句也可以改写成下面的形式\n\n```js\nlet a = [1, 2, 3];\nconsole.log(a.__proto__.constructor === Array); // true\nconsole.log(a.__proto__.constructor === Object); // false\n```\n\n同时，也可以将代码进行封装，得到一个判断变量是数组还是对象的通用函数。\n\n```js\n// 判断变量是数组还是对象\nfunction getDataType(o) {\n   // 获取构造函数\n   var constructor = o._ _proto_ _.constructor || o.constructor;\n   if (constructor === Array) {\n       return 'Array';\n   } else if (constructor === Object) {\n       return 'Object';\n   } else {\n       return 'param is not object type';\n   }\n}\n```\n\n4. ##### Array.isArray()函数\n\n   Array.isArray()函数只能判断变量是否为数组。\n\n### reduce()函数累加器处理数组元素\n\nreduce()函数的语法如下所示\n\n```js\narr.reduce(callback[, initialValue]);\n```\n\ninitialValue 用作 callback 的第一个参数值，如果没有设置，则会使用数组的第一个元素值。\n\n1. #### 求数组每个元素相加的和\n\n   ```js\n   let arr = [1, 2, 3, 4, 5];\n   let sum = arr.reduce((accumulator, currentValue) => {\n     return accumulator + currentValue;\n   }, 0);\n   console.log(sum);\n   ```\n\n2. #### 统计数组中每个元素出现的次数\n\n   ```js\n   let countOccurrences = (arr) => {\n     return arr.reduce((accumulator, currentValue) => {\n       accumulator[currentValue]\n         ? accumulator[currentValue]++\n         : (accumulator[currentValue] = 1);\n       return accumulator;\n     }, {});\n   };\n   // 测试代码\n   countOccurrences([1, 2, 2, 3, 4, 4]);\n   ```\n\n## 函数的定义与调用\n\n函数的定义大体可以分为3种，分别是函数声明，函数表达式和Function构造函数。\n\n### 函数声明\n\n函数声明式直接使用function关键字接一个函数名，函数名后是接收函数的形参。\n\n```js\n// 函数声明式\nfunction sum(num1,num2){\n\treturn num1 + num2\n}\n```\n\n### 函数表达式\n\n函数表达式的形式类似普通变量的初始化，只不过这个变量初始化的值是一个函数。\n\nfoo是函数名称，它实际是函数内部的一个局部变量，在函数外部是无法直接调用的。\n\n```js\n// 函数表达式 属于匿名函数表达式\nlet sum = function (num1,num2){\n\treturn num1 + num2\n}\nconsole.log(sum(1, 3)) // 4\n// 具有函数名的函数表达式\nlet sum = function foo(num, num2){\n    return num1 + num2\n}\n```\n\n### Function()构造函数\n\n使用new操作符，调用Function()构造函数，传入对应的参数，也可以定义一个函数。\n\n```js\nlet add = new Function('a', 'b', 'return a + b')\n```\n\n但是这种使用比较少，主要有以下两个原因。\n\n第一个原因是Function()构造函数每次执行时，都会解析函数主体，并创建一个新的函数对象，所以当在一个循环或者频繁执行的函数中调用Function()构造函数时，效率是非常低的。\n\n第二个原因是使用Function()构造函数创建的函数，并不遵循典型的作用域，它将一直作为顶级函数执行。所以在一个函数A内部调用Function()构造函数时，其中的函数体并不能访问到函数A中的局部变量，而只能访问到全局变量。\n\n### 函数表达式的应用场景\n\n主要针对函数递归与代码模块化这两个应用场景进行讲解\n\n#### 函数递归\n\n通过函数表达式可以定义具有名称的函数，它作为函数内部的一个局部变量，指向函数自声。\n\n```js\n// 斐波那契数列问题\nfunction fibonacci(num){\n\tif(num === 1 || num === 2){\n\treturn 1\n    }\n    return fibonacci(num-2) + fibonacci(num-1)\n}\n```\n\n通过函数表达式实现代码\n\n```js\n// 斐波那契数列问题\nlet fibonacci= function(num) {\n\tif(num === 1 || num === 2){\n\treturn 1\n    }\n    return fibonacci(num-2) + fibonacci(num-1)\n}\n```\n\n#### 代码模块化\n\n在ES6以前，JavaScript中是没有块级作用域的，但是我们可以通过函数表达式来间接地实现模块化，将特定的模块化代码封装在一个函数中，只对外暴露接口。\n\n```js\nlet person = (function name() {\n  let _name = '';\n  return {\n    getName: function () {\n      return _name;\n    },\n    setName: function (newName) {\n      _name = newName;\n    },\n  };\n})();\n\nperson.setName('king');\nconsole.log(person.getName());\n```\n\n#### 函数提升\n\n对于函数声明，存在函数提升，所以即使函数的调用在函数的声明之前，仍然可以正常执行。\n\n```js\nconsole.log(add(1,2)) // 3\nconsole.log(sub(5,3)) // Uncaught ReferenceError: sub is not defined\n// 函数声明\nfunction add(a1,a2){\n\treturn a1 + a2\n}\n// 函数表达式\nlet sub = function(a1, a2){\n\treturn a1 -a2\n}\n```\n\n### 函数调用\n\n函数调用存在5种模式，函数调用模式，方法调用模式，构造器调用模式，call()函数、apply()函数调用模式，匿名函数调用模式。\n\n#### 函数调用模式\n\n函数调用模式是通过函数声明或者函数表达式的方法定义函数，然后直接通过函数名调用的模式\n\n```js\n// 函数声明\nfunction add(a1, a2){\n\treturn a1 + a2\n}\n// 函数表达式\nlet sub = function (a1, a2){\n\treturn a1 - a2\n}\nadd(1 ,3)\nsub(4 ,1)\n```\n\n#### 方法调用模式\n\n方法调用模式会优先定义一个对象obj，然后在对象内部定义值为函数的属性property，通过对象obj.property()来进行函数的调用。\n\n```js\n// 定义对象\nlet obj ={\n\tname: 'kingx',\n\t// 定义getName属性，值为一个函数\n\tgetName: function(){\n\t\treturn this.name\n\t}\n}\nobj.getName() // 通过对象进行调用\n```\n\n函数还可以通过中括号来调用，即对象名['函数名']，那么上面的实例代码可以改写为\n\n```js\nlet obj ={\n\tname:'kingx',\n\tgetName: function(){\n        console.log(this.name)\n\t},\n\tsetName:function(name){\n        this.name=name;\n        return this //在函数内部返回函数对象本身\n\t}\n}\nobj.setName('kingx2').getName() //链式函数调用\n```\n\n#### 构造器调用模式\n\n构造器调用模式会定义一个函数，在函数中定义实例属性，在原型上定义函数，然后通过new操作符生成函数的实例，再通过实例调用原型上定义的函数。\n\n```js\n// 定义函数对象\nfunction Person(name){\n\tthis.name = name\n}\n// 原型上定义函数\nPerson.prototype.getName = function (){\n\treturn this.name;\n}\n// 通过new操作符生成实例\nlet p = new Person('kingx')\n// 通过实例进行函数的调用\np.getName()\n```\n\n#### call()函数，apply()函数调用模式\n\n通过call函数或者apply函数可以改变函数执行的主体，使得某些不具有特定函数的对象可以直接调用该特定函数。\n\n```js\n// 定义一个函数\nfunction sum(num1, num2){\n    return num1 + num2;\n}\n// 定义一个对象\nlet person = {}\n// 通过call()函数与apply()函数调用sum()函数\nsum.call(person,1, 2)\nsum.apply(person,[1, 2])\n```\n\n通过call()函数与apply()函数，使得没有sum()函数的person对象也可以直接调用sum()函数。\n\n#### 匿名函数调用模式\n\n匿名函数，就是没用函数名称的函数。匿名函数的调用有两种方式，一种是通过函数表达式定义函数，并赋给变量，通过变量进行调用。另一种是使用小括号()将匿名函数括起来，然后在后面使用小括号，传递对应的参数，进行调用。\n\n```js\n// 通过函数表达式定义匿名函数，并赋给变量sum\nlet sum = function(num1, num2) {\n    return num1 + num2\n}\n// 通过sum()函数进行匿名函数调用\nsum(1, 2)\n// 小括号括起来\n(function(num1, num2){\n    return num1 + num2\n})(1, 2) //3\n```\n\n### 函数参数\n\n#### 形参实参\n\n函数的参数分为两种，分别是形参和实参。\n\n形参全称为形式参数。是在定义函数名称与函数体使用的参数，目的是用来接收调用该函数时传入的参数。\n\n实参全称为实际参数，是在调用时传递给函数的参数，实参可以使常量、变量、表达式、函数等类型。\n\n##### 形参和实参的区别\n\n1. 形参出现在函数的定义中，只能在函数体内使用，一旦离开该函数则不能使用；实参出现在主调函数中，进入被调函数后，实参也将不能被访问。\n2. 在强类型语言中，定义的形参和实参在数量、数据类型和顺序上要保持严格一致，否则会抛出“类型不匹配”的异常\n3. 在函数调用过程中，数据传输是单向的，即只能把实参的值传递给形参，而不能把形参的值反向传递给实参。\n4. 当实参是基本数据类型的值时，实际是将实参的值复制一份传递给形参，在函数运行结束时形参被释放，而是实参中的值不会变化。\n\n### arguments对象的性质\n\narguments是所有函数都具有的一个内置局部变量，表示的是函数实际接收的参数，是一个类数组结构。它除了具有length属性外，不具有数组的一些常有方法。\n\n#### 函数内部无法访问\n\narguments对象只能在函数内部使用，无法在函数外部访问到arguments对象。\n\n```js\nfunction foo(){\n\tconsole.log(arguments.length) // 3 \n    function foo2(){\n        console.log(arguments.length) // 0\n    }\n    foo2()\n}\n\nfoo(1,2,3)\n```\n\n#### 可通过索引访问\n\narguments对象是一个类数组结构，可以通过索引访问，每一项表示对应传递的实参值，如果该项索引值不存在，则会返回'undefined'\n\n```js\nfunction sum(num1, num2){\n    console.log(arguments[0]) // 3\n    console.log(arguments[1]) // 4\n    console.log(arguments[2]) // undefined\n}\n\nsum(3, 4)\n```\n\n#### 由实参决定\n\narguments对象的值由实参决定，而不是由定义的形参决定，形参与arguments对象占有独立的内存空间。\n\n1.  arguments对象的length属性在函数调用的时候就已经确定，不会随着函数的处理而改变。\n2.  指定的形参在传递实参的情况下，arguments对象与形参值相同，并且可以相互改变。\n3.  指定的形参在未传递实参的情况下，arguments对象对应索引值返回“undefined”。\n4. 指定的形参在未传递实参的情况下，arguments对象与形参值不能相互改变。\n\n```js\nfunction foo(a,b,c){\n    console.log('arguments的长度',arguments.length); //2\n    arguments[0] = 11;\n    console.log('a的值', a); // 11\n    b = 12;\n    console.log('arguments索引为1的值',arguments[1]); //12\n    arguments[2] = 3;\n    console.log('c的值', c); // undefined\n    c = 13;\n    console.log('arguments索引为2的值', arguments[2]); // 3\n  \n    console.log('arguments的长度', arguments.length); // 2\n}\nfoo(1, 2)\n```\n\n#### 特殊的arguments.callee属性\n\narguments对象有一个很特殊的属性callee，表示的是当前正在执行的函数，在比较时是严格相等的,但是使用arguments.callee属性会改变函数内部的this值。\n\n```js\nfunction foo(){\n\tconsole.log(arguments.callee === foo); //true\n}\nfoo()\n```\n\n用法：\n\n```js\nfunction create(){\n\treturn function(n) {\n\t\tif(n <= 1) return 1;\n        return n * arguments.callee(n - 1)\n\t}\n}\nlet result = create()(5)\n```\n\n### arguments对象的应用\n\n#### 实参的个数判断\n\n```js\nfunction f(x, y, z){\n    // 检查传递的参数个数是否正确\n    if(arguments.length !== 3){\n        throw new Error('期望传递的参数个数为3，实际传递的个数为：'+ arguments.length)\n    }\n    // ...do something\n}\nf(1, 2) //期望传递的参数个数为3，实际传递的个数为：2\n```\n\n#### 任意个数的参数处理\n\n定义一个函数，该函数只会特定处理传递的前几个参数，对于后面的参数不论传递多少个都会统一处理，这种场景下我们可以使用arguments对象。\n\n```js\nfunction joinStr(sepreator){\n    // arguments对象是一个类数组结构，可以通过call()函数间接调用slice()函数，得到一个数组\n    let strArr = Array.prototype.slice.call(arguments, 1)\n    // strArr数组直接调用join()函数\n    return strArr.join(sepreator)\n}\njoinStr('-','orange','apple','banana')\njoinStr(',','orange','apple','banana')\n```\n\n#### 模拟函数重载\n\n函数重载表示的是在函数名相同的情况下，通过函数形参的不同参数类型或者不同参数个数来定义不同的函数。JavaScript是一门弱类型语言，没有函数重载。\n\n```js\n// 通用求和函数\nfunction sum(){\n    // 通过call()函数间接调用数组的slice()函数得到函数参数的数组\n    let arr = Array.prototype.slice.call(arguments)\n    // 调用数组的reduce函数进行多个值的求和\n    return arr.reduce((pre,cur)=>{\n        return pre + cur\n    }, 0)\n}\nsum(1,2,3,4)\n```\n\n### 变量提升和函数提升\n\n```js\nvar a = true;\nfoo();\n\nfunction foo(){\n    if(a){\n        var a =10\n    }\n    console.log(a); // undefined\n}\n```\n\n首先在全局作用域中定义一个变量a，值为true，然后调用foo()函数。foo()函数时通过函数声明定义的，会进行函数提升，因此foo()函数会正常调用。在foo()函数内部，首先判断变量a的值，由于变量a在函数内部重新通过var关键字声明了一次，因此a会出现变量提升，a会提升至foo()函数的顶部，此时a的值为undefined。那么通过if语句进行判断时，返回'false'，并未执行a=10 的赋值语句，因此最后输出'undefined'。\n过程可以改为一下代码段。\n\n```js\nvar a;\na = true;\nfunction foo(){\n    var a;\n    if(a){\n        a = 10;\n    }\n    console.log(a)\n}\n```\n\n### 变量提升和函数提升优先级\n\n```js\nfunction fn() {\n   console.log(typeof foo); // function\n   // 变量提升\n   var foo = 'variable';\n   // 函数提升\n   function foo() {\n      return 'function';\n   }\n   console.log(typeof foo); // string\n}\nfn();  \n```\n\n变量提升的优先级要比函数提升的优先级高，因此执行过程可以改写为：\n\n```js\nfunciton fn(){\n    // 变量提升至函数顶部\n    var foo;\n    // 函数提升，但是优先级低，出现在变量声明后面，则foo是一个函数\n    funciton foo(){\n        return 'function'\n    }\n    console.log(typeof foo)\n    \n    foo = 'variable' // 变量赋值\n    console.log(typeof foo) // string\n}\nfn()\n```\n\n### 变量提升和函数提升整体应用\n\n```js\nfunction foo(){\n\tvar a = 1;\n\tfunction b(){\n\t\ta = 10;\n\t\treturn;\n\t\tfunction a(){}\n\t}\n\tb();\n\tconsole.log(a) // 1\n}\nfoo()\n```\n\n代码中首先定义一个变量a并赋值为1，然后声明一个b()函数，并在后面直接进行调用，最后输出变量a的值。\n\n在b()函数中，赋值的变量a并未使用var关键字，因此变量a是一个全局环境的变量，而在return语句之后出现了一个变量a的函数声明，则会进行提升，执行return语句后，变量a的值仍然为1，可改写代码为：\n\n```js\nfunction foo(){\n    // 变量a的提升\n    var a;\n    // 函数声明b的提升\n    function b(){\n        // 内部的函数声明a的提升\n        function a() {}\n        a = 10\n        return\n    }\n    a = 1;\n    b();\n    console.log(a) // 1\n}\nfoo()\n```\n\n### 闭包\n\n一个拥有许多变量和绑定了这些变量执行上下文环境的表达，通常是一个函数。\n\n闭包有两个特点\n\n- 函数拥有的外部变量的引用，在函数返回时，该变量仍然处于活跃状态。\n- 闭包作为一个函数返回时，其执行上下文环境不会被销毁，仍处于执行上下文环境中。\n\n在JavaScript中存在一种内部函数，即函数声明和函数表达式可以位于另一个函数的函数体内，在内部函数中可以访问外部函数声明的变量，当这个内部函数在包含它们的外部函数之外被调用时，就会形成闭包。\n\n```js\nfunction fn() {\n  var max = 10\n  return function bar(x) {\n    if (x > max) {\n      console.log(x)\n    }\n  }\n}\n\nvar f1 = fn()\nf1(11) // 11\n```\n\n#### 闭包的优点\n\n- 保护函数内变量的安全，实现封装，防止变量流失其他环境发生命名冲突，造成环境污染。\n- 在适当的时候，可以在内存中维护变量并缓存，提高执行效率。\n\n#### 闭包的缺点\n\n- 消耗内存：通常来说，函数的活动对象会随着执行上下文环境一起被销毁，但是，由于闭包引用的是外部函数的活动对象，因此这个活动对象无法被销毁，这意味着，闭包比一般的函数需要消耗更多的内存。\n- 泄露内存：在IE9之前，如果闭包的作用于链中存在DOM对象，则意味着该DOM对象无法被销毁，造成内存泄露。\n\n## this使用\n\n### this指向全局对象\n\n当函数没有所属对象而直接调用时，this指向的是全局对象。\n\n#### this指向所属对象\n\n谁调用它，它就指向谁。\n\n#### this指向对象实例\n\n当通过new操作符调用构造函数生成对象的实例时，this指向该实例。\n\n```js\n//全局变量\nlet number = 10\nfunction Person(){\n    // 复写全局变量\n    number = 20;\n    // 实例变量\n    this.number =30\n}\n// 原型函数\nPerson.prototype.getNumber = function () {\n    return this.number\n}\n// 通过new操作符获取对象的实例\nlet p = new Person()\nconsole.log(p.getNumber()) // 30\n```\n\n#### this指向call()函数、apply()函数、bind()函数调用后重新绑定的对象\n\n```js\n// 全局变量\nlet value = 10;\nlet obj = {\n    value: 20\n}\n// 全局函数\nlet method = function() {\n    console.log(this.value)\n}\nmethod(); // 10\nmethod.call(obj); // 20\nmethod.apply(obj); // 20\nlet newMethod = method.bind(obj)\nnewMethod(); // 20\n```\n\n#### 闭包中的this\n\n函数的this变量只能被自身访问，其内部函数无法访问。因此在遇到闭包时，闭包内部的this关键字无法访问到外部函数的this变量。\n\n## call()函数、apply()函数、bind()函数的使用与区别\n\n### call()函数的基本使用\n\ncall()函数调用一个函数时，会将该函数的执行对象上下文改变为另一个对象。其语法为：\n\n```js\nfunction.call(thisAra, arg1, arg2)\n```\n\n- function为需要调用的函数。\n- thisArg表示的是新的对象上下文，函数中的this将指向thisArg，如果thisArg为null或者undefined，则this会指向全局对象。\n- arg1,arg2，...表示的是函数所接收的参数列表。\n\ncall函数用法实例\n\n```js\n// 定义一个add()函数\nfunction add(x, y){\n    return x + y\n}\n// 通过call()函数进行add()函数的调用\nfunction myAddCall(x, y){\n    // 调用add()函数的call()函数\n    return add.call(this, x, y)\n}\nconsole.log(myAddCall(10, 20)) // 输出'30'\n```\n\n### apply()函数的基本使用\n\napply()函数的作用域与call()函数时一致的，只是在传递参数的形式上存在差别。\n\n```js\nfunciton.apply(thisArg, [argsArray])\n```\n\n- function与thisArg参数与call()函数中的解释一样\n- [argsArray]表示的是参数会通过数组的形式进行传递，如果argsArray不是一个有效的数组或者arguments对象，则会抛出一个TypeError异常\n\n```js\n// 定义一个add()函数\nfunction add(x, y){\n    return x + y\n}\n// 通过apply()函数进行add()函数的调用\nfunction myAddApply(x, y){\n    // 调用add()函数的call()函数\n    return add.apply(this, [x, y])\n}\nconsole.log(myAddApply(10, 20)) // 输出'30'\n```\n\n### bind()函数的基本使用\n\nbind()函数创建一个新的函数，在调用时设置this关键字为提供的值，在执行新函数时，将给定的参数列表作为原函数的参数序列，从前往后匹配。\n\n```js\nfunction.bind(this.Arg, arg1, arg2)\n```\n\nbind()函数与call()函数接收的参数是一样的，其返回值是原函数的副本，并拥有指定的this值和初始参数。\n\n```js\n// 定义一个add()函数\nfunction add(x, y){\n    return x + y\n}\n// 通过bind()函数进行add()函数的调用\nfunction myAddBind(x, y){\n    // 调用bind()函数得到一个新的函数\n    let bindAddFn = add.bind(this, x, y)\n    return bindAddFn()\n}\nconsole.log(myAddBind(10, 20)) // 输出'30'\n```\n\n###  call()函数、apply()函数、bind()函数的比较\n\n三者的相同之处都是：都会改变函数调用的执行主体，修改this的指向。\n\n不同之处在以下两点\n\n1. call()函数与apply()函数在执行后会理解立即调用前面的函数，而bind()函数不会立即调用，它会返回一个新的函数，可以在任何时候进行调用。\n2. call()接收从第二个到最后一个参数，apply()接收一个数组。\n\n## 对象的属性\n\n### 访问器属性\n\n访问器属性同样包含4个特性，分别是[[Configurable]]、[[Enumerable]]、[[Get]]和[[Set]]。\n\n- [[Configurable]]：表示属性能否删除而重新定义，或者是否可以修改为访问器属性，默认值为true\n- [[Enumerable]]：表示属性是否可枚举，可枚举的属性能够通过for...in循环返回，默认值为true。 \n- [[Get]]：在读取属性值时调用的函数（一般称为getter()函数），负责返回有效的值，默认值为undefined。\n- [[Set]]：在写入属性值时调用的函数（一般称为setter()函数），负责处理数据，默认值为undefined。\n\n如果需要修改访问器属性默认的特性，则必须使用Object.defineProperty()函数\n\ngetter()函数和setter()函数的存在在一定程度上可以实现对象的私有属性，私有属性不对外暴露。如果想要读取和写入私有属性的值，则需要通过设置额外属性的getter()函数和setter()函数来实现。\n\n```js\nlet person ={\n\t_age: 10\n}\nObject.defineProperty(person, 'age', {\n  get: function () {\n    return this._age;\n  },\n  set: function (newValue) {\n    if (newValue > 10) {\n      this._age = newValue;\n      console.log('设置成功');\n    }\n  },\n});\n```\n\n### 对象深拷贝\n\nJSON.parse(JSON.stringify(Obj))\n\n```js\n/* 使用JSON.stringify()函数将原始对象序列化为字符串，再使用JSON.parse()函数将字符串反序列化为一个对象。 */\nlet origin = {\n  a: 1,\n  b: 2,\n  C: {\n    d: 'name',\n  },\n};\nlet result = JSON.parse(JSON.stringify(origin));\nconsole.log(result);\n```\n\n该方法有以下几个问题：\n\n1. 无法实现对函数、RegExp等特殊对象的克隆。\n2. 对象的constructor会被抛弃，所有的构造函数会指向Object，原型链关系断裂。\n3. 对象中如果存在循环引用，会抛出异常。\n\n```js\nfunction Animal(name) {\n  this.name = name;\n}\nlet animal = new Animal('tom');\nlet origin = {\n  // 属性为函数\n  a: function () {\n    return 'a';\n  },\n  // 属性为正则表达式对象\n  b: new RegExp('d', 'g'),\n  // 属性为某个对象的实例\n  c: animal,\n};\nlet result = JSON.parse(JSON.stringify(origin));\n\nconsole.log(origin, '打印origin');\nconsole.log(result, '打印result');\nconsole.log(origin.c.constructor);\nconsole.log(result.c.constructor);\n```\n\n### 原型对象、构造函数、实例之间的关系\n\n每一个函数在创建时都会被赋予一个prototype属性。在默认情况下，所有的原型对象都会增加一个constructor属性，指向prototype属性所在的函数，即构造函数。\n\n当我们通过new操作符调用构造函数创建一个实例时，实例具有一个__proto__属性，指向构造函数的原型对象，因此__proto__属性可以看做是一个连续实例与构造函数的原型对象的桥梁。\n\n```js\nfunction Person(){}\nPerson.prototype.name = 'Tom'\nPerson.prototype.age = 29\nPerson.prototype.job = 'Software Enginner'\nPerson.prototype.sayName = function(){\n    console.log(name)\n}\nlet person1 = new Person()\nlet person2 = new Person()\n```\n\n构造函数的Person有个prototype属性，指向的是Person的原型对象。在原型对象中有constructor属性和另外4个原型对象上的属性，其中constructor属性指向构造函数本身。\n\n通过new操作符创建的两个实例person1和person2，都具有一个__proto__属性，指向的是Person的原型对象。\n\n### 实例的属性读取顺序\n\n当我们通过对象的实例读取某个属性时，它会先在实例本身去找指定的属性，如果找到了，则直接返回该属性的值；如果没找到则会继续沿着原型对象寻找，如果在原型对象中找到了该属性，则返回该属性的值。\n\n改造上方代码\n\n```js\nfunction Person(){\n    this.name = 'kingx'\n}\nPerson.prototype.name = 'Tom'\nPerson.prototype.age = 29\nPerson.prototype.job = 'Software Enginner'\nPerson.prototype.sayName = function(){\n    console.log(name)\n}\nlet person1 = new Person() \nconsole.log(person1.name) // kingx\n```\n\n### 重写原型对象\n\n```js\nfunction Person(){}\nPerson.prototype = {\n    constructor: Person, // 重要\n    name: 'Nicholas',\n    age: 29,\n    job: 'Software Engineer',\n    sayName: function(){\n        console.log(name)\n    }\n}\n```\n\n将一个对象字面量赋给prototype属性的方式实际是重写了原型对象，等同于切断了构造函数和最初原型之间的关系，因此有一点需要的是，如果仍然想使用constructor属性做后续处理，则应该在对象字面量增加一个constructor属性，指向构造函数本身，否则原型的constructor属性会指向Object类型的构造函数，从而导致constructor属性与构造函数的脱离，而且必须要按照顺序执行，在最后进行新的对象的创建。\n\n### 原型链\n\n在JS中几乎所有的对象都具有__proto__属性，由__proto__属性连接而成的链路构成了JS的原型链，原型链的顶端是Object.prototype，它的__proto__属性为null。\n\n```js\nfunction Person(){}\nlet person = new Person \n// person实例沿着原型链第一次追溯，__proto__属性指向Person()构造函数的原型对象\nperson.__proto__ === Person.prototype\n// person实例沿着原型链第二次追溯，Person原型对象的__protos__属性指向Object类型的原型对象。\nperson.__proto__.__proto__ === Person.prototype.__proto__ === Object.prototype\n// person实例沿着原型链第三次追溯，Object类型的原型对象的__proto__属性为null\nperson.__proto__.__proto__.__proto__ === Object.prototype.__proto__ === null\n```\n\n#### 原型链的特点\n\n1. 由于原型链的存在，属性查找的过程不再是只查找自身的原型对象，而是会沿着整个原型链一直向上，直到追溯到Object.prototype。如果Object.prototype上，直到追溯到Object.prototype。如果Object.prootype上也找不到该属性，则返回'undefined'。如果期间在实例本身或者某个原型对象上找到了该属性，则会直接返回结果，因此会存在属性覆盖的问题。\n\n   在生成自定义对象的实例时，也可以调用到某些未在自定义构造函数上的函数，例如toString()函数\n\n   ```js\n   function Person(){}\n   let p = new Person()\n   p.toString() // [object Object] 实际调用的是Object.prototype.toString()函数\n   ```\n\n2. 由于属性查找会经历整个原型链，因此查找的链路越长，对性能的影响越大。\n\n#### 属性区分\n\n对象属性的寻找往往会设计整个原型链，Object()构造函数的原型对象中提供了一个hasOwnProperty()函数，用于判断属性是否为自身拥有的。\n\n```js\nfunction Person(name){\n    // 实例属性name\n    this.name = name\n}\n// 原型对象上的属性age\nPerson.prototype.age = 12\nlet person = new Person('kingx')\nconsole.log(person.hasOwnProperty('name')) // true\nconsole.log(person.hasOwnProperty('age')) // false\n```\n\n在使用for...in运算符遍历对象的属性时，一般可以配合hasOwnProperty()函数一起使用，检测是否是对象自身的属性，然后做后续处理。\n\n```js\nfor (let prop in person){\n    if(person.hasOwnproperty(prop)){\n \t\t...       \n    }\n}\n```\n\n#### 内置构造函数\n\nJavaScript中有一些特定的内置构造函数，如String()构造函数、Number()构造函数，Array()构造函数、Object()构造函数等。\n\n它们本身的__proto__属性都统一指向Function.prototype。\n\n```js\nString.__proto__ === Function.prototype // true\nNumber.__proto__ === Function.prototype // true\nArray.__proto__ === Function.prototype // true\nDate.__proto__ === Function.prototype // true\nObject.__proto__ === Function.prototype // true\nFunction.__proto__ === Function.prototype // true\n```\n\n#### __proto__属性\n\n```js\nFunction.prototype.a = 'a'\nObject.prototype.b = 'b'\n\nfunction Person(){}\n\nlet p = new Person();\n\nconsole.log('p.a', p.a)\nconsole.log('p.b', p.b)\n```\n\n实例p的原型链\n\n```js\n// 实例p直接原型\np.__proto__ = Person.prototype\n// Person原型对象的原型\nPerson.prototype.__proto__ = Object.prototype\n```\n\n#### 继承\n\n##### 原型链继承\n\n原型链继承的主要思想是：重写子类的prototype属性，将其指向父类的实例\n\n```js\n// 子类Cat\nfunction Cat(name) {\n    this.name = name\n}\n// 原型继承\nCat.prototype = new Animal();\n// 很关键的一句，将Cat的构造函数指向自身\nCat.prototype.constructor = Cat;\n\nlet cat = new Cat('coffee')\n```\n\n###### 原型链继承的优点\n\n1. 简单、易于实现\n\n2. 继承关系纯粹\n\n   生成的实例既是子类的实例，也是父类的实例。\n\n3. 可通过子类直接访问父类原型链属性和函数\n\n   通过原型链继承的子类，可以直接访问到父类原型链上新增的函数和属性。\n\n###### 原型链继承的缺点\n\n1. 子类的所有实例将共享父类的属性\n2. 在创建子类实例时，无法向父类的构造函数传递参数\n3. 无法实现多继承\n4. 为子类增加原型对象上的属性和函数时，必须放在new Animal()函数之后\n\n##### 构造继承\n\n构造继承的主要思想是在子类的构造函数中通过call()函数改变this指向，调用父类的构造函数，从而能将父类的实例的属性和函数绑定到子类的this中\n\n```js\n// 父类\nfunction Animal(age) {\n  // 属性\n  this.name = \"Animal\";\n  this.age = age;\n  // 实例函数\n  this.sleep = function () {\n    return this.name + \"正在睡觉！\";\n  };\n}\n// 父类原型函数\nAnimal.prototype.eat = function (food) {\n  return this.name + \"正在吃：\" + food;\n};\n// 子类\nfunction Cat(name) {\n  // 核心，通过call()函数实现Animal的实例的属性和函数的继承\n  Animal.call(this);\n  this.name = name || \"tom\";\n}\n// 生成子类的实例\nlet cat = new Cat(\"tony\");\n// 可以正常调用父类实例函数\nconsole.log(cat.sleep());\n// 不能调用父类原型函数\nconsole.log(cat.eat());\n```\n\n###### 构造继承的优点\n\n1. 可解决子类实例共享父类属性的问题\n\n2. 创建子类的实例时，可以向父类传递参数\n\n   在call()函数中，可以传递参数，将参数传递给父类。\n\n3. 可以实现多继承\n\n   在子类的构造函数中，可以通过多次调用call()函数来继承多个父对象，每调用一次call()函数就会将父类的实例的属性和函数\n\n###### 构造继承的缺点\n\n1. 实例只是子类的实例，并不是父类的实例\n2. 只能继承父类实例的属性和函数，并不能继承原型对象上的属性和函数\n3. 无法复用父类的实例函数\n\n复制继承\n\n复制继承的主要思想是首先生成父类的实例，然后通过for...in遍历父类实例的属性和函数，并将其依次设置为子类实例的属性和函数或者原型对象上的属性和函数。\n\n```js\n// 父类\nfunction Animal(parentAge) {\n  // 实例属性\n  this.name = \"Animal\";\n  this.age = parentAge;\n  // 实例函数\n  this.sleep = function () {\n    return this.name + \"正在睡觉\";\n  };\n}\n// 原型函数\nAnimal.prototype.eat = function (food) {\n  return this.name + \"正在吃：\" + food;\n};\n// 子类\nfunction Cat(name, age) {\n  let animal = new Animal(age);\n  // 父类的属性和函数，全部添加至子类中\n  for (const key in animal) {\n    if (Object.hasOwnProperty.call(key)) {\n      this[key] = animal[key];\n    } else {\n      // 原型对象上的属性和函数\n      Cat.prototype[key] = animal[key];\n    }\n  }\n  // 子类自身的属性\n  this.name = name;\n}\n// 子类自身原型函数\nCat.prototype.eat = function (food) {\n  return this.name + \"正在吃\" + food;\n};\n\nlet cat = new Cat(\"tony\", 12);\nconsole.log(cat.age);\nconsole.log(cat.sleep());\nconsole.log(cat.eat(\"猫粮\"));\n```\n\n###### 复制继承的优点\n\n1. 支持多继承\n2. 能同时继承实例的属性和函数与原型对象上的属性和函数\n3. 可以向父类构造函数中传递值\n\n###### 复制继承的缺点\n\n1. 父类的所有属性都需要复制，消耗内存\n2. 实例只是子类的实例，并不是父类的实例\n\n##### 组合继承\n\n组合继承的主要思想是组合了构造函数和原型函数两种方法，一方面在子类的构造函数中通过call()函数调用父类的构造函数，将父类的实例的属性和函数绑定到子类的this中，另一方面，通过改变子类的prototype属性，继承父类的原型对象上的属性和函数\n\n```js\n// 父类\nfunction Animal(parentAge) {\n  // 实例属性\n  this.name = \"Animal\";\n  this.age = parentAge;\n  // 实例函数\n  this.sleep = function () {\n    return this.name + \"正在睡觉\";\n  };\n  this.feature = [\"fat\", \"thin\", \"tall\"];\n}\n// 原型函数\nAnimal.prototype.eat = function (food) {\n  return this.name + \"正在吃：\" + food;\n};\n// 子类\nfunction Cat(name) {\n  // 通过构造函数继承实例的属性和函数\n  Animal.call(this);\n  this.name = name;\n}\n// 通过原型继承原型对象上的属性和函数\nCat.prototype = new Animal();\nCat.prototype.constructor = Cat;\n\nlet cat = new Cat(\"tony\");\nconsole.log(cat.name);\nconsole.log(cat.sleep());\nconsole.log(cat.eat(\"猫粮\"));\n```\n\n###### 组合继承的优点\n\n1. 既能继承父类实例的属性和函数，又能继承原型对象上的属性和函数\n2. 既是子类的实例，又是父类的实例\n```js\nconsole.log(cat instanceof Cat);   // true\nconsole.log(cat instanceof Animal);// true\n```\n3. 不存在引用属性共享的问题\n4. 可以向父类的构造函数中传递参数\n###### 组合继承的缺点\n\n组合继承的缺点为父类的实例属性会绑定两次\n\n##### 寄生组合继承\n\n```js\n/* 寄生组合继承 */\n// 在进行子类的prototype属性的设置时，可以去掉父类实例的属性和函数\n// 子类\nfunction Cat(name) {\n  // 继承父类的实例属性和函数\n  Animal.call(this);\n  this.name = name;\n}\n// 立即执行函数\n(function () {\n  // 设置任意函数Super()\n  let Super = function () {};\n  // 关键语句,Super()函数的原型指向父类Animal的原型，去掉父类的实例属性\n  Super.prototype = Animal.prototype;\n  Cat.prototype = new Super();\n  Cat.prototype.constructor = Cat;\n})();\n```\n\n## instanceof运算符\n\ninstanceof运算符的语法如下。\n\n```js\ntarget instanceof constructor\n```\n\n上面的代码标识的是构造函数constructor()的prototype属性是否出现在target对象的原型链中，即target对象是不是构造函数constructor()的实例。\n\n### instanceof运算符的常规用法\n\n```js\nlet stringObject = new String('hello world')\nstringObject instanceOf String; // true\n```\n\n判断变量stringObject是否是String类型的实例，因为变量stringObject是通过new操作符，由String的构造函数生成的，所以变量是stringObject是String类型的实例，最终返回'true'。\n\n### instanceof运算符用于继承判断\n\ninstanceof运算符可以在继承关系中，判断一个实例对象是否属于它的父类，\n\n```js\n// 定义构造函数\nfunction C(){}\nfunction D(){}\n// 生成C()构造函数的一个实例\nlet o = new C()\n// 判断对象o是否为C()的一个实例，结果为true\no instanceof C // true\n// 判断对象o是否为D()构造函数的一个实例，结果返回false\no instanceof D // false，因为D.prototype属性不存在o的原型链上\n// 判断对象o是否为Object()函数的一个实例，结果返回ture\no instanceof Object // true\n// 通过将D()构造函数的prototype属性指向C()构造函数的一个实例可以产生继承关系\nD.prototype = new C() // 继承\n// 生成D()构造函数的一个实例o2\nlet o2 = new D()\n// 判断实例o2是否为D()构造函数的一个实例，结果返回true\no2 instanceof D // true\n// 判断实例o2是否为C()构造函数的一个实例，结果返回true\no2 instanceof C // true，因为通过继承关系，C.prototype出现在o2的原型链上\n// 修改D.prototype属性，将其指向一个空对象\nD.prototype = {}\n// 再次生成一个D()构造函数的实例\nlet o3 = new D()\n// 判断实例o3是否为C()构造函数和D()构造函数的实例\no3 instanceof D; // tue\no3 instanceof C; // false\n// 因为D.protoype属性指向了一个空对象，那么C()构造函数的prototype属性将不再处于实例o3的原型链上，因此返回false\n```\n\n## 事件流\n\n事件流描述的是从页面中接收事件的顺序。事件发生后在目标节点和根节点之间按照特定的顺序传播，路径经过的节点都会接收到事件。\n\n一个完整的事件流实际包含3个阶段：事件捕获阶段>事件目标阶段>事件冒泡阶段。上述两种类型的事件流实际对应其中的事件捕获阶段与事件冒泡阶段。\n\n### 事件捕获阶段\n\n事件捕获阶段的主要表现是不具体的节点先接收事件，然后逐级向下传播，最具体的节点最后接收到事件。例如Window>Document>html>body>table>tbody>tr>td\n\n### 事件目标阶段\n\n时间目标阶段表示事件刚好传播到用户产生行为的元素上，可能是事件捕获的最后一个阶段，也可能是事件冒泡的第一个阶段。\n\n### 事件冒泡阶段\n\n事件冒泡阶段的主要表现是最具体的元素先接收事件，然后逐级向上传播，不具体的节点最后接收事件。例如td>tr>tbody>table>body>html>Document>Window\n\n## 事件处理程序\n\n事件处理程序，就是响应某个事件的函数。例如onclick()函数、onload()函数就是响应单击、加载事件的函数。事件处理程序分为DOM0、DOM2、DOM3这3种级别的事件处理程序。由于在DOM1中并没有定义事件的相关内容，因此没有所谓的DOM1级事件处理程序。\n\n### DOM0级事件处理程序\n\nDOM0级事件处理程序是将一个函数赋值给一个事件处理属性，有两种表现形式。第一种是先通过JavaScript代码获取DOM元素，再将函数赋值给对应的事件属性。\n\n```js\nvar btn = document.getElementById(\"btn\"); \nbtn.onclick = function(){}\n```\n\n第二种是直接在html中设置对应事件属性的值，值有两种表现形式，一种是执行的函数体，另一种是函数名，然后在script标签中定义该函数。\n\n```html\n<button onclick=\"alert('面试厅');\">单击</button>\n<button onclick=\"clickFn()\">单击</button>\n<script>\n    function clickFn() {\n        alert('面试厅');\n    }\n</script>\n```\n\n以上两种DOM0级事件处理程序同时存在时，第一种在JavaScript中定义的事件处理程序会覆盖掉后面在html标签中定义的事件处理程序。\n\n- 优点：简单且可以跨浏览器\n- 缺点：一个事件处理程序只能绑定一个函数\n\n### DOM2级事件处理程序\n\n在DOM2级事件处理程序中，当事件发生在节点时，目标元素的事件处理函数就会被触发，而且目标元素的每个祖先节点也会按照事件流顺序触发对应的事件处理程序。DOM2级事件处理方式规定了添加事件处理程序和删除事件处理程序的方法。\n\n### DOM3级事件处理程序\n\nDOM3级事件处理程序是在DOM2级事件的基础上重新定义了事件，也添加了一些新的事件。DOM3级事件处理程序允许自定义事件，自定义事件有createEvent函数创建，返回的对象有一个initCustomEvent()函数，通过传递对应的参数可以自定义事件。\n\n函数可以接收以下4个参数。\n· type：字符串、触发的事件类型、自定义，例如“keyDown”“selectedChange”。\n· bubble（布尔值）：表示事件是否可以冒泡。\n· cancelable(布尔值）：表示事件是否可以取消。\n· detail（对象）：任意值，保存在event对象的detail属性中。\n\n## 浏览器的重排和重绘\n\n浏览器渲染HTML的过程\n\n1. HTML文件被HTML解析器解析成对应的DOM树，CSS样式文件被CSS解析器解析生成对应的样式规则集。\n2. DOM树与CSS样式集解析完成后，附加在一起形成一个渲染树。\n3. 节点信息的计算，即根据渲染树计算每个节点的几何信息。\n4. 渲染绘制，即根据计算完成的节点信息绘制整个页面。\n\n重排和重绘发生在第3步和第4步中。\n\n### 重排\n\n重要知识点：浏览器渲染页面默认采用的是流式布局模型。\n\n重排的过程就发生在DOM节点信息修改的时候。重排实际是根据渲染树中每个渲染对象的信息，计算出各自渲染对象的几何信息。\n\n重排是一种明显的改变页面布局的操作。\n\n常见的引起重排的操作：\n\n- 页面首次渲染\n- 浏览器窗口大小发生改变\n- 元素尺寸或位置发生改变\n- 元素内容发生变化\n- 元素字体发生变化\n- 添加或删除可见的DOM元素\n- 获取某些特定的属性\n\n### 重绘\n\n重绘只是改变元素在页面中的展现样式，而不会引起元素在文档流中位置的改变。\n\n引发重绘的操作：\n\n- color：颜色\n- border-style：边框样式\n- visibility：元素是否可见\n- background：元素背景样式，包括背景色、背景图、背景图尺寸、背景图位置。\n- text-decoration：文本装饰\n- outline：元素的外轮廓的样式，在边框外的位置。\n\n重排一定会引起重绘的操作，而重绘却不一定会引起重排的操作。\n\n## 性能优化\n\n1. 将多次改变样式的属性操作合并为一次\n\n2. 将需要多次重排的元素设置为绝对定位\n\n   需要进行重排的元素都是处于正常的文档流中，常见的操作就是设置其position为absolute或者fixed。\n\n3. 在内存中多次操作节点，完成后在添加至文档树中\n\n4. 将要进行复杂处理的元素处理为display属性为none，处理完成后再进行显示\n\n5. 将频繁获取会引起重排的属性缓存至变量。\n\n6. 尽量减少使用table布局\n\n7. 使用事件委托绑定事件处理程序\n\n8. 利用DocumentFragment操作DOM节点","slug":"JavaScript重难点实例精讲笔记","published":1,"updated":"2021-10-10T01:14:00.292Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl306xs3a000l1krqdkc8bdq7","content":"<p>在 JavaScript 中，每种数据类型都会使用 3bit 表示。</p>\n<ul>\n<li>000 表示 Object 类型的数据。</li>\n<li>001 表示 Int 类型的数据。</li>\n<li>010 表示 Double 类型的数据。</li>\n<li>100 表示 String 类型的数据。</li>\n<li>110 表示 Boolean 类型的数据。<a id=\"more\"></a>\n\n</li>\n</ul>\n<p>由于 null 代表的是空指针，大多数平台中值为 0x00，因此 null 的类型标签就成了 0，所以使用 typeof 运算符时会判断为 object 类型，返回‘object’</p>\n<h2 id=\"逗号运算符\"><a href=\"#逗号运算符\" class=\"headerlink\" title=\"逗号运算符\"></a>逗号运算符</h2><ol>\n<li><h3 id=\"在-for-循环中批量执行表达式\"><a href=\"#在-for-循环中批量执行表达式\" class=\"headerlink\" title=\"在 for 循环中批量执行表达式\"></a>在 for 循环中批量执行表达式</h3></li>\n<li><h3 id=\"用于交换变量，无须额外变量\"><a href=\"#用于交换变量，无须额外变量\" class=\"headerlink\" title=\"用于交换变量，无须额外变量\"></a>用于交换变量，无须额外变量</h3><p>一般情况下</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> c<span class=\"token punctuation\">;</span>\nc <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\na <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\nb <span class=\"token operator\">=</span> c<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>使用逗号运算符</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 方案1</span>\na <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 方案2</span>\na <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在方案 1 中，前一部分[b, b = a]是一个一维数组，数组第二项值是 b = a，实际会将 a 值赋给 b，然后返回“’a’”，因此数组最终的值为[‘b’, ‘a’]，然后取索引 0 的值为’b’，赋给变量 a，最终实现 a = ‘b’, b = ‘a’。<br>在方案 2 中，前一部分[b]是一个一维数组，后一部分[b = a, 0]，实际会先执行 b = a，将 a 值赋给 b，然后返回“0”，因此后一部分实际是修改了 b 的值并返回索引“0”，最终是 a = [b][0]，即 a = b，实现了 a 与 b 的交换。</p>\n</li>\n<li><h3 id=\"用于简化代码\"><a href=\"#用于简化代码\" class=\"headerlink\" title=\"用于简化代码\"></a>用于简化代码</h3><p>因为逗号运算符可以使多个表达式先后执行，并且返回最后一个表达式的值</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 使用逗号运算符简写后</span>\nx <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"用小括号保证逗号运算符的优先级\"><a href=\"#用小括号保证逗号运算符的优先级\" class=\"headerlink\" title=\"用小括号保证逗号运算符的优先级\"></a>用小括号保证逗号运算符的优先级</h3><p>在所有的运算符中，逗号运算符的优先级是最低的，因此对于某些涉及优先级的问题，我们需要使用到小括号，将含有逗号运算符的表达式括起来。</p>\n</li>\n</ol>\n<h2 id=\"toString-函数与-valueOf-函数\"><a href=\"#toString-函数与-valueOf-函数\" class=\"headerlink\" title=\"toString()函数与 valueOf()函数\"></a>toString()函数与 valueOf()函数</h2><ol>\n<li><h3 id=\"toString-函数\"><a href=\"#toString-函数\" class=\"headerlink\" title=\"toString()函数\"></a>toString()函数</h3><p>toString()函数的作用是把一个逻辑值转换为字符串，并返回结果。</p>\n</li>\n<li><h3 id=\"valueOf-函数\"><a href=\"#valueOf-函数\" class=\"headerlink\" title=\"valueOf()函数\"></a>valueOf()函数</h3><p>valueOf()函数的作用是返回最适合引用类型的原始值，如果没有原始值，则会返回引用类型自身。</p>\n</li>\n</ol>\n<h2 id=\"JavaScript-常用的判空方法\"><a href=\"#JavaScript-常用的判空方法\" class=\"headerlink\" title=\"JavaScript 常用的判空方法\"></a>JavaScript 常用的判空方法</h2><p>对变量进行取反，然后判断是否为 true</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"判断变量为空对象\"><a href=\"#判断变量为空对象\" class=\"headerlink\" title=\"判断变量为空对象\"></a>判断变量为空对象</h3><ol>\n<li><h4 id=\"判断变量为-null-或者-undefined\"><a href=\"#判断变量为-null-或者-undefined\" class=\"headerlink\" title=\"判断变量为 null 或者 undefined\"></a>判断变量为 null 或者 undefined</h4><p>判断一个变量是否为空时，可以直接将变量与 null 或者 undefined 相比较</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n<span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 可以判断null或者undeﬁned</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> undeﬁned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n<span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 只能判断undeﬁned</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量是否为空对象\"><a href=\"#判断变量是否为空对象\" class=\"headerlink\" title=\"判断变量是否为空对象{}\"></a>判断变量是否为空对象{}</h4><p>判断一个变量是否为空对象时，可以通过 for…in 语句遍历变量的属性，然后调用 hasOwnProperty()函数，判断是否有自身存在的属性，如果存在则不为空对象，如果不存在自身的属性（不包括继承的属性），那么变量为空对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 定义空的对象字面量</span>\n<span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'kingx'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 通过new操作符获取对象</span>\n<span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量为空数组\"><a href=\"#判断变量为空数组\" class=\"headerlink\" title=\"判断变量为空数组\"></a>判断变量为空数组</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">arr <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">&amp;&amp;</span> arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量为空字符串\"><a href=\"#判断变量为空字符串\" class=\"headerlink\" title=\"判断变量为空字符串\"></a>判断变量为空字符串</h4><p>判断变量是否为空字符串时，可以直接将其与空字符串相比较，或者调用 trim()函数去掉前后的空格，然后判断字符串的长度。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">str <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token operator\">||</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量为-0-或者-NaN\"><a href=\"#判断变量为-0-或者-NaN\" class=\"headerlink\" title=\"判断变量为 0 或者 NaN\"></a>判断变量为 0 或者 NaN</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> num<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"引用数据类型\"><a href=\"#引用数据类型\" class=\"headerlink\" title=\"引用数据类型\"></a>引用数据类型</h2></li>\n</ol>\n<p>在 JavaScript 中，如果函数没有 return 值，则默认 return this。</p>\n<p>创建一个对象实例，new 操作符做了 3 件事情。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> Cat <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  Cat<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  Cat<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Cat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 相当于</span>\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\ncat<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n<span class=\"token function\">Cat</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>第一行：创建一个空对象。</p>\n<p>第二行：将空对象的<strong>proto</strong>属性指向 Cat 对象的 prototype 属性。</p>\n<p>第三行：将 Cat()函数中的 this 指向 cat 变量。</p>\n<p>自定义一个类似 new 功能的函数</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">New</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  obj<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 核心代码，用于继承</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> res <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">?</span> res <span class=\"token operator\">:</span> obj<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">New</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mimi'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//hi</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Object-类型的静态函数\"><a href=\"#Object-类型的静态函数\" class=\"headerlink\" title=\"Object 类型的静态函数\"></a>Object 类型的静态函数</h2><h3 id=\"object-create-函数\"><a href=\"#object-create-函数\" class=\"headerlink\" title=\"object.create()函数\"></a>object.create()函数</h3><p>属性描述符的格式如下所示</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">propertyName<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n   value<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置此属性的值</span>\n   writable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置此属性是否可写入；默认为false：只读</span>\n   enumerable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置此属性是否可枚举；默认为false：不可枚举</span>\n   conﬁgurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// 设置此属性是否可配置，如是否可以修改属性的特性及是否可以删除属性；默认为false</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 建立一个自定义对象，设置name和age属性</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token string\">'tom'</span><span class=\"token punctuation\">,</span>\n    writable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    enumerable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    conﬁgurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tom</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 22</span>\nobj<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">28</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 22 ：age属性的writable默认为false，此属性为只读</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> p <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// name ：只输出name属性；age属性的enumerable默认为false，不能通过for...in 枚举</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"Array-类型\"><a href=\"#Array-类型\" class=\"headerlink\" title=\"Array 类型\"></a>Array 类型</h3><h4 id=\"判断一个变量是数组还是对象\"><a href=\"#判断一个变量是数组还是对象\" class=\"headerlink\" title=\"判断一个变量是数组还是对象\"></a>判断一个变量是数组还是对象</h4><ol>\n<li><h5 id=\"instanceof-运算符\"><a href=\"#instanceof-运算符\" class=\"headerlink\" title=\"instanceof 运算符\"></a>instanceof 运算符</h5><p>instanceof 运算符用于通过查找原型链来检测某个变量是否为某个类型数据的实例，使用 instanceof 运算符可以判断一个变量是数组还是对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'kingx'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>封装函数判断变量是数组还是对象</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 判断变量是数组还是对象</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getDataType</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>o instance <span class=\"token keyword\">of</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'Array'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>o <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'Object'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'param is not object type'</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"判断构造函数\"><a href=\"#判断构造函数\" class=\"headerlink\" title=\"判断构造函数\"></a>判断构造函数</h4><p>判断一个变量是否是数组或者对象，从另一个层面讲，就是判断变量的构造函数是 Array 类型还是 Object 类型。因为一个对象的实例都是通过构造函数生成的，所以，我们可以直接判断一个变量的 constructor 属性。</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'kingx'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>每个变量都会有一个<strong>proto</strong>属性，表示的是隐式原型。一个对象的隐式原型指向的是构造该对象的构造函数的原型，用数组举例。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>上面直接通过 constructor 属性判断的语句也可以改写成下面的形式</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token class-name\">__proto__</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token class-name\">__proto__</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>同时，也可以将代码进行封装，得到一个判断变量是数组还是对象的通用函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 判断变量是数组还是对象</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getDataType</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n   <span class=\"token comment\">// 获取构造函数</span>\n   <span class=\"token keyword\">var</span> constructor <span class=\"token operator\">=</span> o<span class=\"token punctuation\">.</span>_ _proto_ <span class=\"token class-name\">_</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">||</span> o<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'Array'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'Object'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'param is not object type'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"4\">\n<li><h5 id=\"Array-isArray-函数\"><a href=\"#Array-isArray-函数\" class=\"headerlink\" title=\"Array.isArray()函数\"></a>Array.isArray()函数</h5><p>Array.isArray()函数只能判断变量是否为数组。</p>\n</li>\n</ol>\n<h3 id=\"reduce-函数累加器处理数组元素\"><a href=\"#reduce-函数累加器处理数组元素\" class=\"headerlink\" title=\"reduce()函数累加器处理数组元素\"></a>reduce()函数累加器处理数组元素</h3><p>reduce()函数的语法如下所示</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> initialValue<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>initialValue 用作 callback 的第一个参数值，如果没有设置，则会使用数组的第一个元素值。</p>\n<ol>\n<li><h4 id=\"求数组每个元素相加的和\"><a href=\"#求数组每个元素相加的和\" class=\"headerlink\" title=\"求数组每个元素相加的和\"></a>求数组每个元素相加的和</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> sum <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">accumulator<span class=\"token punctuation\">,</span> currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> accumulator <span class=\"token operator\">+</span> currentValue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"统计数组中每个元素出现的次数\"><a href=\"#统计数组中每个元素出现的次数\" class=\"headerlink\" title=\"统计数组中每个元素出现的次数\"></a>统计数组中每个元素出现的次数</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">countOccurrences</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">accumulator<span class=\"token punctuation\">,</span> currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    accumulator<span class=\"token punctuation\">[</span>currentValue<span class=\"token punctuation\">]</span>\n      <span class=\"token operator\">?</span> accumulator<span class=\"token punctuation\">[</span>currentValue<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span>\n      <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>accumulator<span class=\"token punctuation\">[</span>currentValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> accumulator<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 测试代码</span>\n<span class=\"token function\">countOccurrences</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"函数的定义与调用\"><a href=\"#函数的定义与调用\" class=\"headerlink\" title=\"函数的定义与调用\"></a>函数的定义与调用</h2></li>\n</ol>\n<p>函数的定义大体可以分为3种，分别是函数声明，函数表达式和Function构造函数。</p>\n<h3 id=\"函数声明\"><a href=\"#函数声明\" class=\"headerlink\" title=\"函数声明\"></a>函数声明</h3><p>函数声明式直接使用function关键字接一个函数名，函数名后是接收函数的形参。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 函数声明式</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span>num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数表达式\"><a href=\"#函数表达式\" class=\"headerlink\" title=\"函数表达式\"></a>函数表达式</h3><p>函数表达式的形式类似普通变量的初始化，只不过这个变量初始化的值是一个函数。</p>\n<p>foo是函数名称，它实际是函数内部的一个局部变量，在函数外部是无法直接调用的。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 函数表达式 属于匿名函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span>num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 4</span>\n<span class=\"token comment\">// 具有函数名的函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"Function-构造函数\"><a href=\"#Function-构造函数\" class=\"headerlink\" title=\"Function()构造函数\"></a>Function()构造函数</h3><p>使用new操作符，调用Function()构造函数，传入对应的参数，也可以定义一个函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> add <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'return a + b'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>但是这种使用比较少，主要有以下两个原因。</p>\n<p>第一个原因是Function()构造函数每次执行时，都会解析函数主体，并创建一个新的函数对象，所以当在一个循环或者频繁执行的函数中调用Function()构造函数时，效率是非常低的。</p>\n<p>第二个原因是使用Function()构造函数创建的函数，并不遵循典型的作用域，它将一直作为顶级函数执行。所以在一个函数A内部调用Function()构造函数时，其中的函数体并不能访问到函数A中的局部变量，而只能访问到全局变量。</p>\n<h3 id=\"函数表达式的应用场景\"><a href=\"#函数表达式的应用场景\" class=\"headerlink\" title=\"函数表达式的应用场景\"></a>函数表达式的应用场景</h3><p>主要针对函数递归与代码模块化这两个应用场景进行讲解</p>\n<h4 id=\"函数递归\"><a href=\"#函数递归\" class=\"headerlink\" title=\"函数递归\"></a>函数递归</h4><p>通过函数表达式可以定义具有名称的函数，它作为函数内部的一个局部变量，指向函数自声。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 斐波那契数列问题</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>通过函数表达式实现代码</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 斐波那契数列问题</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">fibonacci</span><span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"代码模块化\"><a href=\"#代码模块化\" class=\"headerlink\" title=\"代码模块化\"></a>代码模块化</h4><p>在ES6以前，JavaScript中是没有块级作用域的，但是我们可以通过函数表达式来间接地实现模块化，将特定的模块化代码封装在一个函数中，只对外暴露接口。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> _name <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> _name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">setName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      _name <span class=\"token operator\">=</span> newName<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'king'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"函数提升\"><a href=\"#函数提升\" class=\"headerlink\" title=\"函数提升\"></a>函数提升</h4><p>对于函数声明，存在函数提升，所以即使函数的调用在函数的声明之前，仍然可以正常执行。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Uncaught ReferenceError: sub is not defined</span>\n<span class=\"token comment\">// 函数声明</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span>a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">+</span> a2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sub</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span> a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">-</span>a2\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数调用\"><a href=\"#函数调用\" class=\"headerlink\" title=\"函数调用\"></a>函数调用</h3><p>函数调用存在5种模式，函数调用模式，方法调用模式，构造器调用模式，call()函数、apply()函数调用模式，匿名函数调用模式。</p>\n<h4 id=\"函数调用模式\"><a href=\"#函数调用模式\" class=\"headerlink\" title=\"函数调用模式\"></a>函数调用模式</h4><p>函数调用模式是通过函数声明或者函数表达式的方法定义函数，然后直接通过函数名调用的模式</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 函数声明</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span> a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">+</span> a2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sub</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span> a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">-</span> a2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"方法调用模式\"><a href=\"#方法调用模式\" class=\"headerlink\" title=\"方法调用模式\"></a>方法调用模式</h4><p>方法调用模式会优先定义一个对象obj，然后在对象内部定义值为函数的属性property，通过对象obj.property()来进行函数的调用。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义对象</span>\n<span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>\n\tname<span class=\"token operator\">:</span> <span class=\"token string\">'kingx'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token comment\">// 定义getName属性，值为一个函数</span>\n\t<span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 通过对象进行调用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>函数还可以通过中括号来调用，即对象名[‘函数名’]，那么上面的实例代码可以改写为</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>\n\tname<span class=\"token operator\">:</span><span class=\"token string\">'kingx'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">setName</span><span class=\"token operator\">:</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token operator\">=</span>name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span> <span class=\"token comment\">//在函数内部返回函数对象本身</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kingx2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//链式函数调用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"构造器调用模式\"><a href=\"#构造器调用模式\" class=\"headerlink\" title=\"构造器调用模式\"></a>构造器调用模式</h4><p>构造器调用模式会定义一个函数，在函数中定义实例属性，在原型上定义函数，然后通过new操作符生成函数的实例，再通过实例调用原型上定义的函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义函数对象</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型上定义函数</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过new操作符生成实例</span>\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kingx'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 通过实例进行函数的调用</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"call-函数，apply-函数调用模式\"><a href=\"#call-函数，apply-函数调用模式\" class=\"headerlink\" title=\"call()函数，apply()函数调用模式\"></a>call()函数，apply()函数调用模式</h4><p>通过call函数或者apply函数可以改变函数执行的主体，使得某些不具有特定函数的对象可以直接调用该特定函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 定义一个对象</span>\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过call()函数与apply()函数调用sum()函数</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>通过call()函数与apply()函数，使得没有sum()函数的person对象也可以直接调用sum()函数。</p>\n<h4 id=\"匿名函数调用模式\"><a href=\"#匿名函数调用模式\" class=\"headerlink\" title=\"匿名函数调用模式\"></a>匿名函数调用模式</h4><p>匿名函数，就是没用函数名称的函数。匿名函数的调用有两种方式，一种是通过函数表达式定义函数，并赋给变量，通过变量进行调用。另一种是使用小括号()将匿名函数括起来，然后在后面使用小括号，传递对应的参数，进行调用。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 通过函数表达式定义匿名函数，并赋给变量sum</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过sum()函数进行匿名函数调用</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 小括号括起来</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数参数\"><a href=\"#函数参数\" class=\"headerlink\" title=\"函数参数\"></a>函数参数</h3><h4 id=\"形参实参\"><a href=\"#形参实参\" class=\"headerlink\" title=\"形参实参\"></a>形参实参</h4><p>函数的参数分为两种，分别是形参和实参。</p>\n<p>形参全称为形式参数。是在定义函数名称与函数体使用的参数，目的是用来接收调用该函数时传入的参数。</p>\n<p>实参全称为实际参数，是在调用时传递给函数的参数，实参可以使常量、变量、表达式、函数等类型。</p>\n<h5 id=\"形参和实参的区别\"><a href=\"#形参和实参的区别\" class=\"headerlink\" title=\"形参和实参的区别\"></a>形参和实参的区别</h5><ol>\n<li>形参出现在函数的定义中，只能在函数体内使用，一旦离开该函数则不能使用；实参出现在主调函数中，进入被调函数后，实参也将不能被访问。</li>\n<li>在强类型语言中，定义的形参和实参在数量、数据类型和顺序上要保持严格一致，否则会抛出“类型不匹配”的异常</li>\n<li>在函数调用过程中，数据传输是单向的，即只能把实参的值传递给形参，而不能把形参的值反向传递给实参。</li>\n<li>当实参是基本数据类型的值时，实际是将实参的值复制一份传递给形参，在函数运行结束时形参被释放，而是实参中的值不会变化。</li>\n</ol>\n<h3 id=\"arguments对象的性质\"><a href=\"#arguments对象的性质\" class=\"headerlink\" title=\"arguments对象的性质\"></a>arguments对象的性质</h3><p>arguments是所有函数都具有的一个内置局部变量，表示的是函数实际接收的参数，是一个类数组结构。它除了具有length属性外，不具有数组的一些常有方法。</p>\n<h4 id=\"函数内部无法访问\"><a href=\"#函数内部无法访问\" class=\"headerlink\" title=\"函数内部无法访问\"></a>函数内部无法访问</h4><p>arguments对象只能在函数内部使用，无法在函数外部访问到arguments对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3 </span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 0</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"可通过索引访问\"><a href=\"#可通过索引访问\" class=\"headerlink\" title=\"可通过索引访问\"></a>可通过索引访问</h4><p>arguments对象是一个类数组结构，可以通过索引访问，每一项表示对应传递的实参值，如果该项索引值不存在，则会返回’undefined’</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 4</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"由实参决定\"><a href=\"#由实参决定\" class=\"headerlink\" title=\"由实参决定\"></a>由实参决定</h4><p>arguments对象的值由实参决定，而不是由定义的形参决定，形参与arguments对象占有独立的内存空间。</p>\n<ol>\n<li> arguments对象的length属性在函数调用的时候就已经确定，不会随着函数的处理而改变。</li>\n<li> 指定的形参在传递实参的情况下，arguments对象与形参值相同，并且可以相互改变。</li>\n<li> 指定的形参在未传递实参的情况下，arguments对象对应索引值返回“undefined”。</li>\n<li>指定的形参在未传递实参的情况下，arguments对象与形参值不能相互改变。</li>\n</ol>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span>c</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments的长度'</span><span class=\"token punctuation\">,</span>arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//2</span>\n    arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a的值'</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 11</span>\n    b <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments索引为1的值'</span><span class=\"token punctuation\">,</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//12</span>\n    arguments<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'c的值'</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n    c <span class=\"token operator\">=</span> <span class=\"token number\">13</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments索引为2的值'</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\n  \n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments的长度'</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"特殊的arguments-callee属性\"><a href=\"#特殊的arguments-callee属性\" class=\"headerlink\" title=\"特殊的arguments.callee属性\"></a>特殊的arguments.callee属性</h4><p>arguments对象有一个很特殊的属性callee，表示的是当前正在执行的函数，在比较时是严格相等的,但是使用arguments.callee属性会改变函数内部的this值。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>callee <span class=\"token operator\">===</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>用法：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> n <span class=\"token operator\">*</span> arguments<span class=\"token punctuation\">.</span><span class=\"token function\">callee</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"arguments对象的应用\"><a href=\"#arguments对象的应用\" class=\"headerlink\" title=\"arguments对象的应用\"></a>arguments对象的应用</h3><h4 id=\"实参的个数判断\"><a href=\"#实参的个数判断\" class=\"headerlink\" title=\"实参的个数判断\"></a>实参的个数判断</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 检查传递的参数个数是否正确</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'期望传递的参数个数为3，实际传递的个数为：'</span><span class=\"token operator\">+</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">// ...do something</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//期望传递的参数个数为3，实际传递的个数为：2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"任意个数的参数处理\"><a href=\"#任意个数的参数处理\" class=\"headerlink\" title=\"任意个数的参数处理\"></a>任意个数的参数处理</h4><p>定义一个函数，该函数只会特定处理传递的前几个参数，对于后面的参数不论传递多少个都会统一处理，这种场景下我们可以使用arguments对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">joinStr</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sepreator</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// arguments对象是一个类数组结构，可以通过call()函数间接调用slice()函数，得到一个数组</span>\n    <span class=\"token keyword\">let</span> strArr <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// strArr数组直接调用join()函数</span>\n    <span class=\"token keyword\">return</span> strArr<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>sepreator<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">joinStr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">joinStr</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">,</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"模拟函数重载\"><a href=\"#模拟函数重载\" class=\"headerlink\" title=\"模拟函数重载\"></a>模拟函数重载</h4><p>函数重载表示的是在函数名相同的情况下，通过函数形参的不同参数类型或者不同参数个数来定义不同的函数。JavaScript是一门弱类型语言，没有函数重载。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 通用求和函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 通过call()函数间接调用数组的slice()函数得到函数参数的数组</span>\n    <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 调用数组的reduce函数进行多个值的求和</span>\n    <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre<span class=\"token punctuation\">,</span>cur</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> pre <span class=\"token operator\">+</span> cur\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"变量提升和函数提升\"><a href=\"#变量提升和函数提升\" class=\"headerlink\" title=\"变量提升和函数提升\"></a>变量提升和函数提升</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span><span class=\"token number\">10</span>\n    <span class=\"token punctuation\">&#125;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>首先在全局作用域中定义一个变量a，值为true，然后调用foo()函数。foo()函数时通过函数声明定义的，会进行函数提升，因此foo()函数会正常调用。在foo()函数内部，首先判断变量a的值，由于变量a在函数内部重新通过var关键字声明了一次，因此a会出现变量提升，a会提升至foo()函数的顶部，此时a的值为undefined。那么通过if语句进行判断时，返回’false’，并未执行a=10 的赋值语句，因此最后输出’undefined’。<br>过程可以改为一下代码段。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\na <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        a <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"变量提升和函数提升优先级\"><a href=\"#变量提升和函数提升优先级\" class=\"headerlink\" title=\"变量提升和函数提升优先级\"></a>变量提升和函数提升优先级</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// function</span>\n   <span class=\"token comment\">// 变量提升</span>\n   <span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token string\">'variable'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// 函数提升</span>\n   <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// string</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>变量提升的优先级要比函数提升的优先级高，因此执行过程可以改写为：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">funciton <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 变量提升至函数顶部</span>\n    <span class=\"token keyword\">var</span> foo<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 函数提升，但是优先级低，出现在变量声明后面，则foo是一个函数</span>\n    funciton <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'function'</span>\n    <span class=\"token punctuation\">&#125;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span>\n    \n    foo <span class=\"token operator\">=</span> <span class=\"token string\">'variable'</span> <span class=\"token comment\">// 变量赋值</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span> <span class=\"token comment\">// string</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"变量提升和函数提升整体应用\"><a href=\"#变量提升和函数提升整体应用\" class=\"headerlink\" title=\"变量提升和函数提升整体应用\"></a>变量提升和函数提升整体应用</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">function</span> <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\ta <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>代码中首先定义一个变量a并赋值为1，然后声明一个b()函数，并在后面直接进行调用，最后输出变量a的值。</p>\n<p>在b()函数中，赋值的变量a并未使用var关键字，因此变量a是一个全局环境的变量，而在return语句之后出现了一个变量a的函数声明，则会进行提升，执行return语句后，变量a的值仍然为1，可改写代码为：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 变量a的提升</span>\n    <span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 函数声明b的提升</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// 内部的函数声明a的提升</span>\n        <span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n        a <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n        <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">&#125;</span>\n    a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a>闭包</h3><p>一个拥有许多变量和绑定了这些变量执行上下文环境的表达，通常是一个函数。</p>\n<p>闭包有两个特点</p>\n<ul>\n<li>函数拥有的外部变量的引用，在函数返回时，该变量仍然处于活跃状态。</li>\n<li>闭包作为一个函数返回时，其执行上下文环境不会被销毁，仍处于执行上下文环境中。</li>\n</ul>\n<p>在JavaScript中存在一种内部函数，即函数声明和函数表达式可以位于另一个函数的函数体内，在内部函数中可以访问外部函数声明的变量，当这个内部函数在包含它们的外部函数之外被调用时，就会形成闭包。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> max <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">></span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">var</span> f1 <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 11</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"闭包的优点\"><a href=\"#闭包的优点\" class=\"headerlink\" title=\"闭包的优点\"></a>闭包的优点</h4><ul>\n<li>保护函数内变量的安全，实现封装，防止变量流失其他环境发生命名冲突，造成环境污染。</li>\n<li>在适当的时候，可以在内存中维护变量并缓存，提高执行效率。</li>\n</ul>\n<h4 id=\"闭包的缺点\"><a href=\"#闭包的缺点\" class=\"headerlink\" title=\"闭包的缺点\"></a>闭包的缺点</h4><ul>\n<li>消耗内存：通常来说，函数的活动对象会随着执行上下文环境一起被销毁，但是，由于闭包引用的是外部函数的活动对象，因此这个活动对象无法被销毁，这意味着，闭包比一般的函数需要消耗更多的内存。</li>\n<li>泄露内存：在IE9之前，如果闭包的作用于链中存在DOM对象，则意味着该DOM对象无法被销毁，造成内存泄露。</li>\n</ul>\n<h2 id=\"this使用\"><a href=\"#this使用\" class=\"headerlink\" title=\"this使用\"></a>this使用</h2><h3 id=\"this指向全局对象\"><a href=\"#this指向全局对象\" class=\"headerlink\" title=\"this指向全局对象\"></a>this指向全局对象</h3><p>当函数没有所属对象而直接调用时，this指向的是全局对象。</p>\n<h4 id=\"this指向所属对象\"><a href=\"#this指向所属对象\" class=\"headerlink\" title=\"this指向所属对象\"></a>this指向所属对象</h4><p>谁调用它，它就指向谁。</p>\n<h4 id=\"this指向对象实例\"><a href=\"#this指向对象实例\" class=\"headerlink\" title=\"this指向对象实例\"></a>this指向对象实例</h4><p>当通过new操作符调用构造函数生成对象的实例时，this指向该实例。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">//全局变量</span>\n<span class=\"token keyword\">let</span> number <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 复写全局变量</span>\n    number <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 实例变量</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>number <span class=\"token operator\">=</span><span class=\"token number\">30</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型函数</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getNumber</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>number\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过new操作符获取对象的实例</span>\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">getNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 30</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"this指向call-函数、apply-函数、bind-函数调用后重新绑定的对象\"><a href=\"#this指向call-函数、apply-函数、bind-函数调用后重新绑定的对象\" class=\"headerlink\" title=\"this指向call()函数、apply()函数、bind()函数调用后重新绑定的对象\"></a>this指向call()函数、apply()函数、bind()函数调用后重新绑定的对象</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 全局变量</span>\n<span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token number\">20</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 全局函数</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">method</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 10</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20</span>\n<span class=\"token keyword\">let</span> newMethod <span class=\"token operator\">=</span> <span class=\"token function\">method</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n<span class=\"token function\">newMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"闭包中的this\"><a href=\"#闭包中的this\" class=\"headerlink\" title=\"闭包中的this\"></a>闭包中的this</h4><p>函数的this变量只能被自身访问，其内部函数无法访问。因此在遇到闭包时，闭包内部的this关键字无法访问到外部函数的this变量。</p>\n<h2 id=\"call-函数、apply-函数、bind-函数的使用与区别\"><a href=\"#call-函数、apply-函数、bind-函数的使用与区别\" class=\"headerlink\" title=\"call()函数、apply()函数、bind()函数的使用与区别\"></a>call()函数、apply()函数、bind()函数的使用与区别</h2><h3 id=\"call-函数的基本使用\"><a href=\"#call-函数的基本使用\" class=\"headerlink\" title=\"call()函数的基本使用\"></a>call()函数的基本使用</h3><p>call()函数调用一个函数时，会将该函数的执行对象上下文改变为另一个对象。其语法为：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>thisAra<span class=\"token punctuation\">,</span> arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>function为需要调用的函数。</li>\n<li>thisArg表示的是新的对象上下文，函数中的this将指向thisArg，如果thisArg为null或者undefined，则this会指向全局对象。</li>\n<li>arg1,arg2，…表示的是函数所接收的参数列表。</li>\n</ul>\n<p>call函数用法实例</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个add()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过call()函数进行add()函数的调用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myAddCall</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 调用add()函数的call()函数</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">myAddCall</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出'30'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"apply-函数的基本使用\"><a href=\"#apply-函数的基本使用\" class=\"headerlink\" title=\"apply()函数的基本使用\"></a>apply()函数的基本使用</h3><p>apply()函数的作用域与call()函数时一致的，只是在传递参数的形式上存在差别。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token function\">funciton</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>thisArg<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>argsArray<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>function与thisArg参数与call()函数中的解释一样</li>\n<li>[argsArray]表示的是参数会通过数组的形式进行传递，如果argsArray不是一个有效的数组或者arguments对象，则会抛出一个TypeError异常</li>\n</ul>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个add()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过apply()函数进行add()函数的调用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myAddApply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 调用add()函数的call()函数</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">myAddApply</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出'30'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"bind-函数的基本使用\"><a href=\"#bind-函数的基本使用\" class=\"headerlink\" title=\"bind()函数的基本使用\"></a>bind()函数的基本使用</h3><p>bind()函数创建一个新的函数，在调用时设置this关键字为提供的值，在执行新函数时，将给定的参数列表作为原函数的参数序列，从前往后匹配。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>Arg<span class=\"token punctuation\">,</span> arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>bind()函数与call()函数接收的参数是一样的，其返回值是原函数的副本，并拥有指定的this值和初始参数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个add()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过bind()函数进行add()函数的调用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myAddBind</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 调用bind()函数得到一个新的函数</span>\n    <span class=\"token keyword\">let</span> bindAddFn <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">bindAddFn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">myAddBind</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出'30'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"call-函数、apply-函数、bind-函数的比较\"><a href=\"#call-函数、apply-函数、bind-函数的比较\" class=\"headerlink\" title=\"call()函数、apply()函数、bind()函数的比较\"></a>call()函数、apply()函数、bind()函数的比较</h3><p>三者的相同之处都是：都会改变函数调用的执行主体，修改this的指向。</p>\n<p>不同之处在以下两点</p>\n<ol>\n<li>call()函数与apply()函数在执行后会理解立即调用前面的函数，而bind()函数不会立即调用，它会返回一个新的函数，可以在任何时候进行调用。</li>\n<li>call()接收从第二个到最后一个参数，apply()接收一个数组。</li>\n</ol>\n<h2 id=\"对象的属性\"><a href=\"#对象的属性\" class=\"headerlink\" title=\"对象的属性\"></a>对象的属性</h2><h3 id=\"访问器属性\"><a href=\"#访问器属性\" class=\"headerlink\" title=\"访问器属性\"></a>访问器属性</h3><p>访问器属性同样包含4个特性，分别是[[Configurable]]、[[Enumerable]]、[[Get]]和[[Set]]。</p>\n<ul>\n<li>[[Configurable]]：表示属性能否删除而重新定义，或者是否可以修改为访问器属性，默认值为true</li>\n<li>[[Enumerable]]：表示属性是否可枚举，可枚举的属性能够通过for…in循环返回，默认值为true。 </li>\n<li>[[Get]]：在读取属性值时调用的函数（一般称为getter()函数），负责返回有效的值，默认值为undefined。</li>\n<li>[[Set]]：在写入属性值时调用的函数（一般称为setter()函数），负责处理数据，默认值为undefined。</li>\n</ul>\n<p>如果需要修改访问器属性默认的特性，则必须使用Object.defineProperty()函数</p>\n<p>getter()函数和setter()函数的存在在一定程度上可以实现对象的私有属性，私有属性不对外暴露。如果想要读取和写入私有属性的值，则需要通过设置额外属性的getter()函数和setter()函数来实现。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>\n\t_age<span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n<span class=\"token punctuation\">&#125;</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">set</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newValue <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_age <span class=\"token operator\">=</span> newValue<span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'设置成功'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"对象深拷贝\"><a href=\"#对象深拷贝\" class=\"headerlink\" title=\"对象深拷贝\"></a>对象深拷贝</h3><p>JSON.parse(JSON.stringify(Obj))</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">/* 使用JSON.stringify()函数将原始对象序列化为字符串，再使用JSON.parse()函数将字符串反序列化为一个对象。 */</span>\n<span class=\"token keyword\">let</span> origin <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">C</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    d<span class=\"token operator\">:</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>该方法有以下几个问题：</p>\n<ol>\n<li>无法实现对函数、RegExp等特殊对象的克隆。</li>\n<li>对象的constructor会被抛弃，所有的构造函数会指向Object，原型链关系断裂。</li>\n<li>对象中如果存在循环引用，会抛出异常。</li>\n</ol>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> animal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> origin <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 属性为函数</span>\n  <span class=\"token function-variable function\">a</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 属性为正则表达式对象</span>\n  b<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 属性为某个对象的实例</span>\n  c<span class=\"token operator\">:</span> animal<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">,</span> <span class=\"token string\">'打印origin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token string\">'打印result'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"原型对象、构造函数、实例之间的关系\"><a href=\"#原型对象、构造函数、实例之间的关系\" class=\"headerlink\" title=\"原型对象、构造函数、实例之间的关系\"></a>原型对象、构造函数、实例之间的关系</h3><p>每一个函数在创建时都会被赋予一个prototype属性。在默认情况下，所有的原型对象都会增加一个constructor属性，指向prototype属性所在的函数，即构造函数。</p>\n<p>当我们通过new操作符调用构造函数创建一个实例时，实例具有一个__proto__属性，指向构造函数的原型对象，因此__proto__属性可以看做是一个连续实例与构造函数的原型对象的桥梁。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Tom'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">29</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>job <span class=\"token operator\">=</span> <span class=\"token string\">'Software Enginner'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> person1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> person2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>构造函数的Person有个prototype属性，指向的是Person的原型对象。在原型对象中有constructor属性和另外4个原型对象上的属性，其中constructor属性指向构造函数本身。</p>\n<p>通过new操作符创建的两个实例person1和person2，都具有一个__proto__属性，指向的是Person的原型对象。</p>\n<h3 id=\"实例的属性读取顺序\"><a href=\"#实例的属性读取顺序\" class=\"headerlink\" title=\"实例的属性读取顺序\"></a>实例的属性读取顺序</h3><p>当我们通过对象的实例读取某个属性时，它会先在实例本身去找指定的属性，如果找到了，则直接返回该属性的值；如果没找到则会继续沿着原型对象寻找，如果在原型对象中找到了该属性，则返回该属性的值。</p>\n<p>改造上方代码</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'kingx'</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Tom'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">29</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>job <span class=\"token operator\">=</span> <span class=\"token string\">'Software Enginner'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> person1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person1<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// kingx</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"重写原型对象\"><a href=\"#重写原型对象\" class=\"headerlink\" title=\"重写原型对象\"></a>重写原型对象</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n    constructor<span class=\"token operator\">:</span> Person<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 重要</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'Nicholas'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">,</span>\n    job<span class=\"token operator\">:</span> <span class=\"token string\">'Software Engineer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">sayName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>将一个对象字面量赋给prototype属性的方式实际是重写了原型对象，等同于切断了构造函数和最初原型之间的关系，因此有一点需要的是，如果仍然想使用constructor属性做后续处理，则应该在对象字面量增加一个constructor属性，指向构造函数本身，否则原型的constructor属性会指向Object类型的构造函数，从而导致constructor属性与构造函数的脱离，而且必须要按照顺序执行，在最后进行新的对象的创建。</p>\n<h3 id=\"原型链\"><a href=\"#原型链\" class=\"headerlink\" title=\"原型链\"></a>原型链</h3><p>在JS中几乎所有的对象都具有__proto__属性，由__proto__属性连接而成的链路构成了JS的原型链，原型链的顶端是Object.prototype，它的__proto__属性为null。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span> \n<span class=\"token comment\">// person实例沿着原型链第一次追溯，__proto__属性指向Person()构造函数的原型对象</span>\nperson<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype\n<span class=\"token comment\">// person实例沿着原型链第二次追溯，Person原型对象的__protos__属性指向Object类型的原型对象。</span>\nperson<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype\n<span class=\"token comment\">// person实例沿着原型链第三次追溯，Object类型的原型对象的__proto__属性为null</span>\nperson<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"原型链的特点\"><a href=\"#原型链的特点\" class=\"headerlink\" title=\"原型链的特点\"></a>原型链的特点</h4><ol>\n<li><p>由于原型链的存在，属性查找的过程不再是只查找自身的原型对象，而是会沿着整个原型链一直向上，直到追溯到Object.prototype。如果Object.prototype上，直到追溯到Object.prototype。如果Object.prootype上也找不到该属性，则返回’undefined’。如果期间在实例本身或者某个原型对象上找到了该属性，则会直接返回结果，因此会存在属性覆盖的问题。</p>\n<p>在生成自定义对象的实例时，也可以调用到某些未在自定义构造函数上的函数，例如toString()函数</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [object Object] 实际调用的是Object.prototype.toString()函数</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></li>\n<li><p>由于属性查找会经历整个原型链，因此查找的链路越长，对性能的影响越大。</p>\n</li>\n</ol>\n<h4 id=\"属性区分\"><a href=\"#属性区分\" class=\"headerlink\" title=\"属性区分\"></a>属性区分</h4><p>对象属性的寻找往往会设计整个原型链，Object()构造函数的原型对象中提供了一个hasOwnProperty()函数，用于判断属性是否为自身拥有的。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 实例属性name</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型对象上的属性age</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kingx'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在使用for…in运算符遍历对象的属性时，一般可以配合hasOwnProperty()函数一起使用，检测是否是对象自身的属性，然后做后续处理。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> prop <span class=\"token keyword\">in</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnproperty</span><span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n \t\t<span class=\"token operator\">...</span>       \n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"内置构造函数\"><a href=\"#内置构造函数\" class=\"headerlink\" title=\"内置构造函数\"></a>内置构造函数</h4><p>JavaScript中有一些特定的内置构造函数，如String()构造函数、Number()构造函数，Array()构造函数、Object()构造函数等。</p>\n<p>它们本身的__proto__属性都统一指向Function.prototype。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">String<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nNumber<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nArray<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nDate<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nObject<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nFunction<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"proto-属性\"><a href=\"#proto-属性\" class=\"headerlink\" title=\"__proto__属性\"></a>__proto__属性</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span>\n<span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p.a'</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p.b'</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>实例p的原型链</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 实例p直接原型</span>\np<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype\n<span class=\"token comment\">// Person原型对象的原型</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h4><h5 id=\"原型链继承\"><a href=\"#原型链继承\" class=\"headerlink\" title=\"原型链继承\"></a>原型链继承</h5><p>原型链继承的主要思想是：重写子类的prototype属性，将其指向父类的实例</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 子类Cat</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型继承</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 很关键的一句，将Cat的构造函数指向自身</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'coffee'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"原型链继承的优点\"><a href=\"#原型链继承的优点\" class=\"headerlink\" title=\"原型链继承的优点\"></a>原型链继承的优点</h6><ol>\n<li><p>简单、易于实现</p>\n</li>\n<li><p>继承关系纯粹</p>\n<p>生成的实例既是子类的实例，也是父类的实例。</p>\n</li>\n<li><p>可通过子类直接访问父类原型链属性和函数</p>\n<p>通过原型链继承的子类，可以直接访问到父类原型链上新增的函数和属性。</p>\n</li>\n</ol>\n<h6 id=\"原型链继承的缺点\"><a href=\"#原型链继承的缺点\" class=\"headerlink\" title=\"原型链继承的缺点\"></a>原型链继承的缺点</h6><ol>\n<li>子类的所有实例将共享父类的属性</li>\n<li>在创建子类实例时，无法向父类的构造函数传递参数</li>\n<li>无法实现多继承</li>\n<li>为子类增加原型对象上的属性和函数时，必须放在new Animal()函数之后</li>\n</ol>\n<h5 id=\"构造继承\"><a href=\"#构造继承\" class=\"headerlink\" title=\"构造继承\"></a>构造继承</h5><p>构造继承的主要思想是在子类的构造函数中通过call()函数改变this指向，调用父类的构造函数，从而能将父类的实例的属性和函数绑定到子类的this中</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 父类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 实例函数</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在睡觉！\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 父类原型函数</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃：\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 核心，通过call()函数实现Animal的实例的属性和函数的继承</span>\n  <span class=\"token function\">Animal</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name <span class=\"token operator\">||</span> <span class=\"token string\">\"tom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 生成子类的实例</span>\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 可以正常调用父类实例函数</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 不能调用父类原型函数</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"构造继承的优点\"><a href=\"#构造继承的优点\" class=\"headerlink\" title=\"构造继承的优点\"></a>构造继承的优点</h6><ol>\n<li><p>可解决子类实例共享父类属性的问题</p>\n</li>\n<li><p>创建子类的实例时，可以向父类传递参数</p>\n<p>在call()函数中，可以传递参数，将参数传递给父类。</p>\n</li>\n<li><p>可以实现多继承</p>\n<p>在子类的构造函数中，可以通过多次调用call()函数来继承多个父对象，每调用一次call()函数就会将父类的实例的属性和函数</p>\n</li>\n</ol>\n<h6 id=\"构造继承的缺点\"><a href=\"#构造继承的缺点\" class=\"headerlink\" title=\"构造继承的缺点\"></a>构造继承的缺点</h6><ol>\n<li>实例只是子类的实例，并不是父类的实例</li>\n<li>只能继承父类实例的属性和函数，并不能继承原型对象上的属性和函数</li>\n<li>无法复用父类的实例函数</li>\n</ol>\n<p>复制继承</p>\n<p>复制继承的主要思想是首先生成父类的实例，然后通过for…in遍历父类实例的属性和函数，并将其依次设置为子类实例的属性和函数或者原型对象上的属性和函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 父类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentAge</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 实例属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> parentAge<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 实例函数</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在睡觉\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型函数</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃：\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> animal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 父类的属性和函数，全部添加至子类中</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> animal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> animal<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 原型对象上的属性和函数</span>\n      <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> animal<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token comment\">// 子类自身的属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 子类自身原型函数</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tony\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"猫粮\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"复制继承的优点\"><a href=\"#复制继承的优点\" class=\"headerlink\" title=\"复制继承的优点\"></a>复制继承的优点</h6><ol>\n<li>支持多继承</li>\n<li>能同时继承实例的属性和函数与原型对象上的属性和函数</li>\n<li>可以向父类构造函数中传递值</li>\n</ol>\n<h6 id=\"复制继承的缺点\"><a href=\"#复制继承的缺点\" class=\"headerlink\" title=\"复制继承的缺点\"></a>复制继承的缺点</h6><ol>\n<li>父类的所有属性都需要复制，消耗内存</li>\n<li>实例只是子类的实例，并不是父类的实例</li>\n</ol>\n<h5 id=\"组合继承\"><a href=\"#组合继承\" class=\"headerlink\" title=\"组合继承\"></a>组合继承</h5><p>组合继承的主要思想是组合了构造函数和原型函数两种方法，一方面在子类的构造函数中通过call()函数调用父类的构造函数，将父类的实例的属性和函数绑定到子类的this中，另一方面，通过改变子类的prototype属性，继承父类的原型对象上的属性和函数</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 父类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentAge</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 实例属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> parentAge<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 实例函数</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在睡觉\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>feature <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"fat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"thin\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"tall\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型函数</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃：\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 通过构造函数继承实例的属性和函数</span>\n  <span class=\"token function\">Animal</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过原型继承原型对象上的属性和函数</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"猫粮\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"组合继承的优点\"><a href=\"#组合继承的优点\" class=\"headerlink\" title=\"组合继承的优点\"></a>组合继承的优点</h6><ol>\n<li>既能继承父类实例的属性和函数，又能继承原型对象上的属性和函数</li>\n<li>既是子类的实例，又是父类的实例<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre></li>\n<li>不存在引用属性共享的问题</li>\n<li>可以向父类的构造函数中传递参数<h6 id=\"组合继承的缺点\"><a href=\"#组合继承的缺点\" class=\"headerlink\" title=\"组合继承的缺点\"></a>组合继承的缺点</h6></li>\n</ol>\n<p>组合继承的缺点为父类的实例属性会绑定两次</p>\n<h5 id=\"寄生组合继承\"><a href=\"#寄生组合继承\" class=\"headerlink\" title=\"寄生组合继承\"></a>寄生组合继承</h5><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">/* 寄生组合继承 */</span>\n<span class=\"token comment\">// 在进行子类的prototype属性的设置时，可以去掉父类实例的属性和函数</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 继承父类的实例属性和函数</span>\n  <span class=\"token function\">Animal</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 立即执行函数</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 设置任意函数Super()</span>\n  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">Super</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 关键语句,Super()函数的原型指向父类Animal的原型，去掉父类的实例属性</span>\n  <span class=\"token class-name\">Super</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"instanceof运算符\"><a href=\"#instanceof运算符\" class=\"headerlink\" title=\"instanceof运算符\"></a>instanceof运算符</h2><p>instanceof运算符的语法如下。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">target <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">constructor</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>上面的代码标识的是构造函数constructor()的prototype属性是否出现在target对象的原型链中，即target对象是不是构造函数constructor()的实例。</p>\n<h3 id=\"instanceof运算符的常规用法\"><a href=\"#instanceof运算符的常规用法\" class=\"headerlink\" title=\"instanceof运算符的常规用法\"></a>instanceof运算符的常规用法</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> stringObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world'</span><span class=\"token punctuation\">)</span>\nstringObject instanceOf String<span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>判断变量stringObject是否是String类型的实例，因为变量stringObject是通过new操作符，由String的构造函数生成的，所以变量是stringObject是String类型的实例，最终返回’true’。</p>\n<h3 id=\"instanceof运算符用于继承判断\"><a href=\"#instanceof运算符用于继承判断\" class=\"headerlink\" title=\"instanceof运算符用于继承判断\"></a>instanceof运算符用于继承判断</h3><p>instanceof运算符可以在继承关系中，判断一个实例对象是否属于它的父类，</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义构造函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token constant\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">function</span> <span class=\"token constant\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 生成C()构造函数的一个实例</span>\n<span class=\"token keyword\">let</span> o <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 判断对象o是否为C()的一个实例，结果为true</span>\no <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">C</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 判断对象o是否为D()构造函数的一个实例，结果返回false</span>\no <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">D</span> <span class=\"token comment\">// false，因为D.prototype属性不存在o的原型链上</span>\n<span class=\"token comment\">// 判断对象o是否为Object()函数的一个实例，结果返回ture</span>\no <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 通过将D()构造函数的prototype属性指向C()构造函数的一个实例可以产生继承关系</span>\n<span class=\"token class-name\">D</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 继承</span>\n<span class=\"token comment\">// 生成D()构造函数的一个实例o2</span>\n<span class=\"token keyword\">let</span> o2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 判断实例o2是否为D()构造函数的一个实例，结果返回true</span>\no2 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">D</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 判断实例o2是否为C()构造函数的一个实例，结果返回true</span>\no2 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">C</span> <span class=\"token comment\">// true，因为通过继承关系，C.prototype出现在o2的原型链上</span>\n<span class=\"token comment\">// 修改D.prototype属性，将其指向一个空对象</span>\n<span class=\"token class-name\">D</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 再次生成一个D()构造函数的实例</span>\n<span class=\"token keyword\">let</span> o3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 判断实例o3是否为C()构造函数和D()构造函数的实例</span>\no3 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tue</span>\no3 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token comment\">// 因为D.protoype属性指向了一个空对象，那么C()构造函数的prototype属性将不再处于实例o3的原型链上，因此返回false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"事件流\"><a href=\"#事件流\" class=\"headerlink\" title=\"事件流\"></a>事件流</h2><p>事件流描述的是从页面中接收事件的顺序。事件发生后在目标节点和根节点之间按照特定的顺序传播，路径经过的节点都会接收到事件。</p>\n<p>一个完整的事件流实际包含3个阶段：事件捕获阶段&gt;事件目标阶段&gt;事件冒泡阶段。上述两种类型的事件流实际对应其中的事件捕获阶段与事件冒泡阶段。</p>\n<h3 id=\"事件捕获阶段\"><a href=\"#事件捕获阶段\" class=\"headerlink\" title=\"事件捕获阶段\"></a>事件捕获阶段</h3><p>事件捕获阶段的主要表现是不具体的节点先接收事件，然后逐级向下传播，最具体的节点最后接收到事件。例如Window&gt;Document&gt;html&gt;body&gt;table&gt;tbody&gt;tr&gt;td</p>\n<h3 id=\"事件目标阶段\"><a href=\"#事件目标阶段\" class=\"headerlink\" title=\"事件目标阶段\"></a>事件目标阶段</h3><p>时间目标阶段表示事件刚好传播到用户产生行为的元素上，可能是事件捕获的最后一个阶段，也可能是事件冒泡的第一个阶段。</p>\n<h3 id=\"事件冒泡阶段\"><a href=\"#事件冒泡阶段\" class=\"headerlink\" title=\"事件冒泡阶段\"></a>事件冒泡阶段</h3><p>事件冒泡阶段的主要表现是最具体的元素先接收事件，然后逐级向上传播，不具体的节点最后接收事件。例如td&gt;tr&gt;tbody&gt;table&gt;body&gt;html&gt;Document&gt;Window</p>\n<h2 id=\"事件处理程序\"><a href=\"#事件处理程序\" class=\"headerlink\" title=\"事件处理程序\"></a>事件处理程序</h2><p>事件处理程序，就是响应某个事件的函数。例如onclick()函数、onload()函数就是响应单击、加载事件的函数。事件处理程序分为DOM0、DOM2、DOM3这3种级别的事件处理程序。由于在DOM1中并没有定义事件的相关内容，因此没有所谓的DOM1级事件处理程序。</p>\n<h3 id=\"DOM0级事件处理程序\"><a href=\"#DOM0级事件处理程序\" class=\"headerlink\" title=\"DOM0级事件处理程序\"></a>DOM0级事件处理程序</h3><p>DOM0级事件处理程序是将一个函数赋值给一个事件处理属性，有两种表现形式。第一种是先通过JavaScript代码获取DOM元素，再将函数赋值给对应的事件属性。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"btn\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \nbtn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>第二种是直接在html中设置对应事件属性的值，值有两种表现形式，一种是执行的函数体，另一种是函数名，然后在script标签中定义该函数。</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert(<span class=\"token punctuation\">'</span>面试厅<span class=\"token punctuation\">'</span>);<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>单击<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clickFn()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>单击<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">function</span> <span class=\"token function\">clickFn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'面试厅'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>以上两种DOM0级事件处理程序同时存在时，第一种在JavaScript中定义的事件处理程序会覆盖掉后面在html标签中定义的事件处理程序。</p>\n<ul>\n<li>优点：简单且可以跨浏览器</li>\n<li>缺点：一个事件处理程序只能绑定一个函数</li>\n</ul>\n<h3 id=\"DOM2级事件处理程序\"><a href=\"#DOM2级事件处理程序\" class=\"headerlink\" title=\"DOM2级事件处理程序\"></a>DOM2级事件处理程序</h3><p>在DOM2级事件处理程序中，当事件发生在节点时，目标元素的事件处理函数就会被触发，而且目标元素的每个祖先节点也会按照事件流顺序触发对应的事件处理程序。DOM2级事件处理方式规定了添加事件处理程序和删除事件处理程序的方法。</p>\n<h3 id=\"DOM3级事件处理程序\"><a href=\"#DOM3级事件处理程序\" class=\"headerlink\" title=\"DOM3级事件处理程序\"></a>DOM3级事件处理程序</h3><p>DOM3级事件处理程序是在DOM2级事件的基础上重新定义了事件，也添加了一些新的事件。DOM3级事件处理程序允许自定义事件，自定义事件有createEvent函数创建，返回的对象有一个initCustomEvent()函数，通过传递对应的参数可以自定义事件。</p>\n<p>函数可以接收以下4个参数。<br>· type：字符串、触发的事件类型、自定义，例如“keyDown”“selectedChange”。<br>· bubble（布尔值）：表示事件是否可以冒泡。<br>· cancelable(布尔值）：表示事件是否可以取消。<br>· detail（对象）：任意值，保存在event对象的detail属性中。</p>\n<h2 id=\"浏览器的重排和重绘\"><a href=\"#浏览器的重排和重绘\" class=\"headerlink\" title=\"浏览器的重排和重绘\"></a>浏览器的重排和重绘</h2><p>浏览器渲染HTML的过程</p>\n<ol>\n<li>HTML文件被HTML解析器解析成对应的DOM树，CSS样式文件被CSS解析器解析生成对应的样式规则集。</li>\n<li>DOM树与CSS样式集解析完成后，附加在一起形成一个渲染树。</li>\n<li>节点信息的计算，即根据渲染树计算每个节点的几何信息。</li>\n<li>渲染绘制，即根据计算完成的节点信息绘制整个页面。</li>\n</ol>\n<p>重排和重绘发生在第3步和第4步中。</p>\n<h3 id=\"重排\"><a href=\"#重排\" class=\"headerlink\" title=\"重排\"></a>重排</h3><p>重要知识点：浏览器渲染页面默认采用的是流式布局模型。</p>\n<p>重排的过程就发生在DOM节点信息修改的时候。重排实际是根据渲染树中每个渲染对象的信息，计算出各自渲染对象的几何信息。</p>\n<p>重排是一种明显的改变页面布局的操作。</p>\n<p>常见的引起重排的操作：</p>\n<ul>\n<li>页面首次渲染</li>\n<li>浏览器窗口大小发生改变</li>\n<li>元素尺寸或位置发生改变</li>\n<li>元素内容发生变化</li>\n<li>元素字体发生变化</li>\n<li>添加或删除可见的DOM元素</li>\n<li>获取某些特定的属性</li>\n</ul>\n<h3 id=\"重绘\"><a href=\"#重绘\" class=\"headerlink\" title=\"重绘\"></a>重绘</h3><p>重绘只是改变元素在页面中的展现样式，而不会引起元素在文档流中位置的改变。</p>\n<p>引发重绘的操作：</p>\n<ul>\n<li>color：颜色</li>\n<li>border-style：边框样式</li>\n<li>visibility：元素是否可见</li>\n<li>background：元素背景样式，包括背景色、背景图、背景图尺寸、背景图位置。</li>\n<li>text-decoration：文本装饰</li>\n<li>outline：元素的外轮廓的样式，在边框外的位置。</li>\n</ul>\n<p>重排一定会引起重绘的操作，而重绘却不一定会引起重排的操作。</p>\n<h2 id=\"性能优化\"><a href=\"#性能优化\" class=\"headerlink\" title=\"性能优化\"></a>性能优化</h2><ol>\n<li><p>将多次改变样式的属性操作合并为一次</p>\n</li>\n<li><p>将需要多次重排的元素设置为绝对定位</p>\n<p>需要进行重排的元素都是处于正常的文档流中，常见的操作就是设置其position为absolute或者fixed。</p>\n</li>\n<li><p>在内存中多次操作节点，完成后在添加至文档树中</p>\n</li>\n<li><p>将要进行复杂处理的元素处理为display属性为none，处理完成后再进行显示</p>\n</li>\n<li><p>将频繁获取会引起重排的属性缓存至变量。</p>\n</li>\n<li><p>尽量减少使用table布局</p>\n</li>\n<li><p>使用事件委托绑定事件处理程序</p>\n</li>\n<li><p>利用DocumentFragment操作DOM节点</p>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"<p>在 JavaScript 中，每种数据类型都会使用 3bit 表示。</p>\n<ul>\n<li>000 表示 Object 类型的数据。</li>\n<li>001 表示 Int 类型的数据。</li>\n<li>010 表示 Double 类型的数据。</li>\n<li>100 表示 String 类型的数据。</li>\n<li>110 表示 Boolean 类型的数据。","more":"</li>\n</ul>\n<p>由于 null 代表的是空指针，大多数平台中值为 0x00，因此 null 的类型标签就成了 0，所以使用 typeof 运算符时会判断为 object 类型，返回‘object’</p>\n<h2 id=\"逗号运算符\"><a href=\"#逗号运算符\" class=\"headerlink\" title=\"逗号运算符\"></a>逗号运算符</h2><ol>\n<li><h3 id=\"在-for-循环中批量执行表达式\"><a href=\"#在-for-循环中批量执行表达式\" class=\"headerlink\" title=\"在 for 循环中批量执行表达式\"></a>在 for 循环中批量执行表达式</h3></li>\n<li><h3 id=\"用于交换变量，无须额外变量\"><a href=\"#用于交换变量，无须额外变量\" class=\"headerlink\" title=\"用于交换变量，无须额外变量\"></a>用于交换变量，无须额外变量</h3><p>一般情况下</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> c<span class=\"token punctuation\">;</span>\nc <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\na <span class=\"token operator\">=</span> b<span class=\"token punctuation\">;</span>\nb <span class=\"token operator\">=</span> c<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>使用逗号运算符</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 方案1</span>\na <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 方案2</span>\na <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在方案 1 中，前一部分[b, b = a]是一个一维数组，数组第二项值是 b = a，实际会将 a 值赋给 b，然后返回“’a’”，因此数组最终的值为[‘b’, ‘a’]，然后取索引 0 的值为’b’，赋给变量 a，最终实现 a = ‘b’, b = ‘a’。<br>在方案 2 中，前一部分[b]是一个一维数组，后一部分[b = a, 0]，实际会先执行 b = a，将 a 值赋给 b，然后返回“0”，因此后一部分实际是修改了 b 的值并返回索引“0”，最终是 a = [b][0]，即 a = b，实现了 a 与 b 的交换。</p>\n</li>\n<li><h3 id=\"用于简化代码\"><a href=\"#用于简化代码\" class=\"headerlink\" title=\"用于简化代码\"></a>用于简化代码</h3><p>因为逗号运算符可以使多个表达式先后执行，并且返回最后一个表达式的值</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 使用逗号运算符简写后</span>\nx <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span><span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h3 id=\"用小括号保证逗号运算符的优先级\"><a href=\"#用小括号保证逗号运算符的优先级\" class=\"headerlink\" title=\"用小括号保证逗号运算符的优先级\"></a>用小括号保证逗号运算符的优先级</h3><p>在所有的运算符中，逗号运算符的优先级是最低的，因此对于某些涉及优先级的问题，我们需要使用到小括号，将含有逗号运算符的表达式括起来。</p>\n</li>\n</ol>\n<h2 id=\"toString-函数与-valueOf-函数\"><a href=\"#toString-函数与-valueOf-函数\" class=\"headerlink\" title=\"toString()函数与 valueOf()函数\"></a>toString()函数与 valueOf()函数</h2><ol>\n<li><h3 id=\"toString-函数\"><a href=\"#toString-函数\" class=\"headerlink\" title=\"toString()函数\"></a>toString()函数</h3><p>toString()函数的作用是把一个逻辑值转换为字符串，并返回结果。</p>\n</li>\n<li><h3 id=\"valueOf-函数\"><a href=\"#valueOf-函数\" class=\"headerlink\" title=\"valueOf()函数\"></a>valueOf()函数</h3><p>valueOf()函数的作用是返回最适合引用类型的原始值，如果没有原始值，则会返回引用类型自身。</p>\n</li>\n</ol>\n<h2 id=\"JavaScript-常用的判空方法\"><a href=\"#JavaScript-常用的判空方法\" class=\"headerlink\" title=\"JavaScript 常用的判空方法\"></a>JavaScript 常用的判空方法</h2><p>对变量进行取反，然后判断是否为 true</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"判断变量为空对象\"><a href=\"#判断变量为空对象\" class=\"headerlink\" title=\"判断变量为空对象\"></a>判断变量为空对象</h3><ol>\n<li><h4 id=\"判断变量为-null-或者-undefined\"><a href=\"#判断变量为-null-或者-undefined\" class=\"headerlink\" title=\"判断变量为 null 或者 undefined\"></a>判断变量为 null 或者 undefined</h4><p>判断一个变量是否为空时，可以直接将变量与 null 或者 undefined 相比较</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n<span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 可以判断null或者undeﬁned</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> undeﬁned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n<span class=\"token punctuation\">&#125;</span> <span class=\"token comment\">// 只能判断undeﬁned</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量是否为空对象\"><a href=\"#判断变量是否为空对象\" class=\"headerlink\" title=\"判断变量是否为空对象{}\"></a>判断变量是否为空对象{}</h4><p>判断一个变量是否为空对象时，可以通过 for…in 语句遍历变量的属性，然后调用 hasOwnProperty()函数，判断是否有自身存在的属性，如果存在则不为空对象，如果不存在自身的属性（不包括继承的属性），那么变量为空对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 定义空的对象字面量</span>\n<span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'kingx'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 通过new操作符获取对象</span>\n<span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量为空数组\"><a href=\"#判断变量为空数组\" class=\"headerlink\" title=\"判断变量为空数组\"></a>判断变量为空数组</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">arr <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span> <span class=\"token operator\">&amp;&amp;</span> arr<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量为空字符串\"><a href=\"#判断变量为空字符串\" class=\"headerlink\" title=\"判断变量为空字符串\"></a>判断变量为空字符串</h4><p>判断变量是否为空字符串时，可以直接将其与空字符串相比较，或者调用 trim()函数去掉前后的空格，然后判断字符串的长度。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">str <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token operator\">||</span> str<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><h4 id=\"判断变量为-0-或者-NaN\"><a href=\"#判断变量为-0-或者-NaN\" class=\"headerlink\" title=\"判断变量为 0 或者 NaN\"></a>判断变量为 0 或者 NaN</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> num<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"引用数据类型\"><a href=\"#引用数据类型\" class=\"headerlink\" title=\"引用数据类型\"></a>引用数据类型</h2></li>\n</ol>\n<p>在 JavaScript 中，如果函数没有 return 值，则默认 return this。</p>\n<p>创建一个对象实例，new 操作符做了 3 件事情。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> Cat <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  Cat<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  Cat<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Cat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 相当于</span>\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\ncat<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n<span class=\"token function\">Cat</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>第一行：创建一个空对象。</p>\n<p>第二行：将空对象的<strong>proto</strong>属性指向 Cat 对象的 prototype 属性。</p>\n<p>第三行：将 Cat()函数中的 this 指向 cat 变量。</p>\n<p>自定义一个类似 new 功能的函数</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayHi</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">New</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  obj<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 核心代码，用于继承</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">typeof</span> res <span class=\"token operator\">===</span> <span class=\"token string\">'object'</span> <span class=\"token operator\">?</span> res <span class=\"token operator\">:</span> obj<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">New</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mimi'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//hi</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Object-类型的静态函数\"><a href=\"#Object-类型的静态函数\" class=\"headerlink\" title=\"Object 类型的静态函数\"></a>Object 类型的静态函数</h2><h3 id=\"object-create-函数\"><a href=\"#object-create-函数\" class=\"headerlink\" title=\"object.create()函数\"></a>object.create()函数</h3><p>属性描述符的格式如下所示</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">propertyName<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n   value<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置此属性的值</span>\n   writable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置此属性是否可写入；默认为false：只读</span>\n   enumerable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 设置此属性是否可枚举；默认为false：不可枚举</span>\n   conﬁgurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// 设置此属性是否可配置，如是否可以修改属性的特性及是否可以删除属性；默认为false</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 建立一个自定义对象，设置name和age属性</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n  name<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token string\">'tom'</span><span class=\"token punctuation\">,</span>\n    writable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    enumerable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    conﬁgurable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  age<span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tom</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 22</span>\nobj<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">28</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 22 ：age属性的writable默认为false，此属性为只读</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> p <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// name ：只输出name属性；age属性的enumerable默认为false，不能通过for...in 枚举</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"Array-类型\"><a href=\"#Array-类型\" class=\"headerlink\" title=\"Array 类型\"></a>Array 类型</h3><h4 id=\"判断一个变量是数组还是对象\"><a href=\"#判断一个变量是数组还是对象\" class=\"headerlink\" title=\"判断一个变量是数组还是对象\"></a>判断一个变量是数组还是对象</h4><ol>\n<li><h5 id=\"instanceof-运算符\"><a href=\"#instanceof-运算符\" class=\"headerlink\" title=\"instanceof 运算符\"></a>instanceof 运算符</h5><p>instanceof 运算符用于通过查找原型链来检测某个变量是否为某个类型数据的实例，使用 instanceof 运算符可以判断一个变量是数组还是对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'kingx'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>b <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>封装函数判断变量是数组还是对象</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 判断变量是数组还是对象</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getDataType</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>o instance <span class=\"token keyword\">of</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'Array'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>o <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'Object'</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'param is not object type'</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"判断构造函数\"><a href=\"#判断构造函数\" class=\"headerlink\" title=\"判断构造函数\"></a>判断构造函数</h4><p>判断一个变量是否是数组或者对象，从另一个层面讲，就是判断变量的构造函数是 Array 类型还是 Object 类型。因为一个对象的实例都是通过构造函数生成的，所以，我们可以直接判断一个变量的 constructor 属性。</p>\n</li>\n</ol>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n\n<span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'kingx'</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>每个变量都会有一个<strong>proto</strong>属性，表示的是隐式原型。一个对象的隐式原型指向的是构造该对象的构造函数的原型，用数组举例。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>上面直接通过 constructor 属性判断的语句也可以改写成下面的形式</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token class-name\">__proto__</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span><span class=\"token class-name\">__proto__</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>同时，也可以将代码进行封装，得到一个判断变量是数组还是对象的通用函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 判断变量是数组还是对象</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getDataType</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">o</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n   <span class=\"token comment\">// 获取构造函数</span>\n   <span class=\"token keyword\">var</span> constructor <span class=\"token operator\">=</span> o<span class=\"token punctuation\">.</span>_ _proto_ <span class=\"token class-name\">_</span><span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">||</span> o<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>constructor <span class=\"token operator\">===</span> Array<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'Array'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>constructor <span class=\"token operator\">===</span> Object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'Object'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'param is not object type'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol start=\"4\">\n<li><h5 id=\"Array-isArray-函数\"><a href=\"#Array-isArray-函数\" class=\"headerlink\" title=\"Array.isArray()函数\"></a>Array.isArray()函数</h5><p>Array.isArray()函数只能判断变量是否为数组。</p>\n</li>\n</ol>\n<h3 id=\"reduce-函数累加器处理数组元素\"><a href=\"#reduce-函数累加器处理数组元素\" class=\"headerlink\" title=\"reduce()函数累加器处理数组元素\"></a>reduce()函数累加器处理数组元素</h3><p>reduce()函数的语法如下所示</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> initialValue<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>initialValue 用作 callback 的第一个参数值，如果没有设置，则会使用数组的第一个元素值。</p>\n<ol>\n<li><h4 id=\"求数组每个元素相加的和\"><a href=\"#求数组每个元素相加的和\" class=\"headerlink\" title=\"求数组每个元素相加的和\"></a>求数组每个元素相加的和</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> sum <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">accumulator<span class=\"token punctuation\">,</span> currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> accumulator <span class=\"token operator\">+</span> currentValue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><h4 id=\"统计数组中每个元素出现的次数\"><a href=\"#统计数组中每个元素出现的次数\" class=\"headerlink\" title=\"统计数组中每个元素出现的次数\"></a>统计数组中每个元素出现的次数</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> <span class=\"token function-variable function\">countOccurrences</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">accumulator<span class=\"token punctuation\">,</span> currentValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    accumulator<span class=\"token punctuation\">[</span>currentValue<span class=\"token punctuation\">]</span>\n      <span class=\"token operator\">?</span> accumulator<span class=\"token punctuation\">[</span>currentValue<span class=\"token punctuation\">]</span><span class=\"token operator\">++</span>\n      <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>accumulator<span class=\"token punctuation\">[</span>currentValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> accumulator<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 测试代码</span>\n<span class=\"token function\">countOccurrences</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"函数的定义与调用\"><a href=\"#函数的定义与调用\" class=\"headerlink\" title=\"函数的定义与调用\"></a>函数的定义与调用</h2></li>\n</ol>\n<p>函数的定义大体可以分为3种，分别是函数声明，函数表达式和Function构造函数。</p>\n<h3 id=\"函数声明\"><a href=\"#函数声明\" class=\"headerlink\" title=\"函数声明\"></a>函数声明</h3><p>函数声明式直接使用function关键字接一个函数名，函数名后是接收函数的形参。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 函数声明式</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span>num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数表达式\"><a href=\"#函数表达式\" class=\"headerlink\" title=\"函数表达式\"></a>函数表达式</h3><p>函数表达式的形式类似普通变量的初始化，只不过这个变量初始化的值是一个函数。</p>\n<p>foo是函数名称，它实际是函数内部的一个局部变量，在函数外部是无法直接调用的。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 函数表达式 属于匿名函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span>num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 4</span>\n<span class=\"token comment\">// 具有函数名的函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"Function-构造函数\"><a href=\"#Function-构造函数\" class=\"headerlink\" title=\"Function()构造函数\"></a>Function()构造函数</h3><p>使用new操作符，调用Function()构造函数，传入对应的参数，也可以定义一个函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> add <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'return a + b'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>但是这种使用比较少，主要有以下两个原因。</p>\n<p>第一个原因是Function()构造函数每次执行时，都会解析函数主体，并创建一个新的函数对象，所以当在一个循环或者频繁执行的函数中调用Function()构造函数时，效率是非常低的。</p>\n<p>第二个原因是使用Function()构造函数创建的函数，并不遵循典型的作用域，它将一直作为顶级函数执行。所以在一个函数A内部调用Function()构造函数时，其中的函数体并不能访问到函数A中的局部变量，而只能访问到全局变量。</p>\n<h3 id=\"函数表达式的应用场景\"><a href=\"#函数表达式的应用场景\" class=\"headerlink\" title=\"函数表达式的应用场景\"></a>函数表达式的应用场景</h3><p>主要针对函数递归与代码模块化这两个应用场景进行讲解</p>\n<h4 id=\"函数递归\"><a href=\"#函数递归\" class=\"headerlink\" title=\"函数递归\"></a>函数递归</h4><p>通过函数表达式可以定义具有名称的函数，它作为函数内部的一个局部变量，指向函数自声。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 斐波那契数列问题</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>通过函数表达式实现代码</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 斐波那契数列问题</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">fibonacci</span><span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>num <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> num <span class=\"token operator\">===</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">fibonacci</span><span class=\"token punctuation\">(</span>num<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"代码模块化\"><a href=\"#代码模块化\" class=\"headerlink\" title=\"代码模块化\"></a>代码模块化</h4><p>在ES6以前，JavaScript中是没有块级作用域的，但是我们可以通过函数表达式来间接地实现模块化，将特定的模块化代码封装在一个函数中，只对外暴露接口。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> _name <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> _name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">setName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      _name <span class=\"token operator\">=</span> newName<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nperson<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'king'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"函数提升\"><a href=\"#函数提升\" class=\"headerlink\" title=\"函数提升\"></a>函数提升</h4><p>对于函数声明，存在函数提升，所以即使函数的调用在函数的声明之前，仍然可以正常执行。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Uncaught ReferenceError: sub is not defined</span>\n<span class=\"token comment\">// 函数声明</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span>a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">+</span> a2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sub</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span> a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">-</span>a2\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数调用\"><a href=\"#函数调用\" class=\"headerlink\" title=\"函数调用\"></a>函数调用</h3><p>函数调用存在5种模式，函数调用模式，方法调用模式，构造器调用模式，call()函数、apply()函数调用模式，匿名函数调用模式。</p>\n<h4 id=\"函数调用模式\"><a href=\"#函数调用模式\" class=\"headerlink\" title=\"函数调用模式\"></a>函数调用模式</h4><p>函数调用模式是通过函数声明或者函数表达式的方法定义函数，然后直接通过函数名调用的模式</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 函数声明</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span> a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">+</span> a2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 函数表达式</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sub</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a1<span class=\"token punctuation\">,</span> a2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> a1 <span class=\"token operator\">-</span> a2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"方法调用模式\"><a href=\"#方法调用模式\" class=\"headerlink\" title=\"方法调用模式\"></a>方法调用模式</h4><p>方法调用模式会优先定义一个对象obj，然后在对象内部定义值为函数的属性property，通过对象obj.property()来进行函数的调用。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义对象</span>\n<span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>\n\tname<span class=\"token operator\">:</span> <span class=\"token string\">'kingx'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token comment\">// 定义getName属性，值为一个函数</span>\n\t<span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 通过对象进行调用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>函数还可以通过中括号来调用，即对象名[‘函数名’]，那么上面的实例代码可以改写为</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>\n\tname<span class=\"token operator\">:</span><span class=\"token string\">'kingx'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">getName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">setName</span><span class=\"token operator\">:</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token operator\">=</span>name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span> <span class=\"token comment\">//在函数内部返回函数对象本身</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kingx2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//链式函数调用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"构造器调用模式\"><a href=\"#构造器调用模式\" class=\"headerlink\" title=\"构造器调用模式\"></a>构造器调用模式</h4><p>构造器调用模式会定义一个函数，在函数中定义实例属性，在原型上定义函数，然后通过new操作符生成函数的实例，再通过实例调用原型上定义的函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义函数对象</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型上定义函数</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过new操作符生成实例</span>\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kingx'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 通过实例进行函数的调用</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"call-函数，apply-函数调用模式\"><a href=\"#call-函数，apply-函数调用模式\" class=\"headerlink\" title=\"call()函数，apply()函数调用模式\"></a>call()函数，apply()函数调用模式</h4><p>通过call函数或者apply函数可以改变函数执行的主体，使得某些不具有特定函数的对象可以直接调用该特定函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 定义一个对象</span>\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过call()函数与apply()函数调用sum()函数</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>通过call()函数与apply()函数，使得没有sum()函数的person对象也可以直接调用sum()函数。</p>\n<h4 id=\"匿名函数调用模式\"><a href=\"#匿名函数调用模式\" class=\"headerlink\" title=\"匿名函数调用模式\"></a>匿名函数调用模式</h4><p>匿名函数，就是没用函数名称的函数。匿名函数的调用有两种方式，一种是通过函数表达式定义函数，并赋给变量，通过变量进行调用。另一种是使用小括号()将匿名函数括起来，然后在后面使用小括号，传递对应的参数，进行调用。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 通过函数表达式定义匿名函数，并赋给变量sum</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过sum()函数进行匿名函数调用</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 小括号括起来</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> num1 <span class=\"token operator\">+</span> num2\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//3</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"函数参数\"><a href=\"#函数参数\" class=\"headerlink\" title=\"函数参数\"></a>函数参数</h3><h4 id=\"形参实参\"><a href=\"#形参实参\" class=\"headerlink\" title=\"形参实参\"></a>形参实参</h4><p>函数的参数分为两种，分别是形参和实参。</p>\n<p>形参全称为形式参数。是在定义函数名称与函数体使用的参数，目的是用来接收调用该函数时传入的参数。</p>\n<p>实参全称为实际参数，是在调用时传递给函数的参数，实参可以使常量、变量、表达式、函数等类型。</p>\n<h5 id=\"形参和实参的区别\"><a href=\"#形参和实参的区别\" class=\"headerlink\" title=\"形参和实参的区别\"></a>形参和实参的区别</h5><ol>\n<li>形参出现在函数的定义中，只能在函数体内使用，一旦离开该函数则不能使用；实参出现在主调函数中，进入被调函数后，实参也将不能被访问。</li>\n<li>在强类型语言中，定义的形参和实参在数量、数据类型和顺序上要保持严格一致，否则会抛出“类型不匹配”的异常</li>\n<li>在函数调用过程中，数据传输是单向的，即只能把实参的值传递给形参，而不能把形参的值反向传递给实参。</li>\n<li>当实参是基本数据类型的值时，实际是将实参的值复制一份传递给形参，在函数运行结束时形参被释放，而是实参中的值不会变化。</li>\n</ol>\n<h3 id=\"arguments对象的性质\"><a href=\"#arguments对象的性质\" class=\"headerlink\" title=\"arguments对象的性质\"></a>arguments对象的性质</h3><p>arguments是所有函数都具有的一个内置局部变量，表示的是函数实际接收的参数，是一个类数组结构。它除了具有length属性外，不具有数组的一些常有方法。</p>\n<h4 id=\"函数内部无法访问\"><a href=\"#函数内部无法访问\" class=\"headerlink\" title=\"函数内部无法访问\"></a>函数内部无法访问</h4><p>arguments对象只能在函数内部使用，无法在函数外部访问到arguments对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3 </span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 0</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"可通过索引访问\"><a href=\"#可通过索引访问\" class=\"headerlink\" title=\"可通过索引访问\"></a>可通过索引访问</h4><p>arguments对象是一个类数组结构，可以通过索引访问，每一项表示对应传递的实参值，如果该项索引值不存在，则会返回’undefined’</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num1<span class=\"token punctuation\">,</span> num2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 3</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 4</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"由实参决定\"><a href=\"#由实参决定\" class=\"headerlink\" title=\"由实参决定\"></a>由实参决定</h4><p>arguments对象的值由实参决定，而不是由定义的形参决定，形参与arguments对象占有独立的内存空间。</p>\n<ol>\n<li> arguments对象的length属性在函数调用的时候就已经确定，不会随着函数的处理而改变。</li>\n<li> 指定的形参在传递实参的情况下，arguments对象与形参值相同，并且可以相互改变。</li>\n<li> 指定的形参在未传递实参的情况下，arguments对象对应索引值返回“undefined”。</li>\n<li>指定的形参在未传递实参的情况下，arguments对象与形参值不能相互改变。</li>\n</ol>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span>c</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments的长度'</span><span class=\"token punctuation\">,</span>arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//2</span>\n    arguments<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a的值'</span><span class=\"token punctuation\">,</span> a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 11</span>\n    b <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments索引为1的值'</span><span class=\"token punctuation\">,</span>arguments<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//12</span>\n    arguments<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'c的值'</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n    c <span class=\"token operator\">=</span> <span class=\"token number\">13</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments索引为2的值'</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\n  \n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'arguments的长度'</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"特殊的arguments-callee属性\"><a href=\"#特殊的arguments-callee属性\" class=\"headerlink\" title=\"特殊的arguments.callee属性\"></a>特殊的arguments.callee属性</h4><p>arguments对象有一个很特殊的属性callee，表示的是当前正在执行的函数，在比较时是严格相等的,但是使用arguments.callee属性会改变函数内部的this值。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>callee <span class=\"token operator\">===</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>用法：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> n <span class=\"token operator\">*</span> arguments<span class=\"token punctuation\">.</span><span class=\"token function\">callee</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"arguments对象的应用\"><a href=\"#arguments对象的应用\" class=\"headerlink\" title=\"arguments对象的应用\"></a>arguments对象的应用</h3><h4 id=\"实参的个数判断\"><a href=\"#实参的个数判断\" class=\"headerlink\" title=\"实参的个数判断\"></a>实参的个数判断</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 检查传递的参数个数是否正确</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'期望传递的参数个数为3，实际传递的个数为：'</span><span class=\"token operator\">+</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">// ...do something</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">f</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//期望传递的参数个数为3，实际传递的个数为：2</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"任意个数的参数处理\"><a href=\"#任意个数的参数处理\" class=\"headerlink\" title=\"任意个数的参数处理\"></a>任意个数的参数处理</h4><p>定义一个函数，该函数只会特定处理传递的前几个参数，对于后面的参数不论传递多少个都会统一处理，这种场景下我们可以使用arguments对象。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">joinStr</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sepreator</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// arguments对象是一个类数组结构，可以通过call()函数间接调用slice()函数，得到一个数组</span>\n    <span class=\"token keyword\">let</span> strArr <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// strArr数组直接调用join()函数</span>\n    <span class=\"token keyword\">return</span> strArr<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>sepreator<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">joinStr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">joinStr</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">,</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"模拟函数重载\"><a href=\"#模拟函数重载\" class=\"headerlink\" title=\"模拟函数重载\"></a>模拟函数重载</h4><p>函数重载表示的是在函数名相同的情况下，通过函数形参的不同参数类型或者不同参数个数来定义不同的函数。JavaScript是一门弱类型语言，没有函数重载。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 通用求和函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 通过call()函数间接调用数组的slice()函数得到函数参数的数组</span>\n    <span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 调用数组的reduce函数进行多个值的求和</span>\n    <span class=\"token keyword\">return</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre<span class=\"token punctuation\">,</span>cur</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> pre <span class=\"token operator\">+</span> cur\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"变量提升和函数提升\"><a href=\"#变量提升和函数提升\" class=\"headerlink\" title=\"变量提升和函数提升\"></a>变量提升和函数提升</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span><span class=\"token number\">10</span>\n    <span class=\"token punctuation\">&#125;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>首先在全局作用域中定义一个变量a，值为true，然后调用foo()函数。foo()函数时通过函数声明定义的，会进行函数提升，因此foo()函数会正常调用。在foo()函数内部，首先判断变量a的值，由于变量a在函数内部重新通过var关键字声明了一次，因此a会出现变量提升，a会提升至foo()函数的顶部，此时a的值为undefined。那么通过if语句进行判断时，返回’false’，并未执行a=10 的赋值语句，因此最后输出’undefined’。<br>过程可以改为一下代码段。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\na <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        a <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"变量提升和函数提升优先级\"><a href=\"#变量提升和函数提升优先级\" class=\"headerlink\" title=\"变量提升和函数提升优先级\"></a>变量提升和函数提升优先级</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// function</span>\n   <span class=\"token comment\">// 变量提升</span>\n   <span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token string\">'variable'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// 函数提升</span>\n   <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">&#125;</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// string</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>变量提升的优先级要比函数提升的优先级高，因此执行过程可以改写为：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">funciton <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 变量提升至函数顶部</span>\n    <span class=\"token keyword\">var</span> foo<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 函数提升，但是优先级低，出现在变量声明后面，则foo是一个函数</span>\n    funciton <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'function'</span>\n    <span class=\"token punctuation\">&#125;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span>\n    \n    foo <span class=\"token operator\">=</span> <span class=\"token string\">'variable'</span> <span class=\"token comment\">// 变量赋值</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> foo<span class=\"token punctuation\">)</span> <span class=\"token comment\">// string</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"变量提升和函数提升整体应用\"><a href=\"#变量提升和函数提升整体应用\" class=\"headerlink\" title=\"变量提升和函数提升整体应用\"></a>变量提升和函数提升整体应用</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">function</span> <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\t\ta <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t<span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>代码中首先定义一个变量a并赋值为1，然后声明一个b()函数，并在后面直接进行调用，最后输出变量a的值。</p>\n<p>在b()函数中，赋值的变量a并未使用var关键字，因此变量a是一个全局环境的变量，而在return语句之后出现了一个变量a的函数声明，则会进行提升，执行return语句后，变量a的值仍然为1，可改写代码为：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 变量a的提升</span>\n    <span class=\"token keyword\">var</span> a<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 函数声明b的提升</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// 内部的函数声明a的提升</span>\n        <span class=\"token keyword\">function</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n        a <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n        <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">&#125;</span>\n    a <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"闭包\"><a href=\"#闭包\" class=\"headerlink\" title=\"闭包\"></a>闭包</h3><p>一个拥有许多变量和绑定了这些变量执行上下文环境的表达，通常是一个函数。</p>\n<p>闭包有两个特点</p>\n<ul>\n<li>函数拥有的外部变量的引用，在函数返回时，该变量仍然处于活跃状态。</li>\n<li>闭包作为一个函数返回时，其执行上下文环境不会被销毁，仍处于执行上下文环境中。</li>\n</ul>\n<p>在JavaScript中存在一种内部函数，即函数声明和函数表达式可以位于另一个函数的函数体内，在内部函数中可以访问外部函数声明的变量，当这个内部函数在包含它们的外部函数之外被调用时，就会形成闭包。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">var</span> max <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">></span> max<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">var</span> f1 <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">f1</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 11</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"闭包的优点\"><a href=\"#闭包的优点\" class=\"headerlink\" title=\"闭包的优点\"></a>闭包的优点</h4><ul>\n<li>保护函数内变量的安全，实现封装，防止变量流失其他环境发生命名冲突，造成环境污染。</li>\n<li>在适当的时候，可以在内存中维护变量并缓存，提高执行效率。</li>\n</ul>\n<h4 id=\"闭包的缺点\"><a href=\"#闭包的缺点\" class=\"headerlink\" title=\"闭包的缺点\"></a>闭包的缺点</h4><ul>\n<li>消耗内存：通常来说，函数的活动对象会随着执行上下文环境一起被销毁，但是，由于闭包引用的是外部函数的活动对象，因此这个活动对象无法被销毁，这意味着，闭包比一般的函数需要消耗更多的内存。</li>\n<li>泄露内存：在IE9之前，如果闭包的作用于链中存在DOM对象，则意味着该DOM对象无法被销毁，造成内存泄露。</li>\n</ul>\n<h2 id=\"this使用\"><a href=\"#this使用\" class=\"headerlink\" title=\"this使用\"></a>this使用</h2><h3 id=\"this指向全局对象\"><a href=\"#this指向全局对象\" class=\"headerlink\" title=\"this指向全局对象\"></a>this指向全局对象</h3><p>当函数没有所属对象而直接调用时，this指向的是全局对象。</p>\n<h4 id=\"this指向所属对象\"><a href=\"#this指向所属对象\" class=\"headerlink\" title=\"this指向所属对象\"></a>this指向所属对象</h4><p>谁调用它，它就指向谁。</p>\n<h4 id=\"this指向对象实例\"><a href=\"#this指向对象实例\" class=\"headerlink\" title=\"this指向对象实例\"></a>this指向对象实例</h4><p>当通过new操作符调用构造函数生成对象的实例时，this指向该实例。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">//全局变量</span>\n<span class=\"token keyword\">let</span> number <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 复写全局变量</span>\n    number <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 实例变量</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>number <span class=\"token operator\">=</span><span class=\"token number\">30</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型函数</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getNumber</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>number\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过new操作符获取对象的实例</span>\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">.</span><span class=\"token function\">getNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 30</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"this指向call-函数、apply-函数、bind-函数调用后重新绑定的对象\"><a href=\"#this指向call-函数、apply-函数、bind-函数调用后重新绑定的对象\" class=\"headerlink\" title=\"this指向call()函数、apply()函数、bind()函数调用后重新绑定的对象\"></a>this指向call()函数、apply()函数、bind()函数调用后重新绑定的对象</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 全局变量</span>\n<span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n    value<span class=\"token operator\">:</span> <span class=\"token number\">20</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 全局函数</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">method</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 10</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20</span>\n<span class=\"token keyword\">let</span> newMethod <span class=\"token operator\">=</span> <span class=\"token function\">method</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n<span class=\"token function\">newMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"闭包中的this\"><a href=\"#闭包中的this\" class=\"headerlink\" title=\"闭包中的this\"></a>闭包中的this</h4><p>函数的this变量只能被自身访问，其内部函数无法访问。因此在遇到闭包时，闭包内部的this关键字无法访问到外部函数的this变量。</p>\n<h2 id=\"call-函数、apply-函数、bind-函数的使用与区别\"><a href=\"#call-函数、apply-函数、bind-函数的使用与区别\" class=\"headerlink\" title=\"call()函数、apply()函数、bind()函数的使用与区别\"></a>call()函数、apply()函数、bind()函数的使用与区别</h2><h3 id=\"call-函数的基本使用\"><a href=\"#call-函数的基本使用\" class=\"headerlink\" title=\"call()函数的基本使用\"></a>call()函数的基本使用</h3><p>call()函数调用一个函数时，会将该函数的执行对象上下文改变为另一个对象。其语法为：</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>thisAra<span class=\"token punctuation\">,</span> arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>function为需要调用的函数。</li>\n<li>thisArg表示的是新的对象上下文，函数中的this将指向thisArg，如果thisArg为null或者undefined，则this会指向全局对象。</li>\n<li>arg1,arg2，…表示的是函数所接收的参数列表。</li>\n</ul>\n<p>call函数用法实例</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个add()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过call()函数进行add()函数的调用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myAddCall</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 调用add()函数的call()函数</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">myAddCall</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出'30'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"apply-函数的基本使用\"><a href=\"#apply-函数的基本使用\" class=\"headerlink\" title=\"apply()函数的基本使用\"></a>apply()函数的基本使用</h3><p>apply()函数的作用域与call()函数时一致的，只是在传递参数的形式上存在差别。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token function\">funciton</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>thisArg<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>argsArray<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>function与thisArg参数与call()函数中的解释一样</li>\n<li>[argsArray]表示的是参数会通过数组的形式进行传递，如果argsArray不是一个有效的数组或者arguments对象，则会抛出一个TypeError异常</li>\n</ul>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个add()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过apply()函数进行add()函数的调用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myAddApply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 调用add()函数的call()函数</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">myAddApply</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出'30'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"bind-函数的基本使用\"><a href=\"#bind-函数的基本使用\" class=\"headerlink\" title=\"bind()函数的基本使用\"></a>bind()函数的基本使用</h3><p>bind()函数创建一个新的函数，在调用时设置this关键字为提供的值，在执行新函数时，将给定的参数列表作为原函数的参数序列，从前往后匹配。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>Arg<span class=\"token punctuation\">,</span> arg1<span class=\"token punctuation\">,</span> arg2<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>bind()函数与call()函数接收的参数是一样的，其返回值是原函数的副本，并拥有指定的this值和初始参数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义一个add()函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> x <span class=\"token operator\">+</span> y\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过bind()函数进行add()函数的调用</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">myAddBind</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 调用bind()函数得到一个新的函数</span>\n    <span class=\"token keyword\">let</span> bindAddFn <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">bindAddFn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">myAddBind</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 输出'30'</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"call-函数、apply-函数、bind-函数的比较\"><a href=\"#call-函数、apply-函数、bind-函数的比较\" class=\"headerlink\" title=\"call()函数、apply()函数、bind()函数的比较\"></a>call()函数、apply()函数、bind()函数的比较</h3><p>三者的相同之处都是：都会改变函数调用的执行主体，修改this的指向。</p>\n<p>不同之处在以下两点</p>\n<ol>\n<li>call()函数与apply()函数在执行后会理解立即调用前面的函数，而bind()函数不会立即调用，它会返回一个新的函数，可以在任何时候进行调用。</li>\n<li>call()接收从第二个到最后一个参数，apply()接收一个数组。</li>\n</ol>\n<h2 id=\"对象的属性\"><a href=\"#对象的属性\" class=\"headerlink\" title=\"对象的属性\"></a>对象的属性</h2><h3 id=\"访问器属性\"><a href=\"#访问器属性\" class=\"headerlink\" title=\"访问器属性\"></a>访问器属性</h3><p>访问器属性同样包含4个特性，分别是[[Configurable]]、[[Enumerable]]、[[Get]]和[[Set]]。</p>\n<ul>\n<li>[[Configurable]]：表示属性能否删除而重新定义，或者是否可以修改为访问器属性，默认值为true</li>\n<li>[[Enumerable]]：表示属性是否可枚举，可枚举的属性能够通过for…in循环返回，默认值为true。 </li>\n<li>[[Get]]：在读取属性值时调用的函数（一般称为getter()函数），负责返回有效的值，默认值为undefined。</li>\n<li>[[Set]]：在写入属性值时调用的函数（一般称为setter()函数），负责处理数据，默认值为undefined。</li>\n</ul>\n<p>如果需要修改访问器属性默认的特性，则必须使用Object.defineProperty()函数</p>\n<p>getter()函数和setter()函数的存在在一定程度上可以实现对象的私有属性，私有属性不对外暴露。如果想要读取和写入私有属性的值，则需要通过设置额外属性的getter()函数和setter()函数来实现。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>\n\t_age<span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n<span class=\"token punctuation\">&#125;</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">,</span> <span class=\"token string\">'age'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">set</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>newValue <span class=\"token operator\">></span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_age <span class=\"token operator\">=</span> newValue<span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'设置成功'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"对象深拷贝\"><a href=\"#对象深拷贝\" class=\"headerlink\" title=\"对象深拷贝\"></a>对象深拷贝</h3><p>JSON.parse(JSON.stringify(Obj))</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">/* 使用JSON.stringify()函数将原始对象序列化为字符串，再使用JSON.parse()函数将字符串反序列化为一个对象。 */</span>\n<span class=\"token keyword\">let</span> origin <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  a<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  b<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">C</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>\n    d<span class=\"token operator\">:</span> <span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>该方法有以下几个问题：</p>\n<ol>\n<li>无法实现对函数、RegExp等特殊对象的克隆。</li>\n<li>对象的constructor会被抛弃，所有的构造函数会指向Object，原型链关系断裂。</li>\n<li>对象中如果存在循环引用，会抛出异常。</li>\n</ol>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> animal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> origin <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 属性为函数</span>\n  <span class=\"token function-variable function\">a</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 属性为正则表达式对象</span>\n  b<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 属性为某个对象的实例</span>\n  c<span class=\"token operator\">:</span> animal<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">,</span> <span class=\"token string\">'打印origin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token string\">'打印result'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>origin<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>c<span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"原型对象、构造函数、实例之间的关系\"><a href=\"#原型对象、构造函数、实例之间的关系\" class=\"headerlink\" title=\"原型对象、构造函数、实例之间的关系\"></a>原型对象、构造函数、实例之间的关系</h3><p>每一个函数在创建时都会被赋予一个prototype属性。在默认情况下，所有的原型对象都会增加一个constructor属性，指向prototype属性所在的函数，即构造函数。</p>\n<p>当我们通过new操作符调用构造函数创建一个实例时，实例具有一个__proto__属性，指向构造函数的原型对象，因此__proto__属性可以看做是一个连续实例与构造函数的原型对象的桥梁。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Tom'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">29</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>job <span class=\"token operator\">=</span> <span class=\"token string\">'Software Enginner'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> person1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> person2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>构造函数的Person有个prototype属性，指向的是Person的原型对象。在原型对象中有constructor属性和另外4个原型对象上的属性，其中constructor属性指向构造函数本身。</p>\n<p>通过new操作符创建的两个实例person1和person2，都具有一个__proto__属性，指向的是Person的原型对象。</p>\n<h3 id=\"实例的属性读取顺序\"><a href=\"#实例的属性读取顺序\" class=\"headerlink\" title=\"实例的属性读取顺序\"></a>实例的属性读取顺序</h3><p>当我们通过对象的实例读取某个属性时，它会先在实例本身去找指定的属性，如果找到了，则直接返回该属性的值；如果没找到则会继续沿着原型对象寻找，如果在原型对象中找到了该属性，则返回该属性的值。</p>\n<p>改造上方代码</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'kingx'</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'Tom'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">29</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>job <span class=\"token operator\">=</span> <span class=\"token string\">'Software Enginner'</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> person1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person1<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token comment\">// kingx</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"重写原型对象\"><a href=\"#重写原型对象\" class=\"headerlink\" title=\"重写原型对象\"></a>重写原型对象</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n    constructor<span class=\"token operator\">:</span> Person<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 重要</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'Nicholas'</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token operator\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">,</span>\n    job<span class=\"token operator\">:</span> <span class=\"token string\">'Software Engineer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">sayName</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>将一个对象字面量赋给prototype属性的方式实际是重写了原型对象，等同于切断了构造函数和最初原型之间的关系，因此有一点需要的是，如果仍然想使用constructor属性做后续处理，则应该在对象字面量增加一个constructor属性，指向构造函数本身，否则原型的constructor属性会指向Object类型的构造函数，从而导致constructor属性与构造函数的脱离，而且必须要按照顺序执行，在最后进行新的对象的创建。</p>\n<h3 id=\"原型链\"><a href=\"#原型链\" class=\"headerlink\" title=\"原型链\"></a>原型链</h3><p>在JS中几乎所有的对象都具有__proto__属性，由__proto__属性连接而成的链路构成了JS的原型链，原型链的顶端是Object.prototype，它的__proto__属性为null。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span> \n<span class=\"token comment\">// person实例沿着原型链第一次追溯，__proto__属性指向Person()构造函数的原型对象</span>\nperson<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype\n<span class=\"token comment\">// person实例沿着原型链第二次追溯，Person原型对象的__protos__属性指向Object类型的原型对象。</span>\nperson<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype\n<span class=\"token comment\">// person实例沿着原型链第三次追溯，Object类型的原型对象的__proto__属性为null</span>\nperson<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"原型链的特点\"><a href=\"#原型链的特点\" class=\"headerlink\" title=\"原型链的特点\"></a>原型链的特点</h4><ol>\n<li><p>由于原型链的存在，属性查找的过程不再是只查找自身的原型对象，而是会沿着整个原型链一直向上，直到追溯到Object.prototype。如果Object.prototype上，直到追溯到Object.prototype。如果Object.prootype上也找不到该属性，则返回’undefined’。如果期间在实例本身或者某个原型对象上找到了该属性，则会直接返回结果，因此会存在属性覆盖的问题。</p>\n<p>在生成自定义对象的实例时，也可以调用到某些未在自定义构造函数上的函数，例如toString()函数</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [object Object] 实际调用的是Object.prototype.toString()函数</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></li>\n<li><p>由于属性查找会经历整个原型链，因此查找的链路越长，对性能的影响越大。</p>\n</li>\n</ol>\n<h4 id=\"属性区分\"><a href=\"#属性区分\" class=\"headerlink\" title=\"属性区分\"></a>属性区分</h4><p>对象属性的寻找往往会设计整个原型链，Object()构造函数的原型对象中提供了一个hasOwnProperty()函数，用于判断属性是否为自身拥有的。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// 实例属性name</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型对象上的属性age</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">12</span>\n<span class=\"token keyword\">let</span> person <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token string\">'kingx'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在使用for…in运算符遍历对象的属性时，一般可以配合hasOwnProperty()函数一起使用，检测是否是对象自身的属性，然后做后续处理。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> prop <span class=\"token keyword\">in</span> person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnproperty</span><span class=\"token punctuation\">(</span>prop<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n \t\t<span class=\"token operator\">...</span>       \n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"内置构造函数\"><a href=\"#内置构造函数\" class=\"headerlink\" title=\"内置构造函数\"></a>内置构造函数</h4><p>JavaScript中有一些特定的内置构造函数，如String()构造函数、Number()构造函数，Array()构造函数、Object()构造函数等。</p>\n<p>它们本身的__proto__属性都统一指向Function.prototype。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">String<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nNumber<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nArray<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nDate<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nObject<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span>\nFunction<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">===</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"proto-属性\"><a href=\"#proto-属性\" class=\"headerlink\" title=\"__proto__属性\"></a>__proto__属性</h4><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span>\n<span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> <span class=\"token string\">'b'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p.a'</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p.b'</span><span class=\"token punctuation\">,</span> p<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>实例p的原型链</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 实例p直接原型</span>\np<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype\n<span class=\"token comment\">// Person原型对象的原型</span>\n<span class=\"token class-name\">Person</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>__proto__ <span class=\"token operator\">=</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h4><h5 id=\"原型链继承\"><a href=\"#原型链继承\" class=\"headerlink\" title=\"原型链继承\"></a>原型链继承</h5><p>原型链继承的主要思想是：重写子类的prototype属性，将其指向父类的实例</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 子类Cat</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型继承</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 很关键的一句，将Cat的构造函数指向自身</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'coffee'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"原型链继承的优点\"><a href=\"#原型链继承的优点\" class=\"headerlink\" title=\"原型链继承的优点\"></a>原型链继承的优点</h6><ol>\n<li><p>简单、易于实现</p>\n</li>\n<li><p>继承关系纯粹</p>\n<p>生成的实例既是子类的实例，也是父类的实例。</p>\n</li>\n<li><p>可通过子类直接访问父类原型链属性和函数</p>\n<p>通过原型链继承的子类，可以直接访问到父类原型链上新增的函数和属性。</p>\n</li>\n</ol>\n<h6 id=\"原型链继承的缺点\"><a href=\"#原型链继承的缺点\" class=\"headerlink\" title=\"原型链继承的缺点\"></a>原型链继承的缺点</h6><ol>\n<li>子类的所有实例将共享父类的属性</li>\n<li>在创建子类实例时，无法向父类的构造函数传递参数</li>\n<li>无法实现多继承</li>\n<li>为子类增加原型对象上的属性和函数时，必须放在new Animal()函数之后</li>\n</ol>\n<h5 id=\"构造继承\"><a href=\"#构造继承\" class=\"headerlink\" title=\"构造继承\"></a>构造继承</h5><p>构造继承的主要思想是在子类的构造函数中通过call()函数改变this指向，调用父类的构造函数，从而能将父类的实例的属性和函数绑定到子类的this中</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 父类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 实例函数</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在睡觉！\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 父类原型函数</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃：\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 核心，通过call()函数实现Animal的实例的属性和函数的继承</span>\n  <span class=\"token function\">Animal</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name <span class=\"token operator\">||</span> <span class=\"token string\">\"tom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 生成子类的实例</span>\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 可以正常调用父类实例函数</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 不能调用父类原型函数</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"构造继承的优点\"><a href=\"#构造继承的优点\" class=\"headerlink\" title=\"构造继承的优点\"></a>构造继承的优点</h6><ol>\n<li><p>可解决子类实例共享父类属性的问题</p>\n</li>\n<li><p>创建子类的实例时，可以向父类传递参数</p>\n<p>在call()函数中，可以传递参数，将参数传递给父类。</p>\n</li>\n<li><p>可以实现多继承</p>\n<p>在子类的构造函数中，可以通过多次调用call()函数来继承多个父对象，每调用一次call()函数就会将父类的实例的属性和函数</p>\n</li>\n</ol>\n<h6 id=\"构造继承的缺点\"><a href=\"#构造继承的缺点\" class=\"headerlink\" title=\"构造继承的缺点\"></a>构造继承的缺点</h6><ol>\n<li>实例只是子类的实例，并不是父类的实例</li>\n<li>只能继承父类实例的属性和函数，并不能继承原型对象上的属性和函数</li>\n<li>无法复用父类的实例函数</li>\n</ol>\n<p>复制继承</p>\n<p>复制继承的主要思想是首先生成父类的实例，然后通过for…in遍历父类实例的属性和函数，并将其依次设置为子类实例的属性和函数或者原型对象上的属性和函数。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 父类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentAge</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 实例属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> parentAge<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 实例函数</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在睡觉\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型函数</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃：\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">let</span> animal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 父类的属性和函数，全部添加至子类中</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> key <span class=\"token keyword\">in</span> animal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> animal<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token comment\">// 原型对象上的属性和函数</span>\n      <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> animal<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token comment\">// 子类自身的属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 子类自身原型函数</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tony\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"猫粮\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"复制继承的优点\"><a href=\"#复制继承的优点\" class=\"headerlink\" title=\"复制继承的优点\"></a>复制继承的优点</h6><ol>\n<li>支持多继承</li>\n<li>能同时继承实例的属性和函数与原型对象上的属性和函数</li>\n<li>可以向父类构造函数中传递值</li>\n</ol>\n<h6 id=\"复制继承的缺点\"><a href=\"#复制继承的缺点\" class=\"headerlink\" title=\"复制继承的缺点\"></a>复制继承的缺点</h6><ol>\n<li>父类的所有属性都需要复制，消耗内存</li>\n<li>实例只是子类的实例，并不是父类的实例</li>\n</ol>\n<h5 id=\"组合继承\"><a href=\"#组合继承\" class=\"headerlink\" title=\"组合继承\"></a>组合继承</h5><p>组合继承的主要思想是组合了构造函数和原型函数两种方法，一方面在子类的构造函数中通过call()函数调用父类的构造函数，将父类的实例的属性和函数绑定到子类的this中，另一方面，通过改变子类的prototype属性，继承父类的原型对象上的属性和函数</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 父类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentAge</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 实例属性</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> parentAge<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 实例函数</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在睡觉\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>feature <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"fat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"thin\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"tall\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 原型函数</span>\n<span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">eat</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">food</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\"正在吃：\"</span> <span class=\"token operator\">+</span> food<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 通过构造函数继承实例的属性和函数</span>\n  <span class=\"token function\">Animal</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 通过原型继承原型对象上的属性和函数</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tony\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">.</span><span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"猫粮\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h6 id=\"组合继承的优点\"><a href=\"#组合继承的优点\" class=\"headerlink\" title=\"组合继承的优点\"></a>组合继承的优点</h6><ol>\n<li>既能继承父类实例的属性和函数，又能继承原型对象上的属性和函数</li>\n<li>既是子类的实例，又是父类的实例<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>cat <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre></li>\n<li>不存在引用属性共享的问题</li>\n<li>可以向父类的构造函数中传递参数<h6 id=\"组合继承的缺点\"><a href=\"#组合继承的缺点\" class=\"headerlink\" title=\"组合继承的缺点\"></a>组合继承的缺点</h6></li>\n</ol>\n<p>组合继承的缺点为父类的实例属性会绑定两次</p>\n<h5 id=\"寄生组合继承\"><a href=\"#寄生组合继承\" class=\"headerlink\" title=\"寄生组合继承\"></a>寄生组合继承</h5><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">/* 寄生组合继承 */</span>\n<span class=\"token comment\">// 在进行子类的prototype属性的设置时，可以去掉父类实例的属性和函数</span>\n<span class=\"token comment\">// 子类</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 继承父类的实例属性和函数</span>\n  <span class=\"token function\">Animal</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 立即执行函数</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">// 设置任意函数Super()</span>\n  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">Super</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 关键语句,Super()函数的原型指向父类Animal的原型，去掉父类的实例属性</span>\n  <span class=\"token class-name\">Super</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token class-name\">Animal</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Cat</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> Cat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"instanceof运算符\"><a href=\"#instanceof运算符\" class=\"headerlink\" title=\"instanceof运算符\"></a>instanceof运算符</h2><p>instanceof运算符的语法如下。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">target <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">constructor</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>上面的代码标识的是构造函数constructor()的prototype属性是否出现在target对象的原型链中，即target对象是不是构造函数constructor()的实例。</p>\n<h3 id=\"instanceof运算符的常规用法\"><a href=\"#instanceof运算符的常规用法\" class=\"headerlink\" title=\"instanceof运算符的常规用法\"></a>instanceof运算符的常规用法</h3><pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> stringObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello world'</span><span class=\"token punctuation\">)</span>\nstringObject instanceOf String<span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>判断变量stringObject是否是String类型的实例，因为变量stringObject是通过new操作符，由String的构造函数生成的，所以变量是stringObject是String类型的实例，最终返回’true’。</p>\n<h3 id=\"instanceof运算符用于继承判断\"><a href=\"#instanceof运算符用于继承判断\" class=\"headerlink\" title=\"instanceof运算符用于继承判断\"></a>instanceof运算符用于继承判断</h3><p>instanceof运算符可以在继承关系中，判断一个实例对象是否属于它的父类，</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token comment\">// 定义构造函数</span>\n<span class=\"token keyword\">function</span> <span class=\"token constant\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">function</span> <span class=\"token constant\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 生成C()构造函数的一个实例</span>\n<span class=\"token keyword\">let</span> o <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 判断对象o是否为C()的一个实例，结果为true</span>\no <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">C</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 判断对象o是否为D()构造函数的一个实例，结果返回false</span>\no <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">D</span> <span class=\"token comment\">// false，因为D.prototype属性不存在o的原型链上</span>\n<span class=\"token comment\">// 判断对象o是否为Object()函数的一个实例，结果返回ture</span>\no <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 通过将D()构造函数的prototype属性指向C()构造函数的一个实例可以产生继承关系</span>\n<span class=\"token class-name\">D</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 继承</span>\n<span class=\"token comment\">// 生成D()构造函数的一个实例o2</span>\n<span class=\"token keyword\">let</span> o2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 判断实例o2是否为D()构造函数的一个实例，结果返回true</span>\no2 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">D</span> <span class=\"token comment\">// true</span>\n<span class=\"token comment\">// 判断实例o2是否为C()构造函数的一个实例，结果返回true</span>\no2 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">C</span> <span class=\"token comment\">// true，因为通过继承关系，C.prototype出现在o2的原型链上</span>\n<span class=\"token comment\">// 修改D.prototype属性，将其指向一个空对象</span>\n<span class=\"token class-name\">D</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token comment\">// 再次生成一个D()构造函数的实例</span>\n<span class=\"token keyword\">let</span> o3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 判断实例o3是否为C()构造函数和D()构造函数的实例</span>\no3 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">D</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tue</span>\no3 <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// false</span>\n<span class=\"token comment\">// 因为D.protoype属性指向了一个空对象，那么C()构造函数的prototype属性将不再处于实例o3的原型链上，因此返回false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"事件流\"><a href=\"#事件流\" class=\"headerlink\" title=\"事件流\"></a>事件流</h2><p>事件流描述的是从页面中接收事件的顺序。事件发生后在目标节点和根节点之间按照特定的顺序传播，路径经过的节点都会接收到事件。</p>\n<p>一个完整的事件流实际包含3个阶段：事件捕获阶段&gt;事件目标阶段&gt;事件冒泡阶段。上述两种类型的事件流实际对应其中的事件捕获阶段与事件冒泡阶段。</p>\n<h3 id=\"事件捕获阶段\"><a href=\"#事件捕获阶段\" class=\"headerlink\" title=\"事件捕获阶段\"></a>事件捕获阶段</h3><p>事件捕获阶段的主要表现是不具体的节点先接收事件，然后逐级向下传播，最具体的节点最后接收到事件。例如Window&gt;Document&gt;html&gt;body&gt;table&gt;tbody&gt;tr&gt;td</p>\n<h3 id=\"事件目标阶段\"><a href=\"#事件目标阶段\" class=\"headerlink\" title=\"事件目标阶段\"></a>事件目标阶段</h3><p>时间目标阶段表示事件刚好传播到用户产生行为的元素上，可能是事件捕获的最后一个阶段，也可能是事件冒泡的第一个阶段。</p>\n<h3 id=\"事件冒泡阶段\"><a href=\"#事件冒泡阶段\" class=\"headerlink\" title=\"事件冒泡阶段\"></a>事件冒泡阶段</h3><p>事件冒泡阶段的主要表现是最具体的元素先接收事件，然后逐级向上传播，不具体的节点最后接收事件。例如td&gt;tr&gt;tbody&gt;table&gt;body&gt;html&gt;Document&gt;Window</p>\n<h2 id=\"事件处理程序\"><a href=\"#事件处理程序\" class=\"headerlink\" title=\"事件处理程序\"></a>事件处理程序</h2><p>事件处理程序，就是响应某个事件的函数。例如onclick()函数、onload()函数就是响应单击、加载事件的函数。事件处理程序分为DOM0、DOM2、DOM3这3种级别的事件处理程序。由于在DOM1中并没有定义事件的相关内容，因此没有所谓的DOM1级事件处理程序。</p>\n<h3 id=\"DOM0级事件处理程序\"><a href=\"#DOM0级事件处理程序\" class=\"headerlink\" title=\"DOM0级事件处理程序\"></a>DOM0级事件处理程序</h3><p>DOM0级事件处理程序是将一个函数赋值给一个事件处理属性，有两种表现形式。第一种是先通过JavaScript代码获取DOM元素，再将函数赋值给对应的事件属性。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> btn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"btn\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \nbtn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>第二种是直接在html中设置对应事件属性的值，值有两种表现形式，一种是执行的函数体，另一种是函数名，然后在script标签中定义该函数。</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert(<span class=\"token punctuation\">'</span>面试厅<span class=\"token punctuation\">'</span>);<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>单击<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clickFn()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>单击<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">function</span> <span class=\"token function\">clickFn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'面试厅'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>以上两种DOM0级事件处理程序同时存在时，第一种在JavaScript中定义的事件处理程序会覆盖掉后面在html标签中定义的事件处理程序。</p>\n<ul>\n<li>优点：简单且可以跨浏览器</li>\n<li>缺点：一个事件处理程序只能绑定一个函数</li>\n</ul>\n<h3 id=\"DOM2级事件处理程序\"><a href=\"#DOM2级事件处理程序\" class=\"headerlink\" title=\"DOM2级事件处理程序\"></a>DOM2级事件处理程序</h3><p>在DOM2级事件处理程序中，当事件发生在节点时，目标元素的事件处理函数就会被触发，而且目标元素的每个祖先节点也会按照事件流顺序触发对应的事件处理程序。DOM2级事件处理方式规定了添加事件处理程序和删除事件处理程序的方法。</p>\n<h3 id=\"DOM3级事件处理程序\"><a href=\"#DOM3级事件处理程序\" class=\"headerlink\" title=\"DOM3级事件处理程序\"></a>DOM3级事件处理程序</h3><p>DOM3级事件处理程序是在DOM2级事件的基础上重新定义了事件，也添加了一些新的事件。DOM3级事件处理程序允许自定义事件，自定义事件有createEvent函数创建，返回的对象有一个initCustomEvent()函数，通过传递对应的参数可以自定义事件。</p>\n<p>函数可以接收以下4个参数。<br>· type：字符串、触发的事件类型、自定义，例如“keyDown”“selectedChange”。<br>· bubble（布尔值）：表示事件是否可以冒泡。<br>· cancelable(布尔值）：表示事件是否可以取消。<br>· detail（对象）：任意值，保存在event对象的detail属性中。</p>\n<h2 id=\"浏览器的重排和重绘\"><a href=\"#浏览器的重排和重绘\" class=\"headerlink\" title=\"浏览器的重排和重绘\"></a>浏览器的重排和重绘</h2><p>浏览器渲染HTML的过程</p>\n<ol>\n<li>HTML文件被HTML解析器解析成对应的DOM树，CSS样式文件被CSS解析器解析生成对应的样式规则集。</li>\n<li>DOM树与CSS样式集解析完成后，附加在一起形成一个渲染树。</li>\n<li>节点信息的计算，即根据渲染树计算每个节点的几何信息。</li>\n<li>渲染绘制，即根据计算完成的节点信息绘制整个页面。</li>\n</ol>\n<p>重排和重绘发生在第3步和第4步中。</p>\n<h3 id=\"重排\"><a href=\"#重排\" class=\"headerlink\" title=\"重排\"></a>重排</h3><p>重要知识点：浏览器渲染页面默认采用的是流式布局模型。</p>\n<p>重排的过程就发生在DOM节点信息修改的时候。重排实际是根据渲染树中每个渲染对象的信息，计算出各自渲染对象的几何信息。</p>\n<p>重排是一种明显的改变页面布局的操作。</p>\n<p>常见的引起重排的操作：</p>\n<ul>\n<li>页面首次渲染</li>\n<li>浏览器窗口大小发生改变</li>\n<li>元素尺寸或位置发生改变</li>\n<li>元素内容发生变化</li>\n<li>元素字体发生变化</li>\n<li>添加或删除可见的DOM元素</li>\n<li>获取某些特定的属性</li>\n</ul>\n<h3 id=\"重绘\"><a href=\"#重绘\" class=\"headerlink\" title=\"重绘\"></a>重绘</h3><p>重绘只是改变元素在页面中的展现样式，而不会引起元素在文档流中位置的改变。</p>\n<p>引发重绘的操作：</p>\n<ul>\n<li>color：颜色</li>\n<li>border-style：边框样式</li>\n<li>visibility：元素是否可见</li>\n<li>background：元素背景样式，包括背景色、背景图、背景图尺寸、背景图位置。</li>\n<li>text-decoration：文本装饰</li>\n<li>outline：元素的外轮廓的样式，在边框外的位置。</li>\n</ul>\n<p>重排一定会引起重绘的操作，而重绘却不一定会引起重排的操作。</p>\n<h2 id=\"性能优化\"><a href=\"#性能优化\" class=\"headerlink\" title=\"性能优化\"></a>性能优化</h2><ol>\n<li><p>将多次改变样式的属性操作合并为一次</p>\n</li>\n<li><p>将需要多次重排的元素设置为绝对定位</p>\n<p>需要进行重排的元素都是处于正常的文档流中，常见的操作就是设置其position为absolute或者fixed。</p>\n</li>\n<li><p>在内存中多次操作节点，完成后在添加至文档树中</p>\n</li>\n<li><p>将要进行复杂处理的元素处理为display属性为none，处理完成后再进行显示</p>\n</li>\n<li><p>将频繁获取会引起重排的属性缓存至变量。</p>\n</li>\n<li><p>尽量减少使用table布局</p>\n</li>\n<li><p>使用事件委托绑定事件处理程序</p>\n</li>\n<li><p>利用DocumentFragment操作DOM节点</p>\n</li>\n</ol>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cknzd1p8b0001f4rqevohfotc","tag_id":"cknzd1p8g0004f4rqgshvfi3u","_id":"cknzd1p8m000bf4rqdha838w4"},{"post_id":"cknzd1p8e0003f4rq7sm8au4s","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cknzd1p8n000df4rqgg2g326w"},{"post_id":"cknzd1p8i0006f4rqdsx34cbu","tag_id":"cknzd1p8n000cf4rqem441lmu","_id":"cknzd1p8n000ff4rq4atygcdr"},{"post_id":"cknzd1p8j0008f4rq59i6fy4q","tag_id":"cknzd1p8n000ef4rq5rj8fxql","_id":"cknzd1p8o000gf4rq7nd49nws"},{"post_id":"cknzd1p8s000hf4rq9p7z03jj","tag_id":"cknzd1p8n000ef4rq5rj8fxql","_id":"cknzd1p8t000jf4rqdp7xhyps"},{"post_id":"cknzd1p8v000mf4rq85j41lyd","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cknzd1p8x000of4rq2ugrax7y"},{"post_id":"cknzd1p8t000if4rqew8p1dcq","tag_id":"cknzd1p8u000lf4rq5ir9foym","_id":"cknzd1p8x000qf4rqfmes5iri"},{"post_id":"cknzd1p8u000kf4rqg6gh1in4","tag_id":"cknzd1p8x000pf4rq54nhgbo4","_id":"cknzd1p8y000sf4rq2dzdf3pd"},{"post_id":"cknzd1p8w000nf4rq5krka0jw","tag_id":"cknzd1p8x000rf4rq0wqdflec","_id":"cknzd1p8y000tf4rqfukg3fsj"},{"post_id":"cknzd1p90000uf4rq18vw40pn","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cknzd1p92000vf4rq2cxjboe0"},{"post_id":"cksimhauh0000lsrqeihz0twq","tag_id":"cksimhauk0002lsrqhenj4vik","_id":"cksimhauw0004lsrq9fqta7wb"},{"post_id":"cksimhauj0001lsrq1a8303u3","tag_id":"cksimhauv0003lsrqc94sfu0b","_id":"cksimhauw0005lsrqh0q06kvm"},{"post_id":"cksimhav30006lsrqh5dibrxz","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cksimhav50007lsrqc5f598q0"},{"post_id":"cksimhav50008lsrq3bpnbtnc","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cksimhav7000alsrq8n5y6u4z"},{"post_id":"ckrg01wa800000orqa1awfs7e","tag_id":"cksimhav70009lsrqgi5w13bt","_id":"cksimhav7000blsrqfxglc221"},{"post_id":"cl306xs0p00011krq3t6yba44","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cl306xs0t00031krqdv0j6oaq"},{"post_id":"cl306xs0r00021krq2e7k1iwy","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cl306xs0v00051krq16332sux"},{"post_id":"cl306xs0z00081krq8bjthkfq","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cl306xs13000a1krq8kmg4pqn"},{"post_id":"cl306xs0t00041krq6kezgy7o","tag_id":"cl306xs0w00071krqag0sgdte","_id":"cl306xs14000d1krq6geg9s7c"},{"post_id":"cl306xs13000b1krq8ab1duf3","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cl306xs17000e1krqet3pbj5u"},{"post_id":"cl306xs0v00061krqh2681i0s","tag_id":"cl306xs14000c1krqgk2z5o8s","_id":"cl306xs1b000g1krqhjjm01vu"},{"post_id":"cl306xs1100091krq6ppw7zx4","tag_id":"cl306xs1a000f1krq9xep2nru","_id":"cl306xs1b000h1krq9nb5crww"},{"post_id":"cl306xs1i000i1krqbnutaaj7","tag_id":"cl306xs1l000j1krqaih70bcw","_id":"cl306xs1q000k1krqf73e7sdv"},{"post_id":"cl306xs3a000l1krqdkc8bdq7","tag_id":"cknzd1p8m000af4rqc4ea429h","_id":"cl306xs3b000m1krq8vdu3ox3"}],"Tag":[{"name":"Vue","_id":"cknzd1p8g0004f4rqgshvfi3u"},{"name":"JavaScript","_id":"cknzd1p8m000af4rqc4ea429h"},{"name":"css","_id":"cknzd1p8n000cf4rqem441lmu"},{"name":"front","_id":"cknzd1p8n000ef4rq5rj8fxql"},{"name":"原型链","_id":"cknzd1p8u000lf4rq5ir9foym"},{"name":"浏览器","_id":"cknzd1p8x000pf4rq54nhgbo4"},{"name":"数据结构和算法","_id":"cknzd1p8x000rf4rq0wqdflec"},{"name":"antd","_id":"cksimhauk0002lsrqhenj4vik"},{"name":"正则表达式","_id":"cksimhauv0003lsrqc94sfu0b"},{"name":"React","_id":"cksimhav70009lsrqgi5w13bt"},{"name":"vue","_id":"cl306xs0w00071krqag0sgdte"},{"name":"nginx","_id":"cl306xs14000c1krqgk2z5o8s"},{"name":"test","_id":"cl306xs1a000f1krq9xep2nru"},{"name":"javascript","_id":"cl306xs1l000j1krqaih70bcw"}]}}